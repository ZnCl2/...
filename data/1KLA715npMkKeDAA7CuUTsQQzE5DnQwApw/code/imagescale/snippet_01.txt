void scale(int x, int y, int dx, int dy, IntBuffer source, IntBuffer dest)
{
    int sw = source.getWidth();
    int sh = source.getHeight();
    int deltax = (dx-x);
    int deltay = (dy-y);
    
    float ratiox = (float)sw / (float)deltax;
    float ratioy = (float)sh / (float)deltay;
    float currX, currY, startX=0f, startY=0f;
    
    currY = startY;
    for (int j=0, k=deltay; j<k; j++)
    {
        currX = startX;
        for (int i=0, l=deltax; i<l; i++)
        {
            int c = getColor(currX,currY, source);
            dest.plot(x+i, y+j, c);
            currX += ratiox;
        }
        currY += ratioy;
    }
}

int getColor(float x, float y, IntBuffer source)
{
    return 0; // return the appropriate color
}