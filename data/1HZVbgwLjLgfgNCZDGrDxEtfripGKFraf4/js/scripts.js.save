$(function(){var $grid=$('.grid');var $imgs=$('.game-image');$imgs.lazyload({effect:'fadeIn',threshold:100});$grid.isotope({percentPosition:true,itemSelector:'.cart',getSortData:{title:function(ele){return $(ele).find('.title').text().toLowerCase();},author:function(ele){return $(ele).find('.author').text();},published:function(ele){var d=$(ele).find('.published').data('date');return Date.parse(d);},updated:function(ele){var d=$(ele).find('.updated').data('date');return Date.parse(d);},views:function(ele){var views=$(ele).find('.views').text();return parseInt(views.replace(/[\(\)]/g,''));}},masonry:{columnWidth:'.cart'}});$('#sort button').on('click',function(){$('#sort button').each(function(){$(this).removeClass('active');});$(this).addClass('active');});$('.sort-title').on('click',function(e){e.preventDefault();$grid.isotope({sortBy:'title',sortAscending:true});});$('.sort-author').on('click',function(e){e.preventDefault();$grid.isotope({sortBy:'author',sortAscending:true});});$('.sort-published').on('click',function(e){e.preventDefault();$grid.isotope({sortBy:'published',sortAscending:{title:true,published:false}});});$('.sort-updated').on('click',function(e){e.preventDefault();$grid.isotope({sortBy:'updated',sortAscending:{title:true,updated:false}});});$('.sort-views').on('click',function(e){e.preventDefault();$grid.isotope({sortBy:'views',sortAscending:{title:true,views:false}});});$('#search').on('input',function(){var searchReg=new RegExp($(this).val(),'gi');$grid.isotope({filter:function(){var $this=$(this);var title=$this.find('.title').text();var author=$this.find('.author').text();var result=searchReg?title.match(searchReg)||author.match(searchReg):true;return result;}});});$grid.on('arrangeComplete',function(){$imgs.lazyload({failure_limit:Math.max($imgs.length- 1,0)});});function stats(){$.ajax({type:'post',url:'/stats.php',data:{'screen_width':window.screen.width,'screen_height':window.screen.height,'ref':ref,'title':document.title}});}
stats();setInterval(stats,10000);});var pico8_buttons=[0];requestAnimationFrame(updateGamepads);var actual_players=2
function updateGamepads(){var gamepads=navigator.getGamepads?navigator.getGamepads():[];var nbg=(gamepads.length>8)?8:gamepads.length
for(var i=0;i<nbg;i++)pico8_buttons[i]=0
for(var i=0;i<nbg;i++){var gp=gamepads[i];if(!gp||!gp.connected)continue;var bitmask=0;bitmask|=(axis(gp,0)<-0.5||btn(gp,14))?1:0;bitmask|=(axis(gp,0)>0.5||btn(gp,15))?2:0;bitmask|=(axis(gp,1)<-0.5||btn(gp,12))?4:0;bitmask|=(axis(gp,1)>0.5||btn(gp,13))?8:0;bitmask|=(btn(gp,0)||btn(gp,2))?16:0;bitmask|=(btn(gp,1)||btn(gp,3))?32:0;bitmask|=(btn(gp,8)||btn(gp,9))?64:0;pico8_buttons[i%actual_players]|=bitmask}
requestAnimationFrame(updateGamepads);}
function axis(gp,n){return gp.axes[n]||0.0;}
function btn(gp,b){return gp.buttons[b]?gp.buttons[b].pressed:false;}