{"cert_user_id": "SkRiMiX@github", "next_topic_id": 2, "topic": [{"topic_id": 1604067236, "title": "Wrong fonts content-type when UiPassword is enabled", "body": "### Step 1: Please describe your environment\r\n\r\n  * ZeroNet version: **0.7.0 r4059**\r\n  * Operating system: **Arch Linux**\r\n  * Web browser: **Firefox 66**\r\n  * Tor status: **enabled**\r\n  * Opened port: **yes**\r\n  * Special configuration: \r\n\r\n### Step 2: Describe the problem:\r\nWhen UiPassword is enabled, some files, fonts are sent with `Content-Type: text/html; charset=utf-8`, getContentType doesn't get called on them. Also `Access-Control-Allow-Origin` header is missing.\r\n#### Steps to reproduce:\r\n\r\n  1. Open site `http://127.0.0.1:43110/14c5LUN73J7KKMznp9LvZWkxpZFWgE1sDz/` with UiPassword disabled.\r\n  2. Content-type of `http://127.0.0.1:43110/14c5LUN73J7KKMznp9LvZWkxpZFWgE1sDz/fonts/material-icons/MaterialIcons-Regular.woff2` is `application/octet-stream`.\r\n  3. Enable UiPassword and reload site.\r\n  4. Content-type of `http://127.0.0.1:43110/14c5LUN73J7KKMznp9LvZWkxpZFWgE1sDz/fonts/material-icons/MaterialIcons-Regular.woff2` is `text/html; charset=utf-8` and browser blocks request because `Access-Control-Allow-Origin` header is missing.\r\n\r\n#### Observed Results:\r\n\r\nFonts fail to load because of wrong content-type and missing `Access-Control-Allow-Origin` header.\r\nI added `print('getContentType called: file_name={}, content_type={}'.format(file_name, content_type))` to getContentType and this is what I got:\r\nUiPassword disabled:\r\n\r\n> getContentType called: file_name=index.html, content_type=text/html\r\n> getContentType called: file_name=all.css, content_type=text/css\r\n> getContentType called: file_name=all.css, content_type=text/css\r\n> getContentType called: file_name=all.js, content_type=application/javascript\r\n> getContentType called: file_name=logo-white.png, content_type=image/png\r\n> getContentType called: file_name=index.html, content_type=text/html\r\n> getContentType called: file_name=fonts/material-icons/material-icons.css, content_type=text/css\r\n> getContentType called: file_name=material-icons.css, content_type=text/css\r\n> getContentType called: file_name=css/main.css, content_type=text/css\r\n> getContentType called: file_name=main.css, content_type=text/css\r\n> getContentType called: file_name=css/asciinema-player.css, content_type=text/css\r\n> getContentType called: file_name=asciinema-player.css, content_type=text/css\r\n> getContentType called: file_name=js/asciinema-player.js, content_type=application/javascript\r\n> getContentType called: file_name=asciinema-player.js, content_type=application/javascript\r\n> getContentType called: file_name=js/all.js, content_type=application/javascript\r\n> getContentType called: file_name=all.js, content_type=application/javascript\r\n> **getContentType called: file_name=fonts/material-icons/materialicons-regular.woff2, content_type=application/octet-stream**\r\n> **getContentType called: file_name=materialicons-regular.woff2, content_type=application/octet-stream**\r\n\r\nUiPassword enabled:\r\n\r\n> getContentType called: file_name=index.html, content_type=text/html\r\n> getContentType called: file_name=all.css, content_type=text/css\r\n> getContentType called: file_name=all.css, content_type=text/css\r\n> getContentType called: file_name=all.js, content_type=application/javascript\r\n> getContentType called: file_name=logo-white.png, content_type=image/png\r\n> getContentType called: file_name=index.html, content_type=text/html\r\n> getContentType called: file_name=css/main.css, content_type=text/css\r\n> getContentType called: file_name=main.css, content_type=text/css\r\n> getContentType called: file_name=fonts/material-icons/material-icons.css, content_type=text/css\r\n> getContentType called: file_name=material-icons.css, content_type=text/css\r\n> getContentType called: file_name=css/asciinema-player.css, content_type=text/css\r\n> getContentType called: file_name=asciinema-player.css, content_type=text/css\r\n> getContentType called: file_name=js/asciinema-player.js, content_type=application/javascript\r\n> getContentType called: file_name=asciinema-player.js, content_type=application/javascript\r\n> getContentType called: file_name=js/all.js, content_type=application/javascript\r\n> getContentType called: file_name=all.js, content_type=application/javascript\r\n\r\n#### Expected Results:\r\n\r\nZeronet sends fonts with right headers and browser loads them.\r\n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1555255465, "modified": 1555313293, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1986", "source_type": "github"}]}