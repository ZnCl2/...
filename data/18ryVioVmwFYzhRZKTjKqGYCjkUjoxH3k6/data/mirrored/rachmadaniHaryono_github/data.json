{"cert_user_id": "rachmadaniHaryono@github", "next_comment_id": 2, "comment": {"1604065216_mirrored_WeirdCarrotMonster_github": [{"comment_id": 1, "body": "hi, i'm interested on this issue and try to create a solution for this\r\n\r\nat first i thought the package is need to be renamed but based on this, it doesn't have to https://github.com/pypa/python-packaging-user-guide/issues/320\r\n\r\nso my first step is to include setup.py and manifest file (https://github.com/rachmadaniHaryono/ZeroNet/commit/5f9e4d3f08a150c6e517001c4f95c7970342f942)\r\n\r\nto run the program, the `setup.py` require an entry point. my first try is simply moving `zeronet.py` to src and set `zeronet:main` as entry point, but that didn't work. (https://github.com/rachmadaniHaryono/ZeroNet/commit/e557edb4941892dc2a7a746de86bd9be2fb0ad1f)\r\n\r\nmy second try is create a folder `src/zeronet`, rename `src/zeronet.py` to `src/zeronet/__main__.py` and use it as entry point. (https://github.com/rachmadaniHaryono/ZeroNet/commit/2eac1a2ee99876ad895f5bcb79138d3acc182077)\r\n\r\nthat last step at least made zeronet pip installable but not working. i made two test on 2 different folder with 2 different virtualenv:\r\n- folder with zeronet source (result from `git clone`)\r\n- empty folder\r\n\r\nfolder with zeronet source will run and reachable from browser but i suspect there is unseen error because of this line \r\n```\r\n[13:06:58] Site:<string1> data/users/<string2>/blacklist.json fileGet error: [Errno 2] No such file or directory: \r\n```\r\n\r\non the other hand empty folder will raise following error\r\n```python\r\n[13:37:40] - Unhandled exception: [Errno 2] No such file or directory: 'plugins'\r\nTraceback (most recent call last):\r\n  File \"/home/q/git/ZeroNet/src/zeronet/__main__.py\", line 18, in main\r\n    import main\r\n  File \"/home/q/git/ZeroNet/src/main.py\", line 112, in <module>\r\n    from Plugin import PluginManager\r\n  File \"/home/q/envs/temp/local/lib/python2.7/site-packages/gevent/builtins.py\", line 96, in __import__\r\n    result = _import(*args, **kwargs)\r\n  File \"/home/q/git/ZeroNet/src/Plugin/PluginManager.py\", line 115, in <module>\r\n    plugin_manager = PluginManager()  # Singletone\r\n  File \"/home/q/git/ZeroNet/src/Plugin/PluginManager.py\", line 23, in __init__\r\n    self.migratePlugins()\r\n  File \"/home/q/git/ZeroNet/src/Plugin/PluginManager.py\", line 30, in migratePlugins\r\n    for dir_name in os.listdir(self.plugin_path):\r\nOSError: [Errno 2] No such file or directory: 'plugins'\r\n[13:37:40] - Unhandled exception\r\nNone\r\nTraceback (most recent call last):\r\n  File \"/home/q/envs/temp/bin/zeronet\", line 11, in <module>\r\n    load_entry_point('zeronet', 'console_scripts', 'zeronet')()\r\n  File \"/home/q/git/ZeroNet/src/zeronet/__main__.py\", line 53, in main\r\n    traceback.print_exc(file=open(config.log_dir + \"/error.log\", \"a\"))\r\nAttributeError: 'Config' object has no attribute 'log_dir'\r\n``` \r\n2 things happen here:\r\n- empty folder don't have plugins folder, even when manifest include them\r\n- Config object is different when run on emtpy folder\r\n\r\ne: my fork https://github.com/rachmadaniHaryono/ZeroNet/commits/feature/packaging\r\n\r\ne2:in the end all files on the root of `src` folder is moved to `zeronet` folder. this at least fix import error.\r\n\r\nbut there is another problem. debug config is set up as script and work relative to the current working directory. also some path is set as fixed unix file instead of using `os.path`", "added": 1532313595, "modified": 1533031458, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/382#issuecomment-406944990", "source_type": "github"}]}}