{"cert_user_id": "dnelband@github", "next_topic_id": 14, "topic": [{"topic_id": 1604065370, "title": "index.html download failed", "body": "i have this site - http://127.0.0.1:43110/159kokXBtcD1zcyB5bo6257kDToq9vcPei/\ni can see it on my localhost but when peers try to download it they recieve an \"index.html download failed\" error. what am i doing wrong?\n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1467704328, "modified": 1547476465, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/505", "source_type": "github"}, {"topic_id": 1604065382, "title": "error signing data/users/content.json: no rules", "body": "im trying to sign the data/users/content.json with this command: \n`zeronet.py siteSign [address] --inner_path data/users/content.json`\nbut im recieving the following error:\n\n```\nSite:19NtJa..BhUm File data/users/content.json not exist yet, loading default values...\nSite:19NtJa..BhUm Opening site data directory: data/19NtJa1GVpNpyXmx27XshS4nWxd9f5BhUm/data/users/...\nSite:19NtJa..BhUm - [SKIPPED] .DS_Store\nSite:19NtJa..BhUm - [SKIPPED] content.json\nSite:19NtJa..BhUm - [SKIPPED] 1C1gnFcVv9J9kUjF4odDMRYcEWVPJbbqFp/.DS_Store\nSite:19NtJa..BhUm - 1C1gnFcVv9J9kUjF4odDMRYcEWVPJbbqFp/comment.json (SHA512: cbfd867e907d85320ad81b40c0bdb55aa8cb7bb2764fe43f5b8970fc4cb55845)\nSite:19NtJa..BhUm - [SKIPPED] 1C1gnFcVv9J9kUjF4odDMRYcEWVPJbbqFp/content.json\nSite:19NtJa..BhUm - 1C1gnFcVv9J9kUjF4odDMRYcEWVPJbbqFp/data.json (SHA512: 58265e6c679f9ab9df3f93be403819201072e6c0ee892c6601fb4ab0f9481853)\nSite:19NtJa..BhUm - 1C1gnFcVv9J9kUjF4odDMRYcEWVPJbbqFp/post_vote.json (SHA512: 1b10cf2997c3be89d2c0a35e6a48e004b09d20241f335daa9f0d54f5d29fb182)\nSite:19NtJa..BhUm Adding timestamp and sha512sums to new content.json...\nSite:19NtJa..BhUm Verifying private key...\nSite:19NtJa..BhUm Correct 19NtJa1GVpNpyXmx27XshS4nWxd9f5BhUm in valid signers: ['19NtJa1GVpNpyXmx27XshS4nWxd9f5BhUm']\nSite:19NtJa..BhUm Signing data/users/content.json...\nSite:19NtJa..BhUm data/users/content.json: No rules\nSite:19NtJa..BhUm Sign failed: Invalid content\n```\n\nthis is my data/users/content.json file:\n\n```\n{\n  \"files\": {},\n  \"ignore\": \".*\",\n  \"modified\": 0.0,\n  \"signs\": {},\n  \"user_contents\": {\n    \"cert_signers\": {\n      \"zeroid.bit\": [ \"1iD5ZQJMNXu43w1qLB8sfdHVKppVMduGz\" ]\n    },\n    \"permission_rules\": {\n      \".*\": {\n        \"files_allowed\": \"data.json\",\n        \"max_size\": 10000\n      },\n      \"bitmsg/.*@zeroid.bit\": { \"max_size\": 15000 }\n    },\n    \"permissions\": {\n      \"bad@zeroid.bit\": false,\n      \"nofish@zeroid.bit\": { \"max_size\": 100000 }\n    }\n  }\n}\n```\n\nwhy is it not valid? here is the address of the site\nhttp://127.0.0.1:43110/19NtJa1GVpNpyXmx27XshS4nWxd9f5BhUm\n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1469054100, "modified": 1561985667, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/513", "source_type": "github"}, {"topic_id": 1604065411, "title": "content publish failed", "body": "upon this command:\n\nPage.cmd(\"fileWrite\", [inner_path, btoa(json_raw)], function(res) {\n    console.log(res);\n    Page.cmd(\"sitePublish\",{\"inner_path\":inner_path,\"sign\":false}, function(res) {\n        console.log(res);\n        $scope.$apply(function() {\n            Page.cmd(\"wrapperNotification\", [\"done\", \"Comment posted!\", 10000]);\n            $scope.comments.push(comment);\n        });\n    });\n});\n\nim getting this console error - content publish failed\n\nterminal log:\n`[13:11:12] - Unhandled exception\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/gevent/greenlet.py\", line 327, in run\n    result = self._run(*self.args, **self.kwargs)\n  File \"src/Site/Site.py\", line 425, in publish\n    inner_path, limit, len(self.peers), num_connected_peers, diffs.keys(), float(len(str(diffs))) / 1024\nAttributeError: 'NoneType' object has no attribute 'keys'\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/gevent/greenlet.py\", line 327, in run\n    result = self._run(*self.args, **self.kwargs)\n  File \"src/Site/Site.py\", line 425, in publish\n    inner_path, limit, len(self.peers), num_connected_peers, diffs.keys(), float(len(str(diffs))) / 1024\nAttributeError: 'NoneType' object has no attribute 'keys'\n`\n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1471256158, "modified": 1472364164, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/535", "source_type": "github"}, {"topic_id": 1604065468, "title": "error by fileWrite on MergerSites (Internal error: TypeError: string indices must be integers, not tuple)", "body": "after changing my sites to use mergerSites, im not longer able to save an image via Page.cmd('fileWrite'). \nhere is the function:\n\n```\n            var path = 'uploads/images/' + $scope.channel.img;\n            var canvas =  document.getElementById('canvas');\n            var previewImgUrl = $scope.imgSrc.split(',')[1];\n            Page.cmd(\"fileWrite\",[path, previewImgUrl], function(res) {\n                if (res === 'ok'){\n                    $scope.updateChannel();\n                }\n            });\n```\n\nand the error im getting:\nTypeError: string indices must be integers, not tuple in UiWebsocket.py line 99 > UiWebsocket.py line 178 > MergerSitePlugin.py line 127 > MergerSitePlugin.py line 121 > UiWebsocket.py line 402\n\nthis worked perfectly before the mergerSites update now im getting this error constantly. help!\n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1473856428, "modified": 1473859992, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/579", "source_type": "github"}, {"topic_id": 1604065479, "title": "Internal error: KeyError: u'data/users/content.json'", "body": "http://127.0.0.1:43110/17GijTrkMfxhTKWFnM2atrGVaZcp5zNBEW\n\ndragging of the zero icon to reveal the sidebar generates the following error:\n\nInternal error: KeyError: u'data/users/content.json'\nUiWebsocket.py line 99 > UiWebsocket.py line 176 > SidebarPlugin.py line 448 > SidebarPlugin.py line 130 > ContentManager.py line 273 > ContentManager.py line 271 > ContentDbDict.py line 54\n\nconsole:\nSite:17GijT..NBEW WebSocket handleRequest error: KeyError: u'data/users/content.json' in UiWebsocket.py line 99 > UiWebsocket.py line 176 > SidebarPlugin.py line 448 > SidebarPlugin.py line 130 > ContentManager.py line 265 > ContentManager.py line 263 > ContentDbDict.py line 54\n\ndebug-last.log:\nERROR    - UiWSGIHandler error: error: [Errno 32] Broken pipe in UiServer.py line 39 > pywsgi.py line 495 > pywsgi.py line 486 > pywsgi.py line 376 > pywsgi.py line 369 > pywsgi.py line 355 > socket.py line 458 > socket.py line 443\n\n![ded6071e-7df6-11e6-8f3e-1516659d6f36](https://cloud.githubusercontent.com/assets/5212537/18619276/718d58ea-7df8-11e6-958c-19aa7290896b.png)\n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1474223676, "modified": 1491540582, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/586", "source_type": "github"}, {"topic_id": 1604065483, "title": "user/data directories are not synchronised with peers", "body": "on this site: http://127.0.0.1:43110/18SZadPsFtTEefBK5CTvRSFiBXs9TvAGEG\nim seeing different user generated content (comments,votes, channels) on different peers.\nfor example on https://bit.no.com:43110/18SZadPsFtTEefBK5CTvRSFiBXs9TvAGEG/ there are more comments / votes / channels (visible on register.html) then on local.\non the console im getting these errors:\n\n```\n[12:25:49] Site:1KQTZ4..FsuW data/channel.json file size does not match 494 <> 446, Hash: False\n[12:25:49] Site:1KQTZ4..FsuW data/channel.json file size does not match 494 <> 446, Hash: False\n[12:25:49] - Unhandled exception\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/gevent/greenlet.py\", line 327, in run\n    result = self._run(*self.args, **self.kwargs)\n  File \"src/Site/Site.py\", line 340, in update\n    self.storage.updateBadFiles(quick_check=True)  # Quick check and mark bad files based on file size\n  File \"src/Site/SiteStorage.py\", line 372, in updateBadFiles\n    add_changed=not self.site.settings.get(\"own\")  # Don't overwrite changed files if site owned\n  File \"src/Site/SiteStorage.py\", line 302, in verifyFiles\n    for content_inner_path, content in self.site.content_manager.contents.items():\n  File \"src/Content/ContentDbDict.py\", line 84, in items\n    val = self[key]\n  File \"src/Content/ContentDbDict.py\", line 56, in __getitem__\n    return self.loadItem(key)\n  File \"src/Content/ContentDbDict.py\", line 29, in loadItem\n    raise KeyError(key)\nKeyError: u'data/users/1PW1iDGhbE8DGnWRTY369uNjVoN5FF4aay/content.json'\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/gevent/greenlet.py\", line 327, in run\n    result = self._run(*self.args, **self.kwargs)\n  File \"src/Site/Site.py\", line 340, in update\n    self.storage.updateBadFiles(quick_check=True)  # Quick check and mark bad files based on file size\n  File \"src/Site/SiteStorage.py\", line 372, in updateBadFiles\n    add_changed=not self.site.settings.get(\"own\")  # Don't overwrite changed files if site owned\n  File \"src/Site/SiteStorage.py\", line 302, in verifyFiles\n    for content_inner_path, content in self.site.content_manager.contents.items():\n  File \"src/Content/ContentDbDict.py\", line 84, in items\n    val = self[key]\n  File \"src/Content/ContentDbDict.py\", line 56, in __getitem__\n    return self.loadItem(key)\n  File \"src/Content/ContentDbDict.py\", line 29, in loadItem\n    raise KeyError(key)\nKeyError: u'data/users/1PW1iDGhbE8DGnWRTY369uNjVoN5FF4aay/content.json'\n```\n\nhow can i synchronise user data through all peers e,g that all peers see the same comments / votes / channels? why is this happening? do i have to delete everything and start again with 0 content?\n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1474449977, "modified": 1502800419, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/589", "source_type": "github"}, {"topic_id": 1604065486, "title": "Failed to execute 'send' on 'WebSocket': Still in CONNECTING state", "body": "http://127.0.0.1:43110/157xGMqaufjjnts9qRd4K953g8dBm6YzXr/\nsometimes when this site loads im getting this error from all.js:\nuncaught InvalidStateError: Failed to execute 'send' on 'WebSocket': Still in CONNECTING state\n\nwhy does this happen & how could this be prevented?\n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1474869862, "modified": 1474871015, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/591", "source_type": "github"}, {"topic_id": 1604065587, "title": "Internal error: error: nothing to repeat", "body": "im getting this error on every attempted user-originated site publish (comments, votes)\r\n\r\nInternal error: error: nothing to repeat\r\nUiWebsocket.py line 99 > UiWebsocket.py line 184 > MergerSitePlugin.py line 180 > MergerSitePlugin.py line 174 > UiWebsocket.py line 333 > MergerSitePlugin.py line 177 > MergerSitePlugin.py line 174 > UiWebsocket.py line 314 > ContentManager.py line 594 > ContentManager.py line 714 > re.py line 137 > re.py line 244\r\n\r\nexample function:\r\n\r\n// get user's view.json\r\nvar inner_path = \"data/users/\"+Page.site_info.auth_address+\"/view.json\";\t\t\t\r\nPage.cmd(\"fileGet\", { \"inner_path\": inner_path, \"required\": false },function(data) {\r\n        (------------)\t\t\t\t\r\n\t// write to file\r\n\tvar json_raw = unescape(encodeURIComponent(JSON.stringify(data, void 0, '\\t')));\t\t\t\t\t\r\n\tPage.cmd(\"fileWrite\", [inner_path, btoa(json_raw)], function(res) {\r\n\t\tconsole.log(res);\r\n\t\t// sign & publish site\r\n\t\tPage.cmd(\"sitePublish\",[\"stored\",inner_path], function(res) {\r\n                    (------)\r\n\t\t});\r\n\t});\r\n});\r\n\r\nthis is the site:\r\nhttp://127.0.0.1:43110/1HPbR1zp6hsvrqgTSVdsEC5VWw7MEMGPTR", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1480026267, "modified": 1480028429, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/672", "source_type": "github"}, {"topic_id": 1604065851, "title": "get list of user's certificates", "body": "how can i get a list of all user certificates? i want to create a certificate for users for this site (IFS - http://127.0.0.1:43110/12MVkvYGcRW6u2NYbpfwVad1oQeyG4s9Er/) but in order to check if a user has already created an ifs.anonymous certificate i need to get a list of the user's certificates.\r\nis it possible in zeronet? if not is there a hack or a way to go around it?", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1491418186, "modified": 1583755128, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/883", "source_type": "github"}, {"topic_id": 1604066037, "title": "UnboundLocalError: local variable 'row' referenced before assignment", "body": "getting this error while trying to rebuild DB\r\n\r\nthis site (never mind the frontend) http://127.0.0.1:43110/1GnTA9B5JDSsAEk63LyDCQkbmoiFDSVxad/\r\n\r\nthis is the error on console:\r\nSite:1GnTA9..Vxad Error importing data/users/1C1gnFcVv9J9kUjF4odDMRYcEWVPJbbqFp/data.json: UnboundLocalError: local variable 'row' referenced before assignment in SiteStorage.py line 130 > MutePlugin.py line 126 > SiteStorage.py line 75 > Db.py line 268 > DbCursor.py line 147\r\n\r\nthis is the data.json mentioned in the error:\r\n{\r\n\t\"users\": [\r\n\t\t{\r\n\t\t\t\"user_id\": \"1C1gnFcVv9J9kUjF4odDMRYcEWVPJbbqFp\",\r\n\t\t\t\"user_name\": \"davidnelband@zeroid.bit\",\r\n\t\t\t\"user_date_added\": 1500382501284\r\n\t\t}\r\n\t]\r\n}\r\n\r\nwhy does this happen? how to fix this?", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1500372582, "modified": 1500377005, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1029", "source_type": "github"}, {"topic_id": 1604066040, "title": "Unhandled exception: 'list' object has no attribute 'keys'", "body": "on this site:\r\nhttp://127.0.0.1:43110/1GnTA9B5JDSsAEk63LyDCQkbmoiFDSVxad\r\nim getting this error on reload db console command : \r\n\r\nSite:1GnTA9..Vxad Importing data...\r\nUnhandled exception: 'list' object has no attribute 'keys'\r\nTraceback (most recent call last):\r\n  File \"zeronet.py\", line 19, in main\r\n    main.start()\r\n  File \"/vagrant/src/main.py\", line 492, in start\r\n    actions.call(config.action, action_kwargs)\r\n  File \"/vagrant/src/main.py\", line 155, in call\r\n    func(**kwargs)\r\n  File \"/vagrant/src/main.py\", line 280, in dbRebuild\r\n    site.storage.rebuildDb()\r\n  File \"/vagrant/src/Site/SiteStorage.py\", line 124, in rebuildDb\r\n    db_files = list(self.getDbFiles())\r\n  File \"plugins/MergerSite/MergerSitePlugin.py\", line 214, in getDbFiles\r\n    for item in super(SiteStoragePlugin, self).getDbFiles():\r\n  File \"/vagrant/src/Site/SiteStorage.py\", line 87, in getDbFiles\r\n    for file_relative_path in content.get(\"files\", {}).keys() + content.get(\"files_optional\", {}).keys():\r\nAttributeError: 'list' object has no attribute 'keys'", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1500393698, "modified": 1500476078, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1031", "source_type": "github"}, {"topic_id": 1604066045, "title": "Get list of all user sites", "body": "I know its possible with merger sites, but is it possible to get a list of all the sites that the user is currently seeding?\r\n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1500472557, "modified": 1500476031, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1034", "source_type": "github"}, {"topic_id": 1604066047, "title": "Unhandled exception: 'list' object has no attribute 'keys'", "body": "on this site:\r\nhttp://127.0.0.1:43110/1NYDdJ2JqMHsuD1Seau87BfGKbwEPEft8r/\r\n\r\nwhen trying to rebuild from sidebar -\r\nInternal error: AttributeError: 'list' object has no attribute 'keys'\r\n\r\nwhen trying to rebuild from console -\r\n Unhandled exception: 'list' object has no attribute 'keys'\r\nTraceback (most recent call last):\r\n  File \"zeronet.py\", line 19, in main\r\n    main.start()\r\n  File \"/vagrant/src/main.py\", line 492, in start\r\n    actions.call(config.action, action_kwargs)\r\n  File \"/vagrant/src/main.py\", line 155, in call\r\n    func(**kwargs)\r\n  File \"/vagrant/src/main.py\", line 280, in dbRebuild\r\n    site.storage.rebuildDb()\r\n  File \"/vagrant/src/Site/SiteStorage.py\", line 124, in rebuildDb\r\n    db_files = list(self.getDbFiles())\r\n  File \"plugins/MergerSite/MergerSitePlugin.py\", line 238, in getDbFiles\r\n    for file_relative_path in content.get(\"files\", {}).keys() + content.get(\"files_optional\", {}).keys():\r\nAttributeError: 'list' object has no attribute 'keys'\r\n\r\nand this error shows up on the debug.log -\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/dist-packages/gevent/greenlet.py\", line 327, in run\r\n    result = self._run(*self.args, **self.kwargs)\r\n  File \"/vagrant/src/Worker/Worker.py\", line 70, in downloader\r\n    site.storage.write(task[\"inner_path\"], buff)\r\n  File \"/vagrant/src/Site/SiteStorage.py\", line 191, in write\r\n    self.onUpdated(inner_path)\r\n  File \"plugins/MergerSite/MergerSitePlugin.py\", line 251, in onUpdated\r\n    super(SiteStoragePlugin, self).onUpdated(inner_path, file)\r\n  File \"/vagrant/src/Site/SiteStorage.py\", line 241, in onUpdated\r\n    self.openDb()\r\n  File \"/vagrant/src/Site/SiteStorage.py\", line 47, in openDb\r\n    self.rebuildDb()\r\n  File \"/vagrant/src/Site/SiteStorage.py\", line 117, in rebuildDb\r\n    self.db.checkTables()\r\n  File \"/vagrant/src/Db/Db.py\", line 212, in checkTables\r\n    table_settings[\"indexes\"], version=table_settings[\"schema_changed\"]\r\n  File \"/vagrant/src/Db/DbCursor.py\", line 109, in needTable\r\n    self.createIndexes(table, indexes)\r\n  File \"/vagrant/src/Db/DbCursor.py\", line 99, in createIndexes\r\n    self.execute(index)\r\n  File \"/vagrant/src/Db/DbCursor.py\", line 53, in execute\r\n    res = self.cursor.execute(query)\r\nsqlite3.OperationalError: table user has no column named user_date_created\r\n\r\nits mentions \"table user has no column named user_date_created\" but there is not table named user, its named USERS and there is no mention of a column \"user date created\" anywhere i looked, so i dont understand why it gives me this error.\r\n\r\nthis is after updating zeronet", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1500541822, "modified": 1561985897, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1035", "source_type": "github"}], "next_comment_id": 3, "comment": {"1604065370_mirrored_dnelband_github": [{"comment_id": 1, "body": "hi, im sorry for the lack of reply, i moved my project to a new address, and now it works without a problem http://127.0.0.1:43110/19NtJa1GVpNpyXmx27XshS4nWxd9f5BhUm/ \n", "added": 1468057007, "modified": 1468057023, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/505#issuecomment-231532434", "source_type": "github"}], "1604065479_mirrored_dnelband_github": [{"comment_id": 2, "body": "yes that worked\n", "added": 1474444520, "modified": 1474444520, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/586#issuecomment-248577618", "source_type": "github"}]}}