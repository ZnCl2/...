{"cert_user_id": "polymorphm@github", "next_topic_id": 2, "topic": [{"topic_id": 1604067187, "title": "it is a problem -- using 43110 port on Linux", "body": "### it is a problem -- using 43110 port on Linux for listening of ZeroNet localhost-server.\r\n\r\n## why?\r\n\r\nbecause port range (on Linux by default) from 32768 upto 60999 used for **ephemeral port range** . for outgoing connections mostly and other getting dynamic port purposes.\r\n\r\nsee -- https://en.wikipedia.org/wiki/Ephemeral_port and https://www.ncftp.com/ncftpd/doc/misc/ephemeral_ports.html .\r\n\r\nsee sysctl on Arch Linux (all default settings):\r\n\r\n```\r\n$ sysctl net.ipv4.ip_local_port_range\r\nnet.ipv4.ip_local_port_range = 32768\t60999\r\n```\r\n\r\n## what the problem with using a port from dynamic (ephemeral) range?\r\n\r\nthe problem is -- every time there is a chance (it is a low chance) that ZeroNet failes to start with some probability (it is a low probability).\r\n\r\nthere is a chance that ANY PORT from range 32768~60999 is **already busy**  (and you CAN NOT PREDICATE IT!) when you are starting a ZeroNet on 43110 port.\r\n\r\nyou could replace 43110 for example to 23110. it would solve conflict with ephemeral range!\r\n\r\n## what if I use FreeBSD, not Linux?\r\n\r\nin this case you have no problems. you can close the issue-ticket with ``WONTFIX``. and you could suggest to Linux-users to apply Barmin's patch on their computers.\r\n\r\nFreeBSD follows IANA recommendations.\r\n\r\n## 43110 is legacy! we can not just change this one to another port. all instructions are written to using 43110 port. all URLs are with this port. how it could be changed now?!\r\n\r\nyou **should** do port changing. you should admit wrong port selecting was.\r\n\r\nthe early admit it, the less consequestions would be in long perpective.\r\n\r\ntoday almost nobody knows about ZeroNet -- few people would suffer from port changing.\r\n\r\nbut tomorrow more people could be suffer from port changing.\r\n\r\n## what the problem if the program starts successfully not every time? it is the low probability to fail! and failure doesn't happen on FreeBSD!\r\n\r\nmaking or not making bugged software -- is a philosophical question. life is short. I would understand if you didn't want to fix it.\r\n\r\nthanks in advance", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1554143852, "modified": 1555215841, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1948", "source_type": "github"}], "next_comment_id": 4, "comment": {"1604067187_mirrored_polymorphm_github": [{"comment_id": 1, "body": "> write ui_port = any number you like in zeronet.conf file.\r\n\r\nit is issue about the **default** configuration. and therefore about all URLs that people share to each other.\r\n\r\nnot about individual (non-standard) configs", "added": 1554359094, "modified": 1554360290, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1948#issuecomment-479821465", "source_type": "github"}, {"comment_id": 2, "body": "> is there any other known application that uses this port range beside ftp servers?\r\n\r\nall applications that use outgoing tcp connections.\r\n\r\nssh (client), web-browser, DNS-client, e.t.c, *whatever that makes connection* ( IRC-chat-client and others...)...\r\n\r\nif you don't understand what I mean, here it is an example:\r\n\r\nthe first application session:\r\n\r\n```\r\n[regular-user@plm-notebook ~]$ python\r\nPython 3.7.2 (default, Jan 10 2019, 23:51:51) \r\n[GCC 8.2.1 20181127] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import socket\r\n>>> sock = socket.create_connection(('google.com', 80))\r\n>>> sock\r\n<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('172.20.255.175', 44938), raddr=('216.58.211.110', 80)>\r\n>>> \r\n```\r\n\r\nthe second application session:\r\n\r\n```\r\n[regular-user@plm-notebook ~]$ python\r\nPython 3.7.2 (default, Jan 10 2019, 23:51:51) \r\n[GCC 8.2.1 20181127] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import socket\r\n>>> serv_sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM, socket.IPPROTO_TCP)\r\n>>> serv_sock.bind(('0.0.0.0', 44938))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nOSError: [Errno 98] Address already in use\r\n>>> \r\n```\r\n\r\n![Screenshot from 2019-04-04 12-37-56](https://user-images.githubusercontent.com/422741/55545818-b4557400-56d6-11e9-9268-392b0cae6edd.png)\r\n\r\nthe port ``44938`` (from the example above) is like ``43110`` -- they both are from **ephemeral port range**.", "added": 1554360156, "modified": 1554363703, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1948#issuecomment-479827508", "source_type": "github"}, {"comment_id": 3, "body": "> It can be a problem if someone want to bind it to \"0.0.0.0\", but by default we bind to \"127.0.0.1\", which does not affected by this problem:\r\n\r\nhmm... you are right, partly..\r\n\r\nsorry for confusion. not all those programs I mentied *could* create a problem.\r\n\r\nnot any outgoing connection makes a problem. sorry again, please.\r\n\r\nbut problem of using of port 43110 (ephemeral port range) **still exists**.. (but for **less** count of cases).\r\n\r\nif any outgoing tcp connection that makes connection to 127.0.0.1 (CUPS-server, TOR-server, i2p-server, Ethereum any web-ui server, etc., .... ... ...).\r\n\r\nexample:\r\n\r\nthe first application session:\r\n\r\n```\r\n[regular-user@plm-notebook ~]$ python\r\nPython 3.7.2 (default, Jan 10 2019, 23:51:51) \r\n[GCC 8.2.1 20181127] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import socket\r\n>>> sock = socket.create_connection(('127.0.0.1', 631)) # CUPS server\r\n>>> sock\r\n<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 53722), raddr=('127.0.0.1', 631)>\r\n>>> \r\n```\r\n\r\nthe second application session:\r\n\r\n```\r\n[regular-user@plm-notebook ~]$ python\r\nPython 3.7.2 (default, Jan 10 2019, 23:51:51) \r\n[GCC 8.2.1 20181127] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import socket\r\n>>> serv_sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM, socket.IPPROTO_TCP)\r\n>>> serv_sock.bind(('0.0.0.0', 53722))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nOSError: [Errno 98] Address already in use\r\n>>> serv_sock.bind(('127.0.0.1', 53722))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nOSError: [Errno 98] Address already in use\r\n>>> \r\n```", "added": 1554370423, "modified": 1554370423, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1948#issuecomment-479878343", "source_type": "github"}]}}