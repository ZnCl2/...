{"cert_user_id": "aitorpazos@github", "next_topic_id": 3, "topic": [{"topic_id": 1604065473, "title": "Update Dockerfile base image to ubuntu 16.04 LTS and add Tor support to it.", "body": "In order to keep the Dockerfile simple, needed opotions have been appended to package provided torrc file and the /etc/init.d/tor script is used to start tor. If further customisation is desired, a wrapper script should be created to have further control on the startup. This would allow things like specifying external (tor) proxies and disable tor startup in those situations.\n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1474213601, "modified": 1474305567, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/585", "source_type": "github"}, {"topic_id": 1604065477, "title": "Update Dockerfile base image to ubuntu 16.04 LTS and add Tor support to it (disabled by default).", "body": "The base Ubuntu image has been upgraded to the current LTS release (16.04) and tor support has been added to the Docker image. Tor is disabled by default as it may not be allowed by different hosting providers. In order to enable it, just set `ENABLE_TOR` environment variable to `true` when executing `docker run` \n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1474312288, "modified": 1475839642, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/587", "source_type": "github"}], "next_comment_id": 4, "comment": {"1604065473_mirrored_aitorpazos_github": [{"comment_id": 1, "body": "I understand your points. However, this change would improve current situation from not having Tor protection at all to at least have some of it.\n", "added": 1474215042, "modified": 1474215042, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/585#issuecomment-247867029", "source_type": "github"}, {"comment_id": 2, "body": "Ok, that's a more compelling argument right now. I'll close this pull request and I'll make tor optional (disabled by default)\n", "added": 1474305567, "modified": 1474305567, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/585#issuecomment-248112855", "source_type": "github"}], "1604065477_mirrored_aitorpazos_github": [{"comment_id": 3, "body": "That would mean that we need two separate images, one with tor installed and another one without tor.\n\nHowever, with this change the tor binary would only run if the user explicitly sets the environment variable ENABLE_TOR. The only way for a VPS provider to know that tor exists in one of these containers is to inspect the image looking for the tor binary, which I don't think they would do.\n\n_Using default config:_\n\n```\n$ docker run -d -p 15443:15441 -p 43112:43110 aitorpazos:myZeroNet\nb1146f0409083a03d122cbe947cf9011a63cf62b9975870e61654778e8c6e307\n$ docker exec -ti trusting_kirch ps -ef\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 21:58 ?        00:00:00 /bin/sh -c cd /root && (! ${ENABLE_TOR} || /etc/init.d/tor start) && python zeronet.py --ui_ip 0.0.0.0\nroot         6     1  5 21:58 ?        00:00:00 python zeronet.py --ui_ip 0.0.0.0\nroot        20     0  0 21:58 ?        00:00:00 ps -ef\n```\n\n_Using ENABLE_TOR=false:_\n\n```\n$docker run -e \"ENABLE_TOR=false\" -d -p 15442:15441 -p 43111:43110 aitorpazos:myZeroNet\naac074ccefe84379e19f54fa703c605ffbe667002e771c293916d9e8c7431e7c\n$ docker exec -ti small_colden ps -ef\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 21:53 ?        00:00:00 /bin/sh -c cd /root && (! ${ENABLE_TOR} || /etc/init.d/tor start) && python zeronet.py --ui_ip 0.0.0.0\nroot         6     1  2 21:53 ?        00:00:00 python zeronet.py --ui_ip 0.0.0.0\nroot        20     0  0 21:53 ?        00:00:00 ps -ef\n```\n\n_Using ENABLE_TOR=true:_\n\n```\n$ docker run -e \"ENABLE_TOR=true\" -d -p 15444:15441 -p 43113:43110 aitorpazos:myZeroNet\n19d06f2e9f65ae778b6666109c09dd5022ef83ed7bedbe4f2eed23f51e51891b\n$ docker exec -ti jolly_stonebraker ps -ef\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 21:59 ?        00:00:00 /bin/sh -c cd /root && (! ${ENAB\ndebian-+    17     1  8 21:59 ?        00:00:00 /usr/bin/tor --defaults-torrc /u\nroot        18     1  6 21:59 ?        00:00:00 python zeronet.py --ui_ip 0.0.0.\nroot        32     0  0 21:59 ?        00:00:00 ps -ef\n```\n", "added": 1475089738, "modified": 1475089738, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/587#issuecomment-250316222", "source_type": "github"}]}}