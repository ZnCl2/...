{"cert_user_id": "sirMackk@github", "next_comment_id": 23, "comment": {"1604064731_mirrored_HelloZeroNet_github": [{"comment_id": 1, "body": "Hi, I can look into this. It seems related to #20 as well, so might as well kill two birds with one stone. Do you know if someone is working on this or is it safe to dive in?\n", "added": 1423778500, "modified": 1423778500, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/5#issuecomment-74186730", "source_type": "github"}, {"comment_id": 2, "body": "Sounds great, thanks for the pointer! \n", "added": 1423784567, "modified": 1423784567, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/5#issuecomment-74196016", "source_type": "github"}, {"comment_id": 3, "body": "Hi! I _think_ I got it. It uses gevent + the stdlib. I've tested it with two UPnP enabled routers I have access to and it worked both times. I'll be able to test it with a third one this weekend. \n\nBefore I do final cleanup and submit a PR, do you know someone who could test my branch against their router/s? I don't have a lot of experience with UPnP and I'm trying to cover anything I might have missed. My branch: https://github.com/sirMackk/ZeroNet/tree/upnp_punch . \n", "added": 1424387306, "modified": 1424387306, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/5#issuecomment-75178192", "source_type": "github"}, {"comment_id": 4, "body": "Oh man, that's great! I posted a message on ZeroNet to see if anyone else wants to volunteer to test this functionality out. Might make a ZeroNet site to coordinate this type of effort.\n", "added": 1424444254, "modified": 1424444254, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/5#issuecomment-75287618", "source_type": "github"}, {"comment_id": 5, "body": "Great! Ive fixed some small platform related bugs as well. I'll submit a PR\nas soon as I get back from work. Thanks!\nOn Feb 24, 2015 10:55 AM, \"ZeroNet\" notifications@github.com wrote:\n\n> it's working at my workplace too :) So I think we can include it in the\n> next release if its ok for you too.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/HelloZeroNet/ZeroNet/issues/5#issuecomment-75782891.\n", "added": 1424782625, "modified": 1424782625, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/5#issuecomment-75783246", "source_type": "github"}], "1604064796_mirrored_arthurlutz_github": [{"comment_id": 6, "body": "Hey @arthurlutz , thanks for reporting this. I'll get on fixing this today evening. Could you please share what OS you're using as well as Python version?\n", "added": 1424944370, "modified": 1424944370, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/54#issuecomment-76172973", "source_type": "github"}, {"comment_id": 7, "body": "I think I have the fix for this on my fork's master. I'll get to give it a test on two routers tomorrow and hopefully report back a success.\n", "added": 1425426657, "modified": 1425426657, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/54#issuecomment-77087898", "source_type": "github"}, {"comment_id": 8, "body": "Whoa, thanks! I'll test it out soon as I'm home today. Got a windows box\nand two routers to test it.\nOn Mar 7, 2015 4:35 PM, \"ZeroNet\" notifications@github.com wrote:\n\n> Made it work by detecting local ips (+added some logging, fixed the\n> successful run check and it also can be run by standalone using python\n> UpnpPunch.py):\n> https://gist.github.com/HelloZeroNet/5133c7f03030620c278f\n> \n> Please test :)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/HelloZeroNet/ZeroNet/issues/54#issuecomment-77711283.\n", "added": 1425753563, "modified": 1425753563, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/54#issuecomment-77711473", "source_type": "github"}, {"comment_id": 9, "body": "I checked out the code and it works on both a linux machine and a windows machine on two different routers and it forwards the port without a hitch. Nice job on update 2 - that was the trickiest part. Should we leave it on my fork for more testing or should I submit a PR?\n", "added": 1425766096, "modified": 1425766096, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/54#issuecomment-77726213", "source_type": "github"}], "1604065322_mirrored_yurivict_github": [{"comment_id": 10, "body": "Hey @HelloZeroNet , looks like something I could check out in the next few days/weeks :)\n", "added": 1466398325, "modified": 1466398325, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/466#issuecomment-227072938", "source_type": "github"}, {"comment_id": 11, "body": "@yurivict I believe the main reason why the manual route was chosen was because it's a simple pure Python implementation. The benefits of that are:\n- works out of the box on any platform that Python works on - no need to compile it for different platforms, no need to create installers for Windows etc. (related: https://github.com/miniupnp/miniupnp/issues/159).\n- no dependencies to track and update as well as a minimal code and config footprint.\n- pure Python (again) easy to inspect, change, modify, etc.\n\nI know it's not the best Python code out there, hence why I thought about refactoring it + adding in the feature requested in this issue. \n\nThat said, I've been out of the loop for a long time and @HelloZeroNet would have a better idea of which approach would be best here.\n", "added": 1466567785, "modified": 1466567785, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/466#issuecomment-227659264", "source_type": "github"}, {"comment_id": 12, "body": "Quick update on this: finally got around to working on this. Currently adding some tests, then will refactor a few odd bits, and finally add code to signal the router to delete a port mapping.\n", "added": 1470830826, "modified": 1470830826, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/466#issuecomment-238896860", "source_type": "github"}], "1604065465_mirrored_sirMackk_github": [{"comment_id": 13, "body": "Hey @HelloZeroNet , thanks for checking this out! I'll look into this error and submit any required fixes in the upcoming days.\n", "added": 1473753610, "modified": 1473753610, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/577#issuecomment-246646921", "source_type": "github"}, {"comment_id": 14, "body": "Hey @HelloZeroNet , I fixed the (embarrassingly small) issue here, ready for a looking over. \n", "added": 1475145133, "modified": 1475145133, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/577#issuecomment-250466626", "source_type": "github"}], "1604065645_mirrored_kasv_github": [{"comment_id": 15, "body": "Super big thanks for attaching the SOAP response @kasv . I'll look into this in the next few days.", "added": 1483171451, "modified": 1483171451, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/725#issuecomment-269860136", "source_type": "github"}, {"comment_id": 16, "body": "Hi @kasv , I think I was able to fix the issue. Before I create a pull request, could you test the fix out? You can either clone my [patched branch](https://github.com/sirMackk/ZeroNet/tree/unicode_fix) and run Zeronet as you normally would _or_ you can download the [python script from here](https://github.com/sirMackk/ZeroNet/blob/unicode_fix/src/util/UpnpPunch.py) and run it with `python UpnpPunch.py` (all it does is opens port 15443 port and then closes it). \r\n\r\nIn case you still get an error, the script will create a file called `upnp_error.txt`, which will help further troubleshooting. If there's no error, I'll submit a PR and we can close this one out :).", "added": 1483345529, "modified": 1483345529, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/725#issuecomment-269960593", "source_type": "github"}, {"comment_id": 17, "body": "Thanks @kasv , this is a big help in pinpointing the issue. I'll look into how to best make the code handle multiple encodings.\r\n\r\nIn the second case, it appears that your router is telling you that port 15433 is already open. This shouldnt be an error (500), which can be confusing. I'll see how this can be handled in a friendlier fashion.", "added": 1484217412, "modified": 1484217412, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/725#issuecomment-272164632", "source_type": "github"}, {"comment_id": 18, "body": "Does it even open/close the ports at all?\r\n\r\nI know that UPnP is horribly implemented and some routers will ignore commands even if they have UPnP enabled or some will even send a \"200 OK\" reply (\"yes, I opened the port!\") without actually opening the port :/.\r\n\r\nYou can confirm this if you use `miniupnpc` to perform the same operation (`apt-get install miniupnpc` if you're on ubuntu).", "added": 1484219029, "modified": 1484219029, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/725#issuecomment-272170575", "source_type": "github"}, {"comment_id": 19, "body": "Hey @kasv , I've been looking into this and it appears that short of switching out the router's firmware to something like openwrt/dd-wrt, there's not much someone can do to get their router to talk upnp :/.\r\n\r\n@HelloZeroNet Quick update here - I'm still trying to figure out how to handle this charset issue without introducing more dependencies - basically, how to detect the charset from a bunch of bytes and use that to decode it into a string fit for an xml parser. The updates from #757 makes things better, but I wouldn't consider it a long-term solution.", "added": 1484977801, "modified": 1484977801, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/725#issuecomment-274249151", "source_type": "github"}], "1604065690_mirrored_sirMackk_github": [{"comment_id": 20, "body": "Absolutely not! It's just a style thing - in my opinion, the `,` at the end instantly identifies the parenthesis as tuple. But if you don't like it, I'd be more than happy to get rid of the `,`'s :).", "added": 1484145523, "modified": 1484145523, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/757#issuecomment-271936930", "source_type": "github"}, {"comment_id": 21, "body": "Thanks for the feedback, I never thought of it that way. I removed the commas and rebased my branch.", "added": 1484150242, "modified": 1484150242, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/757#issuecomment-271960694", "source_type": "github"}], "1604067608_mirrored_ZeroNetTickBot_github": [{"comment_id": 22, "body": "GPLv3+", "added": 1572821769, "modified": 1572821769, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/2273#issuecomment-549204369", "source_type": "github"}]}, "next_topic_id": 5, "topic": [{"topic_id": 1604064792, "title": "Python-only Upnp solution", "body": "To summarize everything here: this solves #5 and #20. \n\nIt's a pure python stdlib + gevent way to open up a port on router to the current host using UPnP. I've tested it quite a bit on my linux box and a bit on a windows box I got access to. I've also had some feedback (and a working solution!) from @hobbldygoop in https://github.com/sirMackk/ZeroNet/commit/fdcd15cf8df0008a2070647d4d28ffedb503fba2#commitcomment-9863928 about making it work on OSX (THANKS!). :+1: \n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1424822089, "modified": 1424878098, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/53", "source_type": "github"}, {"topic_id": 1604064795, "title": "Fix for issue #54", "body": "This closes issue #54 - better support for handling socket error on sending out SSDP request. This also incorporates fixes by @HelloZeroNet : https://gist.github.com/HelloZeroNet/5133c7f03030620c278f - adds logging, standalone run, figuring out own ip, and successful run check. Thanks a lot!\n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1425767471, "modified": 1425767804, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/55", "source_type": "github"}, {"topic_id": 1604065465, "title": "Closes #466 - Close ports on exit + minor refactoring w/ tests", "body": "This PR does 3 things:\n1. Adds code to delete port forwarding rules using UPnP on exiting - closes #466 .\n2. Refactors the code mainly to introduce exceptions instead of returning True/False/None\n3. Adds tests to exercise the UpnpPunch module.\n\nI started off working on no. 1, but I quickly found out that the increased number of responsibilities (opening _and_ closing ports) need a better way to communicate failures, hence the switch to exceptions. All these changes prompted me to write tests to make sure I'm not breaking everything.\n\nOne thing that I'm not confident in is adding the port-closing code to the ConnectionServer.stop method - it works alright, but is this the best place to put this cleanup code in?\n", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1473408557, "modified": 1475310289, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/577", "source_type": "github"}, {"topic_id": 1604065690, "title": "Decodes IGD response to utf-8; Makes function arguments immutable;", "body": "This is a very likely fix for #725. Didn't get a confirmation yet, but I wanted to have this PR ready now.\r\n\r\nI made the ol' mistake where I thought that urlopen().read() returns a text string, but it's a byte string, and `xml.minidom.parseString` expects a text string. Easily solved by decoding the byte string into a text string.\r\n\r\nThe other small change is to make the default function arguments that are _mutable_ lists into immutable tuples. Using a mutable object as a default function argument is an invitation to all sorts of pain.", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1484139058, "modified": 1484150369, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/757", "source_type": "github"}]}