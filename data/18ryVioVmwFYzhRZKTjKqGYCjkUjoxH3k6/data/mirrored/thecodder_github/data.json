{"cert_user_id": "thecodder@github", "next_comment_id": 4, "comment": {"1604067169_mirrored_yurivict_github": [{"comment_id": 1, "body": "On Gentoo I replace new \u00abzeronet.py\u00bb to  /usr/share/zeronet/ and recompile (pyc, pyo)\r\n```bash\r\n/etc/init.d/zeronet start\r\n * Starting ZeroNet ...   \r\n```\r\nin debug.log (with log level ERROR) before stopping:\r\n```python\r\nValueError: unknown address family 10\r\n[2019-02-23 13:38:41,412] ERROR    - Unhandled exception\r\nTraceback (most recent call last):\r\n  File \"src/gevent/greenlet.py\", line 716, in gevent._greenlet.Greenlet.run\r\n  File \"/usr/share/zeronet/src/Site/SiteAnnouncer.py\", line 383, in announcePex\r\n    num_added = peer.pex(need_num=need_num)\r\n  File \"/usr/share/zeronet/src/Peer/Peer.py\", line 275, in pex\r\n    address = helper.unpackAddress(peer)\r\n  File \"/usr/share/zeronet/src/util/helper.py\", line 104, in unpackAddress\r\n    return socket.inet_ntop(socket.AF_INET6, packed[0:16]), struct.unpack_from(\"H\", packed, 16)[0]\r\n```\r\nZites is works, and I try stop daemon:\r\n```bash\r\n/etc/init.d/zeronet stop\r\n * Stopping ZeroNet ...\r\n....................\r\n * start-stop-daemon: 1 process refused to stop \r\n```\r\nProcess \u00abzeronet\u00bb is present. No other errors in debug.log", "added": 1550912032, "modified": 1550912032, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1905#issuecomment-466642085", "source_type": "github"}, {"comment_id": 2, "body": "yes, not related to the problem\r\n\r\nnet-vpn/zeronet-9999-r1::raiagent  USE=\"tor -debug -meek\" PYTHON_TARGETS=\"python2_7\"\r\n```\r\nroot ~ # eselect python list\r\nAvailable Python interpreters, in order of preference:\r\n  [1]   python2.7\r\n  [2]   python3.6\r\n```\r\nprocess list: /usr/bin/python2.7 -O /usr/share/zeronet/zeronet.py --config_file /etc/zeronet.conf main\r\n\r\n```diff\r\ndiff -u zeronet.py zeronet_old.py \r\n--- zeronet.py\t2019-02-23 13:21:04.016566700 +0200\r\n+++ zeronet_old.py\t2019-02-23 13:19:10.777557989 +0200\r\n@@ -12,9 +12,11 @@\r\n     main = None\r\n     try:\r\n         import signal\r\n+        try:\r\n+            signal.signal(signal.SIGTERM, lambda signum, stack_frame: sys.exit(0))\r\n+        except Exception as err:\r\n+            print(\"Error setting up SIGTERM watcher: %s\" % err)\r\n \r\n-        signal.signal(signal.SIGTERM, lambda signum, stack_frame: sys.exit(0))\r\n-        \r\n         app_dir = os.path.dirname(os.path.abspath(__file__))\r\n         os.chdir(app_dir)  # Change working dir to zeronet.py dir\r\n         sys.path.insert(0, os.path.join(app_dir, \"src/lib\"))  # External liblary directory\r\n\r\n```", "added": 1550915470, "modified": 1550915803, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1905#issuecomment-466645865", "source_type": "github"}, {"comment_id": 3, "body": "```\r\nroot ~ # python2.7 -V\r\nPython 2.7.15\r\n\r\ndev-lang/python\r\n     Available versions:  \r\n     (2.7)  2.7.15\r\n...\r\n```", "added": 1550921142, "modified": 1550921142, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1905#issuecomment-466655707", "source_type": "github"}]}}