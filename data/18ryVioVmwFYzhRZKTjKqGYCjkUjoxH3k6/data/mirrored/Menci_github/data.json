{"cert_user_id": "Menci@github", "next_topic_id": 2, "topic": [{"topic_id": 1604066499, "title": "Not working behind Nginx reverse proxy", "body": "### Step 1: Please describe your environment\r\n\r\n  * ZeroNet version: 0.6.2\r\n  * Operating system: xenial x64\r\n  * Web browser: Chrome latest\r\n  * Tor status: default enabled\r\n  * Opened port: yes\r\n  * Special configuration: nginx/1.10.3\r\n\r\n### Step 2: Describe the problem:\r\nMy nginx conf:\r\n\r\n```nginx\r\nserver {\r\n        listen 80; \r\n        listen 443 ssl;\r\n\r\n        include ssl.conf;\r\n\r\n        server_name <DOMAIN>;\r\n\r\n        location / {\r\n                auth_basic \"Only open to Menci and Menci's FRIENDS\";\r\n                auth_basic_user_file htpasswd;\r\n\r\n                proxy_pass http://127.0.0.1:43110;\r\n                proxy_http_version  1.1;\r\n                proxy_set_header    Host        $host;\r\n                proxy_set_header    X-Real-IP   $remote_addr;\r\n                proxy_read_timeout  120s;\r\n                proxy_send_timeout  120s;\r\n        }\r\n\r\n        location /Websocket {\r\n                proxy_pass http://127.0.0.1:43110;\r\n                proxy_http_version 1.1;\r\n                proxy_read_timeout 1h;\r\n                proxy_set_header Upgrade $http_upgrade;\r\n                proxy_set_header Connection \"upgrade\";\r\n                proxy_set_header    Host        $host;\r\n        }\r\n}\r\n```\r\n\r\nAnd ZeroNet command line:\r\n\r\n```bash\r\n./ZeroNet.sh --ui_ip 127.0.0.1 --ui_host <DOMAIN>\r\n```\r\n\r\n#### Steps to reproduce:\r\n\r\n  1. Use Nginx with ZeroNet with my configuration above.\r\n\r\n#### Observed Results:\r\nWebSocket 400 in Chrome console. And https://<DOMAIN>/WebSocket give me \"Not a websocket!\". \r\n\r\n#### Expected Results:\r\nZeroNet works just like connect directly to it with ip:port.", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1524398966, "modified": 1526122803, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1400", "source_type": "github"}], "next_comment_id": 2, "comment": {"1604066499_mirrored_Menci_github": [{"comment_id": 1, "body": "Oh, I'm sorry that I have another reverse proxy in front of the proxy, which have a wildcard pointed to the server behind. I added the save configure to that server with the same and it works. Thanks.", "added": 1526122801, "modified": 1526122801, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1400#issuecomment-388557214", "source_type": "github"}]}}