{"cert_user_id": "SuperSandro2000@github", "next_topic_id": 4, "topic": [{"topic_id": 1604067011, "title": "Update Dockerfile", "body": "Update to Alpine 3.8\r\nApply best practices eg:\r\n- Don't upgrade\r\n- Add --no-cache-dir to pip install\r\n- Remove removing of any tmp folder as it is deprecated\r\n- Format RUN block nicer", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1544261584, "modified": 1544263082, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/1805", "source_type": "github"}, {"topic_id": 1604067494, "title": "Unhandled exception: database is locked", "body": "### Step 1: Please describe your environment\r\n\r\n  * ZeroNet version: 0.7.1 r4206\r\n  * Operating system: Alpine\r\n  * Web browser: None\r\n  * Tor status: enabled\r\n  * Opened port: no\r\n  * Special configuration: Docker Image (https://github.com/SuperSandro2000/docker-images/blob/master/zeronet/amd64.Dockerfile)\r\n\r\n### Step 2: Describe the problem:\r\n\r\n#### Steps to reproduce:\r\n\r\n  1. Start an old instance that has content downloaded.\r\n\r\n#### Observed Results:\r\n\r\n  * What happened? This could be a screenshot, a description, log output (you can send log/debug.log file to hello@zeronet.io if necessary), etc.\r\n\r\n[12:24:39] SiteManager Can't delete site ************************** from content_db: database is locked\r\n[12:24:39] - Unhandled exception: database is locked\r\nTraceback (most recent call last):\r\n  File \"zeronet.py\", line 17, in main\r\n    main.start()\r\n  File \"/app/src/main.py\", line 537, in start\r\n    actions.call(config.action, action_kwargs)\r\n  File \"/app/src/main.py\", line 121, in call\r\n    back = func(**kwargs)\r\n  File \"/app/src/main.py\", line 133, in main\r\n    ui_server = UiServer()\r\n  File \"/app/src/Ui/UiServer.py\", line 86, in __init__\r\n    self.sites = SiteManager.site_manager.list()\r\n  File \"/app/src/Site/SiteManager.py\", line 196, in list\r\n    self.load(startup=True)\r\n  File \"/app/plugins/Zeroname/SiteManagerPlugin.py\", line 22, in load\r\n    self.need(config.bit_resolver)  # Need ZeroName site\r\n  File \"/app/src/Site/SiteManager.py\", line 175, in need\r\n    site = Site(address, settings=settings)\r\n  File \"/app/src/Site/Site.py\", line 56, in __init__\r\n    self.content_manager = ContentManager(self)\r\n  File \"/app/plugins/OptionalManager/OptionalManagerPlugin.py\", line 59, in __init__\r\n    super(ContentManagerPlugin, self).__init__(*args, **kwargs)\r\n  File \"/app/src/Content/ContentManager.py\", line 36, in __init__\r\n    self.contents = ContentDbDict(site)\r\n  File \"/app/src/Content/ContentDbDict.py\", line 16, in __init__\r\n    self.db_id = self.db.needSite(site)\r\n  File \"/app/src/Content/ContentDb.py\", line 88, in needSite\r\n    self.execute(\"INSERT OR IGNORE INTO site ?\", {\"address\": site.address})\r\n  File \"/app/src/Db/Db.py\", line 110, in execute\r\n    return self.cur.execute(query, params)\r\n  File \"/app/src/Db/DbCursor.py\", line 103, in execute\r\n    res = self.cursor.execute(query, params)\r\nsqlite3.OperationalError: database is locked\r\n\r\n#### Expected Results:\r\n\r\n  * What did you expect to happen?\r\n\r\nStart up correctly like always.", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1567762079, "modified": 1568554339, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/2185", "source_type": "github"}, {"topic_id": 1604067887, "title": "Fix redirect loop in Chrome 80", "body": "This fixes the following error message from Chrome 80\r\n\r\nA cookie associated with a cross-site resource at http://zeronet.example.com/ was set without the `SameSite` attribute. It has been blocked, as Chrome now only delivers cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application>Storage>Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.", "parent_topic_uri": "1604062980_users_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di", "added": 1586221081, "modified": 1590763325, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/2509", "source_type": "github"}], "next_comment_id": 15, "comment": {"1604067247_mirrored_tangdou1_github": [{"comment_id": 1, "body": "This happened to me when I did not have ``/etc/mime.types`` installed. On Debian you miss ``mime-support`` and on alpine ``mailcap``\r\n\r\nEdit: well, it fixes ``print(__import__('mimetypes').guess_type('test.woff2'))`` but not the content type problem.", "added": 1586217985, "modified": 1586218564, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/1940#issuecomment-610147485", "source_type": "github"}], "1604067494_mirrored_SuperSandro2000_github": [{"comment_id": 2, "body": "Fixed in R4210", "added": 1568554338, "modified": 1568554338, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/2185#issuecomment-531579733", "source_type": "github"}], "1604067608_mirrored_ZeroNetTickBot_github": [{"comment_id": 3, "body": "GPLv3+ and Lax", "added": 1572844826, "modified": 1572844826, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/2273#issuecomment-549256621", "source_type": "github"}, {"comment_id": 4, "body": "I want to switch to I don't care. Feel free to do any License you find appropriate. Also maybe restrict the repo to older user accounts. The spam is unbelievable.", "added": 1574955519, "modified": 1574955519, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/2273#issuecomment-559581200", "source_type": "github"}, {"comment_id": 5, "body": "I don't care", "added": 1574956132, "modified": 1574956132, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/2273#issuecomment-559582798", "source_type": "github"}, {"comment_id": 6, "body": "> In the USA\r\n\r\nI am in Germany. In Germany we can choose between one of many parties. Earlier today I had the broad choosing of several breads. Not only 2 but I think we had 3 different types. Can you imagine that? 3 different types of bread!?\r\n\r\n> you can vote for either Democrats or Republicans!\r\n\r\nwrong, too. You have more options that are not as popular.\r\n\r\n> You will never \r\n\r\nThis is fundamentally wrong in a whole cause you will eventually.\r\n\r\n> If you vote for the Green Party you accept switching to either Democrats or Republicans!\r\n\r\nIf they go into coalition which happens all the time in Europe than this sentence is written a bit awkwardly but not wrong. \r\n\r\n> Votes are always need to be specific!\r\n\r\nThis vote is specific.", "added": 1575354905, "modified": 1575354905, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/2273#issuecomment-561080323", "source_type": "github"}], "1604067887_mirrored_SuperSandro2000_github": [{"comment_id": 7, "body": "> Will it work without https?\r\n\r\nno, it won't. I guess we need to add something to fix that.\r\nThere seems to be no existing config option tough....", "added": 1586228470, "modified": 1586228728, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/2509#issuecomment-610191830", "source_type": "github"}, {"comment_id": 8, "body": "> What if we make the browser send the protocol to the server?\r\n\r\nThat would work I guess but I am not sure how we want to do this. I don't think there is a header for this except if you run it behind a reverse proxy which might set ``X-Forwarded-Proto``.", "added": 1586238906, "modified": 1586238906, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/2509#issuecomment-610264574", "source_type": "github"}, {"comment_id": 9, "body": "> We could just use JavaScript on the client side.\r\n\r\nwell, I don't think I can do this in a proper clean way in ZeroNet right now. Help would be appreciated. ", "added": 1586304627, "modified": 1586304627, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/2509#issuecomment-610727249", "source_type": "github"}, {"comment_id": 10, "body": "> We should not follow request from users to change the core, when they have browser related issues!\r\n\r\nThen ZeroNet is dead in 5 years, most 10.\r\n\r\n> ZeroNet is only secure and anonymous if it is used with the Tor Browser.\r\n\r\nFor that matter. According to Chromestatus Firefox is going to follow that soon so Tor is going to get that change eventually, too. Didn't find a confirmation in the source tough.\r\n\r\nAlso the Change is not some random change from the Chromium or Google people but a [standard](https://tools.ietf.org/html/draft-west-cookie-incrementalism-00) they follow and I do not think ZeroNet should stand against standards for no good reason.\r\n\r\n> Additionally is worth noting that @rllola working on ZeroNet browser and she needs help.\r\n\r\nIt is neither based on Firefox or Chromium so I won't support that. An addon to Firefox or Tor or a fork of one of them would be perfectly fine and wouldn't need a reimplementation of such a complex thing as a browser.\r\n\r\n> I don't want to see any change in the core because of Google (or any other corporation for that matter) and I know that many developers agree with me.\r\n\r\nThen the password plugin will be broken as soon as Firefox follow the new standard. To bad but I want password protection infront of my zeronet.\r\n\r\nThis also has nothing to do with Windows and technically I already forked ZeroNet and I have no intent to fork it just to fix this nitty little bug.\r\n\r\nAlso this is probably in Chromium already (didn't test) so we just excluded a vast majority of all people using zeronet with password authentication.", "added": 1586305754, "modified": 1586305754, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/2509#issuecomment-610732071", "source_type": "github"}, {"comment_id": 11, "body": "> password plugin roll_eyes Who the hell need that plugin anyway?\r\n\r\nthen remove it and don't offer it at all.\r\n\r\nChromium is also effected. Just tested it.\r\n\r\nIf you know what the right solution would be to fix this in the password plugin without affecting the core I am more than welcome to accept it. But this was the fastest and easiest solution to fix my problem and I just wanted to make sure it gets fixed upstream as well.\r\n\r\nand I think you are getting a bit off topic here. Sure there are more important things to do but this would have been an easy fix where we don't need to argue over and over again but just do it and get over it.\r\n\r\nEdit:\r\nWait a second. Switzerland flag, joined yesterday, wasting everyones time. I kinda remember such a person from another issue I don't want to mention now.\r\n\r\nBack to topic:\r\n\r\nSecure and samesite=none can only be set on https so this would break the login on http sites as the cookie then wouldn't be set at all.", "added": 1586337192, "modified": 1586337438, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/2509#issuecomment-610922448", "source_type": "github"}, {"comment_id": 12, "body": "@warcriminal I have that already and the plugin would still break.\r\n\r\n> Some sites doesn't use cookies at all!\r\n\r\nWhich does not work for login protection from non static IPs without having some sort of certificate or cookie or you enter the login details for every request.\r\nYou still don't get that this will eventually also come to Firefox cause the current way of handling cookie is just insecure.", "added": 1586560474, "modified": 1586560474, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/2509#issuecomment-612299260", "source_type": "github"}, {"comment_id": 13, "body": "I think 36d96d484ed8dc3370c2dab9b50b714af702a2c4 closed this issue. Closing for now.", "added": 1590763319, "modified": 1590763319, "source_link": "https://github.com/HelloZeroNet/ZeroNet/pull/2509#issuecomment-636099005", "source_type": "github"}], "1604067973_mirrored_ghost_github": [{"comment_id": 14, "body": "> that file will not help you anything!\r\n\r\nFor me it has a lot of sites listed which I could just visit in the UI and re-add them. Sure better than losing access to your account.\r\n\r\n> Moving ZeroNet between computers is just as impossible\r\n\r\nAs what? Also if you move the entire directory it is very portable and you can just open in on the next machine.\r\n\r\n> Even if you able to restore your data folder, to add your sites to another node will again require you to open each site, one-by-one and click on the confirmation button to add the site.\r\n\r\nWhich is only inconvenient and you don't lose any data which is the purpose of a backup.\r\n\r\nSure some convenience around this could be added to make it easier for the end user.", "added": 1586561092, "modified": 1586561092, "source_link": "https://github.com/HelloZeroNet/ZeroNet/issues/2515#issuecomment-612301131", "source_type": "github"}]}}