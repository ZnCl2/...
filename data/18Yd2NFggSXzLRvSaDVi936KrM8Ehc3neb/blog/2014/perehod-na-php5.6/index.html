<!DOCTYPE HTML>
<html lang="ru">
    <head>
      <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb</title>
      <link rel="stylesheet" href="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb/css/main.css"/>
      <link rel="shortcut icon" type="image/x-icon" href="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb/i/favicon.ico"/>
      <link href="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb/rss.xml" title="Akademic's blog" type="application/rss+xml" rel="alternate"/>
    </head>
    <body>
        <header><h1><a href="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb" rel="home">akademic.name</a></h1></header>
        <main class="content">
            
<article>
    <h1>Переход на php5.6 c php5.4</h1> <time>10.09.2014</time>
	<p>Как всем уже известно, вышел релиз php 5.6.0.
Релиз этот довольно оперативно добавили в debian jessie.
Так что я решил попробовать новую версию в деле.</p>

<h2>Небольшая предыстория</h2>

<h3>Контейнеризация</h3>

<p>Недавно я довольно плотно заинтересовался менеджером контейнеров <a href="http://docker.io">Docker</a>.
Наш сервер для разработки целиком запущен внутри контейнеров.
Причём организовано всё так:</p>

<ul>
<li>mysql сервер в своём контейнере</li>
<li>php-fpm в своём контейнере</li>
</ul>

<p>Таким образом предельно легко менять версию php, меняя запущенные контейнеры.</p>

<p>Собственно, так я и сделал - создал новый контейнер с php 5.6.
Причём для php 5.4 у меня был сделан Dockerfile, так что я просто его немного подправил и автоматически собрал новую версию контейнера.</p>

<h3>Автоматические тесты</h3>

<p>Также недавно мы начали эксперимент с написанием автоматических тестов при помощи <a href="http://codeception.com/">Codeception</a>.
Поскольку проект очень старый, то тестировать его иначе как через PhpBrowser не получается.
Так что можно сказать, что запуск тестов это полноценная работа пользователя с нашей системой.
Тестовая среда, кстати, также находится целиком в независимом контейнере.
То есть внутри контейнера находится весь проект с базой данных, веб-сервером и php-fpm, кодом проекта,
а также тестовый фреймворк и сами тесты.
И запуск контейнера есть запуск всей системы с прогонкой тестов.</p>

<h2>Предварительные результаты</h2>

<ol>
<li><p>При переходе разработки на php5.6 никаких серьёзных проблем не наблюдалось.
Единственное, что пришлось сделать это прописать выдачу кодировки в header(), т.к. в новой версии по умолчанию стали отправляться заголовки с кодировкой UTF-8.
А мы используем CP1251 и возможности, да и желания, перейти на UTF-8 нет.</p></li>

<li><p>Тесты стали выполняться ощутимо быстрее.
Чтобы представлять - числа для сравнения:
В тестовом контейнере с php5.4 тесты выполнялись 4,5 минуты, а в идентичном контейнере с php5.6 выполняются за 3,5 минуты.
Так что налицо ускорение на 22% на <em>реальных</em> задачах.</p></li>
</ol>

<h2>Выводы</h2>

<p>Похоже что, переход на версию 5.6 пройдёт достаточно легко и безболезнено.
Так что ждём выхода нескольких минорных релизов и можно ставить.</p>

    
    <span class="next_blog_post">
    <a href="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb/blog/2015/perehod-na-php7.0/index.html" rel="next">Переход на php7.0 c php5.6</a>
    </span>
	
	
    <span class="prev_blog_post">
    <a href="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb/blog/2014/microtik-951G-2HnD/index.html" rel="previous">Роутер Mikrotik 951G-2HnD</a>
    </span>
	
</article>

        </main>
        <footer>
        Будьте внимательны, многое из того, что написано в этом блоге, является личным мнением автора и не претендует на истину.
        <img src="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb/i/yopiright.jpg" width="12" height="12"/> 2008
        </footer>
    </body>
</html>
