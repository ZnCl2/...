<!DOCTYPE HTML>
<html lang="ru">
    <head>
      <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb</title>
      <link rel="stylesheet" href="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb/css/main.css"/>
      <link rel="shortcut icon" type="image/x-icon" href="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb/i/favicon.ico"/>
      <link href="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb/rss.xml" title="Akademic's blog" type="application/rss+xml" rel="alternate"/>
    </head>
    <body>
        <header><h1><a href="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb" rel="home">akademic.name</a></h1></header>
        <main class="content">
            
<article>
    <h1>Конфигурация ethernet интерфейса из скрипта в openwrt</h1> <time>06.07.2012</time>
	<p>В openwrt есть консольная утилита для управления конфигами.
Управлять можно всем, что находится в /etc/config.
Подозреваю, что можно даже создать свой конфиг-файл.
Но этим займусь позже.</p>

<p>А пока для скрипта автонастройки сети понадобилось добавлять записи в конфиг /etc/config/network</p>

<p>Несколько раз читал документацию по <a href="http://wiki.openwrt.org/doc/uci" title="The UCI System">UCI System</a>, пытаясь создать описание посредством команды uci add или uci add_list, всё бестолку.</p>

<p>Примеры использования утилиты ограничиваются запросами на получение сведений из конфига (uci get, uci show, uci export).
Но с ними как раз всё ясно и так.</p>

<p>В-общем, правильно создавать конфигурацию интерфейса надо так:</p>

<pre><code>    uci set network.wan=interface
    uci set network.wan.ifname=eth0
    uci set network.wan.proto=dhcp
    uci commit
</code></pre>

<p>Создаётся именованый интерфейс с именем &ldquo;wan&rdquo;.
Методом uci add получается создавать только анонимные интерфейсы.</p>

    
    <span class="next_blog_post">
    <a href="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb/blog/2012/smtp-i-microsoft-exchange/index.html" rel="next">smtp и microsoft exchange</a>
    </span>
	
	
    <span class="prev_blog_post">
    <a href="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb/blog/2012/nastrojka-klienta-wifi-v-proshivke-openwrt-na-tp-link-tl-wr703n/index.html" rel="previous">Настройка клиента wifi в прошивке openwrt на tp-link tl-wr703n</a>
    </span>
	
</article>

        </main>
        <footer>
        Будьте внимательны, многое из того, что написано в этом блоге, является личным мнением автора и не претендует на истину.
        <img src="/18Yd2NFggSXzLRvSaDVi936KrM8Ehc3neb/i/yopiright.jpg" width="12" height="12"/> 2008
        </footer>
    </body>
</html>
