<!DOCTYPE html>
<html>
	<head>
		<title>XKCD</title>
		<meta charset="utf-8">
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<base href="" target="_top" id="base">
		<script>base.href = document.location.href.replace("/media", "").replace("index.html", "").replace(/[&?]wrapper=False/, "").replace(/[&?]wrapper_nonce=[A-Za-z0-9]+/, "")</script>
	</head>
	<body>
		<script type="text/javascript" src="js/ZeroFrame.js"></script>
		<script>
			const zf = new ZeroFrame();
			zf.cmd("fileGet", ["content.json"], content => {
				const lastComic = Object.keys(JSON.parse(content).files)
					.map(file => file.match(/^(\d+)\/index\.html$/))
					.filter(match => match)
					.map(match => parseInt(match[1]))
					.reduce((a, b) => Math.max(a, b), 0);
				parent.location.href = `${lastComic}/`;
			});
		</script>
	</body>
</html>