jQuery(document).ready(function(){$('#post_content img').removeAttr('style');$('#post_content img').removeAttr('height');jQuery(".topnav ul li").hover(function(){jQuery(this).children("ul").show();jQuery(this).addClass("li01")},function(){jQuery(this).children("ul").hide();jQuery(this).removeClass("li01")})
jQuery(".menu-button").click(function(){jQuery(".menu-button").toggleClass("active");jQuery(".menu").toggleClass("open");});jQuery("#menu-search").click(function(){jQuery(".menu-search").toggleClass("current_page_item");});jQuery('#tabnav li').click(function(){jQuery(this).addClass("selected").siblings().removeClass();jQuery("#tab-content > ul").eq(jQuery('#tabnav li').index(this)).fadeIn(800).siblings().hide()})
jQuery("a[rel='external'],a[rel='external nofollow']").click(function(){window.open(this.href);return false})
jQuery('.icon1,.icon2,.icon3,.icon4,.icon5,.icon6').wrapInner('<span class="hover"></span>').css('textIndent','0').each(function(){jQuery('span.hover').css('opacity',0).hover(function(){jQuery(this).stop().fadeTo(350,1)},function(){jQuery(this).stop().fadeTo(350,0)})})
$("#searchform .search-s").each(function(){var thisVal=$(this).val();if(thisVal!=""){$(this).siblings("span").hide();}else{$(this).siblings("span").show();}
$(this).focus(function(){$(this).siblings("span").hide();}).blur(function(){var val=$(this).val();if(val!=""){$(this).siblings("span").hide();}else{$(this).siblings("span").show();}});})});function b(){h=$(window).height();t=$(document).scrollTop();if(t>h){$('#gotop').show();}else{$('#gotop').hide();}}
$(document).ready(function(e){b();$('#gotop').click(function(){$(document).scrollTop(0);})});$(window).scroll(function(e){b();})
$(function(){var sWidth=$("#focus").width();var len=$("#focus ul li").length;var index=0;var picTimer;var btn="<div class='button'>";for(var i=0;i<len;i++){btn+="<span></span>";}
btn+="</div><div class='preNext pre'></div><div class='preNext next'></div>";$("#focus").append(btn);$("#focus .btnBg").css("opacity",0.5);$("#focus .button span").css("opacity",0.4).mouseenter(function(){index=$("#focus .button span").index(this);showPics(index);}).eq(0).trigger("mouseenter");$("#focus .preNext").css("opacity",0.2).hover(function(){$(this).stop(true,false).animate({"opacity":"0.5"},300);},function(){$(this).stop(true,false).animate({"opacity":"0.2"},300);});$("#focus .pre").click(function(){index-=1;if(index==-1){index=len- 1;}
showPics(index);});$("#focus .next").click(function(){index+=1;if(index==len){index=0;}
showPics(index);});$("#focus ul").css("width",sWidth*(len));$("#focus").hover(function(){clearInterval(picTimer);},function(){picTimer=setInterval(function(){showPics(index);index++;if(index==len){index=0;}},4000);}).trigger("mouseleave");function showPics(index){var nowLeft=-index*sWidth;$("#focus ul").stop(true,false).animate({"left":nowLeft},300);$("#focus .btn span").stop(true,false).animate({"opacity":"0.4"},300).eq(index).stop(true,false).animate({"opacity":"1"},300);}});SidebarFollow=function(){this.config={element:null,distanceToTop:0};this.cache={originalToTop:0,prevElement:null,parentToTop:0,placeholder:jQuery('<div>')}};SidebarFollow.prototype={init:function(config){this.config=config||this.config;var _self=this;var element=jQuery(_self.config.element);if(element.length<=0){return;}
var prevElement=element.prev();while(prevElement.is(':hidden')){prevElement=prevElement.prev();if(prevElement.length<=0){break;}}
_self.cache.prevElement=prevElement;var parent=element.parent();var parentToTop=parent.offset().top;var parentBorderTop=parent.css('border-top');var parentPaddingTop=parent.css('padding-top');_self.cache.parentToTop=parentToTop+ parentBorderTop+ parentPaddingTop;jQuery(window).scroll(function(){_self._scrollScreen({element:element,_self:_self});});jQuery(window).resize(function(){_self._scrollScreen({element:element,_self:_self});});},_scrollScreen:function(args){var _self=args._self;var element=args.element;var prevElement=_self.cache.prevElement;var toTop=_self.config.distanceToTop;var bodyToTop=parseInt(jQuery('body').css('top'),10);if(!isNaN(bodyToTop)){toTop+=bodyToTop;}
var elementToTop=element.offset().top- toTop;var referenceToTop=0;if(prevElement&&prevElement.length===1){referenceToTop=prevElement.offset().top+ prevElement.outerHeight();}else{referenceToTop=_self.cache.parentToTop- toTop;}
if(jQuery(document).scrollTop()>elementToTop){var elementHeight=element.outerHeight();_self.cache.placeholder.css('height',elementHeight).insertBefore(element);_self.cache.originalToTop=elementToTop;element.css({top:toTop+'px',position:'fixed'});}else if(_self.cache.originalToTop>elementToTop||referenceToTop>elementToTop){_self.cache.placeholder.remove();element.css({position:'static'});}}};(new SidebarFollow()).init({element:jQuery('#sidebar-follow'),distanceToTop:15});$('.comt-addsmilies').click(function(){$('.comt-smilies').toggle();})
$('.comt-smilies a').click(function(){$(this).parent().hide();})
function grin(tag){var myField;tag=' :'+ tag+': ';if(document.getElementById('comment')&&document.getElementById('comment').type=='textarea'){myField=document.getElementById('comment');}else{return false;}
if(document.selection){myField.focus();sel=document.selection.createRange();sel.text=tag;myField.focus();}
else if(myField.selectionStart||myField.selectionStart=='0'){var startPos=myField.selectionStart;var endPos=myField.selectionEnd;var cursorPos=endPos;myField.value=myField.value.substring(0,startPos)
+ tag
+ myField.value.substring(endPos,myField.value.length);cursorPos+=tag.length;myField.focus();myField.selectionStart=cursorPos;myField.selectionEnd=cursorPos;}
else{myField.value+=tag;myField.focus();}}
jQuery.fn.myWords=function(options){var defaults={obj_opts:"textarea",obj_Maxnum:400,obj_Lnum:".comt-num"}
var opts=$.extend(defaults,options);return this.each(function(){var _this=$(this).find(opts.obj_opts);var num=parseInt(opts.obj_Maxnum/2);var _obj_Lnum=$(this).find(opts.obj_Lnum);$(_obj_Lnum).find("em").text(num);if(_this.val()!=""){var len=_this.val().replace(/[^\x00-\xff]/g,"**").length;var _num=num-parseInt(len/2);html="还能输入"+"<em>"+_num+"</em>"+"字";$(_obj_Lnum).html(html);}
_this.focus(function(){var html;$(this).keyup(function(){var lend=$(this).val().replace(/[^\x00-\xff]/g,"**").length;var _num=num-parseInt(lend/2);html="还能输入"+"<em>"+_num+"</em>"+"字";$(_obj_Lnum).html(html);if(lend>opts.obj_Maxnum){html="已经超出"+"<em>"+(-_num)+"</em>"+"字";$(_obj_Lnum).html(html);$(_obj_Lnum).find("em").css("color","#C30");}
else{$(obj_Lnum).find("em").removeAttr("style");}});});});}
$(function(){$(".comt-box").myWords({obj_opts:"textarea",obj_Maxnum:480,obj_Lnum:".comt-num"});})