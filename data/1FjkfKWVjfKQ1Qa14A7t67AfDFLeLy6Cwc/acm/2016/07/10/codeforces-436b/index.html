<!DOCTYPE html>
<html lang="en">
<head>
  <title>CodeForces 436B Om Nom and Spiders - 科学君的不科学博客</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="Liu233w" />
  <meta name="keywords" content="acm" />
  <style>
   #ds-thread #ds-reset .ds-comment-body p {color: #ffffff;}
   #ds-thread #ds-reset .ds-comment-body p a {color: #ff0;}
   #ds-thread #ds-reset .ds-comment-body p a:hover {color: #0ff;}
   #disqus_thread a {color: #00ffff;}
  </style>
  <link rel="stylesheet" href="http://liu233w.github.io/media/css/main.css" type="text/css"/>
  <link rel="stylesheet" href="http://liu233w.github.io/media/css/comment.css" type="text/css"/>
  <link rel="Shortcut Icon" href="https://raw.githubusercontent.com/Liu233w/liu233w.github.io/source/avatar.jpg" type="image/x-icon">
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="http://liu233w.github.io/">科学君的不科学博客</a></h1>
    <p>by 不科学的科学君</p>
    <nav class="site-nav">
      <div class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z" fill="#ffff00"/>
          <path d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z" fill="#ffff00"/>
          <path d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z" fill="#ffff00"/>
        </svg>
      </div>
      <ul class="trigger">
        <li><a href="http://liu233w.github.io/所有文章/">所有文章</a></li>
        <li><a href="http://liu233w.github.io/tags/">按标签索引</a></li>
        <li><a href="http://liu233w.github.io/acm/">Acm</a></li>
        <li><a href="http://liu233w.github.io/blog/">Blog</a></li>
        <li><a href="http://liu233w.github.io/about/">About</a></li>
        <li><a href="https://github.com/liu233w/liu233w.github.io">Github</a></li>
        <li><a href="http://liu233w.github.io/rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="http://www.google.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="liu233w.github.io">
    </form>
    <img id="avatarid" class="avatar" src="https://raw.githubusercontent.com/Liu233w/liu233w.github.io/source/avatar.jpg" />
  </header>
</div>

<div>
<div class="post">
<h1 class="title">CodeForces 436B Om Nom and Spiders</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org2b98a3e">题目：</a></li>
<li><a href="#org8397025">代码：</a></li>
<li><a href="#orge8fcf31">解析&amp;吐槽：</a></li>
</ul>
</div>
</div>

<div id="outline-container-org2b98a3e" class="outline-2">
<h2 id="org2b98a3e">题目：</h2>
<div class="outline-text-2" id="text-org2b98a3e">
<p class="verse">
B. Om Nom and Spiders
time limit per test
3 seconds
memory limit per test
256 megabytes
input
standard input
output
standard output

Om Nom really likes candies and doesn't like spiders as they frequently steal candies. One day Om Nom fancied a walk in a park. Unfortunately, the park has some spiders and Om Nom doesn't want to see them at all.

The park can be represented as a rectangular n × m field. The park has k spiders, each spider at time 0 is at some cell of the field. The spiders move all the time, and each spider always moves in one of the four directions (left, right, down, up). In a unit of time, a spider crawls from his cell to the side-adjacent cell in the corresponding direction. If there is no cell in the given direction, then the spider leaves the park. The spiders do not interfere with each other as they move. Specifically, one cell can have multiple spiders at the same time.

Om Nom isn't yet sure where to start his walk from but he definitely wants:

&#xa0;&#xa0;&#xa0;&#xa0;to start walking at time 0 at an upper row cell of the field (it is guaranteed that the cells in this row do not contain any spiders);
&#xa0;&#xa0;&#xa0;&#xa0;to walk by moving down the field towards the lowest row (the walk ends when Om Nom leaves the boundaries of the park).

We know that Om Nom moves by jumping. One jump takes one time unit and transports the little monster from his cell to either a side-adjacent cell on the lower row or outside the park boundaries.

Each time Om Nom lands in a cell he sees all the spiders that have come to that cell at this moment of time. Om Nom wants to choose the optimal cell to start the walk from. That's why he wonders: for each possible starting cell, how many spiders will he see during the walk if he starts from this cell? Help him and calculate the required value for each possible starting cell.
Input

The first line contains three integers n, m, k (2 ≤ n, m ≤ 2000; 0 ≤ k ≤ m(n - 1)).

Each of the next n lines contains m characters — the description of the park. The characters in the i-th line describe the i-th row of the park field. If the character in the line equals ".", that means that the corresponding cell of the field is empty; otherwise, the character in the line will equal one of the four characters: "L" (meaning that this cell has a spider at time 0, moving left), "R" (a spider moving right), "U" (a spider moving up), "D" (a spider moving down).

It is guaranteed that the first row doesn't contain any spiders. It is guaranteed that the description of the field contains no extra characters. It is guaranteed that at time 0 the field contains exactly k spiders.
Output

Print m integers: the j-th integer must show the number of spiders Om Nom will see if he starts his walk from the j-th cell of the first row. The cells in any row of the field are numbered from left to right.
Examples
Input

3 3 4
...
R.L
R.U

Output

0 2 2

Input

2 2 2
..
RL

Output

1 1

Input

2 2 2
..
LR

Output

0 0

Input

3 4 8
....
RRLL
UUUU

Output

1 3 3 1

Input

2 2 2
..
UU

Output

0 0

Note

Consider the first sample. The notes below show how the spider arrangement changes on the field over time:


...        ...        ..U       ...
R.L   -&gt;   .*U   -&gt;   L.R   -&gt;  ...
R.U        .R.        ..R       ...

Character "*" represents a cell that contains two spiders at the same time.

&#xa0;&#xa0;&#xa0;&#xa0;If Om Nom starts from the first cell of the first row, he won't see any spiders.
&#xa0;&#xa0;&#xa0;&#xa0;If he starts from the second cell, he will see two spiders at time 1.
&#xa0;&#xa0;&#xa0;&#xa0;If he starts from the third cell, he will see two spiders: one at time 1, the other one at time 2.
</p>
</div>
</div>

<div id="outline-container-org8397025" class="outline-2">
<h2 id="org8397025">代码：</h2>
<div class="outline-text-2" id="text-org8397025">
<div class="org-src-container">
<pre class="src src-c++"><span style="color: #586e75;">// </span><span style="color: #586e75;">oj.cpp : &#23450;&#20041;&#25511;&#21046;&#21488;&#24212;&#29992;&#31243;&#24207;&#30340;&#20837;&#21475;&#28857;&#12290;</span>
<span style="color: #586e75;">//</span>
<span style="color: #586e75;">//</span><span style="color: #586e75;">#include &lt;iostream&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">cstdio</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">algorithm</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">sstream</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">string</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">numeric</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">cstring</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">map</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">set</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">utility</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">map</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">list</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">queue</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">functional</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">bitset</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">stack</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">deque</span><span style="color: #2aa198;">&gt;</span>

<span style="color: #859900; font-weight: bold;">using</span> <span style="color: #859900; font-weight: bold;">namespace</span> <span style="color: #268bd2; font-weight: bold;">std</span>;

<span style="color: #b58900;">int</span> <span style="color: #268bd2;">m</span>, <span style="color: #268bd2;">n</span>;

<span style="color: #b58900;">int</span> <span style="color: #268bd2;">k</span>;

<span style="color: #b58900;">int</span> <span style="color: #268bd2;">res</span><span style="color: #2aa198;">[</span><span style="color: #6c71c4;">2005</span><span style="color: #2aa198;">]</span>;

<span style="color: #b58900;">char</span> <span style="color: #268bd2;">str</span><span style="color: #2aa198;">[</span><span style="color: #6c71c4;">2005</span><span style="color: #2aa198;">]</span>;

<span style="color: #b58900;">int</span> <span style="color: #268bd2;">main</span><span style="color: #2aa198;">()</span>
<span style="color: #2aa198;">{</span>
    scanf<span style="color: #b58900;">(</span><span style="color: #2aa198;">"%d %d %d\n"</span>, &amp;n, &amp;m, &amp;k<span style="color: #b58900;">)</span>;

    <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #b58900;">(</span><span style="color: #b58900;">int</span> <span style="color: #268bd2;">r</span> = <span style="color: #6c71c4;">0</span>;r &lt; n;++r<span style="color: #b58900;">)</span>
    <span style="color: #b58900;">{</span>
        scanf<span style="color: #268bd2;">(</span><span style="color: #2aa198;">"%s"</span>, str<span style="color: #268bd2;">)</span>;
        <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #268bd2;">(</span><span style="color: #b58900;">int</span> <span style="color: #268bd2;">c</span> = <span style="color: #6c71c4;">0</span>;c &lt; m;++c<span style="color: #268bd2;">)</span>
        <span style="color: #268bd2;">{</span>
            <span style="color: #b58900;">char</span> <span style="color: #268bd2;">chr</span> = str<span style="color: #6c71c4;">[</span>c<span style="color: #6c71c4;">]</span>;
            <span style="color: #859900; font-weight: bold;">switch</span> <span style="color: #6c71c4;">(</span>chr<span style="color: #6c71c4;">)</span>
            <span style="color: #6c71c4;">{</span>
            <span style="color: #859900; font-weight: bold;">case</span> <span style="color: #2aa198;">'.'</span>:
                <span style="color: #859900; font-weight: bold;">break</span>;
            <span style="color: #859900; font-weight: bold;">case</span> <span style="color: #2aa198;">'L'</span>:
                <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #859900;">(</span>c - r &gt;= <span style="color: #6c71c4;">0</span><span style="color: #859900;">)</span>
                    ++res<span style="color: #859900;">[</span>c - r<span style="color: #859900;">]</span>;
                <span style="color: #859900; font-weight: bold;">break</span>;
            <span style="color: #859900; font-weight: bold;">case</span> <span style="color: #2aa198;">'R'</span>:
                <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #859900;">(</span>c + r &lt; m<span style="color: #859900;">)</span>
                    ++res<span style="color: #859900;">[</span>c + r<span style="color: #859900;">]</span>;
                <span style="color: #859900; font-weight: bold;">break</span>;
            <span style="color: #859900; font-weight: bold;">case</span> <span style="color: #2aa198;">'D'</span>:
                <span style="color: #859900; font-weight: bold;">break</span>;
            <span style="color: #859900; font-weight: bold;">case</span> <span style="color: #2aa198;">'U'</span>:
                <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #859900;">(</span>r % <span style="color: #6c71c4;">2</span>==<span style="color: #6c71c4;">0</span><span style="color: #859900;">)</span>
                    ++res<span style="color: #859900;">[</span>c<span style="color: #859900;">]</span>;
                <span style="color: #859900; font-weight: bold;">break</span>;
            <span style="color: #6c71c4;">}</span>
        <span style="color: #268bd2;">}</span>
    <span style="color: #b58900;">}</span>

    printf<span style="color: #b58900;">(</span><span style="color: #2aa198;">"%d"</span>, res<span style="color: #268bd2;">[</span><span style="color: #6c71c4;">0</span><span style="color: #268bd2;">]</span><span style="color: #b58900;">)</span>;
    <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #b58900;">(</span><span style="color: #b58900;">int</span> <span style="color: #268bd2;">i</span> = <span style="color: #6c71c4;">1</span>;i &lt; m;++i<span style="color: #b58900;">)</span>
        printf<span style="color: #b58900;">(</span><span style="color: #2aa198;">" %d"</span>, res<span style="color: #268bd2;">[</span>i<span style="color: #268bd2;">]</span><span style="color: #b58900;">)</span>;
    printf<span style="color: #b58900;">(</span><span style="color: #2aa198;">"\n"</span><span style="color: #b58900;">)</span>;

    <span style="color: #859900; font-weight: bold;">return</span> <span style="color: #6c71c4;">0</span>;
<span style="color: #2aa198;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge8fcf31" class="outline-2">
<h2 id="orge8fcf31">解析&amp;吐槽：</h2>
<div class="outline-text-2" id="text-orge8fcf31">
<p>
题意如下：一个方形区域中有许多蜘蛛（除了第 0 行之外），每个蜘蛛都会朝某个固定的方向移动。怪物从最上面一行的某个格子开始往下走，单位时间内向下走一格（只能向下，不能向别的方向），同时每个蜘蛛也都向固定的方向移动一格，直到移动出方形区域。一个格子里可以有任意数量的蜘蛛。问如果怪物从第一行的第一格、第二格……第 m 格开始向下移动，总共会遇到多少蜘蛛。每个用例打印出 m 个数，分别表示从某一格开始向下移动时遇到的蜘蛛总数。只有怪物和蜘蛛落到同一个格子里的时候才算是遇到，在移动的时候经过对方不算是碰面。
</p>

<p>
这道题用模拟的方法肯定是会超时的，但是注意到蜘蛛只能朝一个方向移动，哪个格子会遇到蜘蛛是可以用数学方法计算出来的，我们可以只用一个数组记录某一列遇到的蜘蛛总数，扫描一遍整个区域，检测蜘蛛的开始位置和移动方向，然后遇到蜘蛛的次数可以通过如下规律计算出来：
</p>
<dl class="org-dl">
<dt>向下走的蜘蛛</dt><dd>这种情况肯定是不会和怪物碰面的，因为蜘蛛和怪物向下移动的速度一样快。</dd>
<dt>向上走的蜘蛛</dt><dd>这时候需要蜘蛛的所在行数来判断。怪物从第 0 行开始向下移动，蜘蛛如果在偶数行，它和怪物之间就相隔了奇数行，一定会在移动的过程中和怪物碰面，因此把这一列遇到蜘蛛的总数加一；如果在奇数行，蜘蛛和怪物不会在格子中碰面。</dd>
<dt>向右走的蜘蛛</dt><dd>假设蜘蛛目前在第 r 行，第 c 列。如果怪物可以和这个蜘蛛碰面，它一定要向下移动 r 此，同时这个蜘蛛会向右移动 r 次，在第 c+r 列碰面。如果 c+r 没有超过最大列数的话，就把此列遇到的蜘蛛总数加一。</dd>
<dt>向左走的蜘蛛</dt><dd>和上面的情况对称，在第 c-r 列相遇。</dd>
</dl>
</div>
</div>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="发布日期" class="post-info">2016-07-10</span>
            <span title="最后修改日期" class="post-info">2017-02-24</span>
            <span title="标签" class="post-info">:<a href="http://liu233w.github.io/tags/acm">acm</a>:</span>
            <span title="作者" class="post-info"><a href="mailto:wwwlsmcom &lt;at&gt; outlook &lt;dot&gt; com">Liu233w</a></span>
        </div>
    <script src="http://liu233w.github.io/media/js/jquery-2.1.3.min.js"></script>
        <section>
            <h1>Comments</h1>
            <div id="comment-wrap">
                    <a class="disqus_label">使用 Disqus 评论</a>
                    <a class="ds-label">使用多说评论</a>
    </ul>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
         //var disqus_developer = 1;
         var preempt_signal=false;
         var disqus_identifier = "/acm/2016/07/10/codeforces-436b/";
         var disqus_url = "http://liu233w.github.io/acm/2016/07/10/codeforces-436b/";
         var disqus_shortname = 'liu233w';
         /* * * DON'T EDIT BELOW THIS LINE * * */
         (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
             $('#disqus_thread').css('display','none');
         })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <div class="ds-thread"></div>
        <script type="text/javascript">
         var duoshuoQuery = {short_name:'liu233w'};
         (function() {
             var ds = document.createElement('script');
             ds.type = 'text/javascript';ds.async = true;
             ds.src = 'http://static.duoshuo.com/embed.js';
             ds.charset = 'UTF-8';
             (document.getElementsByTagName('head')[0]
           || document.getElementsByTagName('body')[0]).appendChild(ds);
             $('.ds-thread').css('display','block');
         })();
        </script>
    <script>
     /* comments */
     var ego_disqus_thread=$('#disqus_thread');
     var ego_ds_label=$('.ds-thread');
     $('.disqus_label').click(function(){
         ego_disqus_thread.show();
         ego_ds_label.hide();
     });
     $('.ds-label').click(function(){
         ego_disqus_thread.hide();
         ego_ds_label.show();
     });
    </script>
        </section>
    <script src="http://liu233w.github.io/media/js/main.js"></script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:wwwlsmcom &lt;at&gt; outlook &lt;dot&gt; com">Liu233w</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div></body>
</html>
