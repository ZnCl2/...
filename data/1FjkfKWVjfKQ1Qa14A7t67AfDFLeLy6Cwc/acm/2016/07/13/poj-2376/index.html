<!DOCTYPE html>
<html lang="en">
<head>
  <title>poj-2376 Cleaning Shifts - 科学君的不科学博客</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="Liu233w" />
  <meta name="keywords" content="acm" />
  <style>
   #ds-thread #ds-reset .ds-comment-body p {color: #ffffff;}
   #ds-thread #ds-reset .ds-comment-body p a {color: #ff0;}
   #ds-thread #ds-reset .ds-comment-body p a:hover {color: #0ff;}
   #disqus_thread a {color: #00ffff;}
  </style>
  <link rel="stylesheet" href="http://liu233w.github.io/media/css/main.css" type="text/css"/>
  <link rel="stylesheet" href="http://liu233w.github.io/media/css/comment.css" type="text/css"/>
  <link rel="Shortcut Icon" href="https://raw.githubusercontent.com/Liu233w/liu233w.github.io/source/avatar.jpg" type="image/x-icon">
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="http://liu233w.github.io/">科学君的不科学博客</a></h1>
    <p>by 不科学的科学君</p>
    <nav class="site-nav">
      <div class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z" fill="#ffff00"/>
          <path d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z" fill="#ffff00"/>
          <path d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z" fill="#ffff00"/>
        </svg>
      </div>
      <ul class="trigger">
        <li><a href="http://liu233w.github.io/所有文章/">所有文章</a></li>
        <li><a href="http://liu233w.github.io/tags/">按标签索引</a></li>
        <li><a href="http://liu233w.github.io/acm/">Acm</a></li>
        <li><a href="http://liu233w.github.io/blog/">Blog</a></li>
        <li><a href="http://liu233w.github.io/about/">About</a></li>
        <li><a href="https://github.com/liu233w/liu233w.github.io">Github</a></li>
        <li><a href="http://liu233w.github.io/rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="http://www.google.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="liu233w.github.io">
    </form>
    <img id="avatarid" class="avatar" src="https://raw.githubusercontent.com/Liu233w/liu233w.github.io/source/avatar.jpg" />
  </header>
</div>

<div>
<div class="post">
<h1 class="title">poj-2376 Cleaning Shifts</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org4a04131">题目：</a></li>
<li><a href="#orgebec4e2">代码：</a></li>
<li><a href="#orgbb3aec9">解析&amp;吐槽：</a></li>
</ul>
</div>
</div>

<div id="outline-container-org4a04131" class="outline-2">
<h2 id="org4a04131">题目：</h2>
<div class="outline-text-2" id="text-org4a04131">
<p class="verse">
Cleaning Shifts
Time Limit: 1000MS		Memory Limit: 65536K
Total Submissions: 17287		Accepted: 4403

Description
Farmer John is assigning some of his N (1 &lt;= N &lt;= 25,000) cows to do some cleaning chores around the barn. He always wants to have one cow working on cleaning things up and has divided the day into T shifts (1 &lt;= T &lt;= 1,000,000), the first being shift 1 and the last being shift T.

Each cow is only available at some interval of times during the day for work on cleaning. Any cow that is selected for cleaning duty will work for the entirety of her interval.

Your job is to help Farmer John assign some cows to shifts so that (i) every shift has at least one cow assigned to it, and (ii) as few cows as possible are involved in cleaning. If it is not possible to assign a cow to each shift, print -1.

Input
\* Line 1: Two space-separated integers: N and T

\* Lines 2..N+1: Each line contains the start and end times of the interval during which a cow can work. A cow starts work at the start time and finishes after the end time.

Output
\* Line 1: The minimum number of cows Farmer John needs to hire or -1 if it is not possible to assign a cow to each shift.

Sample Input

3 10
1 7
3 6
6 10

Sample Output

2

Hint
This problem has huge input data,use scanf() instead of cin to read data to avoid time limit exceed.

INPUT DETAILS:

There are 3 cows and 10 shifts. Cow #1 can work shifts 1..7, cow #2 can work shifts 3..6, and cow #3 can work shifts 6..10.

OUTPUT DETAILS:

By selecting cows #1 and #3, all shifts are covered. There is no way to cover all the shifts using fewer than 2 cows.
</p>
</div>
</div>

<div id="outline-container-orgebec4e2" class="outline-2">
<h2 id="orgebec4e2">代码：</h2>
<div class="outline-text-2" id="text-orgebec4e2">
<div class="org-src-container">
<pre class="src src-c++"><span style="color: #586e75;">// </span><span style="color: #586e75;">oj.cpp : &#23450;&#20041;&#25511;&#21046;&#21488;&#24212;&#29992;&#31243;&#24207;&#30340;&#20837;&#21475;&#28857;&#12290;</span>
<span style="color: #586e75;">//</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">iostream</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">iomanip</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">algorithm</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">sstream</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">string</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">numeric</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">cstring</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">map</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">set</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">utility</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">map</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">list</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">queue</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">functional</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">bitset</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">stack</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">deque</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">limits</span><span style="color: #2aa198;">&gt;</span>
<span style="color: #268bd2;">#include</span> <span style="color: #2aa198;">&lt;</span><span style="color: #2aa198;">cmath</span><span style="color: #2aa198;">&gt;</span>

<span style="color: #859900; font-weight: bold;">using</span> <span style="color: #859900; font-weight: bold;">namespace</span> <span style="color: #268bd2; font-weight: bold;">std</span>;

<span style="color: #859900; font-weight: bold;">typedef</span> <span style="color: #b58900;">pair</span><span style="color: #2aa198;">&lt;</span><span style="color: #b58900;">int</span>, <span style="color: #b58900;">int</span><span style="color: #2aa198;">&gt;</span> <span style="color: #b58900;">P</span>;
<span style="color: #b58900;">P</span> <span style="color: #268bd2;">L</span><span style="color: #2aa198;">[</span><span style="color: #6c71c4;">25010</span><span style="color: #2aa198;">]</span>;
<span style="color: #b58900;">bool</span> <span style="color: #268bd2;">cmp</span><span style="color: #2aa198;">(</span><span style="color: #859900; font-weight: bold;">const</span> <span style="color: #b58900;">P</span>&amp; <span style="color: #268bd2;">l</span>, <span style="color: #859900; font-weight: bold;">const</span> <span style="color: #b58900;">P</span>&amp; <span style="color: #268bd2;">r</span><span style="color: #2aa198;">)</span>
<span style="color: #2aa198;">{</span>
    <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #b58900;">(</span>l.first == r.first<span style="color: #b58900;">)</span>
        <span style="color: #859900; font-weight: bold;">return</span> l.second &gt; r.second;
    <span style="color: #859900; font-weight: bold;">else</span>
        <span style="color: #859900; font-weight: bold;">return</span> l.first &lt; r.first;
<span style="color: #2aa198;">}</span>

<span style="color: #b58900;">int</span> <span style="color: #268bd2;">main</span><span style="color: #2aa198;">()</span>
<span style="color: #2aa198;">{</span>
    <span style="color: #268bd2; font-weight: bold;">ios</span>::sync_with_stdio<span style="color: #b58900;">(</span><span style="color: #268bd2; font-weight: bold;">false</span><span style="color: #b58900;">)</span>;
    cin.tie<span style="color: #b58900;">(</span><span style="color: #268bd2; font-weight: bold;">NULL</span><span style="color: #b58900;">)</span>;

    <span style="color: #b58900;">int</span> <span style="color: #268bd2;">N</span>, <span style="color: #268bd2;">T</span>;
    <span style="color: #859900; font-weight: bold;">while</span> <span style="color: #b58900;">(</span>cin &gt;&gt; N &gt;&gt; T<span style="color: #b58900;">)</span>
    <span style="color: #b58900;">{</span>
        <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #268bd2;">(</span><span style="color: #b58900;">int</span> <span style="color: #268bd2;">i</span> = <span style="color: #6c71c4;">0</span>;i &lt; N;++i<span style="color: #268bd2;">)</span>
        <span style="color: #268bd2;">{</span>
            cin &gt;&gt; L<span style="color: #6c71c4;">[</span>i<span style="color: #6c71c4;">]</span>.first &gt;&gt; L<span style="color: #6c71c4;">[</span>i<span style="color: #6c71c4;">]</span>.second;
            <span style="color: #586e75;">//</span><span style="color: #586e75;">if (L[i].first &gt; L[i].second)</span>
            <span style="color: #586e75;">//  </span><span style="color: #586e75;">swap(L[i].first, L[i].second);</span>
        <span style="color: #268bd2;">}</span>

        sort<span style="color: #268bd2;">(</span>L, L + N<span style="color: #586e75;">/*</span><span style="color: #586e75;">, cmp*/</span><span style="color: #268bd2;">)</span>;

        <span style="color: #b58900;">int</span> <span style="color: #268bd2;">cnt</span> = <span style="color: #6c71c4;">1</span>;
        <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #268bd2;">(</span>L<span style="color: #6c71c4;">[</span><span style="color: #6c71c4;">0</span><span style="color: #6c71c4;">]</span>.first &gt; <span style="color: #6c71c4;">1</span><span style="color: #268bd2;">)</span>
        <span style="color: #268bd2;">{</span>
            cnt = -<span style="color: #6c71c4;">1</span>;
        <span style="color: #268bd2;">}</span>
        <span style="color: #859900; font-weight: bold;">else</span>
        <span style="color: #268bd2;">{</span>
            <span style="color: #b58900;">int</span> <span style="color: #268bd2;">start</span> = <span style="color: #6c71c4;">1</span>;
            <span style="color: #b58900;">int</span> <span style="color: #268bd2;">end</span> = L<span style="color: #6c71c4;">[</span><span style="color: #6c71c4;">0</span><span style="color: #6c71c4;">]</span>.second;
            <span style="color: #b58900;">int</span> <span style="color: #268bd2;">i</span> = <span style="color: #6c71c4;">1</span>;

            <span style="color: #859900; font-weight: bold;">while</span> <span style="color: #6c71c4;">(</span>end &lt; T<span style="color: #6c71c4;">)</span>
            <span style="color: #6c71c4;">{</span>
                <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #859900;">(</span>i &gt;= N<span style="color: #859900;">)</span>
                <span style="color: #859900;">{</span>
                    cnt = -<span style="color: #6c71c4;">1</span>;
                    <span style="color: #859900; font-weight: bold;">break</span>;
                <span style="color: #859900;">}</span>

                <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #859900;">(</span>L<span style="color: #b58900;">[</span>i<span style="color: #b58900;">]</span>.second &lt;= end<span style="color: #859900;">)</span>
                <span style="color: #859900;">{</span>
                    ++i;
                    <span style="color: #859900; font-weight: bold;">continue</span>;
                <span style="color: #859900;">}</span>

                <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #859900;">(</span>L<span style="color: #b58900;">[</span>i<span style="color: #b58900;">]</span>.first &lt;= start&amp;&amp;L<span style="color: #b58900;">[</span>i<span style="color: #b58900;">]</span>.second &gt; end<span style="color: #859900;">)</span>
                <span style="color: #859900;">{</span>
                    end = L<span style="color: #b58900;">[</span>i<span style="color: #b58900;">]</span>.second;
                    ++i;
                    <span style="color: #859900; font-weight: bold;">continue</span>;
                <span style="color: #859900;">}</span>

                <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #859900;">(</span>L<span style="color: #b58900;">[</span>i<span style="color: #b58900;">]</span>.first &gt; end + <span style="color: #6c71c4;">1</span><span style="color: #859900;">)</span>
                <span style="color: #859900;">{</span>
                    cnt = -<span style="color: #6c71c4;">1</span>;
                    <span style="color: #859900; font-weight: bold;">break</span>;
                <span style="color: #859900;">}</span>

                ++cnt;
                start = end + <span style="color: #6c71c4;">1</span>;
                end = L<span style="color: #859900;">[</span>i<span style="color: #859900;">]</span>.second;
                ++i;
            <span style="color: #6c71c4;">}</span>
        <span style="color: #268bd2;">}</span>

        cout &lt;&lt; cnt &lt;&lt; endl;
    <span style="color: #b58900;">}</span>
<span style="color: #2aa198;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbb3aec9" class="outline-2">
<h2 id="orgbb3aec9">解析&amp;吐槽：</h2>
<div class="outline-text-2" id="text-orgbb3aec9">
<p>
每一个节点都可以覆盖某个区间，选出最少的节点来覆盖指定的区间。明显的贪婪算法，但是有不少坑点。
</p>

<p>
首先，尽管题目没说，但是题目是有多组数据的！其次，如果上一个节点覆盖的区间是 i-j，下一个节点覆盖的区间可以从 j+1 开始。最后，要覆盖的区间是从 1 开始，到 T 结束的。
</p>

<p>
在做题的时候也要注意几方面：题目可能会有无法覆盖整个区间的情况（无解），对于排过序的区间数据，如果第一个数据的区间左端点大于 1 或者最后一个数据的右端点小于 T；就无解，如果遍历的时候不是以数据的索引作为循环变量的话，一定要注意判断是否达到的最后一个数据。还要注意如果贪心策略是选择左端点不大于上一个选择的右端点（加一）的长度最大的区间，我的方法是如果判断下一个数据比上一个更好的话，就更新记录的右端点，不自增计数。这样的话，排序的时候只需要考虑左端点，右端点不用管。我这里用
pair 来保存数据，它的比较函数会先比较 first 元素，在相等时再比较 second。我写的那个比较函数实际上是用不到的。还有我看到有很多题解都会考虑输入数据中第一个比第二个大的情况，实测这个是不需要判断的，我注释掉了那段代码仍然可以 ac（见第 45 行）。
</p>
</div>
</div>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="发布日期" class="post-info">2016-07-13</span>
            <span title="最后修改日期" class="post-info">2017-02-24</span>
            <span title="标签" class="post-info">:<a href="http://liu233w.github.io/tags/acm">acm</a>:</span>
            <span title="作者" class="post-info"><a href="mailto:wwwlsmcom &lt;at&gt; outlook &lt;dot&gt; com">Liu233w</a></span>
        </div>
    <script src="http://liu233w.github.io/media/js/jquery-2.1.3.min.js"></script>
        <section>
            <h1>Comments</h1>
            <div id="comment-wrap">
                    <a class="disqus_label">使用 Disqus 评论</a>
                    <a class="ds-label">使用多说评论</a>
    </ul>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
         //var disqus_developer = 1;
         var preempt_signal=false;
         var disqus_identifier = "/acm/2016/07/13/poj-2376/";
         var disqus_url = "http://liu233w.github.io/acm/2016/07/13/poj-2376/";
         var disqus_shortname = 'liu233w';
         /* * * DON'T EDIT BELOW THIS LINE * * */
         (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
             $('#disqus_thread').css('display','none');
         })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <div class="ds-thread"></div>
        <script type="text/javascript">
         var duoshuoQuery = {short_name:'liu233w'};
         (function() {
             var ds = document.createElement('script');
             ds.type = 'text/javascript';ds.async = true;
             ds.src = 'http://static.duoshuo.com/embed.js';
             ds.charset = 'UTF-8';
             (document.getElementsByTagName('head')[0]
           || document.getElementsByTagName('body')[0]).appendChild(ds);
             $('.ds-thread').css('display','block');
         })();
        </script>
    <script>
     /* comments */
     var ego_disqus_thread=$('#disqus_thread');
     var ego_ds_label=$('.ds-thread');
     $('.disqus_label').click(function(){
         ego_disqus_thread.show();
         ego_ds_label.hide();
     });
     $('.ds-label').click(function(){
         ego_disqus_thread.hide();
         ego_ds_label.show();
     });
    </script>
        </section>
    <script src="http://liu233w.github.io/media/js/main.js"></script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:wwwlsmcom &lt;at&gt; outlook &lt;dot&gt; com">Liu233w</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div></body>
</html>
