{
	"title": "Huawei internals",
	"description": "Blog about Huawei LTE portable routers/USB dongles/MiFi hardware and software internals",
	"links": "[Huawei firmware links](/1HegcCNqxTuhPaHmjZwPGZ9LY34vXD6H1V/?Post:2:Huawei+firmware+links)\n[Huawei Balong series](/1HegcCNqxTuhPaHmjZwPGZ9LY34vXD6H1V/?Post:3:Huawei+Balong+series)",
	"next_post_id": 10,
	"demo": false,
	"modified": 1569395375,
	"post": [
		{
			"post_id": 9,
			"title": "How to flash any firmware without flash/datalock code on Balong V7R11",
			"date_published": 1567972060.369,
			"body": "If you have Huawei E5770, E3372h, E5573, E5577 with newer firmware versions which you don't know Flash Code/Datalock for, you can trick flashing software on the modem to skip Flash/Datalock code requirement by changing firmware version of the file you want to flash to the current firmware version installed on the device.\n\nFlashing software on the router would think that you're trying to install the same firmware version, and will skip some sanity and security checks.\n\nTo do this, you'll need:\n\n*   [qhuaweiflash](https://github.com/forth32/qhuaweiflash) by Forth32\n\n*   [make_pkg_secure_1.3 with leaked Huawei keys](https://4pda.ru/forum/index.php?s=&showtopic=744265&view=findpost&p=62139559)\n\nOpen your firmware file in qhuaweiflash, change firmware version of the first firmware partition (usually it is _ptable_, but could be _fastboot_ in some cases).\n\nThe next step is to re-sign the firmware.\nFirst, remove the original signature by executing \"sign\" program with \"-r\" flag.\nSecond, sign it like this:\n\n`sign -s E5770s_DOWNGRADE_o2_21.318.01.01.1217_to_21.180.99.10.00_signed.fw_r E5770s_DOWNGRADE_o2_21.318.01.01.1217_to_21.180.99.10.00_signed.fw_s private.key public.key -sv 1.3`\n\nWhere 5770s_DOWNGRADE_o2_21.318.01.01.1217_to_21.180.99.10.00_signed.fw_r — firmware without the signature (after sign -r), and  E5770s_DOWNGRADE_o2_21.318.01.01.1217_to_21.180.99.10.00_signed.fw_s — output file, ready to be flashed to the device."
		},
		{
			"post_id": 8,
			"title": "E5770 downgrade to technological 21.180.99.10.00",
			"date_published": 1557579703.65,
			"body": "This special firmware allows installing technological firmware on firmware versions mentioned in the title, without entering OEM code (AT^DATALOCK), and without using test-point (needle method).\n\nTechnological firmware allows installing any other firmware (even with incorrect or corrupted signature), without any restrictions.\n\n**WARNING:**If you flash this firmware, you won't be able to revert your old firmware version because there's no official firmware files of these version available in public access. You can install any other firmware though.\n\n* * *\n\n→ [E5770s_DOWNGRADE_21.318.01.02.07_to_21.180.99.10.00](data/files/e5770/E5770s_DOWNGRADE_21.318.01.02.07_to_21.180.99.10.00_signed.7z) ←\n→ [E5770s_DOWNGRADE_21.327.01.00.1133_to_21.180.99.10.00](data/files/e5770/E5770s_DOWNGRADE_21.327.01.00.1133_to_21.180.99.10.00_signed.fw.7z) ←\n→ [E5770s_DOWNGRADE_21.200.19.01.405_to_21.180.99.10.00](data/files/e5770/E5770s_DOWNGRADE_21.200.19.01.405_to_21.180.99.10.00_signed.7z) ←\n→ [E5770s_DOWNGRADE_21.318.01.00.00_to_21.180.99.10.00](/1HegcCNqxTuhPaHmjZwPGZ9LY34vXD6H1V/data/files/e5770/E5770s_DOWNGRADE_21.318.01.00.00_to_21.180.99.10.00_signed.7z) ←"
		},
		{
			"post_id": 7,
			"title": "E5770 O2 FW version 21.200.19.01.405 SIM unlock",
			"date_published": 1552729779.724,
			"body": "Huawei E5770 from British O2 network could be unlocked for free with a special firmware, without disassembling the device.\n\nThis firmware is based on 21.200.19.01.405 version and could be installed without flash code.\n\n* * *\n\nE5770s_Update_21.200.19.01.405_o2_simunlock_signed.7z\n\n→ [Download](data/files/e5770/E5770s_Update_21.200.19.01.405_o2_simunlock_signed.7z) ←\n\nIf you want to install another official firmware or a custom firmware, you need to downgrade 21.200.19.01.405 to a special technological firmware version 21.180.99.10.00, which does not check firmware digital signatures.\n\nE5770s_DOWNGRADE_o2_21.200.19.01.405_to_21.180.99.10.00_signed.7z\n\n→ [Download](data/files/e5770/E5770s_DOWNGRADE_o2_21.200.19.01.405_to_21.180.99.10.00_signed.7z) ←\n\nTo install the firmware, press both RESET button (on the back of the device) and POWER button, connect it to the PC and use balongflash software ([Windows](https://github.com/forth32/balongflash/tree/master/winbuild/Release), [Linux](https://github.com/forth32/balongflash))"
		},
		{
			"post_id": 6,
			"title": "E5770 custom firmware v2.3.1",
			"date_published": 1547902019.263,
			"body": "**Custom 21.329.01.00.00 firmware and 17.100.19.01.00 web interface for E5770**\n\n![1-fs8.png (128x64)](data/img/post_6_1-fs8.png) ![2-fs8.png (128x64)](data/img/post_6_2-fs8.png) ![3-fs8.png (128x64)](data/img/post_6_3-fs8.png) ![4-fs8.png (128x64)](data/img/post_6_4-fs8.png) ![5-fs8.png (128x64)](data/img/post_6_5-fs8.png)\n\n→ [Download](data/files/e5770/E5770s_UPDATE_21.329.01.00.00_mod2.3.1_WEBUI_17.100.19.01.00_MRE5_mod2.3.1.7z) ←\n\nThe firmware is based on the original global firmware version 21.329.01.00.00\\. It can be installed on any technological firmware, or updated from a modified firmware.\n\n* * *\n\nFlash using balongflash ([Windows](https://github.com/forth32/balongflash/tree/master/winbuild/Release), [Linux](https://github.com/forth32/balongflash/)).\n\n### Attention!\n\nThis firmware can render your device unbootable! Use it only if you are aware of all the risks and consequences. In case of any problems, do not wait for help, you're on your own. Do not install firmware by non-tech-savvy people request, and do not sell routers with this firmware preinstalled.\n\nChanges:\n\n*   Firmware digital signature verification in the firmware server is disabled*\n*   Added support for IPv6 on mobile networks (disabled by default, could be activated \"ipv6\" script)**\n*   ADB installed and Telnet activated (disabled by default, controlled from the OLED menu)\n*   The stock versions of busybox, iptables and ip6tables programs are replaced with full-fledged ones _*_\n*   The \"atc\" utility is installed to send AT commands from the console\n*   Installed \"ttl\" script for modifying (fixing) TTL (for IPv4) and HL (for IPv6)\n*   Installed \"imei\" script to change IMEI\n*   A local transparent proxy server \"tpws\" and a script \"anticensorship\" are installed to circumvent censorship to sites from the registry of prohibited sites in Russian Federation (IPv4 only)\n*   Added DNS over TLS resolver stubby (version 1.5.1, compiled with OpenSSL 1.0.2p) and DNS-level adblock (IPv4 only)\n*   Added [extended menu on OLED screen](https://github.com/ValdikSS/huawei_oled_hijack)\n\n*   Added RNDIS and ECM Ethernet switching functionality without a switch program on a computer\n\n*   All NVRAM items are unlocked\n\n*   AT^DATALOCK code is disabled\n\n*   Added kernel module TUN/TAP (for OpenVPN and other programs)\n\n*   Added OpenVPN (version 2.4.6, compiled with OpenSSL 1.0.2p) and scripts for DNS redirection\n\n*   Added curl (version 7.63.0, compiled with OpenSSL 1.0.2p)\n\n*   Added EXT4 kernel module and swap support\n*   Added script for installing Entware application repository\n*   Added script \"adblock_update\", for updating the list of advertising domains\n*   Added script to change MAC address of Wi-Fi in Extender mode (script \"wifiext_mac\") and USB MAC addresses (script \"usb_mac\")\n*   Removed mobile connection logging (mobile logger) to extend flash memory lifetime\n*   Multilingual web interface with GSM/UMTS/LTE band selection menu"
		},
		{
			"post_id": 5,
			"title": "E5372 custom firmware v1.5",
			"date_published": 1547901128.214,
			"body": "**Custom 21.290.23.00.00 firmware and 17.100.19.01.00 web interface for E5372**\n\n![4278-fs8.png (128x128)](data/img/post_5_4278-fs8.png) ![3029-fs8.png (128x128)](data/img/post_5_3029-fs8.png) ![13469-fs8.png (128x128)](data/img/post_5_13469-fs8.png) ![16988-fs8.png (128x128)](data/img/post_5_16988-fs8.png) ![14158-fs8.png (128x128)](data/img/post_5_14158-fs8.png)\n\n→ [Download](data/files/e5372/E5372_Update_21.290.23.00.00_webui_17.100.19.01.00_mod1.5.7z) ←\n\nThe firmware is based on the original global firmware version 21.290.23.00.00\\. It can be installed on any previous firmware (unless you have locked bootloader), or updated from a modified firmware.\n\n* * *\n\nFlash using balongflash ([Windows](https://github.com/forth32/balongflash/tree/master/winbuild/Release), [Linux](https://github.com/forth32/balongflash/)).\n\n### Attention!\n\nThis firmware can render your device unbootable! Use it only if you are aware of all the risks and consequences. In case of any problems, do not wait for help, you're on your own. Do not install firmware by non-tech-savvy people request, and do not sell routers with this firmware preinstalled.\n\nChanges:\n\n*   Firmware digital signature verification in the firmware server is disabled*\n\n*   Added support for IPv6 on mobile networks (disabled by default, could be activated \"ipv6\" script)**\n\n*   ADB installed and Telnet activated (disabled by default, controlled from the OLED menu)\n\n*   The stock versions of busybox, iptables and ip6tables programs are replaced with full-fledged ones _*_\n\n*   The \"atc\" utility is installed to send AT commands from the console\n\n*   Installed \"ttl\" script for modifying (fixing) TTL (for IPv4) and HL (for IPv6)\n\n*   Installed \"imei\" script to change IMEI\n\n*   A local transparent proxy server \"tpws\" and a script \"anticensorship\" are installed to circumvent censorship to sites from the registry of prohibited sites in Russian Federation (IPv4 only)\n\n*   Added DNS over TLS resolver stubby (version 1.5.1, compiled with OpenSSL 1.0.2p) and DNS-level adblock (IPv4 only)\n\n*   Added extended menu on OLED screen [https://github.com/ValdikSS/huawei_oled_hijack](https://github.com/ValdikSS/huawei_oled_hijack)\n\n*   AT^DATALOCK code is disabled\n\n*   Added kernel module TUN/TAP (for OpenVPN and other programs)\n\n*   Added OpenVPN (version 2.4.6, compiled with OpenSSL 1.0.2p) and scripts for DNS redirection\n\n*   Added curl (version 7.63.0, compiled with OpenSSL 1.0.2p)\n\n*   Added EXT4 kernel module and swap support\n\n*   Added script for installing Entware application repository\n\n*   Added script \"adblock_update\", for updating the list of advertising domains\n\n*   Multilingual web interface with GSM/UMTS/LTE band selection menu"
		},
		{
			"post_id": 4,
			"title": "Pros and cons of Huawei devices",
			"date_published": 1543752574.738,
			"body": "Huawei produces high quality hardware with their own sensitive radio and Wi-Fi modules, but they don't care about end users, you will get absolutely no support from Huawei. For example, E5885 router has broken USB networking in Linux; contacting support 5 times during the year did not help the problem, you'll be asked for your device IMEI and serial number once and won't receive further replies for update requests. In case of any problems, you're on your own.\n\n* * *\n\nPros for general consumers:\n\n*   Huawei LTE devices are easy to use, fast and stable\n\n*   High radio sensitivity\n\n*   Over the air automatic/manual firmware updates\n\nCons for general consumers:\n\n*   Huawei is not oriented for retail, most models are hard to buy or available only in China\n\n*   No support from the manufacturer in case of any problems\n\n*   No USSD commands support in stock web interface, unable to get balance and other information if operator use only USSD interface\n\n*   Missing models and model specifications on Huawei website\n\n*   Some models are pricey\n\nHuawei does not publish firmware files for the devices, and even if you have one, you can't flash it right away anyway: firmware installation process require special flash code which you can obtain from Huawei (but see first paragraph), buy online from websites with access to Huawei mobile operator area, or for older devices, generate it using code generator which was made by reverse engineering kernel code. Firmware files are signed with cryptographic signature.\n\nHuawei also could not care less about Open Souce. The company publish broken source code archives on their website which either do not compile or run on the device, only to mimic GPL compliance. No instructions to run your own compiled source code are provided, that's impossible to do without third-party utilities made by reverse engineering of the bootloader and other system components.\nGPL is blatantly violated: some closed source Huawei utilities are based on widespread utilities, for example `libwl.so` library is based on `iw` utility source code, even `main()` function is still in there.\n\nPros for firmware hackers and power users:\n\n*   IMEI can be changed to circumvent some operators tethering limitations\n\n*   Linux, VxWorks and M3 consoles are accessible on most devices\n\n*   Linux userspace mostly uses well-known utilities, techniques and protocols\n\n*   Lots of debugging printf's in userspace and kernelspace\n\n*   TUN/TAP, EXT4 and other modules could be compiled from Huawei kernel source code\n\n*   Firmware could be modified and rebuilt\n\nCons for firmware hackers and power users:\n\n*   Lots of security features designed to protect against unauthorized modification need to be circumvented\n\n*   Broken kernel sources won't allow you to compile custom kernel and run it\n\n*   Some models have Secure Boot enabled which block unauthorized kernels and usbloaders and other region firmwares"
		},
		{
			"post_id": 3,
			"title": "Huawei Balong series",
			"date_published": 1543700815.753,
			"body": "Huawei Balong is a series of custom System-on-Chip used in all Huawei LTE routers and USB sticks, except for some selected models with Qualcomm Snapdragon targeted for USA market. This is a custom silicon with 3 ARMv7 cores for Linux, VxWorks and M3 Monitor, and ConnX BBE16 DSP for baseband. Several models include additional HiFi audio DSP core for audio communications.\n\nCurrent generation is **Balong Hi6932 V7R22** (all models are LTE cat. 6).\nThese models have **256 MB RAM** (128 MB available for Linux, 80 MB free) and **256 MB NAND**. Routers use **Hi1151 Huawei** or **Broadcom BCM4356** Wi-Fi chipset.\nV7R22 devices run Linux 3.10.59 kernel with Android modifications. ARMv7 cores has vfpv4 and NEON floating point operation support.\n\n| Model | Type | Display | LTE cat. | Wi-Fi | Battery | Ext. Antenna | LAN port (RJ45) |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n| [E5785](https://consumer.huawei.com/uk/smart-home/e5785l/) | Router | 128×64 OLED | Cat. 6 | 802.11ac 2.4/5 GHz | 3000 mAh, removable | + | + |\n| [E5885](https://consumer.huawei.com/uk/smart-home/e5885/) | Router | 128×64 OLED | Cat. 6 | 802.11ac 2.4/5 GHz | 6400 mAh, non-removable | + | + |\n\nPrevious generation is **Balong Hi6921 V7R11** (all models are LTE cat. 4).\nV7R11 models have **128 MB RAM** (41 MB is available for Linux, 14 MB free) and **128 MB NAND** flash. Routers use either **Realtek RTL8192ES** (2.4 GHz) or **Broadcom BCM43241** (2.4/5 GHz) Wi-Fi chipset.\nV7R11 devices run Linux 3.4.5 kernel with Android modifications. ARMv7 cores support vfpv3d16 floating point operations.\n\n| Model | Type | Display | LTE cat. | Wi-Fi | Battery | Ext. Antenna | LAN port (RJ45) |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n| [E3372h](https://consumer.huawei.com/en/mobile-broadband/e3372/) | USB stick | - | 4 | - | - | + | - |\n| [E5573*](https://consumer.huawei.com/uk/smart-home/e5573c/) | Router | - | 4 | 2.4 GHz or 2.4/5 GHz | 1500 mAh | ± (missing on some modifications) | - |\n| [E5575](https://www.4gltemall.com/huawei-e5575-pocketcube-wifi-modem.html) | Router with wall plug | - | 4 | 2.4 GHz | 1500 mAh | - | - |\n| [E5577](https://www.4gltemall.com/huawei-e5577-4g-lte-cat4-mobile-hotspot.html) | Router | 128×128 OLED | 4 | 2.4/5 GHz | 1500/3000 mAh | + | - |\n| [E5578](https://www.4gltemall.com/huawei-e5578-4g-lte-cat4-mobile-hotspot.html) | Router | 128×64 OLED | 4 | 2.4 GHz | 1900 mAh | - | - |\n| [E5771](https://consumer.huawei.com/en/mobile-broadband/e5771/) | Router | - | 4 | 2.4 GHz | 9600 mAh | - | - |\n| [E8372](https://consumer.huawei.com/en/mobile-broadband/e8372/) | USB Stick | - | 4 | 2.4 GHz | - | + | - |\n| [E8378](https://www.4gltemall.com/webcube4-huawei-e8378-4g-wifi-router.html) | Router with wall plug | - | 4 | 2.4 GHz | - | - | - |\n\n_*_ There are different modifications of this router: E5573s, E5573Cs, E5573Bs, which differs in hardware.\n\n**Balong Hi6930 V7R2**, the older generation, brings devices with **128 MB NAND** and **128/256 MB RAM**, which run Linux 3.4.5 with Android modifications, contain **Broadcom 43241 or 4354** Wi-Fi chips. ARMv7 cores support vfpv3d16 floating point operations. These devices are **not getting firmware updates anymore**, and most probably are vulnerable to [KRACK](https://www.krackattacks.com/) and [BroadPWN](https://blog.exodusintel.com/2017/07/26/broadpwn/) vulnerabilities.\n\n| Model | Type | Display | LTE cat. | Wi-Fi | Battery | Ext. Antenna | LAN port (RJ45) |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n| [E3372s](https://consumer.huawei.com/en/mobile-broadband/e3372/) | USB stick | - | 4 | - | - | + | - |\n| [E5373](https://www.4gltemall.com/huawei-e5373-4g-td-lte-mobile-wifi-hotspot.html) | Router | Indicators | 4 | 2.4/5 GHz | 1500 mAh | + | - |\n| [E5377](https://consumer.huawei.com/en/mobile-broadband/e5377/) | Router | 128×128 OLED | 4 | 2.4/5 GHz | 1500 mAh | + | - |\n| [E5383](https://www.4gltemall.com/huawei-e5383-4g-lte-cat6-mobile-wifi-router.html) | Router | LED | 6 | 2.4/5 GHz | 3000 mAh | - | - |\n| [E5786](https://www.4gltemall.com/huawei-e5786-4g-lte-cat6-mobile-wifi.html) | Router | 128×128 OLED | 6 | 802.11ac 2.4/5 GHz | 3000 mAh | + | - |\n| [E5787](https://consumer.huawei.com/en/mobile-broadband/e5787/) | Router | LED | 6 | 802.11ac 2.4/5 GHz | 3000 mAh | - | + |\n| [E5878](https://www.4gltemall.com/huawei-e5878-4g-mobile-wifi-modem.html) | Router | 128×64 OLED | 4 | 2.4 GHz | 1900 mAh | - | - |\n\n**Balong Hi6920 V7R1** (all LTE cat. 4) comes with **256 MB NAND** and **128 MB RAM** (15 MB free in Linux), **Broadcom BCM43241** Wi-Fi chipset.\nV7R1 devices run Linux 2.6.35.7 kernel with Android modifications, and are **not getting firmware updates anymore**, and most probably are vulnerable to [KRACK](https://www.krackattacks.com/) and [BroadPWN](https://blog.exodusintel.com/2017/07/26/broadpwn/) vulnerabilities. ARMv7 cores come without floating point support.\n\n| Model | Type | Display | LTE cat. | Wi-Fi | Battery | Ext. Antenna | LAN port (RJ45) |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n| E3272 | USB Stick | - | 4 | - | - | + | - |\n| E3276 | USB Stick | - | 4 | - | - | + | - |\n| E5372 | Router | 128×128 OLED | 4 | 2.4/5 GHz | 1780/3560 mAh | + | - |\n\n3G Sticks run **Balong V3R3**:\n\n*   [E3531 (USB stick)](https://consumer.huawei.com/en/mobile-broadband/e3531/)\n\n*   [E8231 (USB stick)](https://consumer.huawei.com/en/mobile-broadband/e8231/)"
		},
		{
			"post_id": 2,
			"title": "Huawei firmware links",
			"date_published": 1525442207.996,
			"body": "## Firmware files\n\nHuawei firmware files are not easy to find. Huawei don't publish firmware files on their website, but there are some third-party filrmware archive websites where you can find selected firmware versions.\n\nThese archives are usually premium and require paid subscription, but some of the files are available for free.\n\n* * *\n\nHere are the links for these archives:\n\n[easy-firmware.com](https://easy-firmware.com/home/browse/category/id/343/) - mostly premium files\n~~[asanfile.com](http://my.asanfile.com/files?data=huawei\\flash%20file\\e%20series\\) - all files are premium~~ dead\n[combinefile.com](https://combinefile.com/index.php?a=downloads&b=folder&id=6437) - lots of free firmware files\n[trustoff.ru](https://trustoff.ru/download/) - free firmware files\n[3ginfo.ru](https://3ginfo.ru/download.php) - free firmware files\n[marhaba-firmware.com](http://www.marhaba-firmware.com) - premium only\n\nMost firmware files (including premium) are re-uploaded to 4pda.ru forums, where you can download them for free. You'll have to register to download files, otherwise Error 404 is shown.\n[https://4pda.ru/forum/index.php?showforum=922](https://4pda.ru/forum/index.php?showforum=922)\n\nSome of firmware files could be found on Huawei update server:\n[https://gist.github.com/ValdikSS/f0f0d5ab9444b74ffedb7a41572bbbb5](https://gist.github.com/ValdikSS/f0f0d5ab9444b74ffedb7a41572bbbb5)\n\n## Device information\n\nFull firmware archives contain `release notes` PDF file with device hardware and software information. This file includes LTE bands supported by the device and/or modification, Balong platform version, RAM/ROM amount, Wi-Fi chip and other useful information.\n\nWi-Fi chipset information and supported bands could be also found on [Wi-Fi Alliance](https://www.wi-fi.org/content/search-page) website (type device model into top right search box)."
		}
	]
}