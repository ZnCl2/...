Type.registerNamespace("www.rferl.org.Widgets");www.rferl.org.Widgets.PollWidgetBehavior=function(n){www.rferl.org.Widgets.PollWidgetBehavior.initializeBase(this,[n])};www.rferl.org.Widgets.PollWidgetBehavior.prototype={_pollType:null,_pollId:null,_pollAnswers:null,_errorCallbackHandler:null,_successCallbackHandler:null,initialize:function(){www.rferl.org.Widgets.PollWidgetBehavior.callBaseMethod(this,"initialize");this._errorCallbackHandler=Function.createDelegate(this,this._errorCallback);this._successCallbackHandler=Function.createDelegate(this,this._successCallback);this._pollAnswers=document.getElementsByName(String.format("poll{0}_{1}",this.get_pollType(),this.get_pollId()))},dispose:function(){www.rferl.org.Widgets.PollWidgetBehavior.callBaseMethod(this,"dispose");this._errorCallbackHandler=null;this._successCallbackHandler=null},get_pollType:function(){return this._pollType},set_pollType:function(n){n!==this._pollType&&(this._pollType=n,this.raisePropertyChanged("pollType"))},get_pollId:function(){return this._pollId},set_pollId:function(n){n!==this._pollId&&(this._pollId=n,this.raisePropertyChanged("pollId"))},_getCheckedValue:function(n){var i,t;if(!n)return 0;if(i=n.length,i==undefined)return n.checked?n.value:0;for(t=0;t<i;t++)if(n[t].checked)return n[t].value;return 0},_loadStartup:function(){typeof userIP=="undefined"?$(this.get_element()).removeClass("PollLoading").addClass("PollError").text(window.Localizations.Widgets.PollWidget.LoadError):this.getPollBody()},pollVote:function(){var n=this._getCheckedValue(this._pollAnswers),t=$get(this.get_id()+"_btnSeeResults")==null;www.rferl.org.Services.PollWidgetService.PollVote(this.get_pollType(),this.get_pollId(),n,t,userIP,this.get_id(),this._successCallbackHandler,this._errorCallbackHandler)},pollShowResults:function(){var n=this._getCheckedValue(this._pollAnswers);www.rferl.org.Services.PollWidgetService.PollShowResults(this.get_pollType(),this.get_pollId(),n,userIP,this.get_id(),this._successCallbackHandler,this._errorCallbackHandler)},getPollBody:function(){www.rferl.org.Services.PollWidgetService.GetPollBody(this.get_pollType(),this.get_pollId(),userIP,this.get_id(),Function.createDelegate(this,this._successCallbackHandler),Function.createDelegate(this,this._errorCallbackHandler))},getPollBodyPreview:function(){$(this.get_element()).text(window.Localizations.Widgets.PollWidget.PreviewNotice);$(this.get_element()).removeClass("PollLoading")},_successCallback:function(n){this.get_element().innerHTML=n;$(this.get_element()).removeClass("PollLoading")},_errorCallback:function(){$(this.get_element()).removeClass("PollLoading").addClass("PollError").text(window.Localizations.Widgets.PollWidget.LoadError)}};www.rferl.org.Widgets.PollWidgetBehavior.registerClass("www.rferl.org.Widgets.PollWidgetBehavior",Sys.UI.Control);;