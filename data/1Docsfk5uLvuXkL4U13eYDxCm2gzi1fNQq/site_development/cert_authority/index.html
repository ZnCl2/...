<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Certificate authority - ZeroNet</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  

  <link rel="stylesheet" href="../../css/fonts.css" type="text/css" />

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../docs.css" rel="stylesheet">
  <link href="../../../../../media.readthedocs.org/css/badge_only.css" rel="stylesheet">
  <link href="../../../../../media.readthedocs.org/css/readthedocs-doc-embed.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Certificate authority";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="../../docs.js"></script>
  <script src="../../readthedocs-data.js"></script>
  <script src="../../readthedocs-dynamic-include.js"></script>
  <script src="../../../../../media.readthedocs.org/static/core/js/readthedocs-doc-embed.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../index.html" class="icon icon-home"> ZeroNet</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="https://zeronet.readthedocs.io/en/latest/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../index.html">Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../faq/index.html">Frequently asked questions</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Start using ZeroNet</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../using_zeronet/installing/index.html">Installing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../using_zeronet/sample_sites/index.html">Sample sites</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../using_zeronet/create_new_site/index.html">Create new site</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Site Development</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../getting_started/index.html">Getting Started</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../zeroframe_api_reference/index.html">ZeroFrame API reference</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../content_json/index.html">Structure of content.json</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dbschema_json/index.html">Structure of dbschema.json</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="index.html">Certificate authority</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#certificate-authority">Certificate Authority</a></li>
                
                    <li><a class="toctree-l4" href="#what-does-a-certificate-authority-do">What does a certificate authority do?</a></li>
                
                    <li><a class="toctree-l4" href="#certificate-format">Certificate format</a></li>
                
                    <li><a class="toctree-l4" href="#usage-in-contentjson">Usage in content.json</a></li>
                
                    <li><a class="toctree-l4" href="#features-and-limitations-of-certificate-authorities">Features and limitations of certificate authorities</a></li>
                
                    <li><a class="toctree-l4" href="#can-i-live-without-certificate-authorities">Can I live without certificate authorities?</a></li>
                
            
            </ul>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Help ZeroNet development</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../help_zeronet/contributing/index.html">Contributing to ZeroNet</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../help_zeronet/network_protocol/index.html">Network protocol</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../help_zeronet/donate/index.html">Donation</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ZeroNet</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
    
      
        
          <li>Site Development &raquo;</li>
        
      
    
    <li>Certificate authority</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/HelloZeroNet/ZeroNet" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="certificate-authority">Certificate Authority</h1>
<p>An account without password? A certificate for me? You realize the ID system of ZeroNet does not conform to convention. In this section, you are going to learn about how user certificate and certificate authority work in ZeroNet.</p>
<h2 id="what-does-a-certificate-authority-do">What does a certificate authority do?</h2>
<p>In ZeroNet, everything is signed by Bitcoin signing keys. A certificate provides a unique and memorizable name for a Bitcoin address. A certificate authority (or an ID provider) is responsible for proving the relationship between a unique friendly name and a Bitcoin address.</p>
<h2 id="certificate-format">Certificate format</h2>
<h3 id="body">Body</h3>
<p>The body of a certificate contains a Bitcoin address, a portal type, and a memorizable user name.</p>
<pre><code>[BitcoinAddress]#[PortalType]/[UserName]
</code></pre>

<p><strong>Example:</strong></p>
<pre><code>1H28iygiKXe3GUMcD77HiifVqtf3858Aft#web/hellozeronet
</code></pre>

<ul>
<li>Bitcoin address: <code>1H28iygiKXe3GUMcD77HiifVqtf3858Aft</code></li>
<li>Portal type: <code>web</code></li>
<li>User name: <code>hellozeronet</code></li>
</ul>
<p><strong>General rules:</strong></p>
<p>The Bitcoin address, the portal type and the user name <strong>must not</strong> contain the character <code>#</code>, <code>@</code> or <code>/</code></p>
<p>Only 0-9 and a-z are allowed in a user name. All English letters in a user name <strong>must</strong> be in lower case. Characters not in the allowed set <strong>must not</strong> be used as parts of a user name. A user name <strong>should not</strong> be too long. A user name <strong>should</strong> be legible and <strong>should not</strong> interfere with user interface rendering.</p>
<p>A user name <strong>must</strong> be unique in the pool of all registered user names.</p>
<h3 id="signature">Signature</h3>
<p>A certificate signing algorithm loads a secret signing key and generates a deterministic Bitcoin signature for the body.</p>
<p><strong>From the source code:</strong></p>
<pre><code class="python">sign = os.popen(&quot;python zeronet.py --debug cryptSign %s#bitmsg/%s %s 2&gt;&amp;1&quot; % (auth_address, user_name, config.site_privatekey)).readlines()[-1].strip()
</code></pre>

<h3 id="certificate">Certificate</h3>
<p>By looking at the source code of ZeroID, we know how a certificate is stored in its public database.</p>
<pre><code class="python">data[&quot;users&quot;][user_name] = &quot;bitmsg,%s,%s&quot; % (auth_address, sign)
</code></pre>

<p><strong>Example:</strong></p>
<pre><code>&quot;hellozeronet&quot;: &quot;web,1H28iygiKXe3GUMcD77HiifVqtf3858Aft,HA2A+iKekECD3hasrsN8IrR86BnXQ63kPH+9A85JLO9hLUpRJTBn62UfnuuF92B9CIc6+EewAIqzIn9UoVq2LPA=&quot;
</code></pre>

<p>A certificate can be stored in various formats. However, all formats must include:</p>
<ul>
<li>The Bitcoin address: <code>1H28iygiKXe3GUMcD77HiifVqtf3858Aft</code></li>
<li>The portal type: <code>web</code></li>
<li>The user name: <code>hellozeronet</code></li>
<li>The signature from authority: <code>HA2A+iKekECD3hasrsN8IrR86BnXQ63kPH+9A85JLO9hLUpRJTBn62UfnuuF92B9CIc6+EewAIqzIn9UoVq2LPA=</code></li>
</ul>
<h2 id="usage-in-contentjson">Usage in <code>content.json</code></h2>
<p>Site owners can choose which certificate authorities to trust.</p>
<p>The Blue Hub, for example, accepts certificates signed by ZeroID. This rule is defined in its <code>data/users/content.json</code></p>
<ul>
<li>The ID provider has a friendly name: <code>zeroid.bit</code></li>
<li>The public key digest of the ID provider is: <code>1iD5ZQJMNXu43w1qLB8sfdHVKppVMduGz</code></li>
</ul>
<pre><code class="json">&quot;user_contents&quot;: {
  &quot;cert_signers&quot;: {
   &quot;zeroid.bit&quot;: [
    &quot;1iD5ZQJMNXu43w1qLB8sfdHVKppVMduGz&quot;
   ]
  }
}
</code></pre>

<p>Every user presents his certificate in the manifest file in his Bitcoin folder. For example, <code>data/users/1J3rJ8ecnwH2EPYa6MrgZttBNc61ACFiCj/content.json</code> says:</p>
<pre><code class="json">{
 &quot;address&quot;: &quot;1BLueGvui1GdbtsjcKqCf4F67uKfritG49&quot;,
 &quot;cert_auth_type&quot;: &quot;web&quot;,
 &quot;cert_sign&quot;: &quot;HPiZsWEJ5eLnspUj8nQ75WXbSanLz0YhQf5KJDq+4bWe6wNW98Vv9PXNyPDNu2VX4bCEXhRC65pS3CM7cOrjjik=&quot;,
 &quot;cert_user_id&quot;: &quot;nofish@zeroid.bit&quot;,
 &quot;files&quot;: {
  &quot;data.json&quot;: {
   &quot;sha512&quot;: &quot;8e597412a2bc2726ac9a1ee85428fb3a94b09f4e7a3f5f589119973231417b15&quot;,
   &quot;size&quot;: 21422
  }
 },
 &quot;inner_path&quot;: &quot;data/users/1J3rJ8ecnwH2EPYa6MrgZttBNc61ACFiCj/content.json&quot;,
 &quot;modified&quot;: 1492458379,
 &quot;signs&quot;: {
  &quot;1J3rJ8ecnwH2EPYa6MrgZttBNc61ACFiCj&quot;: &quot;G8kaZIGAstsiWLVY20e2ogJQi4OO+QuwqJ9GTj3gz7YleST/jst7RQH7hDn0uf8BJMBjFs35H3LPhNHHj4jueh8=&quot;
 }
}
</code></pre>

<p>Site specific:</p>
<ul>
<li>Expected site URL: <code>"address": "1BLueGvui1GdbtsjcKqCf4F67uKfritG49"</code></li>
<li>Expected file path: <code>"inner_path": "data/users/1J3rJ8ecnwH2EPYa6MrgZttBNc61ACFiCj/content.json"</code></li>
</ul>
<p>Certificate information:</p>
<ul>
<li>ID provider: <code>zeroid.bit</code></li>
<li>User name: <code>nofish</code></li>
<li>User Bitcoin address: <code>1J3rJ8ecnwH2EPYa6MrgZttBNc61ACFiCj</code></li>
<li>Portal type: <code>web</code></li>
<li>Signature from ID provider: <code>HPiZsWEJ5eLnspUj8nQ75WXbSanLz0YhQf5KJDq+4bWe6wNW98Vv9PXNyPDNu2VX4bCEXhRC65pS3CM7cOrjjik=</code></li>
</ul>
<h3 id="the-verifying-process">The verifying process</h3>
<ol>
<li>
<p>The verifying algorithm reads <code>data/users/content.json</code> to determine what is the expected site for the user content.</p>
</li>
<li>
<p>The verifying algorithm reads <code>data/users/content.json</code> to look up the public key digest of the ID provider.</p>
</li>
<li>
<p>Given a user Bitcoin address, a portal type and a user name, the verifying algorithm reconstructs the body of the certificate.</p>
</li>
<li>
<p>The verifying algorithm checks the signature from the ID provider, with the public key defined in <code>data/users/content.json</code>, to ensure the authenticity of the certificate body.</p>
</li>
<li>
<p>The verifying algorithm loads the user public key and checks the authenticity of the user content.</p>
</li>
</ol>
<h2 id="features-and-limitations-of-certificate-authorities">Features and limitations of certificate authorities</h2>
<ul>
<li>
<p>A certificate authority provides memorizable names for user public key digests. It also helps mitigate spam and unsolicited content.</p>
</li>
<li>
<p>A user does not have to give away secret information such as passwords. In addition, a user only has to authenticate once.</p>
</li>
<li>
<p>A certificate authority does not have to be approved by any ZeroNet developers. A site owner can choose which certificate authorities to trust for the sake of user content quality.</p>
</li>
<li>
<p>A certificate authority is responsible for maintaining its user name pool.</p>
</li>
<li>
<p>ZeroID does not revoke or renew certificates.</p>
</li>
</ul>
<h2 id="can-i-live-without-certificate-authorities">Can I live without certificate authorities?</h2>
<p>Generally, a certificate is required when you add things to someone else's site. You do not need a certificate when you are modifying your own site.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../help_zeronet/contributing/index.html" class="btn btn-neutral float-right" title="Contributing to ZeroNet"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../dbschema_json/index.html" class="btn btn-neutral" title="Structure of dbschema.json"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../dbschema_json/index.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../help_zeronet/contributing/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
