<html>
<head>
	<link rel="stylesheet" href="./css/all.css" type="text/css" media="screen">
	<base href="" target="_top" id="base">
 <script>base.href = document.location.href.replace("/media", "").replace("index.html", "").replace(/[&?]wrapper=False/, "").replace(/[&?]wrapper_nonce=[A-Za-z0-9]+/, "")</script>
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
	<title>Exodus Project</title>

  <link rel="stylesheet" type="text/css" href="./js/font-awesome.min.css">

   <link rel="stylesheet" type="text/css" href="./js/bootstrap.min.css">
</head>
<script src="https://cdn.steemjs.com/lib/latest/steem.min.js"></script>

<body>
<div class="container">
<div id="steemit-widgets-blog" style="background: white; overflow: auto; position: fixed; width: 320px; height: 60%; overflow: scroll; transition-duration: 0.5s;  top: 235px; bottom: 0px; left: 2px;"></div>
<div id="steemit-widgets-blog1" style="background: white; overflow: auto; position: fixed; width: 320px; height: 100%; overflow: scroll; transition-duration: 0.5s;  top: 0px; bottom: 0px; right: 2px;"></div>
<div id="steemit-widgets-profile55" style="background: white; overflow: auto; position: fixed; width: 320px; height: 32%; transition-duration: 0.5s;  top: 0px; bottom: 0px; left: 2px;"></div>
	<!-- HEADER -->
	<header class="pure-g">
		<div class="pure-u-1-1">
			<div>
				
				<div id="full-post-exodus1"><div id="steemit-widgets-profile2"></div></div>
				
				
			</div>
		</div>
	</header>

	<!-- USER BOX -->
	<div class="mod-box">
		<div class="pure-g">
			<div class="pure-u-1-2">
					<a href="#Select+user" onclick='return Page.selectUser()'>
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M20.822 18.096c-3.439-.794-6.64-1.49-5.09-4.418 4.72-8.912 1.251-13.678-3.732-13.678-5.082 0-8.464 4.949-3.732 13.678 1.597 2.945-1.725 3.641-5.09 4.418-3.073.71-3.188 2.236-3.178 4.904l.004 1h23.99l.004-.969c.012-2.688-.092-4.222-3.176-4.935z"/></svg>
						<span id="select_user">Login</span> <span class="muted" id="user_quota"></span>
					</a>
					
			</div>
			<div class="pure-u-1-2 a-right">
				<a href="?Index">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M16 0h-8v6h8v-6zm-8 18h-8v6h8v-6zm16 0h-8v6h8v-6zm-3.058-2h-1.801c0-3.75-5.166-1.207-7.142-4.753-1.964 3.526-7.133 1.016-7.141 4.753h-1.8c.003-6.521 7.403-1.532 8.019-8h1.846c.616 6.473 8.019 1.469 8.019 8z"/></svg> Index
				</a>
			</div>
		</div>
	</div>

	<!-- TOOLS -->
	<div class="pure-g mod-tools">
		<div class="pure-u-1-2">
			<div class="l-box">
				<a href="?Page:exodus-project" class="pure-button button-success">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M3 14.828v9.172h18v-9.172l-9-8.375-9 8.375zm11 7.172h-4v-6h4v6zm10-9.852l-1.361 1.465-10.639-9.883-10.639 9.868-1.361-1.465 12-11.133 12 11.148z"/></svg> Home
				</a>
				
				
			</div>
		</div>
		<div class="pure-u-1-2">
			<div class="a-right l-box">
				<div id="content-edit-tools">
					<a href="#Save+page" id="send" class="pure-button button-delegate" onclick="return Page.pageSave()">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" style="fill: #fff;" viewBox="0 0 24 24"><path d="M15.563 22.282l-3.563.718.72-3.562 2.843 2.844zm-2.137-3.552l2.845 2.845 7.729-7.73-2.845-2.845-7.729 7.73zm-2.426-9.73h2.996v-5h-2.996v5zm-.636 12h-8.364v-18h3v9h12v-9h.172l2.828 2.829v3.545l2-1.999v-2.375l-4-4h-18v22h9.953l.411-2zm-3.364-18h8v7h-8v-7z"/></svg> Anteprima
					</a>
					<a href="#Cancel+edit" id="cancel" class="pure-button button-alert" onclick="return Page.pageLoad()">
						<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M23.954 21.03l-9.184-9.095 9.092-9.174-2.832-2.807-9.09 9.179-9.176-9.088-2.81 2.81 9.186 9.105-9.095 9.184 2.81 2.81 9.112-9.192 9.18 9.1z"/></svg> Annulla
					</a>
					<div id="successalert" class="alert alert-success" style="display:none">
        <strong>Pubblicato!</strong> Il tuo post ora è presente su Steem-Blockchain.
      </div>

      <div id="infoalert" class="alert alert-info" style="display:none">
        <strong>Trasferimento dati su blockchain in corso...</strong> Attendere...
      </div>

      <div id="erroralert" class="alert alert-danger" style="display:none">
        <strong>Errore! Comunica in chat il problema. <a href="https://discord.gg/QDKPzSp"> https://discord.gg/QDKPzSp </a></strong> <span id="errormessage"></span>
      </div>
	  
	 <div style="background: white; overflow: auto; position: fixed; width: 320px; height: 50%;  transition-duration: 0.5s;  top: 0px; bottom: 0px; right: 0px;"> <iframe src="https://discordapp.com/widget?id=403242886826688523&theme=dark" width="320" height="350" allowtransparency="true" frameborder="0"></iframe></div>
	 
	  <div id="steemit-widgets-new" style="background: white; overflow: auto; position: fixed; width: 320px; height: 50%; overflow: scroll; transition-duration: 0.5s;  top: 360px; bottom: 0px; right: 0px;" ></div>
	  
	  <div id="exodusproject" style="background: white; overflow-x: hidden; position: fixed; width: 320px; height: 100%; overflow: scroll; transition-duration: 0.5s;  top: 0px; bottom: 0px; left: 0px;">
    <div class="lateral-menu-content" style="display: block;">
      <div class="title">Exodus Project v0.1</div>
      <div class="lateral-menu-content-inner">
 <form class="form-horizontal" id="post">
        <fieldset>

       
        
        <!-- Titolo -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="title">Titolo</label>  
          <div class="col-md-4">
          <input id="title" name="title" type="text" placeholder="" class="form-control input-md" required="">
          </div>
        </div>

        <!-- link permanente -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="permlink">Permlink</label>  
          <div class="col-md-4">
          <input id="permlink" name="permlink" type="text" placeholder="" class="form-control input-md"  required="">
          </div>
        </div>

		
		
       
		
		<!-- Video IPFS -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="ipfshash">Video IPFS</label>  
          <div class="col-md-4">
          <input id="ipfshash" name="ipfshash" type="text" placeholder="" class="form-control input-md"  >
          </div>
        </div>

        <!-- Tags -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="tags">Tags</label>  
          <div class="col-md-4">
          <input id="tags" name="tags" type="text" placeholder="" class="form-control input-md" value="ita" required="">
          <span class="help-block">Usa spazio per separare le tags</span>
          </div>
        </div>

        <!-- Nome utente -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="author">Nome utente Steem</label>  
          <div class="col-md-4">
          <input id="author" name="author" type="text" placeholder="" class="form-control input-md" value="guest123" required="">
		  
          </div>
        </div>

        <!-- Posting Key-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="privatekey">Posting Key</label>  
          <div class="col-md-4">
          <input id="privatekey" name="privatekey" type="text" placeholder="" value="5JRaypasxMx1L97ZUX7YuC5Psb5EAbF821kkAGtBj7xCJFQcbLg" class="form-control input-md" required="">
		  
          <span class="help-block">Puoi trovarla in Wallet -&gt; Permessi su steemit.com</span>  
          </div>
        </div>

        
		
		

        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="sbdpercent">Steem Dollars %</label>  
          <div class="col-md-4">
          <input id="sbdpercent" name="sbdpercent" type="number" placeholder="" class="form-control input-md" required="" min="0" max="100" value="50" step="1">
          <span class="help-block">Seleziona 0% se vuoi avere 100% power up.</span>  
          </div>
        </div>



        <!-- Text input-->
        <div class="form-group" style="display: none;" >
          <label class="col-md-4 control-label" for="maxpayout">Max SBD Payout</label>  
          <div class="col-md-4">
          <input id="maxpayout" name="maxpayout" type="number" placeholder="" class="form-control input-md" required="" min="0" max="1000000" value="1000000" step="1">
          <span class="help-block">Seleziona 0 se vuoi rifiutare il pagamento.</span>  
          </div>
        </div>
		
		<div class="form-group">
          <label class="col-md-4 control-label" style="font-size: 25px;"  for="privatekey">
            Delega<br>
            <button type="button" id="addbenef" name="addbenef" style="font-size: 16px;" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#benefModal"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Attiva</button>
          </label>
		    <div class="col-md-4">
          <ul class="input-md" style="font-size: 18px;" id="beneflist">
          </ul>
		 
		   
          </div>
        </div>

        <!-- Button -->
        <div class="form-group" >
          <label class="col-md-4 control-label" for="post"></label>
          <div class="col-md-4"> <div id="pollo" style="display: none;">
            <button id="post" name="post"  class="btn btn-primary">Pubblica</button>
			</div>
          </div>
        </div>

        </fieldset>
      </form>

      <!-- Modal -->
      <div class="modal fade" id="benefModal" role="dialog" style=" display: none;">
        <div class="modal-dialog">
        
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">×</button>
              <h4 class="modal-title">Delega</h4>
            </div>
            <div class="modal-body">
              <form class="form-horizontal" id="post">
                <fieldset>


                <!-- Text input-->
                <div class="form-group">
                  <label class="col-md-4 control-label" for="benefusername">Steem username</label>  
                  <div class="col-md-4">
                  <input id="benefusername" name="benefusername" type="text" placeholder="" class="form-control input-md" required=""  value="project-exodus">
                  <span class="help-block">Inserisci l'username dell'utente a cui vuoi delegare parte del guadagno di questo post.</span>  
                  </div>
                </div>

                <!-- Text input-->
                <div class="form-group">
                  <label class="col-md-4 control-label" for="benefshare">Percentuale</label>  
                  <div class="col-md-4">
                  <input id="benefshare" name="benefshare" type="number" placeholder="" class="form-control input-md" required=""  min="20" max="100" value="20" step="1">
                  <span class="help-block">Scegli la percentuale del guadagno delegato.</span>  
                  </div>
                </div>

                </fieldset>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-success" data-dismiss="modal" id="benefadd">Delega</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">Annulla</button>
            </div>
          </div>
        </div>
      </div>
      
    	<center>
    
    
  </center>
        
      </div>
    </div>
  </div>
  
  
  <script src="./js/jquery.min.js"></script>
<script src="./js/jquery.query-object.js"></script>
<script src="./js/bootstrap.min.js"></script>
<script src="./js/Chart.min.js"></script>    <script src="https://cdn.steemjs.com/lib/latest/steem.min.js"></script>
<!-- Modifica questo codice se vuoi inserire voci personalizzate nel json-->
    <script type="text/javascript">
      beneficiaries = []
      weightRemaining = 10000
      tags = []

      $('#title').keydown(function() {
        var permlink = $(this).val().toLowerCase()
          .replace(/ /g,'-')
          .replace(/[^\w-]+/g,'')
        $('#permlink').val(permlink)
      })
	  
	  
	   $('#editor').keydown(function() {
        var anteprima = $(this).val()
         
        $('#dlink').innerText(anteprima)
      })
	  

      $('#tags').keydown(function() {
        tags = $(this).val().split(' ')
      })

      $('#benefadd').click(function() {
        for (var i = beneficiaries.length - 1; i >= 0; i--) {
          if (beneficiaries[i].account == $('#benefusername').val()) {
            weightRemaining += beneficiaries[i].weight;
            beneficiaries.splice(i,1);
          }
        };
        beneficiaries.push({
          account: $('#benefusername').val(),
          weight: 100*$('#benefshare').val()
        })
        weightRemaining -= 100*$('#benefshare').val()
        displayBenefs()
      })

      function displayBenefs() {
        $('#beneflist').empty()
        for (var i = beneficiaries.length - 1; i >= 0; i--) {
          var html = 'Attivato: '+beneficiaries[i].account+' ('+beneficiaries[i].weight/100+'%) '
          $('#beneflist').append(html)
		  $('#pollo').show()
		  
        };
        $('#weightRemaining')[0].innerHTML = weightRemaining/100;
		
        $('.removeBenef').click(function(e) {
          console.log($(this).data('account'))
          for (var i = beneficiaries.length - 1; i >= 0; i--) {
            if (beneficiaries[i].account == $(this).data('account')) {
              weightRemaining += beneficiaries[i].weight;
              beneficiaries.splice(i,1);
              displayBenefs()
            }
          };
        })
      }

      $('#post').submit(function(event) {
        event.preventDefault();
        $('#infoalert').show()
        $('#successalert').hide()
        $('#erroralert').hide()
        var title = $('#title').val();
        var permlink = $('#permlink').val();
        var markdown = $('#article').val();
        var author = $('#author').val();
        var privatekey = $('#privatekey').val();
        var sbdpercent = 100*$('#sbdpercent').val();
        var maxpayout = parseInt($('#maxpayout').val());
        var ipfshash = $('#ipfshash').val();
        var operations = [
          ['comment',
            {
              parent_author: '',
              parent_permlink: tags[0],
              author: author,
              permlink: permlink,
              title: title,
              body: markdown,
              json_metadata : JSON.stringify({
                video : {
				info : {
				title : title,
				author : author,
				permlink : permlink
				
				},
				content : {
				videohash : ipfshash
				},
				},
				tags: tags,
                app: 'ProjectExodus'
              })
            }
          ],
          ['comment_options', {
            author: author,
            permlink: permlink,
            max_accepted_payout: maxpayout+'.000 SBD',
            percent_steem_dollars: sbdpercent,
            allow_votes: true,
            allow_curation_rewards: true,
            extensions: [
              [0, {
                beneficiaries: beneficiaries
              }]
            ]
          }]
        ];

        if (beneficiaries.length == 0) {
          operations[1][1].extensions = []
        }

        console.log(operations)
        steem.broadcast.send(
          { operations: operations, extensions: [] },
          { posting: privatekey },
          function(e, r) {
            $('#infoalert').hide()
            if (e) {
              $('#errormessage').html(e.message)
              $('#erroralert').show()
            } else {
              $('#successalert').show()
            }
            console.log(e,r)
          }
        )
      });
    </script>
    
	
				</div>
				<div id="content-view-tools">
					<a href="#History+page" id="history_page" class="pure-button" onclick="return Page.getHistory();">
						<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"><path d="M24 12c0 6.627-5.373 12-12 12s-12-5.373-12-12c0-.808.083-1.596.234-2.359h2.076c-.188.759-.31 1.543-.31 2.359 0 5.514 4.486 10 10 10s10-4.486 10-10-4.486-10-10-10c-2.234 0-4.292.744-5.957 1.989l2.049 2.049-7.012 1.354 1.354-7.013 2.183 2.183c2.036-1.598 4.594-2.562 7.383-2.562 6.627 0 12 5.373 12 12zm-13-6v8h7v-2h-5v-6h-2z"/></svg> Cronologia
					</a>
					<a href="#Edit+page" id="edit_page" class="pure-button button-success" onclick="return Page.pageEdit()">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M1.438 16.872l-1.438 7.128 7.127-1.438 12.642-12.64-5.69-5.69-12.641 12.64zm2.271 2.253l-.85-.849 11.141-11.125.849.849-11.14 11.125zm20.291-13.436l-2.817 2.819-5.69-5.691 2.816-2.817 5.691 5.689z"/></svg> Posta
					</a>
				</div>
				<div id="content-history-tools">
					<a href="#Cancel+edit" id="cancel" class="pure-button button-alert" onclick="return Page.getCurrentRevision()">
						<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M23.954 21.03l-9.184-9.095 9.092-9.174-2.832-2.807-9.09 9.179-9.176-9.088-2.81 2.81 9.186 9.105-9.095 9.184 2.81 2.81 9.112-9.192 9.18 9.1z"/></svg>
						Indietro</a>
				</div>
			</div>
		</div>
	</div>

	<div id="revision" class="pure-g">
		<div class="pure-u-1-1">
			<p>Stai esaminando una vecchia versione di questa pagina.</p>
			<p>
				<a href="#Restore+page" id="send" class="pure-button button-alert" onclick="return Page.pageSave(true);">
					<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"><path d="M24 12c0 6.627-5.373 12-12 12s-12-5.373-12-12c0-.808.083-1.596.234-2.359h2.076c-.188.759-.31 1.543-.31 2.359 0 5.514 4.486 10 10 10s10-4.486 10-10-4.486-10-10-10c-2.234 0-4.292.744-5.957 1.989l2.049 2.049-7.012 1.354 1.354-7.013 2.183 2.183c2.036-1.598 4.594-2.562 7.383-2.562 6.627 0 12 5.373 12 12zm-13-6v8h7v-2h-5v-6h-2z"/></svg> Ripristina questa versione
				</a>
				<a href="#Current+page" id="send" class="pure-button button-success" onclick="return Page.getCurrentRevision();">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M4 22v-20h16v11.543c0 4.107-6 2.457-6 2.457s1.518 6-2.638 6h-7.362zm18-7.614v-14.386h-20v24h10.189c3.163 0 9.811-7.223 9.811-9.614z"/></svg> Visualizza la versione corrente
				</a>
			</p>
		</div>
	</div>

	<!-- PAGE CONTENT -->
		<div class="pure-g">
		
			<div class="pure-u-1-1">
				
				<div id="full-post-exodus"></div>
				
				<div id="messages" class="l-box"></div>
			
				<textarea id="article" class="l-box"></textarea>
				<div id="history" class="l-box">
					<h1>Page history</h1>
					<ul id="history_list"></ul>
				</div>
			</div>
		</div>

		<p class="muted footer">Text is available under the <a href="http://creativecommons.org/licenses/by-sa/3.0/" target="_blank">Creative Commons Attribution-ShareAlike License</a>. <br> You license your contributions and edits to our site under the same license.</p>
		
		
</div>
<script type="text/javascript" src="./js/all.js" async></script>

  

<script src="https://cdn.steemjs.com/lib/latest/steem.min.js"></script>
<script src="./js/steemit-widgets.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>



</body>
</html>