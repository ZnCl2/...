
<!DOCTYPE html>

<html>
<head>
 <title>INCANTATA</title>
 <meta charset="utf-8">
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <link rel="stylesheet" href="css/all.css" />
 <base href="" target="_top" id="base">
 <script>base.href = document.location.href.replace("/media", "").replace("index.html", "").replace(/[&?]wrapper=False/, "").replace(/[&?]wrapper_nonce=[A-Za-z0-9]+/, "")</script>
</head>
<body>

<script type="text/javascript" src="js/ZeroFrame.js"></script>
<script type="text/javascript" src="js/incantata_functions.js"></script>
<script>
class Page extends ZeroFrame {
  setSiteInfo(site_info) {
    var out = document.getElementById("out")
    //out.innerHTML =
      "Page address: " + site_info.address +
      "<br>- Peers: " + site_info.peers +
      "<br>- Size: " + site_info.settings.size +
      "<br>- Modified: " + (new Date(site_info.content.modified*1000))
  }


  onOpenWebsocket() {
    this.cmd("siteInfo", [], function(site_info) {
      page.setSiteInfo(site_info)
    })
    this.loadRules_byname()
  }

  onRequest(cmd, message) {
    if (cmd == "setSiteInfo")
      this.setSiteInfo(message.params)
    else
      this.log("Unknown incoming message:", cmd)
  }
}
page = new Page()
</script>
<div class="headline"><span class="headelement" title="Incantata"><img valign="middle" class="mana_img" src="data/img/flag_incantata.gif"></img><a href="index.html" style="text-decoration:none">&nbsp;Incantata&nbsp;</a></span></div>
<a href="index.html" class="cardlink">
  <div id="rule_'+cards[i].card_id+'" class="rule_div_print">	
		<div class="card_header"><span class="card_title"></span></div>
		<div class="rule_body">..</div>		
	</div>	
</a>
<div>&nbsp;</div>
<div id="card_token"></div>
<div id="card_token_url"></div>
</body>
</html>
