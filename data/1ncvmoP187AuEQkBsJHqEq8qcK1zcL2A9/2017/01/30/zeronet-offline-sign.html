<!DOCTYPE html><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title> Zeronet Offline Sign</title><meta name="description" content=" As can be seen here, this site now has a Zeronet mirror. In the process of creating the mirror, I figured it would be nice to sign the site (content.json) on... "><link rel="stylesheet" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/assets/main.css"><link rel="canonical" href="http://127.0.0.1:43110/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2017/01/30/zeronet-offline-sign.html"><link rel="alternate" type="application/rss+xml" title="Nerde Nolzda" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/feed.xml"><header role="banner"> <a class="site-title" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/">Nerde Nolzda</a><nav> <a href="#" class="menu-icon">&#9776;</a><div class="trigger"> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/about/">About</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/keys/">Keys</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/mirrors/">Mirrors</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/">Tags</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/feed.xml">RSS</a></div></nav></header><main><article itemscope itemtype="http://schema.org/BlogPosting"><header><h1 itemprop="name headline"> <a itemprop="mainEntityOfPage url" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2017/01/30/zeronet-offline-sign.html"> Zeronet Offline Sign </a></h1><p class="post-meta"> <time datetime="2017-01-30T10:36:00+08:00" itemprop="datePublished"> Jan 30, 2017 </time> • <time datetime="2018-06-02T22:25:16+08:00" itemprop="dateModified"> Jun 2, 2018 </time> • <span itemprop="author publisher" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">WillyPillow</span> </span> • <span itemprop="keywords"> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/en.html" rel="tag">en</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/encryption.html" rel="tag">encryption</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/security.html" rel="tag">security</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/qubes.html" rel="tag">qubes</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/zeronet.html" rel="tag">zeronet</a></span> • <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/sigs/posts/2017-01-30-zeronet-offline-sign.md.asc"> Signature </a></p></header><div itemprop="articleBody text"><p>As can be seen <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/mirrors/">here</a>, this site now has a <a href="https://zeronet.io/">Zeronet</a> mirror. In the process of creating the mirror, I figured it would be nice to sign the site (<code>content.json</code>) on a separate vault VM in <a href="https://www.qubes-os.org/">Qubes OS</a> so that the chances of the private key leaking is minimalized. However, there did not seem to be any articles about achieving such a thing at the time. As such, I will document my method in the following article.</p><ol><li>Create a (vault) VM and install Zeronet on it<br /> The official insturctions are <a href="https://github.com/HelloZeroNet/ZeroNet#manual-install-for-debian-linux">here</a>. It is recommended, however, that you use <code>git clone https://github.com/HelloZeroNet/ZeroNet.git</code> to clone the repo and verify the signatures before running.<br /> To verify the signature of the repo:<pre><code>cd ZeroNet/
# Fetch the keys, the hex string is the public key at the time of writing
gpg --recv-keys 960FFF2D6C145AA613E8491B5B63BAE6CB9613AE
# Get latest commit
COMMIT=`git log --oneline | head -n 1 | cut -f 1 -d ' '`
# Verify the signature
git verify-commit "$COMMIT"
# If the command above outputs "Good signature", checkout the commit
git checkout $COMMIT
</code></pre><li>Cut off Internet access to the VM (i.e. set firewallVm to none)<li>Create a key pair<pre><code># Remember to save the private key somewhere safe
./zeronet.py siteCreate
</code></pre><li>Modify the site<br /> Copy the files to <code>data/[YOUR-PUBLIC-KEY]</code>.<li>Sign the site<pre><code># This will ask for your private key
./zeronet.py siteSign [YOUR-PUBLIC-KEY]
</code></pre><li>Install Zeronet on another VM (You may have to have your port opened. <a href="https://zeronet.readthedocs.io/en/latest/faq/#do-i-need-to-have-a-port-opened">Link</a> and <a href="https://www.qubes-os.org/doc/firewall/">link</a>)<li>Copy your site directory (<code>data/[YOUR-PUBLIC-KEY]</code>) from the vault to the same directory on the Internet-connected VM<li>Publish the site<pre><code>./zeronet.py sitePublish [YOUR-PUBLIC-KEY]
</code></pre></ol><p>And you’re finished. In theory, it should be possible to use <a href="https://www.qubes-os.org/doc/qrexec3/">qrexec</a> and create something similar to <a href="https://www.qubes-os.org/doc/split-gpg/">split GPG</a> in order to make the process simpler, and is definitely something I should look into.</p></div><div><h1>Related Posts</h1><ul><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2018/08/24/setting-up-yubikey.html"> Setting Up Yubikey & NMC + Zeronet Update </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2017/01/30/gpg-setup.html"> GPG Setup </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2017/02/06/freenet-on-qubes.html"> Freenet On Qubes </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2017/10/23/revoking-my-gpg-keys.html"> Revoking My GPG Keys </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2017/01/27/jekyll-gpg-signature.html"> Jekyll GPG Signature </a></ul></div><div><h1><span itemprop="commentCount">0</span> comments</h1><h2>Post a comment</h2><p> Send an email to <a href="mailto:comment@nerde.pw">comment@nerde.pw</a>.</p></div></article></main><footer itemscope itemtype="http://schema.org/Person"><ul><li itemprop="name">WillyPillow<li><a itemprop="email" href="mailto:wp@nerde.pw">wp@nerde.pw</a><li> Gitlab: <a href="https://gitlab.com/willypillow">WillyPillow</a><li> BitBucket: <a href="https://bitbucket.org/WillyPillow">WillyPillow</a><li> Github: <a href="https://github.com/WillyPillow">WillyPillow</a><li> Diaspora*: <a href="https://diasporing.ch/people/7abf8850bce50134011e7a163e59d8f4">WillyPillow</a><li> Reddit: <a href="https://www.reddit.com/user/WillyPillow/">WillyPillow</a><li>Bitcoin: 15ii2SMbgZSyzKxVSYwim7KtT2uqdSdjVm<li>Namecoin: NES89UkGDutphGbVYNUkGkQuRGs6vFQk6h</ul></footer>
