<!DOCTYPE html><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title> Jekyll Last Modified Date</title><meta name="description" content=" I’ve installed Arch Linux onto a USB drive, essentially creating a portable Linux installation. However, once I cloned the repo of this blog, I found out tha... "><link rel="stylesheet" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/assets/main.css"><link rel="canonical" href="http://127.0.0.1:43110/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/09/jekyll-last-modified-date.html"><link rel="alternate" type="application/rss+xml" title="Nerde Nolzda" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/feed.xml"><header role="banner"> <a class="site-title" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/">Nerde Nolzda</a><nav> <a href="#" class="menu-icon">&#9776;</a><div class="trigger"> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/about/">About</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/keys/">Keys</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/mirrors/">Mirrors</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/">Tags</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/feed.xml">RSS</a></div></nav></header><main><article itemscope itemtype="http://schema.org/BlogPosting"><header><h1 itemprop="name headline"> <a itemprop="mainEntityOfPage url" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/09/jekyll-last-modified-date.html"> Jekyll Last Modified Date </a></h1><p class="post-meta"> <time datetime="2016-08-09T18:43:26+08:00" itemprop="datePublished"> Aug 9, 2016 </time> • <time datetime="2018-06-02T22:24:59+08:00" itemprop="dateModified"> Jun 2, 2018 </time> • <span itemprop="author publisher" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">WillyPillow</span> </span> • <span itemprop="keywords"> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/en.html" rel="tag">en</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/jekyll.html" rel="tag">jekyll</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/git.html" rel="tag">git</a></span> • <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/sigs/posts/2016-08-09-jekyll-last-modified-date.md.asc"> Signature </a></p></header><div itemprop="articleBody text"><p>I’ve installed <a href="https://www.archlinux.org/">Arch Linux</a> onto a USB drive, essentially creating a portable Linux installation. However, once I cloned the repo of this blog, I found out that the modification times of the files (obviously) changed. Since these were used as the post modifications dates, they were messed up. Thus, I needed to find a different way of tracking the modification dates on the posts.</p><p>The module <a href="https://github.com/gjtorikian/jekyll-last-modified-at">jekyll-last-modified-at</a> seemed to be promising, but unfortunately it havn’t been updated in a while, and conflicts with another plugin that I use on Cygwin.</p><p>Eventually I came across <a href="http://stackoverflow.com/a/33721446">this StackOverflow post</a>, which seemed to be a great idea. After a bit of fiddling, it worked like a charm.</p><p>For the full changes that I did, see the related commits <a href="https://bitbucket.org/WillyPillow/nerdenolzda/commits/86ad6f3277d7e3a1230c9822d74fd52e695d825f">this</a> and <a href="https://bitbucket.org/WillyPillow/nerdenolzda/commits/e383be5e39f65dc3be6daf107056c9e755e89caa">this</a>.</p><p>One thing worth noting is that the <code>mv</code> in the script seemed to mess up the permissions of the deploy script, and I figured the easiest way to get out of it is to use <code>sed -i</code> instead, which edits the files in-place. One thing to keep in mind, however, is that this isn’t a POSIX standard, making it less portable.</p><p>The source of the pre-commit hook is posted below, since git didn’t seem to track it:</p><pre><code class="language-sh">#!/bin/sh

echo Running moddate...
git diff --cached --name-status | while read a b; do
  sed -i "/---.*/,/---.*/s/^moddate:.*$/moddate: $(date "+%Y-%m-%d %T %z")/" $b
  git add $b
done
</code></pre></div><div><h1>Related Posts</h1><ul><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2017/01/27/jekyll-optimize-site.html"> Jekyll Optimize Site </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/07/15/accessing-jekyll-page-front-matter.html"> Accessing Jekyll Page Front Matter </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2018/08/24/setting-up-yubikey.html"> Setting Up Yubikey & NMC + Zeronet Update </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2017/10/23/revoking-my-gpg-keys.html"> Revoking My GPG Keys </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2017/07/04/codechef-prefixor.html"> Codechef PREFIXOR: Prefix XOR </a></ul></div><div><h1><span itemprop="commentCount">0</span> comments</h1><h2>Post a comment</h2><p> Send an email to <a href="mailto:comment@nerde.pw">comment@nerde.pw</a>.</p></div></article></main><footer itemscope itemtype="http://schema.org/Person"><ul><li itemprop="name">WillyPillow<li><a itemprop="email" href="mailto:wp@nerde.pw">wp@nerde.pw</a><li> Gitlab: <a href="https://gitlab.com/willypillow">WillyPillow</a><li> BitBucket: <a href="https://bitbucket.org/WillyPillow">WillyPillow</a><li> Github: <a href="https://github.com/WillyPillow">WillyPillow</a><li> Diaspora*: <a href="https://diasporing.ch/people/7abf8850bce50134011e7a163e59d8f4">WillyPillow</a><li> Reddit: <a href="https://www.reddit.com/user/WillyPillow/">WillyPillow</a><li>Bitcoin: 15ii2SMbgZSyzKxVSYwim7KtT2uqdSdjVm<li>Namecoin: NES89UkGDutphGbVYNUkGkQuRGs6vFQk6h</ul></footer>
