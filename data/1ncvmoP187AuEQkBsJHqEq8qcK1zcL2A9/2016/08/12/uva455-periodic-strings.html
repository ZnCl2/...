<!DOCTYPE html><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title> UVa455: Periodic Strings</title><meta name="description" content=" 這題基本上是小測資版的 UVa 10298。因為測資極小，因此直接從 i = 1 開始，檢測字串是否每 i 次便重複一次。除此之外，必須確定 i 是 strlen 的因數，否則會誤判 abcabcab 之類的字串。 This problem is essentially UVa10298 with a small... "><link rel="stylesheet" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/assets/main.css"><link rel="canonical" href="http://127.0.0.1:43110/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/12/uva455-periodic-strings.html"><link rel="alternate" type="application/rss+xml" title="Nerde Nolzda" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/feed.xml"><header role="banner"> <a class="site-title" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/">Nerde Nolzda</a><nav> <a href="#" class="menu-icon">&#9776;</a><div class="trigger"> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/about/">About</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/keys/">Keys</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/mirrors/">Mirrors</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/">Tags</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/feed.xml">RSS</a></div></nav></header><main><article itemscope itemtype="http://schema.org/BlogPosting"><header><h1 itemprop="name headline"> <a itemprop="mainEntityOfPage url" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/12/uva455-periodic-strings.html"> UVa455: Periodic Strings </a></h1><p class="post-meta"> <time datetime="2016-08-12T05:56:31+08:00" itemprop="datePublished"> Aug 12, 2016 </time> • <time datetime="2018-06-02T22:25:07+08:00" itemprop="dateModified"> Jun 2, 2018 </time> • <span itemprop="author publisher" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">WillyPillow</span> </span> • <span itemprop="keywords"> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/en.html" rel="tag">en</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/zh.html" rel="tag">zh</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/bilingual.html" rel="tag">bilingual</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/cpp.html" rel="tag">cpp</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/uva.html" rel="tag">UVa</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/competitive-coding.html" rel="tag">competitive-coding</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/brute-force.html" rel="tag">brute-force</a></span> • <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/sigs/posts/2016-08-12-uva455-periodic-strings.md.asc"> Signature </a></p></header><div itemprop="articleBody text"><p>這題基本上是小測資版的 <a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=1239">UVa 10298</a>。因為測資極小，因此直接從 <code>i = 1</code> 開始，檢測字串是否每 i 次便重複一次。除此之外，必須確定 i 是 strlen 的因數，否則會誤判 <code>abcabcab</code> 之類的字串。<br /> This problem is essentially <a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=1239">UVa10298</a> with a smaller input. Because the inputs are small, we can start from <code>i = 1</code> and see if the string repeats itself with a period of i. Also, it is necessary to check if i is a divider of strlen, otherwise the results of strings like <code>abcabcab</code> would be wrong.</p><p>值得一提的是，我一開始用的演算法是讀取字元，若和 <code>str[p]</code> 相等便將 p 加一，否則將 p 歸零。不過，如此對如 <code>abaaababaaab</code> 等字串便會失效。為了參考，我也將此版本的程式碼貼於正確版本之後。<br /> One thing worth noting is that the algorithm I was using at first works by reading character by character. If the character is the same as <code>str[p]</code>, p is incremented, otherwise p is reset to zero. However, this method fails on strings like <code>abaaababaaab</code>. For reference, I’ll post this version of the code under the correct version.</p><p><a href="http://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=24&amp;page=show_problem&amp;problem=396">UVa Link</a></p><pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;cstring&gt;

int main() {
  std::cin.tie(0);
  std::ios_base::sync_with_stdio(0);
  int t;
  std::cin &gt;&gt; t;
  while (t--) {
    char str[100];
    std::cin &gt;&gt; str;
    int len = strlen(str), i;
    for (i = 1; i &lt;= len; i++) {
      if (len % i == 0) {
        bool isPeriod = true;
        for (int j = 0; j &lt; len; j++) {
          if (str[j] != str[j % i]) {
            isPeriod = false;
            break;
          }
        }
        if (isPeriod) break;
      }
    }
    std::cout &lt;&lt; i &lt;&lt; '\n';
    if (t) std::cout &lt;&lt; '\n';
  }
}
</code></pre><h3 id="failed-version">Failed Version</h3><pre><code class="language-cpp">#include &lt;iostream&gt;

int getChr() {
  static char buf[1 &lt;&lt; 20], *p = buf, *end = buf;
  if (p == end) {
    if ((end = buf + fread(buf, 1, 1 &lt;&lt; 20, stdin)) == buf) return -1;
    p = buf;
  }
  return *p++;
}

int main() {
  std::cin.tie(0);
  int t;
  std::cin &gt;&gt; t;
  while (t--) {
    char c, arr[100];
    int repeatPos = 0, resetPos = 0, count = 1, i;
    while ((arr[0] = getChr()) == '\n');
    for (i = 1; (arr[i] = getChr()) != '\n'; i++) {
      if (arr[repeatPos] == arr[i]) {
        if (repeatPos == 0 &amp;&amp; count == 1) resetPos = i - 1;
        if (repeatPos == resetPos) {
          repeatPos = -1;
          count++;
        }
        repeatPos++;
      } else {
        repeatPos = 0;
        resetPos = 0;
        count = 1;
      }
    }
    std::cout &lt;&lt; ((repeatPos == 0) ? (i / count) : i) &lt;&lt; '\n';
    if (t) std::cout &lt;&lt; '\n';
  }
}
</code></pre></div><div><h1>Related Posts</h1><ul><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/12/uva108-maximum-sum.html"> UVa108: Maximum Sum </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/12/uva10696-f91.html"> UVa10696: f91 </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/12/uva10298-power-strings.html"> UVa10298: Power Strings </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/09/uva299-train-swapping.html"> UVa299: Train Swapping </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/09/uva1586-molar-mass.html"> UVa1586: Molar Mass </a></ul></div><div><h1><span itemprop="commentCount">0</span> comments</h1><h2>Post a comment</h2><p> Send an email to <a href="mailto:comment@nerde.pw">comment@nerde.pw</a>.</p></div></article></main><footer itemscope itemtype="http://schema.org/Person"><ul><li itemprop="name">WillyPillow<li><a itemprop="email" href="mailto:wp@nerde.pw">wp@nerde.pw</a><li> Gitlab: <a href="https://gitlab.com/willypillow">WillyPillow</a><li> BitBucket: <a href="https://bitbucket.org/WillyPillow">WillyPillow</a><li> Github: <a href="https://github.com/WillyPillow">WillyPillow</a><li> Diaspora*: <a href="https://diasporing.ch/people/7abf8850bce50134011e7a163e59d8f4">WillyPillow</a><li> Reddit: <a href="https://www.reddit.com/user/WillyPillow/">WillyPillow</a><li>Bitcoin: 15ii2SMbgZSyzKxVSYwim7KtT2uqdSdjVm<li>Namecoin: NES89UkGDutphGbVYNUkGkQuRGs6vFQk6h</ul></footer>
