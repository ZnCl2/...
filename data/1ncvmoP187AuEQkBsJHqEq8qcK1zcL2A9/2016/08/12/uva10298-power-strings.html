<!DOCTYPE html><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title> UVa10298: Power Strings</title><meta name="description" content=" 這題和 UVa 455 幾乎一模一樣，但測資大上了不少，若暴力破解可能會逾時，需要更有效率的演算法。想像一個字串 abcabcabc。我們可以將它寫兩遍，成為 abcabcabcabcabcabc。此時，原字串便會如下圖成為新字串的 substring，其間隔便是周期。一般會實作 KMP (Link 0 Link... "><link rel="stylesheet" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/assets/main.css"><link rel="canonical" href="http://127.0.0.1:43110/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/12/uva10298-power-strings.html"><link rel="alternate" type="application/rss+xml" title="Nerde Nolzda" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/feed.xml"><header role="banner"> <a class="site-title" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/">Nerde Nolzda</a><nav> <a href="#" class="menu-icon">&#9776;</a><div class="trigger"> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/about/">About</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/keys/">Keys</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/mirrors/">Mirrors</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/">Tags</a> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/feed.xml">RSS</a></div></nav></header><main><article itemscope itemtype="http://schema.org/BlogPosting"><header><h1 itemprop="name headline"> <a itemprop="mainEntityOfPage url" href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/12/uva10298-power-strings.html"> UVa10298: Power Strings </a></h1><p class="post-meta"> <time datetime="2016-08-12T06:19:02+08:00" itemprop="datePublished"> Aug 12, 2016 </time> • <time datetime="2018-08-22T20:51:02+08:00" itemprop="dateModified"> Aug 22, 2018 </time> • <span itemprop="author publisher" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">WillyPillow</span> </span> • <span itemprop="keywords"> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/en.html" rel="tag">en</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/zh.html" rel="tag">zh</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/bilingual.html" rel="tag">bilingual</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/cpp.html" rel="tag">cpp</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/uva.html" rel="tag">UVa</a>, <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/tag/competitive-coding.html" rel="tag">competitive-coding</a></span> • <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/sigs/posts/2016-08-12-uva10298-power-strings.md.asc"> Signature </a></p></header><div itemprop="articleBody text"><p>這題和 <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/12/uva455-periodic-strings.html">UVa 455</a> 幾乎一模一樣，但測資大上了不少，若暴力破解可能會逾時，需要更有效率的演算法。想像一個字串 <code>abcabcabc</code>。我們可以將它寫兩遍，成為 <code>abcabcabcabcabcabc</code>。此時，原字串便會如下圖成為新字串的 substring，其間隔便是周期。一般會實作 KMP (<a href="http://www.csie.ntnu.edu.tw/~u91029/StringMatching.html">Link 0</a> <a href="https://www.ptt.cc/bbs/b99902HW/M.1300796484.A.EE1.html">Link 2</a>)，但此題用 strstr 即能達到不錯的效果。（GCC strstr 實作似乎使用 <a href="http://www-igm.univ-mlv.fr/~lecroq/string/node26.html">Two Way Algorithm (En)</a>)<br /> This problem is almost identical to <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/12/uva455-periodic-strings.html">UVa 455</a>, albeit with a bigger input. Thus, it might timeout if you simply do brute force, and we need a more efficient algorithm. Imagine a repeating string <code>abcabcabc</code>. We can repeat it after itself, making <code>abcabcabcabcabcabc</code>. Now, as the graph below shows, the original string becomes a substring of the new string, and the intervals are equal to the repetition period. Normally, <a href="https://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm">KMP</a> is used, but in this case, strstr works quite well too. (The GCC strstr implementation seems to utilize <a href="http://www-igm.univ-mlv.fr/~lecroq/string/node26.html">Two Way Algorithm</a>)</p><pre><code>abcabcabcabcabcabc
abcabcabc
   abcabcabc
      abcabcabc
         abcabcabc
</code></pre><p><a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=1239">UVa Link</a></p><pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;cstring&gt;

char str[1000001];
char str2[2000002];

int main() {
  std::cin.tie(0);
  std::ios_base::sync_with_stdio(0);
  while (std::cin &gt;&gt; str &amp;&amp; str[0] != '.') {
    int len = strlen(str);
    sprintf(str2, "%s%s", str + 1, str);
    char *search = strstr(str2, str);
    int period = search - str2;
    std::cout &lt;&lt; len / (period + 1) &lt;&lt; '\n';
  }
}
</code></pre></div><div><h1>Related Posts</h1><ul><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/12/uva108-maximum-sum.html"> UVa108: Maximum Sum </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/12/uva10696-f91.html"> UVa10696: f91 </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/12/uva455-periodic-strings.html"> UVa455: Periodic Strings </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/09/uva299-train-swapping.html"> UVa299: Train Swapping </a><li> <a href="/1ncvmoP187AuEQkBsJHqEq8qcK1zcL2A9/2016/08/09/uva1586-molar-mass.html"> UVa1586: Molar Mass </a></ul></div><div><h1><span itemprop="commentCount">0</span> comments</h1><h2>Post a comment</h2><p> Send an email to <a href="mailto:comment@nerde.pw">comment@nerde.pw</a>.</p></div></article></main><footer itemscope itemtype="http://schema.org/Person"><ul><li itemprop="name">WillyPillow<li><a itemprop="email" href="mailto:wp@nerde.pw">wp@nerde.pw</a><li> Gitlab: <a href="https://gitlab.com/willypillow">WillyPillow</a><li> BitBucket: <a href="https://bitbucket.org/WillyPillow">WillyPillow</a><li> Github: <a href="https://github.com/WillyPillow">WillyPillow</a><li> Diaspora*: <a href="https://diasporing.ch/people/7abf8850bce50134011e7a163e59d8f4">WillyPillow</a><li> Reddit: <a href="https://www.reddit.com/user/WillyPillow/">WillyPillow</a><li>Bitcoin: 15ii2SMbgZSyzKxVSYwim7KtT2uqdSdjVm<li>Namecoin: NES89UkGDutphGbVYNUkGkQuRGs6vFQk6h</ul></footer>
