
<!DOCTYPE html>

<html>
<head>
 <title>CrimethInc Clone</title>
 <meta charset="utf-8">
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <base href="" target="_top" id="base">
 <script>base.href = document.location.href.replace("/media", "").replace("index.html", "").replace(/[&?]wrapper=False/, "").replace(/[&?]wrapper_nonce=[A-Za-z0-9]+/, "")</script>
 <style>
    section div
    {
        margin: 0 auto;
        width: 70%;
    }
    
    section > div > h2,
    section > div > span
    {
        font-size: 14px;
    }
    
    .heading
    {
        margin-bottom: 0;
        padding-bottom: 0;
        font-size: 18px;
    }
    
    p
    {
        margin-top: 0;
    }
</style>
</head>
<body>

<section>
    <div>
        <h1>Welcome to the CrimethInc Clone on ZeroNet</h1>
        <h2>
            Content from the CrimethInc clearnet will be cloned here so the word can be spread
        </h2>
        <span>
            So be forewarned... there will be clearnet links in the following content
        </span>
        <article>
            <header>
                <h1 class="heading">
                    <a href="hw-3.html">The Hotwire #3: September 6, 2017</a>
                </h1>
            </header>
            <p>
                Hurricane Harvey responses, Labor Day vs. May Day, and DACA
            </p>
        </article>
        <article>
            <header>
                <h1 class="heading">
                    <a href="ew-57.html">The Ex-Worker #57</a>
                </h1>
            </header>
            <p>
                Reports from the G20 in Hamburg
            </p>
        </article>
    </div>
</section>

<script type="text/javascript" src="js/ZeroFrame.js"></script>
<script>

class Page extends ZeroFrame {
	setSiteInfo(site_info) {
		var out = document.getElementById("out")
		out.innerHTML =
			"Page address: " + site_info.address +
			"<br>- Peers: " + site_info.peers +
			"<br>- Size: " + site_info.settings.size +
			"<br>- Modified: " + (new Date(site_info.content.modified*1000))
	}

	onOpenWebsocket() {
		this.cmd("siteInfo", [], function(site_info) {
			page.setSiteInfo(site_info)
		})
	}

	onRequest(cmd, message) {
		if (cmd == "setSiteInfo")
			this.setSiteInfo(message.params)
		else
			this.log("Unknown incoming message:", cmd)
	}
}
page = new Page()
</script>

</body>
</html>
