
<!DOCTYPE html>

<html>
<head>
 <title>New ZeroNet site!</title>
 <meta charset="utf-8">
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <base href="" target="_top" id="base">
 <script>base.href = document.location.href.replace("/media", "").replace("index.html", "").replace(/[&?]wrapper=False/, "").replace(/[&?]wrapper_nonce=[A-Za-z0-9]+/, "")</script>
 
 <style>
 	input.text, textarea {
 	
	line-height: 1.5em; width: 100%; padding: 5px; font-size: 14px; margin-bottom: 2px;font-weight: bold; 
	-webkit-transition: border 0.3s; -moz-transition: border 0.3s; -o-transition: border 0.3s; -ms-transition: border 0.3s; transition: border 0.3s ; border: 2px solid #eee; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -ms-box-sizing: border-box; box-sizing: border-box ;
	
}
textarea { overflow-y: auto; height: 100px }

input.text:focus, textarea:focus { border-color: #5FC0EA; outline: none; background-color: white }

</style>

 
</head>
<body>




<script src="https://cdn.steemjs.com/lib/latest/steem.min.js"></script>
<script language="JavaScript">
function postArticle()
{
  steem.broadcast.comment(
    document.getElementById('postingKey').value, // posting wif
    '', // author, leave blank for new post
    document.getElementById('parent_permlink').value.toLowerCase().trim(), // username
    document.getElementById('username').value.toLowerCase().trim(), // username
    document.getElementById('permlink').value.toLowerCase().trim(), // username 
    document.getElementById('title').value, // Title
    document.getElementById('article').value, // Body of post
    // Per inserire le tag secondarie alla voce {"tags:[ inserite le tag fra le virgolette e dopo ogni tag una virgola : "tag1","tag2","tag3
    {"tags":["git","zeronet","zerosteem"],"app":"zerosteem"},
    function (err, result) {
      if (err)       
       document.getElementById('fallito').innerHTML= "Post non pubblicato, copia il messaggio di errore e invialo in chat. " +err ;
      else
        document.getElementById('successo').innerHTML= "Post pubblicato!" ;
    }
  );
}
</script>
<body>
<center>
<div style="width: 60%">
<h1>ZeroSteem</h1>
 <div id="out"></div>

<script type="text/javascript" src="../js/ZeroFrame.js"></script>
<script>

class Page extends ZeroFrame {
	setSiteInfo(site_info) {
		var out = document.getElementById("out")
		out.innerHTML =
			"Tag principale/indirizzo git: <input disabled id='parent_permlink' type='text' class='text'  value='" + site_info.address +  
			"' > " 
	}

	onOpenWebsocket() {
		this.cmd("siteInfo", [], function(site_info) {
			page.setSiteInfo(site_info)
		})
	}

	onRequest(cmd, message) {
		if (cmd == "setSiteInfo")
			this.setSiteInfo(message.params)
		else
			this.log("Unknown incoming message:", cmd)
	}
}
page = new Page()
</script>
<input id="username" type="text"  placeholder="Username senza @" size="40" class="text" ><br/>
<input id="postingKey"  class="text"  placeholder="Posting key" type="password" size="40"><br/>
<input id="title" type="text" class="text"   placeholder="Titolo" size="40"><br/>
 <input id="permlink" type="text" class="text"  placeholder="Titolo-Tag principale (sostituisci gli spazi con - )"size="40" ><br/>
<textarea id="article"  class="text" placeholder="Testo articolo"> </textarea><br/>

<input id="postIt" type="button" style="width: 60px; height: 30px; font-size: 14px; margin-top: 5px" value="Posta" onClick=postArticle()>
	<div id="fallito" width="70%"> </div>
	<div id="successo" > </div>
	</div><center>
	
	
	<center><div id="steemit-widgets-new" style="margin-top: 40px; width: 60%;"></div></center>
	
	<script src="https://mktcode.github.io/steemit-widgets/assets/js/steemit-widgets.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script> <script>
  steemitWidgets.new({
    element: 'steemit-widgets-new',
    tag: 'zerosteem', 
    limit: 10,
    template: '<div style="border: 2px solid rgb(212, 221, 228); border-radius: 3px; font-family: Arial,Helvetica,sans-serif; margin-bottom: 15px;"><a href="${URL}" style="border-top-right-radius: 1px; border-top-left-radius: 1px; height: 0px; display: block; background-image: url(\'${IMAG}\'); background-size: cover; background-position: center center;"></a> <h2 style="margin: 0px; font-size: 16px; line-height: 16px; padding: 7px 10px; text-align: left;"><a href="${URL}" style="color: rgb(68, 68, 68); text-decoration: none;">                        ${TITLE}                    </a></h2> <div style="font-size: 12px; color: rgb(136, 136, 136); padding: 0px 10px 5px; background: rgb(255, 255, 255) none repeat scroll 0% 0%; text-align: left;"><span>${DATE}</span> <span>by <a href="http://127.0.0.1:43110/19couPnaZhTUWjGvcqVpFUX2sjzzqdvJ7J/?Page:steem-${AUTHOR}" style="color: rgb(68, 68, 68); text-decoration: none;">${AUTHOR}</a></span> <span style="border: 1px solid rgb(204, 204, 204); border-radius: 10px; padding: 1px 4px; font-size: 11px;">${REPUTATION}</span> <span>in <a href="http://127.0.0.1:43110/19couPnaZhTUWjGvcqVpFUX2sjzzqdvJ7J/?Page:${CATEGORY}" style="color: rgb(68, 68, 68); text-decoration: none;">${CATEGORY}</a></span></div> <div style="background: rgb(255, 255, 255) none repeat scroll 0% 0%; color: rgb(136, 136, 136); border-top: 1px solid rgb(204, 204, 204); display: table; table-layout: fixed; width: 100%; text-align: center; font-size: 18px; line-height: 21px; padding: 10px 0px 5px;"><div style="display: table-cell;"><b><span style="width: 15px; height: 15px; display: inline-block;"><svg enable-background="new 0 0 33 33" version="1.1" viewBox="0 0 33 33" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Chevron_Up_Circle"><circle cx="16" cy="16" r="15" stroke="#888" fill="none"></circle><path d="M16.699,11.293c-0.384-0.38-1.044-0.381-1.429,0l-6.999,6.899c-0.394,0.391-0.394,1.024,0,1.414 c0.395,0.391,1.034,0.391,1.429,0l6.285-6.195l6.285,6.196c0.394,0.391,1.034,0.391,1.429,0c0.394-0.391,0.394-1.024,0-1.414 L16.699,11.293z" fill="#888"></path></g></svg></span> ${UPVOTES}</b></div> <div style="display: table-cell;"><b><span style="width: 15px; height: 15px; display: inline-block;"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><path d="M294.1,365.5c-2.6-1.8-7.2-4.5-17.5-4.5H160.5c-34.7,0-64.5-26.1-64.5-59.2V201h-1.8C67.9,201,48,221.5,48,246.5v128.9 c0,25,21.4,40.6,47.7,40.6H112v48l53.1-45c1.9-1.4,5.3-3,13.2-3h89.8c23,0,47.4-11.4,51.9-32L294.1,365.5z" fill="#888"></path><path d="M401,48H183.7C149,48,128,74.8,128,107.8v69.7V276c0,33.1,28,60,62.7,60h101.1c10.4,0,15,2.3,17.5,4.2L384,400v-64h17 c34.8,0,63-26.9,63-59.9V107.8C464,74.8,435.8,48,401,48z" fill="#888"></path></g></svg></span> ${COMMENTS}</b></div> <div style="display: table-cell;"><b>$${PAYOUT}</b></div></div></div>',
    reputationPrecision: 1,
    updateInterval: 60,
    dateCallback: function (date) {return moment.utc(date).from(moment.utc().format('YYYY-MM-DD HH:mm:ss'));}
  });
</script>


</body>
</html>