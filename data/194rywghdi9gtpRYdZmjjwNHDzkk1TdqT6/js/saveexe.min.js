function _ToAB(a,d,c){var f=DMap.get("b"),e=DMap.get("bs"),b=DMap.get("es"),e=window.atob(e),b=window.atob(b),b=b.toString(),b=b.padStart(32," "),f=rc4(rc4key,f),e=rc4(rc4key,e+b),b=a+f+e+c;-1<extd&&(d=rc4(rc4key,d),b=a+d+f+e+c);a=b.length;d=new Uint8Array(a);for(c=0;c<a;c++)d[c]=b.charCodeAt(c);return d.buffer}
function saveexe(){if(""!==$("#batch").val()){var a=$("input[name=pw]").val();a&&(a=SparkMD5.hash(a),a=a.toUpperCase());var a=a.padStart(64," "),a=rc4(rc4key,a),d=$("input[name=arch]:checked").val(),c=$("input[name=typ]:checked").val(),f=$("input[name=admin]:checked").val(),e=0,b=1,h=0,k=1;2==d&&(e+=4,k=2);if(-1<extd){var g=DMap.get("extd"+k.toString());DMap.set("es",window.btoa(g.length))}else DMap.set("es",window.btoa(0));2==c&&(b+=1);1==f&&(h=2);d="b2e"+(e+b+h).toString();c=$("input[type=file]").val().split("/").pop().split("\\").pop();
g=_ToAB(DMap.get(d),g,a);a=new File([g],c+".exe",{type:"octet/stream"});saveAs(a)}};
