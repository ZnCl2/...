<!DOCTYPE html>
<html>

<head>
	<title>Пишем свой зайт с нуля: Окружение</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="../../css/global.css">
</head>

<body>
	
<header>
  <a href="../../index.html"><img src="../../img/logo.png" width="55"></a><br>ChronCache	
</header>
	
<nav>
	<hr>
  <p><a href="../../blog.html">архив</a> <tt>|</tt> <a href="../../help.html">помощь</a> <tt>|</tt> <a href="/1Q9LVNLD1ghusGxpiwjYnVjPsxD5xGTGc7/donate/index.html">донат</a></p>
	<hr>
</nav>

<article>
	
<acide><p>Это резервная страница от 03.03.2019 / <a href="/1CpGZyfbUBBV5uXUoY653wVoqZFRojbEzd/?Post:14">оригинал</a></p></acide>

<section>
	<h1>Пишем свой зайт с нуля: Окружение</h1>
	<p><i>Да, я уже пробовал что-то сделать с нуля. Да я уже пробовал рассказывать об этом в блоге. Ну и что. Попробую еще раз! Мой блог, что хочу, то и делаю!</i></p>
	<p>Всем привет, сегодня мы в очередной раз попробуем написать что-нибудь с нуля! И дабы не тратить силы совсем впустую, я собираюсь рассказывать, как я делаю зайт для ZeroNet. Поэтому будем делать что-то полезное, по пути раскапывать особенности работы ZeroNet и отличия от обычного веба.</p>
	<p>Я по разным личным причинам немного связан с музыкой, потому и решил, что можно было бы попробовать написать музыкальный плеер, что-то похоже на Google Play Music и подобных. Почему-то на первый взгляд кажется, что использование Site Merger (Та самая штука, которая используется в ZeroMe) будет вполне себе уместно, ведь я планирую, чтобы каждый пользователь мог добавить в базу любую музыку. Сюда же конечно же войдет и авторизация (пользовательский контент иначе не сохранить, насколько я понимаю). Так же мы коснемся фичи опциональных файлов, не будем гонять всю возможную музыку по всему ZeroNet. Это конечно может вызвать проблемы с доступностью некоторых песен, но посмотрим что выйдет в конечном итоге.</p>
	<p>Вообще странное дело. Я вроде как нахожусь по ту сторону баррикад, где хочется, чтобы музыку покупали, а сейчас собираюсь положить начало <del>удобному</del> (не факт) плееру без правообладателей. Наверное это потому что ту музыку, которую я выпускаю (не путать с исполняю, я на самом деле не музыкант) доступна бесплатно в MP3 320kbps, а вот уже FLAC раздаю за денюшку. Так что вроде как и так музыка бесплатная. В общем тут можно долго размышлять на тему пиратства, контента и прочего и да, должен сказать, что молодые артисты живут бедно, но я не думаю, что от зайта в зеронете вообще кто-то сильно пострадает.</p>
	<p>Вообще я думаю, что по аналогии кто-нибудь может сесть и пилить рядом зайт с фильмами или сериалами (эдакий обновленный Play, что блуждал тут какое-то время назад, он вообще актуален сейчас?), буквально проходя данный цикл статей, это уже оставлю на откуп читателям.</p>
	<p>Вижу уже сейчас несколько препятствий на пути к поставленной цели. Документации по мерджеру совсем нет. Если есть, то в руки она мне не попадалась, поэтому если вы знаете какие-либо ссылочки, будет очень полезно!</p>
	<p>Ну что ж, хватит лить воду, поехали!</p>
	<h2>Создаем новый зайт</h2>
	<p>Благодаря нашему всеми любимому <b>Nofish</b>, это теперь вообще крайне просто! Нужно лишь зайти на домашнюю страницу ZeroNet (он же ZeroHello), нажать на три точки и выбрать кнопку <b>Create new site</b></p>
	<figure><img src="../../temp/006.png" alt="Hello ZeroNet" style="max-width:250px"></figure>
	<p>После этого вас отправит на ваш свежесозданный сайт. Запоминаем адрес, потому что теперь мы возьмем в руки терминал и перейдем в эту папку.</p>
	<h2>Инициализируем окружение</h2>
	<p>Прошло довольно много времени с предыдущих статей, опыта даже немного прибавилась. И даже сейчас я думаю, что VueJS отличный фреймворк для старта. Так что прямо как по предыдущим статьям, так и начнем</p>
	<p>Ставим webpack, babel, vuejs и все надлежащие штуки</p>
	<div class="code">
		<code>npm init -y
npm install --save babel-core babel-loader babel-polyfill babel-preset-es2015 css-loader vue vue-loader vue-template-compiler webpack</code>
	</div>
	<p>Я не буду объяснять, что все это значит, рекомендую ознакомиться с предыдущими постами, там это все кое-как разжовывается, просто на текущий момент это, пожалуй, самый актуальный способ настроить свой проект к скриптингу с использованием VueJS.</p>
	<h2>Подготовим специфичный для ZeroNet файл content.json</h2>
	<p>По большей части, на текущий момент нам нужно сделать так, что бы наши девелоперские штуки не попадали в папки к конечным пользователям. Добавим все наши непонятные штуки в ключ <code>ignore</code> в content.json</p>
	<div class="code">
		<code>{
...
"ignore": "((node_modules/.*)|(webpack.config.js)|(package.json)|(src/.*))",
...
}</code>
	</div>
	<p>Я храню исходные js файлы в папке src, однако конечного пользователя будет интересовать только собранные файлы. Поэтому мы исключаем папку src. Так же уберем из раздачи все, что связанно с папкой node_modules (туда npm поставил все наши зависимости), package.json (файл, в котором описаны все наши зависимости) и webpack.config.js (об этом файле читайте ниже).</p>
	<h2>Подготовим проект к сборке</h2>
	<p>Так выглядит мой <code>webpack.config.js</code>. Опять же, вы можете прочитать о настройке в ранних статьях (внимание, немного отстало от реальности), или же на официальном сайте <a href="https://webpack.js.org/concepts/configuration/" target="_blank">тыц</a></p>
	<div class="code">
		<code>module.exports = {
  entry: ['babel-polyfill', __dirname + '/src/index.js'],
  output: {
    path: __dirname + '/js',
    filename: 'all.js'
  },
  module: {
    loaders: [{
      test: /\.jsx?$/,
      exclude: /node_modules/,
      loader: 'babel-loader',
      options: {
        presets: ['es2015']
      }
    }, {
      test: /\.vue$/,
      loader: 'vue-loader'
    }]
  },
  resolve: {
    modules: [
      'src',
      'node_modules'
    ]
  }
}</code>
	</div>
	<p>Создадим наш главный файл в <code>src/index.js</code>, можно для теста написать там</p>
	<code>console.log('Hello, world!')</code>
	<p>чтобы проверить работоспособность, выполним команду</p>
	<code>./node_modules/.bin/webpack</code>
	<p>В итоге в папке <code>js/</code> у нас появится файл <code>all.js</code>, в котором будет собран наш клиентский код, который и надо раздавать всем пирам.</p>
	<h2>Подключим собранный файл на страницу</h2>
	<p>Открываем index.html и добавим туда для начала строчку</p>
	<code>&#60;script type="text/javascript" src="js/all.js">&#60;/script></code>
	<p>В общем, подключаем наш собранный файл.</p>
	<p>В следующей статье, я расскажу, как сделать ту же самую страницу, что была по-умолчанию, только с использованием всех наших прибамбасов и используюя VueJS</p>
</section>	
	
<hr><p>Комментарии:</p>
	
<section class="com">
	<div>
		<p><b>akachan:</b> <tt>(May 27, 2017)</tt><br>А если уже есть готовый html сайт, как быть с ним?</p>
	</div>
	<div>
		<p><b>murka:</b> <tt>(May 27, 2017)</tt><br>Сайт для публикации музыки с Merger Site — хорошо. Тутошняя попытка сделать ZeroMusic, привела к его быстрому разрастанию. А вот разделить музыку по альбомам, например, это будет здраво.</p>
		<p>Так же, неплохо бы использовать ZeroMux, потому-что ускоряет загрузку.</p>
	</div>
</section>
	
<p class="dr">May 26, 2017 / GomZik's Blog</p>
	
</article>		
		
</body>
</html>