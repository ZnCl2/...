<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Comment paging, Newsfeed follow buttons - 0git - 0git - a list of git repositories on ZeroNet
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="0git.git Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="../logo.png" alt="" width="32" height="32" /></a></td><td><h1>0git</h1><span class="desc">0git - a list of git repositories on ZeroNet
</span></td></tr><tr class="url"><td></td><td>git clone <a href="http://127.0.0.1:43110/0git.bit/0git.git">http://127.0.0.1:43110/0git.bit/0git.git</a></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.md.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/817da44b2780fdbfe81ce9b4dec6fb25716abd1b.html">817da44b2780fdbfe81ce9b4dec6fb25716abd1b</a>
<b>parent</b> <a href="../commit/9fd7a88b1d9472569c7c7ae09db2d0e6ad971d2f.html">9fd7a88b1d9472569c7c7ae09db2d0e6ad971d2f</a>
<b>Author:</b> HelloZeroNet &lt;<a href="mailto:hello@noloop.me">hello@noloop.me</a>&gt;
<b>Date:</b>   Sat Jan 30 21:51:13 +0100

Comment paging, Newsfeed follow buttons

<b>Diffstat:</b>
<table><tr><td><a href="#h0">css/Follow.css</a></td><td> | </td><td class="num">34</td><td><span class="i">++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td><a href="#h1">css/Menu.css</a></td><td> | </td><td class="num">16</td><td><span class="i">++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td><a href="#h2">css/ZeroTalk.css</a></td><td> | </td><td class="num">22</td><td><span class="i">+++++++++++++</span><span class="d">---------</span></td></tr>
<tr><td><a href="#h3">css/all.css</a></td><td> | </td><td class="num">78</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">--------</span></td></tr>
<tr><td><a href="#h4">index.html</a></td><td> | </td><td class="num">9</td><td><span class="i">+++++++++</span><span class="d"></span></td></tr>
<tr><td><a href="#h5">js/TopicList.coffee</a></td><td> | </td><td class="num">67</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td><a href="#h6">js/TopicShow.coffee</a></td><td> | </td><td class="num">50</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">----</span></td></tr>
<tr><td><a href="#h7">js/all.js</a></td><td> | </td><td class="num">287</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">--</span></td></tr>
<tr><td><a href="#h8">js/utils/Follow.coffee</a></td><td> | </td><td class="num">82</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td><a href="#h9">js/utils/Menu.coffee</a></td><td> | </td><td class="num">47</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
</table>10 files changed, 664 insertions(+), 28 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/css/Follow.css.html">css/Follow.css</a> b/<a href="../file/css/Follow.css.html">css/Follow.css</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -0,0 +1,33 @@
</a><a href="#h0-0-0" id="h0-0-0" class="i">+.icon-feed {
</a><a href="#h0-0-1" id="h0-0-1" class="i">+	width: 3px; height: 3px; display: inline-block; border-radius: 10px; background-color: #333;
</a><a href="#h0-0-2" id="h0-0-2" class="i">+	position: relative; margin-right: 10px; margin-top: 10px; margin-left: 5px; transition: all 0.3s
</a><a href="#h0-0-3" id="h0-0-3" class="i">+}
</a><a href="#h0-0-4" id="h0-0-4" class="i">+.icon-feed:after {
</a><a href="#h0-0-5" id="h0-0-5" class="i">+	content: &quot;&quot;; width: 5px; height: 5px; border-top: 2px solid #333; border-right: 2px solid #333; border-radius: 0px 6px 0px 0px;
</a><a href="#h0-0-6" id="h0-0-6" class="i">+	display: block; border-right: 2px solid #333; bottom: 0px; position: absolute; transition: all 0.3s
</a><a href="#h0-0-7" id="h0-0-7" class="i">+}
</a><a href="#h0-0-8" id="h0-0-8" class="i">+.icon-feed:before{
</a><a href="#h0-0-9" id="h0-0-9" class="i">+	content: &quot;&quot;; width: 9px; height: 9px; border-top: 2px solid #333; border-right: 2px solid #333; border-radius: 0px 10px 0px 0px;
</a><a href="#h0-0-10" id="h0-0-10" class="i">+	display: block; bottom: 0px; position: absolute; transition: all 0.3s
</a><a href="#h0-0-11" id="h0-0-11" class="i">+}
</a><a href="#h0-0-12" id="h0-0-12" class="i">+
</a><a href="#h0-0-13" id="h0-0-13" class="i">+.feed-follow {
</a><a href="#h0-0-14" id="h0-0-14" class="i">+	font-size: 14px; display: inline-block; padding: 7px 14px; font-weight: normal; display: none;
</a><a href="#h0-0-15" id="h0-0-15" class="i">+	border-radius: 4px; border: 1px solid #E3E3E3; transition: all 0.3s; vertical-align: 170%; margin-left: 10px;
</a><a href="#h0-0-16" id="h0-0-16" class="i">+}
</a><a href="#h0-0-17" id="h0-0-17" class="i">+.feed-follow .text-follow, .feed-follow .text-following {
</a><a href="#h0-0-18" id="h0-0-18" class="i">+	max-width: 0px; opacity: 0; overflow: hidden; display: inline-block; vertical-align: bottom;
</a><a href="#h0-0-19" id="h0-0-19" class="i">+	transition: all 0.3s; white-space: nowrap; font-size: 14px; font-weight: normal; color: #666;
</a><a href="#h0-0-20" id="h0-0-20" class="i">+}
</a><a href="#h0-0-21" id="h0-0-21" class="i">+.feed-follow .text-follow { max-width: 125px; opacity: 1 }
</a><a href="#h0-0-22" id="h0-0-22" class="i">+.feed-follow.following .text-following { max-width: 60px; opacity: 1; /*color: #229A55;*/ }
</a><a href="#h0-0-23" id="h0-0-23" class="i">+.feed-follow.following .text-follow { max-width: 0px; opacity: 0 }
</a><a href="#h0-0-24" id="h0-0-24" class="i">+
</a><a href="#h0-0-25" id="h0-0-25" class="i">+.feed-follow:hover { background-color: #FEFEFE; transition: none; border-color: #BBBBBB; color: black }
</a><a href="#h0-0-26" id="h0-0-26" class="i">+.feed-follow:active { border-color: #229A55 }
</a><a href="#h0-0-27" id="h0-0-27" class="i">+.feed-follow.following { border: 1px solid transparent }
</a><a href="#h0-0-28" id="h0-0-28" class="i">+.feed-follow.following .icon-feed { background-color: #229A55; transition: none }
</a><a href="#h0-0-29" id="h0-0-29" class="i">+.feed-follow.following .icon-feed:after, .feed-follow.following .icon-feed:before { border-color: #229A55; transition: none }
</a><a href="#h0-0-30" id="h0-0-30" class="i">+
</a><a href="#h0-0-31" id="h0-0-31" class="i">+.feed-follow-show { float: right; border: 1px solid white; padding: 0px; margin-top: 5px }
</a><a href="#h0-0-32" id="h0-0-32" class="i">+.feed-follow-show:hover { border: 1px solid white }</a><a href="#h0-0-33" id="h0-0-33" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h1" href="../file/css/Menu.css.html">css/Menu.css</a> b/<a href="../file/css/Menu.css.html">css/Menu.css</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -0,0 +1,15 @@
</a><a href="#h1-0-0" id="h1-0-0" class="i">+.menu {
</a><a href="#h1-0-1" id="h1-0-1" class="i">+	background-color: white; padding: 10px 0px; position: absolute; top: 0px; left: 0px; max-height: 0px; overflow: hidden; transform: translate(0px, -30px); pointer-events: none;
</a><a href="#h1-0-2" id="h1-0-2" class="i">+	box-shadow: 0px 2px 8px rgba(0,0,0,0.3); border-radius: 2px; opacity: 0; transition: opacity 0.2s ease-out, transform 1s ease-out, max-height 0.2s ease-in-out;
</a><a href="#h1-0-3" id="h1-0-3" class="i">+}
</a><a href="#h1-0-4" id="h1-0-4" class="i">+.menu.visible { opacity: 1; max-height: 350px; transform: translate(0px, 0px); transition: opacity 0.1s ease-out, transform 0.3s ease-out, max-height 0.3s ease-in-out; pointer-events: all }
</a><a href="#h1-0-5" id="h1-0-5" class="i">+
</a><a href="#h1-0-6" id="h1-0-6" class="i">+.menu-item { display: block; text-decoration: none; color: black; padding: 6px 24px; transition: all 0.2s; border-bottom: none; font-weight: normal; padding-left: 30px; }
</a><a href="#h1-0-7" id="h1-0-7" class="i">+.menu-item-separator { margin-top: 5px; border-top: 1px solid #eee }
</a><a href="#h1-0-8" id="h1-0-8" class="i">+
</a><a href="#h1-0-9" id="h1-0-9" class="i">+.menu-item:hover { background-color: #F6F6F6; transition: none; color: inherit; border: none }
</a><a href="#h1-0-10" id="h1-0-10" class="i">+.menu-item:active, .menu-item:focus { background-color: #AF3BFF; color: white; transition: none }
</a><a href="#h1-0-11" id="h1-0-11" class="i">+.menu-item.selected:before {
</a><a href="#h1-0-12" id="h1-0-12" class="i">+	content: &quot;L&quot;; display: inline-block; transform: rotateZ(45deg) scaleX(-1);
</a><a href="#h1-0-13" id="h1-0-13" class="i">+	font-weight: bold; position: absolute; margin-left: -17px; font-size: 12px; margin-top: 2px;
</a><a href="#h1-0-14" id="h1-0-14" class="i">+}</a><a href="#h1-0-15" id="h1-0-15" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h2" href="../file/css/ZeroTalk.css.html">css/ZeroTalk.css</a> b/<a href="../file/css/ZeroTalk.css.html">css/ZeroTalk.css</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -85,12 +85,13 @@ input.text:focus, textarea:focus { border-color: #5FC0EA; outline: none; backgro
</a> /* Topics */
 .topics-title, .topic-title {
 	line-height: 1.2em; font-weight: lighter; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
<a href="#h2-0-3" id="h2-0-3" class="d">-	margin-bottom: 9px; padding-top: 7px; font-size: 45px; padding-left: 22px; display: inline-block; width: 100%; box-sizing: border-box
</a><a href="#h2-0-4" id="h2-0-4" class="i">+	margin-bottom: 9px; padding-top: 7px; font-size: 45px; padding-left: 22px; display: inline-block; max-width: 100%; box-sizing: border-box
</a> }
<a href="#h2-0-6" id="h2-0-6" class="i">+.topic-title { font-size: 35px; }
</a> .parent-link { font-size: 19px; font-weight: bold; line-height: 19px }
<a href="#h2-0-8" id="h2-0-8" class="d">-.topic-new { overflow: hidden; backface-visibility: hidden }
</a><a href="#h2-0-9" id="h2-0-9" class="i">+.topic-new { overflow: hidden; backface-visibility: hidden; margin-bottom: 15px !important }
</a> .topic-new-link {
<a href="#h2-0-11" id="h2-0-11" class="d">-	float: right; margin-top: -46px; margin-right: 1px; color: #AAA; padding: 6px 10px; white-space: nowrap;
</a><a href="#h2-0-12" id="h2-0-12" class="i">+	float: right; margin-top: 33px; margin-right: 1px; color: #AAA; padding: 6px 10px; white-space: nowrap;
</a> 	overflow: hidden; background-color: rgba(245,245,245,0.9); z-index: 1; position: relative; transition: all 0.3s
 }
 .topic-new-link:hover { color: #DB3207; transition: none }
<a href="#h2-1" id="h2-1" class="h">@@ -98,7 +99,10 @@ input.text:focus, textarea:focus { border-color: #5FC0EA; outline: none; backgro
</a> .topic { background-color: white; padding: 15px 25px; margin: 1px; padding-left: 110px; position: relative; }
 .topic-group { border-left: 2px solid #DB3207; margin-left: -2px; }
 .topic-group:before { content: &quot;\203A&quot;; float: right; padding: 18px 0px; font-size: 25px; color: #999; font-family: Tahoma }
<a href="#h2-1-3" id="h2-1-3" class="d">-.topic-sticky:before { content: &quot;stickied&quot;; float: right; font-size: 10px; margin-right: -25px; background-color: #F7DE6E; padding: 2px 5px; color: #827850; text-transform: uppercase; letter-spacing: 0.5px; }
</a><a href="#h2-1-4" id="h2-1-4" class="i">+.topic-sticky:before {
</a><a href="#h2-1-5" id="h2-1-5" class="i">+	content: &quot;stickied&quot;; float: right; font-size: 10px; margin-right: -25px; background-color: #F7DE6E; padding: 2px 5px; color: #827850;
</a><a href="#h2-1-6" id="h2-1-6" class="i">+	text-transform: uppercase; letter-spacing: 0.5px; margin-top: 5px; margin-left: 5px;
</a><a href="#h2-1-7" id="h2-1-7" class="i">+}
</a> .topic-sticky { margin-bottom: 5px; margin-top: -4px }
 .topic .image { position: absolute; margin-left: -72px; margin-top: 5px; opacity: 0.3 }
 .topic .title { padding-bottom: 4px }
<a href="#h2-2" id="h2-2" class="h">@@ -144,7 +148,7 @@ input.text:focus, textarea:focus { border-color: #5FC0EA; outline: none; backgro
</a> .comment .info { font-size: 12px; color: #AAA; margin-bottom: 7px }
 .comment .info .score { margin-left: 5px }
 .comment .body { line-height: 1.5em }
<a href="#h2-2-3" id="h2-2-3" class="d">-.comment .body p { margin-top: 0.5em; margin-bottom: 0.5em; word-wrap: break-word; }
</a><a href="#h2-2-4" id="h2-2-4" class="i">+.comment .body p { margin-top: 0.5em; margin-bottom: 0.5em; word-wrap: break-word; overflow: hidden; backface-visibility: hidden }
</a> .comment .body.editor { margin-top: 0.5em !important; margin-bottom: 0.5em !important }
 .comment .body h1, .comment .body h2, .comment .body h3 { font-size: 110% }
 .comment .body blockquote { padding: 1px 15px; border-left: 2px solid #E7E7E7; margin: 0px; margin-top: 30px }
<a href="#h2-3" id="h2-3" class="h">@@ -198,9 +202,9 @@ input.text:focus, textarea:focus { border-color: #5FC0EA; outline: none; backgro
</a> .page-topic .comments-new { display: inherit }
 
 
<a href="#h2-3-3" id="h2-3-3" class="d">-.topics-more {
</a><a href="#h2-3-4" id="h2-3-4" class="i">+.topics-more, .comments-more {
</a> 	background-color: transparent; border: 1px solid #EEE; display: none; transition: all 0.3s; margin-top: -60px;
 	padding: 10px 0px; border-radius: 2px; width: 100%; text-align: center; color: #8C8C8C; box-sizing: border-box;
 }
<a href="#h2-3-8" id="h2-3-8" class="d">-.topics-more:hover { border: 1px solid #999; background-color: #FFF400; transition: none; border: 1px #FFF400 solid; }
</a><a href="#h2-3-9" id="h2-3-9" class="d">-.topics-more:active { position: relative; top: 1px }</a><a href="#h2-3-10" id="h2-3-10" class="d">-
\ No newline at end of file
</a><a href="#h2-3-11" id="h2-3-11" class="i">+.topics-more:hover, .comments-more:hover { border: 1px solid #999; background-color: #FFF400; transition: none; border: 1px #FFF400 solid; }
</a><a href="#h2-3-12" id="h2-3-12" class="i">+.topics-more:active, .comments-more:active { position: relative; top: 1px }</a><a href="#h2-3-13" id="h2-3-13" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h3" href="../file/css/all.css.html">css/all.css</a> b/<a href="../file/css/all.css.html">css/all.css</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -1,5 +1,43 @@
</a> 
 
<a href="#h3-0-2" id="h3-0-2" class="i">+/* ---- data/1TaLkFrMwvbNsooF4ioKAY9EuxTBTjipT/css/Follow.css ---- */
</a><a href="#h3-0-3" id="h3-0-3" class="i">+
</a><a href="#h3-0-4" id="h3-0-4" class="i">+
</a><a href="#h3-0-5" id="h3-0-5" class="i">+.icon-feed {
</a><a href="#h3-0-6" id="h3-0-6" class="i">+	width: 3px; height: 3px; display: inline-block; -webkit-border-radius: 10px; -moz-border-radius: 10px; -o-border-radius: 10px; -ms-border-radius: 10px; border-radius: 10px ; background-color: #333;
</a><a href="#h3-0-7" id="h3-0-7" class="i">+	position: relative; margin-right: 10px; margin-top: 10px; margin-left: 5px; transition: all 0.3s
</a><a href="#h3-0-8" id="h3-0-8" class="i">+}
</a><a href="#h3-0-9" id="h3-0-9" class="i">+.icon-feed:after {
</a><a href="#h3-0-10" id="h3-0-10" class="i">+	content: &quot;&quot;; width: 5px; height: 5px; border-top: 2px solid #333; border-right: 2px solid #333; -webkit-border-radius: 0px 6px 0px 0px; -moz-border-radius: 0px 6px 0px 0px; -o-border-radius: 0px 6px 0px 0px; -ms-border-radius: 0px 6px 0px 0px; border-radius: 0px 6px 0px 0px ;
</a><a href="#h3-0-11" id="h3-0-11" class="i">+	display: block; border-right: 2px solid #333; bottom: 0px; position: absolute; transition: all 0.3s
</a><a href="#h3-0-12" id="h3-0-12" class="i">+}
</a><a href="#h3-0-13" id="h3-0-13" class="i">+.icon-feed:before{
</a><a href="#h3-0-14" id="h3-0-14" class="i">+	content: &quot;&quot;; width: 9px; height: 9px; border-top: 2px solid #333; border-right: 2px solid #333; -webkit-border-radius: 0px 10px 0px 0px; -moz-border-radius: 0px 10px 0px 0px; -o-border-radius: 0px 10px 0px 0px; -ms-border-radius: 0px 10px 0px 0px; border-radius: 0px 10px 0px 0px ;
</a><a href="#h3-0-15" id="h3-0-15" class="i">+	display: block; bottom: 0px; position: absolute; transition: all 0.3s
</a><a href="#h3-0-16" id="h3-0-16" class="i">+}
</a><a href="#h3-0-17" id="h3-0-17" class="i">+
</a><a href="#h3-0-18" id="h3-0-18" class="i">+.feed-follow {
</a><a href="#h3-0-19" id="h3-0-19" class="i">+	font-size: 14px; display: inline-block; padding: 7px 14px; font-weight: normal; display: none;
</a><a href="#h3-0-20" id="h3-0-20" class="i">+	-webkit-border-radius: 4px; -moz-border-radius: 4px; -o-border-radius: 4px; -ms-border-radius: 4px; border-radius: 4px ; border: 1px solid #E3E3E3; -webkit-transition: all 0.3s; -moz-transition: all 0.3s; -o-transition: all 0.3s; -ms-transition: all 0.3s; transition: all 0.3s ; vertical-align: 170%; margin-left: 10px;
</a><a href="#h3-0-21" id="h3-0-21" class="i">+}
</a><a href="#h3-0-22" id="h3-0-22" class="i">+.feed-follow .text-follow, .feed-follow .text-following {
</a><a href="#h3-0-23" id="h3-0-23" class="i">+	max-width: 0px; opacity: 0; overflow: hidden; display: inline-block; vertical-align: bottom;
</a><a href="#h3-0-24" id="h3-0-24" class="i">+	-webkit-transition: all 0.3s; -moz-transition: all 0.3s; -o-transition: all 0.3s; -ms-transition: all 0.3s; transition: all 0.3s ; white-space: nowrap; font-size: 14px; font-weight: normal; color: #666;
</a><a href="#h3-0-25" id="h3-0-25" class="i">+}
</a><a href="#h3-0-26" id="h3-0-26" class="i">+.feed-follow .text-follow { max-width: 125px; opacity: 1 }
</a><a href="#h3-0-27" id="h3-0-27" class="i">+.feed-follow.following .text-following { max-width: 60px; opacity: 1; /*color: #229A55;*/ }
</a><a href="#h3-0-28" id="h3-0-28" class="i">+.feed-follow.following .text-follow { max-width: 0px; opacity: 0 }
</a><a href="#h3-0-29" id="h3-0-29" class="i">+
</a><a href="#h3-0-30" id="h3-0-30" class="i">+.feed-follow:hover { background-color: #FEFEFE; -webkit-transition: none; -moz-transition: none; -o-transition: none; -ms-transition: none; transition: none ; border-color: #BBBBBB; color: black }
</a><a href="#h3-0-31" id="h3-0-31" class="i">+.feed-follow:active { border-color: #229A55 }
</a><a href="#h3-0-32" id="h3-0-32" class="i">+.feed-follow.following { border: 1px solid transparent }
</a><a href="#h3-0-33" id="h3-0-33" class="i">+.feed-follow.following .icon-feed { background-color: #229A55; -webkit-transition: none ; -moz-transition: none ; -o-transition: none ; -ms-transition: none ; transition: none  }
</a><a href="#h3-0-34" id="h3-0-34" class="i">+.feed-follow.following .icon-feed:after, .feed-follow.following .icon-feed:before { border-color: #229A55; -webkit-transition: none ; -moz-transition: none ; -o-transition: none ; -ms-transition: none ; transition: none  }
</a><a href="#h3-0-35" id="h3-0-35" class="i">+
</a><a href="#h3-0-36" id="h3-0-36" class="i">+.feed-follow-show { float: right; border: 1px solid white; padding: 0px; margin-top: 5px }
</a><a href="#h3-0-37" id="h3-0-37" class="i">+.feed-follow-show:hover { border: 1px solid white }
</a><a href="#h3-0-38" id="h3-0-38" class="i">+
</a><a href="#h3-0-39" id="h3-0-39" class="i">+
</a> /* ---- data/1TaLkFrMwvbNsooF4ioKAY9EuxTBTjipT/css/InlineEditor.css ---- */
 
 
<a href="#h3-1" id="h3-1" class="h">@@ -47,6 +85,26 @@
</a> }
 
 
<a href="#h3-1-3" id="h3-1-3" class="i">+/* ---- data/1TaLkFrMwvbNsooF4ioKAY9EuxTBTjipT/css/Menu.css ---- */
</a><a href="#h3-1-4" id="h3-1-4" class="i">+
</a><a href="#h3-1-5" id="h3-1-5" class="i">+
</a><a href="#h3-1-6" id="h3-1-6" class="i">+.menu {
</a><a href="#h3-1-7" id="h3-1-7" class="i">+	background-color: white; padding: 10px 0px; position: absolute; top: 0px; left: 0px; max-height: 0px; overflow: hidden; -webkit-transform: translate(0px, -30px); -moz-transform: translate(0px, -30px); -o-transform: translate(0px, -30px); -ms-transform: translate(0px, -30px); transform: translate(0px, -30px) ; pointer-events: none;
</a><a href="#h3-1-8" id="h3-1-8" class="i">+	-webkit-box-shadow: 0px 2px 8px rgba(0,0,0,0.3); -moz-box-shadow: 0px 2px 8px rgba(0,0,0,0.3); -o-box-shadow: 0px 2px 8px rgba(0,0,0,0.3); -ms-box-shadow: 0px 2px 8px rgba(0,0,0,0.3); box-shadow: 0px 2px 8px rgba(0,0,0,0.3) ; -webkit-border-radius: 2px; -moz-border-radius: 2px; -o-border-radius: 2px; -ms-border-radius: 2px; border-radius: 2px ; opacity: 0; -webkit-transition: opacity 0.2s ease-out, transform 1s ease-out, max-height 0.2s ease-in-out; -moz-transition: opacity 0.2s ease-out, transform 1s ease-out, max-height 0.2s ease-in-out; -o-transition: opacity 0.2s ease-out, transform 1s ease-out, max-height 0.2s ease-in-out; -ms-transition: opacity 0.2s ease-out, transform 1s ease-out, max-height 0.2s ease-in-out; transition: opacity 0.2s ease-out, transform 1s ease-out, max-height 0.2s ease-in-out ;
</a><a href="#h3-1-9" id="h3-1-9" class="i">+}
</a><a href="#h3-1-10" id="h3-1-10" class="i">+.menu.visible { opacity: 1; max-height: 350px; -webkit-transform: translate(0px, 0px); -moz-transform: translate(0px, 0px); -o-transform: translate(0px, 0px); -ms-transform: translate(0px, 0px); transform: translate(0px, 0px) ; -webkit-transition: opacity 0.1s ease-out, transform 0.3s ease-out, max-height 0.3s ease-in-out; -moz-transition: opacity 0.1s ease-out, transform 0.3s ease-out, max-height 0.3s ease-in-out; -o-transition: opacity 0.1s ease-out, transform 0.3s ease-out, max-height 0.3s ease-in-out; -ms-transition: opacity 0.1s ease-out, transform 0.3s ease-out, max-height 0.3s ease-in-out; transition: opacity 0.1s ease-out, transform 0.3s ease-out, max-height 0.3s ease-in-out ; pointer-events: all }
</a><a href="#h3-1-11" id="h3-1-11" class="i">+
</a><a href="#h3-1-12" id="h3-1-12" class="i">+.menu-item { display: block; text-decoration: none; color: black; padding: 6px 24px; -webkit-transition: all 0.2s; -moz-transition: all 0.2s; -o-transition: all 0.2s; -ms-transition: all 0.2s; transition: all 0.2s ; border-bottom: none; font-weight: normal; padding-left: 30px; }
</a><a href="#h3-1-13" id="h3-1-13" class="i">+.menu-item-separator { margin-top: 5px; border-top: 1px solid #eee }
</a><a href="#h3-1-14" id="h3-1-14" class="i">+
</a><a href="#h3-1-15" id="h3-1-15" class="i">+.menu-item:hover { background-color: #F6F6F6; -webkit-transition: none; -moz-transition: none; -o-transition: none; -ms-transition: none; transition: none ; color: inherit; border: none }
</a><a href="#h3-1-16" id="h3-1-16" class="i">+.menu-item:active, .menu-item:focus { background-color: #AF3BFF; color: white; -webkit-transition: none ; -moz-transition: none ; -o-transition: none ; -ms-transition: none ; transition: none  }
</a><a href="#h3-1-17" id="h3-1-17" class="i">+.menu-item.selected:before {
</a><a href="#h3-1-18" id="h3-1-18" class="i">+	content: &quot;L&quot;; display: inline-block; -webkit-transform: rotateZ(45deg) scaleX(-1); -moz-transform: rotateZ(45deg) scaleX(-1); -o-transform: rotateZ(45deg) scaleX(-1); -ms-transform: rotateZ(45deg) scaleX(-1); transform: rotateZ(45deg) scaleX(-1) ;
</a><a href="#h3-1-19" id="h3-1-19" class="i">+	font-weight: bold; position: absolute; margin-left: -17px; font-size: 12px; margin-top: 2px;
</a><a href="#h3-1-20" id="h3-1-20" class="i">+}
</a><a href="#h3-1-21" id="h3-1-21" class="i">+
</a><a href="#h3-1-22" id="h3-1-22" class="i">+
</a> /* ---- data/1TaLkFrMwvbNsooF4ioKAY9EuxTBTjipT/css/ZeroTalk.css ---- */
 
 
<a href="#h3-2" id="h3-2" class="h">@@ -137,12 +195,13 @@ input.text:focus, textarea:focus { border-color: #5FC0EA; outline: none; backgro
</a> /* Topics */
 .topics-title, .topic-title {
 	line-height: 1.2em; font-weight: lighter; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
<a href="#h3-2-3" id="h3-2-3" class="d">-	margin-bottom: 9px; padding-top: 7px; font-size: 45px; padding-left: 22px; display: inline-block; width: 100%; box-sizing: border-box
</a><a href="#h3-2-4" id="h3-2-4" class="i">+	margin-bottom: 9px; padding-top: 7px; font-size: 45px; padding-left: 22px; display: inline-block; max-width: 100%; box-sizing: border-box
</a> }
<a href="#h3-2-6" id="h3-2-6" class="i">+.topic-title { font-size: 35px; }
</a> .parent-link { font-size: 19px; font-weight: bold; line-height: 19px }
<a href="#h3-2-8" id="h3-2-8" class="d">-.topic-new { overflow: hidden; -webkit-backface-visibility: hidden ; -moz-backface-visibility: hidden ; -o-backface-visibility: hidden ; -ms-backface-visibility: hidden ; backface-visibility: hidden  }
</a><a href="#h3-2-9" id="h3-2-9" class="i">+.topic-new { overflow: hidden; -webkit-backface-visibility: hidden; -moz-backface-visibility: hidden; -o-backface-visibility: hidden; -ms-backface-visibility: hidden; backface-visibility: hidden ; margin-bottom: 15px !important }
</a> .topic-new-link {
<a href="#h3-2-11" id="h3-2-11" class="d">-	float: right; margin-top: -46px; margin-right: 1px; color: #AAA; padding: 6px 10px; white-space: nowrap;
</a><a href="#h3-2-12" id="h3-2-12" class="i">+	float: right; margin-top: 33px; margin-right: 1px; color: #AAA; padding: 6px 10px; white-space: nowrap;
</a> 	overflow: hidden; background-color: rgba(245,245,245,0.9); z-index: 1; position: relative; transition: all 0.3s
 }
 .topic-new-link:hover { color: #DB3207; -webkit-transition: none ; -moz-transition: none ; -o-transition: none ; -ms-transition: none ; transition: none  }
<a href="#h3-3" id="h3-3" class="h">@@ -150,7 +209,10 @@ input.text:focus, textarea:focus { border-color: #5FC0EA; outline: none; backgro
</a> .topic { background-color: white; padding: 15px 25px; margin: 1px; padding-left: 110px; position: relative; }
 .topic-group { border-left: 2px solid #DB3207; margin-left: -2px; }
 .topic-group:before { content: &quot;\203A&quot;; float: right; padding: 18px 0px; font-size: 25px; color: #999; font-family: Tahoma }
<a href="#h3-3-3" id="h3-3-3" class="d">-.topic-sticky:before { content: &quot;stickied&quot;; float: right; font-size: 10px; margin-right: -25px; background-color: #F7DE6E; padding: 2px 5px; color: #827850; text-transform: uppercase; letter-spacing: 0.5px; }
</a><a href="#h3-3-4" id="h3-3-4" class="i">+.topic-sticky:before {
</a><a href="#h3-3-5" id="h3-3-5" class="i">+	content: &quot;stickied&quot;; float: right; font-size: 10px; margin-right: -25px; background-color: #F7DE6E; padding: 2px 5px; color: #827850;
</a><a href="#h3-3-6" id="h3-3-6" class="i">+	text-transform: uppercase; letter-spacing: 0.5px; margin-top: 5px; margin-left: 5px;
</a><a href="#h3-3-7" id="h3-3-7" class="i">+}
</a> .topic-sticky { margin-bottom: 5px; margin-top: -4px }
 .topic .image { position: absolute; margin-left: -72px; margin-top: 5px; opacity: 0.3 }
 .topic .title { padding-bottom: 4px }
<a href="#h3-4" id="h3-4" class="h">@@ -196,7 +258,7 @@ input.text:focus, textarea:focus { border-color: #5FC0EA; outline: none; backgro
</a> .comment .info { font-size: 12px; color: #AAA; margin-bottom: 7px }
 .comment .info .score { margin-left: 5px }
 .comment .body { line-height: 1.5em }
<a href="#h3-4-3" id="h3-4-3" class="d">-.comment .body p { margin-top: 0.5em; margin-bottom: 0.5em; word-wrap: break-word; }
</a><a href="#h3-4-4" id="h3-4-4" class="i">+.comment .body p { margin-top: 0.5em; margin-bottom: 0.5em; word-wrap: break-word; overflow: hidden; -webkit-backface-visibility: hidden ; -moz-backface-visibility: hidden ; -o-backface-visibility: hidden ; -ms-backface-visibility: hidden ; backface-visibility: hidden  }
</a> .comment .body.editor { margin-top: 0.5em !important; margin-bottom: 0.5em !important }
 .comment .body h1, .comment .body h2, .comment .body h3 { font-size: 110% }
 .comment .body blockquote { padding: 1px 15px; border-left: 2px solid #E7E7E7; margin: 0px; margin-top: 30px }
<a href="#h3-5" id="h3-5" class="h">@@ -250,12 +312,12 @@ input.text:focus, textarea:focus { border-color: #5FC0EA; outline: none; backgro
</a> .page-topic .comments-new { display: inherit }
 
 
<a href="#h3-5-3" id="h3-5-3" class="d">-.topics-more {
</a><a href="#h3-5-4" id="h3-5-4" class="i">+.topics-more, .comments-more {
</a> 	background-color: transparent; border: 1px solid #EEE; display: none; -webkit-transition: all 0.3s; -moz-transition: all 0.3s; -o-transition: all 0.3s; -ms-transition: all 0.3s; transition: all 0.3s ; margin-top: -60px;
 	padding: 10px 0px; -webkit-border-radius: 2px; -moz-border-radius: 2px; -o-border-radius: 2px; -ms-border-radius: 2px; border-radius: 2px ; width: 100%; text-align: center; color: #8C8C8C; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -ms-box-sizing: border-box; box-sizing: border-box ;
 }
<a href="#h3-5-8" id="h3-5-8" class="d">-.topics-more:hover { border: 1px solid #999; background-color: #FFF400; -webkit-transition: none; -moz-transition: none; -o-transition: none; -ms-transition: none; transition: none ; border: 1px #FFF400 solid; }
</a><a href="#h3-5-9" id="h3-5-9" class="d">-.topics-more:active { position: relative; top: 1px }
</a><a href="#h3-5-10" id="h3-5-10" class="i">+.topics-more:hover, .comments-more:hover { border: 1px solid #999; background-color: #FFF400; -webkit-transition: none; -moz-transition: none; -o-transition: none; -ms-transition: none; transition: none ; border: 1px #FFF400 solid; }
</a><a href="#h3-5-11" id="h3-5-11" class="i">+.topics-more:active, .comments-more:active { position: relative; top: 1px }
</a> 
 
 /* ---- data/1TaLkFrMwvbNsooF4ioKAY9EuxTBTjipT/css/fonts.css ---- */
<b>diff --git a/<a id="h4" href="../file/index.html.html">index.html</a> b/<a href="../file/index.html.html">index.html</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -51,6 +51,7 @@
</a> &lt;!-- Page: Main --&gt;
 &lt;div class=&quot;center topics-list&quot;&gt;
  &lt;h1 class=&quot;topics-title&quot;&gt;Newest topics&lt;/h1&gt;
<a href="#h4-0-3" id="h4-0-3" class="i">+ &lt;a href=&quot;#Follow&quot; class=&quot;feed-follow feed-follow-list&quot;&gt;&lt;span class=&apos;text-follow&apos;&gt;Follow in Newsfeed&lt;/span&gt;&lt;span class=&apos;text-following&apos;&gt;Following&lt;/span&gt;&lt;div class=&quot;icon-feed&quot;&gt;&lt;/div&gt;&lt;/a&gt;
</a> 
  &lt;!-- New Topic --&gt;
  &lt;a href=&quot;#New+topic&quot; class=&quot;topic-new-link nolink&quot;&gt; + Create new topic&lt;/a&gt;
<a href="#h4-1" id="h4-1" class="h">@@ -102,6 +103,7 @@
</a> 
  &lt;div class=&quot;topic topic-full&quot;&gt;
   &lt;a href=&quot;#&quot; class=&quot;image nolink&quot;&gt;&lt;div class=&quot;icon icon-topic-chat&quot;&gt;&lt;/div&gt;&lt;/a&gt;
<a href="#h4-1-3" id="h4-1-3" class="i">+  &lt;a href=&quot;#Follow&quot; class=&quot;feed-follow feed-follow-show&quot;&gt;&lt;span class=&apos;text-follow&apos;&gt;Follow in Newsfeed&lt;/span&gt;&lt;span class=&apos;text-following&apos;&gt;Following&lt;/span&gt;&lt;div class=&quot;icon-feed&quot;&gt;&lt;/div&gt;&lt;/a&gt;
</a>   &lt;h2 class=&quot;title&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;title-link&quot;&gt;Title&lt;/a&gt;&lt;/h2&gt;
   &lt;div class=&quot;body&quot;&gt;Body&lt;/div&gt;
   &lt;div class=&quot;info&quot;&gt;
<a href="#h4-2" id="h4-2" class="h">@@ -146,10 +148,17 @@
</a>   &lt;/div&gt;
   &lt;!-- EOF Template: Comment --&gt;
  &lt;/div&gt;
<a href="#h4-2-3" id="h4-2-3" class="i">+ &lt;a href=&quot;#More&quot; class=&quot;comments-more&quot;&gt;More comments&lt;/a&gt;
</a> 
 &lt;/div&gt;
 &lt;!-- EOF Page: Topic --&gt;
 
<a href="#h4-2-8" id="h4-2-8" class="i">+&lt;!-- Template: menu --&gt;
</a><a href="#h4-2-9" id="h4-2-9" class="i">+&lt;div class=&quot;menu template&quot;&gt;
</a><a href="#h4-2-10" id="h4-2-10" class="i">+ &lt;a href=&quot;#&quot; class=&quot;menu-item template&quot;&gt;Template&lt;/a&gt;
</a><a href="#h4-2-11" id="h4-2-11" class="i">+&lt;/div&gt;
</a><a href="#h4-2-12" id="h4-2-12" class="i">+&lt;!-- EOF Template: menu --&gt;
</a><a href="#h4-2-13" id="h4-2-13" class="i">+
</a> &lt;script type=&quot;text/javascript&quot; src=&quot;js/all.js&quot; async&gt;&lt;/script&gt;
 
 &lt;/body&gt;
<b>diff --git a/<a id="h5" href="../file/js/TopicList.coffee.html">js/TopicList.coffee</a> b/<a href="../file/js/TopicList.coffee.html">js/TopicList.coffee</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -40,6 +40,73 @@ class TopicList extends Class
</a> 			@loadTopics(&quot;noanim&quot;)
 			return false
 
<a href="#h5-0-3" id="h5-0-3" class="i">+		# Follow button
</a><a href="#h5-0-4" id="h5-0-4" class="i">+		@initFollowButton()
</a><a href="#h5-0-5" id="h5-0-5" class="i">+
</a><a href="#h5-0-6" id="h5-0-6" class="i">+	initFollowButton: -&gt;
</a><a href="#h5-0-7" id="h5-0-7" class="i">+		@follow = new Follow($(&quot;.feed-follow-list&quot;))
</a><a href="#h5-0-8" id="h5-0-8" class="i">+		if @parent_topic_uri  # Subtopic
</a><a href="#h5-0-9" id="h5-0-9" class="i">+			@follow.addFeed(&quot;New topics in this group&quot;, &quot;
</a><a href="#h5-0-10" id="h5-0-10" class="i">+				SELECT
</a><a href="#h5-0-11" id="h5-0-11" class="i">+				 title AS title,
</a><a href="#h5-0-12" id="h5-0-12" class="i">+				 body,
</a><a href="#h5-0-13" id="h5-0-13" class="i">+				 added AS date_added,
</a><a href="#h5-0-14" id="h5-0-14" class="i">+				 &apos;topic&apos; AS type,
</a><a href="#h5-0-15" id="h5-0-15" class="i">+				 &apos;?Topic:&apos; || topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS url,
</a><a href="#h5-0-16" id="h5-0-16" class="i">+				 parent_topic_uri AS param
</a><a href="#h5-0-17" id="h5-0-17" class="i">+				FROM topic
</a><a href="#h5-0-18" id="h5-0-18" class="i">+				LEFT JOIN json AS topic_creator_json ON (topic_creator_json.json_id = topic.json_id)
</a><a href="#h5-0-19" id="h5-0-19" class="i">+				WHERE parent_topic_uri IN (:params)
</a><a href="#h5-0-20" id="h5-0-20" class="i">+			&quot;, true, @parent_topic_uri)
</a><a href="#h5-0-21" id="h5-0-21" class="i">+		else
</a><a href="#h5-0-22" id="h5-0-22" class="i">+			@follow.addFeed(&quot;New topics&quot;, &quot;
</a><a href="#h5-0-23" id="h5-0-23" class="i">+				SELECT
</a><a href="#h5-0-24" id="h5-0-24" class="i">+				 title AS title,
</a><a href="#h5-0-25" id="h5-0-25" class="i">+				 body,
</a><a href="#h5-0-26" id="h5-0-26" class="i">+				 added AS date_added,
</a><a href="#h5-0-27" id="h5-0-27" class="i">+				 &apos;topic&apos; AS type,
</a><a href="#h5-0-28" id="h5-0-28" class="i">+				 &apos;?Topic:&apos; || topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS url
</a><a href="#h5-0-29" id="h5-0-29" class="i">+				FROM topic
</a><a href="#h5-0-30" id="h5-0-30" class="i">+				LEFT JOIN json AS topic_creator_json ON (topic_creator_json.json_id = topic.json_id)
</a><a href="#h5-0-31" id="h5-0-31" class="i">+				WHERE parent_topic_uri IS NULL
</a><a href="#h5-0-32" id="h5-0-32" class="i">+			&quot;, true)
</a><a href="#h5-0-33" id="h5-0-33" class="i">+			if Page.site_info.cert_user_id
</a><a href="#h5-0-34" id="h5-0-34" class="i">+				username = Page.site_info.cert_user_id.replace /@.*/, &quot;&quot;
</a><a href="#h5-0-35" id="h5-0-35" class="i">+				@follow.addFeed(&quot;Username mentions&quot;, &quot;
</a><a href="#h5-0-36" id="h5-0-36" class="i">+					SELECT
</a><a href="#h5-0-37" id="h5-0-37" class="i">+					 &apos;mention&apos; AS type,
</a><a href="#h5-0-38" id="h5-0-38" class="i">+					 comment.added AS date_added,
</a><a href="#h5-0-39" id="h5-0-39" class="i">+					 topic.title,
</a><a href="#h5-0-40" id="h5-0-40" class="i">+					 commenter_user.value || &apos;: &apos; || comment.body AS body,
</a><a href="#h5-0-41" id="h5-0-41" class="i">+					 topic_creator_json.directory AS topic_creator_address,
</a><a href="#h5-0-42" id="h5-0-42" class="i">+					 topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS row_topic_uri,
</a><a href="#h5-0-43" id="h5-0-43" class="i">+					 &apos;?Topic:&apos; || topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS url
</a><a href="#h5-0-44" id="h5-0-44" class="i">+					FROM topic
</a><a href="#h5-0-45" id="h5-0-45" class="i">+					 LEFT JOIN json AS topic_creator_json ON (topic_creator_json.json_id = topic.json_id)
</a><a href="#h5-0-46" id="h5-0-46" class="i">+					 LEFT JOIN comment ON (comment.topic_uri = row_topic_uri)
</a><a href="#h5-0-47" id="h5-0-47" class="i">+					 LEFT JOIN json AS commenter_json ON (commenter_json.json_id = comment.json_id)
</a><a href="#h5-0-48" id="h5-0-48" class="i">+					 LEFT JOIN json AS commenter_content ON (commenter_content.directory = commenter_json.directory AND commenter_content.file_name = &apos;content.json&apos;)
</a><a href="#h5-0-49" id="h5-0-49" class="i">+					 LEFT JOIN keyvalue AS commenter_user ON (commenter_user.json_id = commenter_content.json_id AND commenter_user.key = &apos;cert_user_id&apos;)
</a><a href="#h5-0-50" id="h5-0-50" class="i">+					WHERE
</a><a href="#h5-0-51" id="h5-0-51" class="i">+					 comment.body LIKE &apos;%[#{username}%&apos; OR comment.body LIKE &apos;%@#{username}%&apos;
</a><a href="#h5-0-52" id="h5-0-52" class="i">+				&quot;, true)
</a><a href="#h5-0-53" id="h5-0-53" class="i">+			@follow.addFeed(&quot;All comments&quot;, &quot;
</a><a href="#h5-0-54" id="h5-0-54" class="i">+				SELECT
</a><a href="#h5-0-55" id="h5-0-55" class="i">+				 &apos;comment&apos; AS type,
</a><a href="#h5-0-56" id="h5-0-56" class="i">+				 comment.added AS date_added,
</a><a href="#h5-0-57" id="h5-0-57" class="i">+				 topic.title,
</a><a href="#h5-0-58" id="h5-0-58" class="i">+				 commenter_user.value || &apos;: &apos; || comment.body AS body,
</a><a href="#h5-0-59" id="h5-0-59" class="i">+				 topic_creator_json.directory AS topic_creator_address,
</a><a href="#h5-0-60" id="h5-0-60" class="i">+				 topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS row_topic_uri,
</a><a href="#h5-0-61" id="h5-0-61" class="i">+				 &apos;?Topic:&apos; || topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS url
</a><a href="#h5-0-62" id="h5-0-62" class="i">+				FROM topic
</a><a href="#h5-0-63" id="h5-0-63" class="i">+				 LEFT JOIN json AS topic_creator_json ON (topic_creator_json.json_id = topic.json_id)
</a><a href="#h5-0-64" id="h5-0-64" class="i">+				 LEFT JOIN comment ON (comment.topic_uri = row_topic_uri)
</a><a href="#h5-0-65" id="h5-0-65" class="i">+				 LEFT JOIN json AS commenter_json ON (commenter_json.json_id = comment.json_id)
</a><a href="#h5-0-66" id="h5-0-66" class="i">+				 LEFT JOIN json AS commenter_content ON (commenter_content.directory = commenter_json.directory AND commenter_content.file_name = &apos;content.json&apos;)
</a><a href="#h5-0-67" id="h5-0-67" class="i">+				 LEFT JOIN keyvalue AS commenter_user ON (commenter_user.json_id = commenter_content.json_id AND commenter_user.key = &apos;cert_user_id&apos;)
</a><a href="#h5-0-68" id="h5-0-68" class="i">+			&quot;)
</a><a href="#h5-0-69" id="h5-0-69" class="i">+		@follow.init()
</a> 
 	loadTopics: (type=&quot;list&quot;, cb=false) -&gt;
 		@logStart &quot;Load topics...&quot;
<b>diff --git a/<a id="h6" href="../file/js/TopicShow.coffee.html">js/TopicShow.coffee</a> b/<a href="../file/js/TopicShow.coffee.html">js/TopicShow.coffee</a></b>
<a href="#h6-0" id="h6-0" class="h">@@ -5,6 +5,7 @@ class TopicShow extends Class
</a> 		@topic_uri = @topic_id+&quot;_&quot;+@topic_user_address
 		@topic = null
 
<a href="#h6-0-3" id="h6-0-3" class="i">+		@list_all = false
</a> 		@loadTopic()
 		@loadComments(&quot;noanim&quot;)
 
<a href="#h6-1" id="h6-1" class="h">@@ -22,6 +23,37 @@ class TopicShow extends Class
</a> 					current_size = User.rules.current_size
 				User.setCurrentSize(current_size)
 
<a href="#h6-1-3" id="h6-1-3" class="i">+		$(&quot;.comments-more&quot;).on &quot;click&quot;, =&gt;
</a><a href="#h6-1-4" id="h6-1-4" class="i">+			@list_all = true
</a><a href="#h6-1-5" id="h6-1-5" class="i">+			$(&quot;.comments-more&quot;).text(&quot;Loading...&quot;)
</a><a href="#h6-1-6" id="h6-1-6" class="i">+			@loadComments(&quot;noanim&quot;)
</a><a href="#h6-1-7" id="h6-1-7" class="i">+			return false
</a><a href="#h6-1-8" id="h6-1-8" class="i">+
</a><a href="#h6-1-9" id="h6-1-9" class="i">+		# Follow button
</a><a href="#h6-1-10" id="h6-1-10" class="i">+		@initFollowButton()
</a><a href="#h6-1-11" id="h6-1-11" class="i">+
</a><a href="#h6-1-12" id="h6-1-12" class="i">+	initFollowButton: -&gt;
</a><a href="#h6-1-13" id="h6-1-13" class="i">+		@follow = new Follow($(&quot;.feed-follow-show&quot;))
</a><a href="#h6-1-14" id="h6-1-14" class="i">+		@follow.addFeed(&quot;Comments in this topic&quot;, &quot;
</a><a href="#h6-1-15" id="h6-1-15" class="i">+			SELECT
</a><a href="#h6-1-16" id="h6-1-16" class="i">+			 &apos;comment&apos; AS type,
</a><a href="#h6-1-17" id="h6-1-17" class="i">+			 comment.added AS date_added,
</a><a href="#h6-1-18" id="h6-1-18" class="i">+			 topic.title,
</a><a href="#h6-1-19" id="h6-1-19" class="i">+			 commenter_user.value || &apos;: &apos; || comment.body AS body,
</a><a href="#h6-1-20" id="h6-1-20" class="i">+			 topic_creator_json.directory AS topic_creator_address,
</a><a href="#h6-1-21" id="h6-1-21" class="i">+			 topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS row_topic_uri,
</a><a href="#h6-1-22" id="h6-1-22" class="i">+			 &apos;?Topic:&apos; || topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS url
</a><a href="#h6-1-23" id="h6-1-23" class="i">+			FROM topic
</a><a href="#h6-1-24" id="h6-1-24" class="i">+			 LEFT JOIN json AS topic_creator_json ON (topic_creator_json.json_id = topic.json_id)
</a><a href="#h6-1-25" id="h6-1-25" class="i">+			 LEFT JOIN comment ON (comment.topic_uri = row_topic_uri)
</a><a href="#h6-1-26" id="h6-1-26" class="i">+			 LEFT JOIN json AS commenter_json ON (commenter_json.json_id = comment.json_id)
</a><a href="#h6-1-27" id="h6-1-27" class="i">+			 LEFT JOIN json AS commenter_content ON (commenter_content.directory = commenter_json.directory AND commenter_content.file_name = &apos;content.json&apos;)
</a><a href="#h6-1-28" id="h6-1-28" class="i">+			 LEFT JOIN keyvalue AS commenter_user ON (commenter_user.json_id = commenter_content.json_id AND commenter_user.key = &apos;cert_user_id&apos;)
</a><a href="#h6-1-29" id="h6-1-29" class="i">+			WHERE
</a><a href="#h6-1-30" id="h6-1-30" class="i">+			 row_topic_uri IN (:params)
</a><a href="#h6-1-31" id="h6-1-31" class="i">+		&quot;, true, @topic_uri)
</a><a href="#h6-1-32" id="h6-1-32" class="i">+		@follow.init()
</a><a href="#h6-1-33" id="h6-1-33" class="i">+
</a> 
 	queryTopic: (topic_id, topic_user_address) -&gt;
 		return &quot;
<a href="#h6-2" id="h6-2" class="h">@@ -51,14 +83,14 @@ class TopicShow extends Class
</a> 			TopicList.applyTopicData($(&quot;.topic-full&quot;), @topic, &quot;show&quot;)
 
 			# Topic has parent, update title breadcrumb
<a href="#h6-2-3" id="h6-2-3" class="d">-			if @topic.parent_topic_hash
</a><a href="#h6-2-4" id="h6-2-4" class="i">+			if @topic.parent_topic_uri
</a> 				$(&quot;.topic-title&quot;).html(&quot;&amp;nbsp;&quot;).css(&quot;display&quot;, &quot;&quot;)
<a href="#h6-2-6" id="h6-2-6" class="d">-				[parent_topic_id, parent_topic_user_address] = @topic.parent_topic_hash.split(&quot;@&quot;)
</a><a href="#h6-2-7" id="h6-2-7" class="i">+				[parent_topic_id, parent_topic_user_address] = @topic.parent_topic_uri.split(&quot;_&quot;)
</a> 				Page.cmd &quot;dbQuery&quot;, [@queryTopic(parent_topic_id, parent_topic_user_address)], (parent_res) =&gt;
 					parent_topic = parent_res[0]
 					$(&quot;.topic-title&quot;).html(&quot;
 						&lt;span class=&apos;parent-link&apos;&gt;&lt;a href=&apos;?Main&apos;&gt;Main&lt;/a&gt; &amp;rsaquo;&lt;/span&gt;
<a href="#h6-2-12" id="h6-2-12" class="d">-						&lt;span class=&apos;parent-link&apos;&gt;&lt;a href=&apos;?Topics:#{parent_topic.topic_id}_#{parent_topic.topic_creator_user_id}/#{Text.toUrl(parent_topic.title)}&apos;&gt;#{parent_topic.title}&lt;/a&gt; &amp;rsaquo;&lt;/span&gt;
</a><a href="#h6-2-13" id="h6-2-13" class="i">+						&lt;span class=&apos;parent-link&apos;&gt;&lt;a href=&apos;?Topics:#{parent_topic.row_topic_uri}/#{Text.toUrl(parent_topic.title)}&apos;&gt;#{parent_topic.title}&lt;/a&gt; &amp;rsaquo;&lt;/span&gt;
</a> 						#{@topic.title}&quot;)
 
 			$(&quot;.topic-full&quot;).css(&quot;opacity&quot;, 1)
<a href="#h6-3" id="h6-3" class="h">@@ -90,8 +122,13 @@ class TopicShow extends Class
</a> 			WHERE comment.topic_uri = &apos;#{@topic_id}_#{@topic_user_address}&apos;
 			ORDER BY added DESC
 			&quot;
<a href="#h6-3-3" id="h6-3-3" class="i">+
</a><a href="#h6-3-4" id="h6-3-4" class="i">+		if not @list_all
</a><a href="#h6-3-5" id="h6-3-5" class="i">+			query += &quot; LIMIT 60&quot;
</a><a href="#h6-3-6" id="h6-3-6" class="i">+
</a> 		Page.cmd &quot;dbQuery&quot;, [query], (comments) =&gt;
 			@logEnd &quot;Loading comments...&quot;
<a href="#h6-3-9" id="h6-3-9" class="i">+			$(&quot;.comments .comment:not(.template)&quot;).attr(&quot;missing&quot;, &quot;true&quot;)
</a> 			for comment in comments
 				comment_uri = &quot;#{comment.comment_id}_#{comment.user_address}&quot;
 				elem = $(&quot;#comment_&quot;+comment_uri)
<a href="#h6-4" id="h6-4" class="h">@@ -103,12 +140,17 @@ class TopicShow extends Class
</a> 						return @buttonReply $(e.target).parents(&quot;.comment&quot;)
 					$(&quot;.score&quot;, elem).attr(&quot;id&quot;, &quot;comment_score_#{comment_uri}&quot;).on &quot;click&quot;, @submitCommentVote # Submit vote
 				@applyCommentData(elem, comment)
<a href="#h6-4-3" id="h6-4-3" class="d">-				elem.appendTo(&quot;.comments&quot;)
</a><a href="#h6-4-4" id="h6-4-4" class="i">+				elem.appendTo(&quot;.comments&quot;).removeAttr(&quot;missing&quot;)
</a> 
 			$(&quot;body&quot;).css({&quot;overflow&quot;: &quot;auto&quot;, &quot;height&quot;: &quot;auto&quot;})
<a href="#h6-4-7" id="h6-4-7" class="i">+			$(&quot;.comment[missing]&quot;).remove()
</a> 
 			Page.addInlineEditors()
 
<a href="#h6-4-11" id="h6-4-11" class="i">+			if comments.length == 60
</a><a href="#h6-4-12" id="h6-4-12" class="i">+				$(&quot;.comments-more&quot;).css(&quot;display&quot;, &quot;block&quot;)
</a><a href="#h6-4-13" id="h6-4-13" class="i">+			else
</a><a href="#h6-4-14" id="h6-4-14" class="i">+				$(&quot;.comments-more&quot;).css(&quot;display&quot;, &quot;none&quot;)
</a> 			if cb then cb()
 
 
<b>diff --git a/<a id="h7" href="../file/js/all.js.html">js/all.js</a> b/<a href="../file/js/all.js.html">js/all.js</a></b>
<a href="#h7-0" id="h7-0" class="h">@@ -489,6 +489,157 @@ jQuery.extend( jQuery.easing,
</a> }).call(this);
 
 
<a href="#h7-0-3" id="h7-0-3" class="i">+/* ---- data/1TaLkFrMwvbNsooF4ioKAY9EuxTBTjipT/js/utils/Follow.coffee ---- */
</a><a href="#h7-0-4" id="h7-0-4" class="i">+
</a><a href="#h7-0-5" id="h7-0-5" class="i">+
</a><a href="#h7-0-6" id="h7-0-6" class="i">+(function() {
</a><a href="#h7-0-7" id="h7-0-7" class="i">+  var Follow,
</a><a href="#h7-0-8" id="h7-0-8" class="i">+    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
</a><a href="#h7-0-9" id="h7-0-9" class="i">+    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
</a><a href="#h7-0-10" id="h7-0-10" class="i">+    __hasProp = {}.hasOwnProperty,
</a><a href="#h7-0-11" id="h7-0-11" class="i">+    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i &lt; l; i++) { if (i in this &amp;&amp; this[i] === item) return i; } return -1; };
</a><a href="#h7-0-12" id="h7-0-12" class="i">+
</a><a href="#h7-0-13" id="h7-0-13" class="i">+  Follow = (function(_super) {
</a><a href="#h7-0-14" id="h7-0-14" class="i">+    __extends(Follow, _super);
</a><a href="#h7-0-15" id="h7-0-15" class="i">+
</a><a href="#h7-0-16" id="h7-0-16" class="i">+    function Follow(_at_elem) {
</a><a href="#h7-0-17" id="h7-0-17" class="i">+      this.elem = _at_elem;
</a><a href="#h7-0-18" id="h7-0-18" class="i">+      this.handleMenuClick = __bind(this.handleMenuClick, this);
</a><a href="#h7-0-19" id="h7-0-19" class="i">+      this.init = __bind(this.init, this);
</a><a href="#h7-0-20" id="h7-0-20" class="i">+      this.menu = new Menu(this.elem);
</a><a href="#h7-0-21" id="h7-0-21" class="i">+      this.feeds = {};
</a><a href="#h7-0-22" id="h7-0-22" class="i">+      this.follows = {};
</a><a href="#h7-0-23" id="h7-0-23" class="i">+      this.elem.on(&quot;click&quot;, (function(_this) {
</a><a href="#h7-0-24" id="h7-0-24" class="i">+        return function() {
</a><a href="#h7-0-25" id="h7-0-25" class="i">+          if (Page.server_info.rev &gt; 850) {
</a><a href="#h7-0-26" id="h7-0-26" class="i">+            if (_this.elem.hasClass(&quot;following&quot;)) {
</a><a href="#h7-0-27" id="h7-0-27" class="i">+              _this.showFeeds();
</a><a href="#h7-0-28" id="h7-0-28" class="i">+            } else {
</a><a href="#h7-0-29" id="h7-0-29" class="i">+              _this.followDefaultFeeds();
</a><a href="#h7-0-30" id="h7-0-30" class="i">+            }
</a><a href="#h7-0-31" id="h7-0-31" class="i">+          } else {
</a><a href="#h7-0-32" id="h7-0-32" class="i">+            Page.cmd(&quot;wrapperNotification&quot;, [&quot;info&quot;, &quot;Please update your ZeroNet client to use this feature&quot;]);
</a><a href="#h7-0-33" id="h7-0-33" class="i">+          }
</a><a href="#h7-0-34" id="h7-0-34" class="i">+          return false;
</a><a href="#h7-0-35" id="h7-0-35" class="i">+        };
</a><a href="#h7-0-36" id="h7-0-36" class="i">+      })(this));
</a><a href="#h7-0-37" id="h7-0-37" class="i">+    }
</a><a href="#h7-0-38" id="h7-0-38" class="i">+
</a><a href="#h7-0-39" id="h7-0-39" class="i">+    Follow.prototype.init = function() {
</a><a href="#h7-0-40" id="h7-0-40" class="i">+      if (!this.feeds) {
</a><a href="#h7-0-41" id="h7-0-41" class="i">+        return;
</a><a href="#h7-0-42" id="h7-0-42" class="i">+      }
</a><a href="#h7-0-43" id="h7-0-43" class="i">+      return Page.cmd(&quot;feedListFollow&quot;, [], (function(_this) {
</a><a href="#h7-0-44" id="h7-0-44" class="i">+        return function(_at_follows) {
</a><a href="#h7-0-45" id="h7-0-45" class="i">+          var is_default_feed, menu_item, param, query, title, _ref, _ref1;
</a><a href="#h7-0-46" id="h7-0-46" class="i">+          _this.follows = _at_follows;
</a><a href="#h7-0-47" id="h7-0-47" class="i">+          _ref = _this.feeds;
</a><a href="#h7-0-48" id="h7-0-48" class="i">+          for (title in _ref) {
</a><a href="#h7-0-49" id="h7-0-49" class="i">+            _ref1 = _ref[title], query = _ref1[0], menu_item = _ref1[1], is_default_feed = _ref1[2], param = _ref1[3];
</a><a href="#h7-0-50" id="h7-0-50" class="i">+            if (_this.follows[title] &amp;&amp; __indexOf.call(_this.follows[title][1], param) &gt;= 0) {
</a><a href="#h7-0-51" id="h7-0-51" class="i">+              menu_item.addClass(&quot;selected&quot;);
</a><a href="#h7-0-52" id="h7-0-52" class="i">+            } else {
</a><a href="#h7-0-53" id="h7-0-53" class="i">+              menu_item.removeClass(&quot;selected&quot;);
</a><a href="#h7-0-54" id="h7-0-54" class="i">+            }
</a><a href="#h7-0-55" id="h7-0-55" class="i">+          }
</a><a href="#h7-0-56" id="h7-0-56" class="i">+          _this.updateListitems();
</a><a href="#h7-0-57" id="h7-0-57" class="i">+          return _this.elem.css(&quot;display&quot;, &quot;inline-block&quot;);
</a><a href="#h7-0-58" id="h7-0-58" class="i">+        };
</a><a href="#h7-0-59" id="h7-0-59" class="i">+      })(this));
</a><a href="#h7-0-60" id="h7-0-60" class="i">+    };
</a><a href="#h7-0-61" id="h7-0-61" class="i">+
</a><a href="#h7-0-62" id="h7-0-62" class="i">+    Follow.prototype.addFeed = function(title, query, is_default_feed, param) {
</a><a href="#h7-0-63" id="h7-0-63" class="i">+      var menu_item;
</a><a href="#h7-0-64" id="h7-0-64" class="i">+      if (is_default_feed == null) {
</a><a href="#h7-0-65" id="h7-0-65" class="i">+        is_default_feed = false;
</a><a href="#h7-0-66" id="h7-0-66" class="i">+      }
</a><a href="#h7-0-67" id="h7-0-67" class="i">+      if (param == null) {
</a><a href="#h7-0-68" id="h7-0-68" class="i">+        param = &quot;&quot;;
</a><a href="#h7-0-69" id="h7-0-69" class="i">+      }
</a><a href="#h7-0-70" id="h7-0-70" class="i">+      menu_item = this.menu.addItem(title, this.handleMenuClick);
</a><a href="#h7-0-71" id="h7-0-71" class="i">+      return this.feeds[title] = [query, menu_item, is_default_feed, param];
</a><a href="#h7-0-72" id="h7-0-72" class="i">+    };
</a><a href="#h7-0-73" id="h7-0-73" class="i">+
</a><a href="#h7-0-74" id="h7-0-74" class="i">+    Follow.prototype.handleMenuClick = function(item) {
</a><a href="#h7-0-75" id="h7-0-75" class="i">+      item.toggleClass(&quot;selected&quot;);
</a><a href="#h7-0-76" id="h7-0-76" class="i">+      this.updateListitems();
</a><a href="#h7-0-77" id="h7-0-77" class="i">+      this.saveFeeds();
</a><a href="#h7-0-78" id="h7-0-78" class="i">+      return true;
</a><a href="#h7-0-79" id="h7-0-79" class="i">+    };
</a><a href="#h7-0-80" id="h7-0-80" class="i">+
</a><a href="#h7-0-81" id="h7-0-81" class="i">+    Follow.prototype.showFeeds = function() {
</a><a href="#h7-0-82" id="h7-0-82" class="i">+      return this.menu.show();
</a><a href="#h7-0-83" id="h7-0-83" class="i">+    };
</a><a href="#h7-0-84" id="h7-0-84" class="i">+
</a><a href="#h7-0-85" id="h7-0-85" class="i">+    Follow.prototype.followDefaultFeeds = function() {
</a><a href="#h7-0-86" id="h7-0-86" class="i">+      var is_default_feed, menu_item, param, query, title, _ref, _ref1;
</a><a href="#h7-0-87" id="h7-0-87" class="i">+      _ref = this.feeds;
</a><a href="#h7-0-88" id="h7-0-88" class="i">+      for (title in _ref) {
</a><a href="#h7-0-89" id="h7-0-89" class="i">+        _ref1 = _ref[title], query = _ref1[0], menu_item = _ref1[1], is_default_feed = _ref1[2], param = _ref1[3];
</a><a href="#h7-0-90" id="h7-0-90" class="i">+        if (is_default_feed) {
</a><a href="#h7-0-91" id="h7-0-91" class="i">+          menu_item.addClass(&quot;selected&quot;);
</a><a href="#h7-0-92" id="h7-0-92" class="i">+          this.log(&quot;Following&quot;, title);
</a><a href="#h7-0-93" id="h7-0-93" class="i">+        }
</a><a href="#h7-0-94" id="h7-0-94" class="i">+      }
</a><a href="#h7-0-95" id="h7-0-95" class="i">+      this.updateListitems();
</a><a href="#h7-0-96" id="h7-0-96" class="i">+      return this.saveFeeds();
</a><a href="#h7-0-97" id="h7-0-97" class="i">+    };
</a><a href="#h7-0-98" id="h7-0-98" class="i">+
</a><a href="#h7-0-99" id="h7-0-99" class="i">+    Follow.prototype.updateListitems = function() {
</a><a href="#h7-0-100" id="h7-0-100" class="i">+      if (this.menu.elem.find(&quot;.selected&quot;).length &gt; 0) {
</a><a href="#h7-0-101" id="h7-0-101" class="i">+        return this.elem.addClass(&quot;following&quot;);
</a><a href="#h7-0-102" id="h7-0-102" class="i">+      } else {
</a><a href="#h7-0-103" id="h7-0-103" class="i">+        return this.elem.removeClass(&quot;following&quot;);
</a><a href="#h7-0-104" id="h7-0-104" class="i">+      }
</a><a href="#h7-0-105" id="h7-0-105" class="i">+    };
</a><a href="#h7-0-106" id="h7-0-106" class="i">+
</a><a href="#h7-0-107" id="h7-0-107" class="i">+    Follow.prototype.saveFeeds = function() {
</a><a href="#h7-0-108" id="h7-0-108" class="i">+      return Page.cmd(&quot;feedListFollow&quot;, [], (function(_this) {
</a><a href="#h7-0-109" id="h7-0-109" class="i">+        return function(follows) {
</a><a href="#h7-0-110" id="h7-0-110" class="i">+          var is_default_feed, item, menu_item, param, params, query, title, _ref, _ref1;
</a><a href="#h7-0-111" id="h7-0-111" class="i">+          _this.follows = follows;
</a><a href="#h7-0-112" id="h7-0-112" class="i">+          _ref = _this.feeds;
</a><a href="#h7-0-113" id="h7-0-113" class="i">+          for (title in _ref) {
</a><a href="#h7-0-114" id="h7-0-114" class="i">+            _ref1 = _ref[title], query = _ref1[0], menu_item = _ref1[1], is_default_feed = _ref1[2], param = _ref1[3];
</a><a href="#h7-0-115" id="h7-0-115" class="i">+            if (follows[title]) {
</a><a href="#h7-0-116" id="h7-0-116" class="i">+              params = (function() {
</a><a href="#h7-0-117" id="h7-0-117" class="i">+                var _i, _len, _ref2, _results;
</a><a href="#h7-0-118" id="h7-0-118" class="i">+                _ref2 = follows[title][1];
</a><a href="#h7-0-119" id="h7-0-119" class="i">+                _results = [];
</a><a href="#h7-0-120" id="h7-0-120" class="i">+                for (_i = 0, _len = _ref2.length; _i &lt; _len; _i++) {
</a><a href="#h7-0-121" id="h7-0-121" class="i">+                  item = _ref2[_i];
</a><a href="#h7-0-122" id="h7-0-122" class="i">+                  if (item !== param) {
</a><a href="#h7-0-123" id="h7-0-123" class="i">+                    _results.push(item);
</a><a href="#h7-0-124" id="h7-0-124" class="i">+                  }
</a><a href="#h7-0-125" id="h7-0-125" class="i">+                }
</a><a href="#h7-0-126" id="h7-0-126" class="i">+                return _results;
</a><a href="#h7-0-127" id="h7-0-127" class="i">+              })();
</a><a href="#h7-0-128" id="h7-0-128" class="i">+            } else {
</a><a href="#h7-0-129" id="h7-0-129" class="i">+              params = [];
</a><a href="#h7-0-130" id="h7-0-130" class="i">+            }
</a><a href="#h7-0-131" id="h7-0-131" class="i">+            if (menu_item.hasClass(&quot;selected&quot;)) {
</a><a href="#h7-0-132" id="h7-0-132" class="i">+              params.push(param);
</a><a href="#h7-0-133" id="h7-0-133" class="i">+            }
</a><a href="#h7-0-134" id="h7-0-134" class="i">+            if (params.length === 0) {
</a><a href="#h7-0-135" id="h7-0-135" class="i">+              delete follows[title];
</a><a href="#h7-0-136" id="h7-0-136" class="i">+            } else {
</a><a href="#h7-0-137" id="h7-0-137" class="i">+              follows[title] = [query, params];
</a><a href="#h7-0-138" id="h7-0-138" class="i">+            }
</a><a href="#h7-0-139" id="h7-0-139" class="i">+          }
</a><a href="#h7-0-140" id="h7-0-140" class="i">+          return Page.cmd(&quot;feedFollow&quot;, [follows]);
</a><a href="#h7-0-141" id="h7-0-141" class="i">+        };
</a><a href="#h7-0-142" id="h7-0-142" class="i">+      })(this));
</a><a href="#h7-0-143" id="h7-0-143" class="i">+    };
</a><a href="#h7-0-144" id="h7-0-144" class="i">+
</a><a href="#h7-0-145" id="h7-0-145" class="i">+    return Follow;
</a><a href="#h7-0-146" id="h7-0-146" class="i">+
</a><a href="#h7-0-147" id="h7-0-147" class="i">+  })(Class);
</a><a href="#h7-0-148" id="h7-0-148" class="i">+
</a><a href="#h7-0-149" id="h7-0-149" class="i">+  window.Follow = Follow;
</a><a href="#h7-0-150" id="h7-0-150" class="i">+
</a><a href="#h7-0-151" id="h7-0-151" class="i">+}).call(this);
</a><a href="#h7-0-152" id="h7-0-152" class="i">+
</a><a href="#h7-0-153" id="h7-0-153" class="i">+
</a> /* ---- data/1TaLkFrMwvbNsooF4ioKAY9EuxTBTjipT/js/utils/InlineEditor.coffee ---- */
 
 
<a href="#h7-1" id="h7-1" class="h">@@ -689,6 +840,85 @@ jQuery.extend( jQuery.easing,
</a> }).call(this);
 
 
<a href="#h7-1-3" id="h7-1-3" class="i">+/* ---- data/1TaLkFrMwvbNsooF4ioKAY9EuxTBTjipT/js/utils/Menu.coffee ---- */
</a><a href="#h7-1-4" id="h7-1-4" class="i">+
</a><a href="#h7-1-5" id="h7-1-5" class="i">+
</a><a href="#h7-1-6" id="h7-1-6" class="i">+(function() {
</a><a href="#h7-1-7" id="h7-1-7" class="i">+  var Menu,
</a><a href="#h7-1-8" id="h7-1-8" class="i">+    __slice = [].slice;
</a><a href="#h7-1-9" id="h7-1-9" class="i">+
</a><a href="#h7-1-10" id="h7-1-10" class="i">+  Menu = (function() {
</a><a href="#h7-1-11" id="h7-1-11" class="i">+    function Menu(_at_button) {
</a><a href="#h7-1-12" id="h7-1-12" class="i">+      this.button = _at_button;
</a><a href="#h7-1-13" id="h7-1-13" class="i">+      this.elem = $(&quot;.menu.template&quot;).clone().removeClass(&quot;template&quot;);
</a><a href="#h7-1-14" id="h7-1-14" class="i">+      this.elem.appendTo(&quot;body&quot;);
</a><a href="#h7-1-15" id="h7-1-15" class="i">+      this.items = [];
</a><a href="#h7-1-16" id="h7-1-16" class="i">+    }
</a><a href="#h7-1-17" id="h7-1-17" class="i">+
</a><a href="#h7-1-18" id="h7-1-18" class="i">+    Menu.prototype.show = function() {
</a><a href="#h7-1-19" id="h7-1-19" class="i">+      var button_pos;
</a><a href="#h7-1-20" id="h7-1-20" class="i">+      if (window.visible_menu &amp;&amp; window.visible_menu.button[0] === this.button[0]) {
</a><a href="#h7-1-21" id="h7-1-21" class="i">+        window.visible_menu.hide();
</a><a href="#h7-1-22" id="h7-1-22" class="i">+        return this.hide();
</a><a href="#h7-1-23" id="h7-1-23" class="i">+      } else {
</a><a href="#h7-1-24" id="h7-1-24" class="i">+        button_pos = this.button.offset();
</a><a href="#h7-1-25" id="h7-1-25" class="i">+        this.elem.css({
</a><a href="#h7-1-26" id="h7-1-26" class="i">+          &quot;top&quot;: button_pos.top + this.button.outerHeight(),
</a><a href="#h7-1-27" id="h7-1-27" class="i">+          &quot;left&quot;: button_pos.left
</a><a href="#h7-1-28" id="h7-1-28" class="i">+        });
</a><a href="#h7-1-29" id="h7-1-29" class="i">+        this.button.addClass(&quot;menu-active&quot;);
</a><a href="#h7-1-30" id="h7-1-30" class="i">+        this.elem.addClass(&quot;visible&quot;);
</a><a href="#h7-1-31" id="h7-1-31" class="i">+        if (window.visible_menu) {
</a><a href="#h7-1-32" id="h7-1-32" class="i">+          window.visible_menu.hide();
</a><a href="#h7-1-33" id="h7-1-33" class="i">+        }
</a><a href="#h7-1-34" id="h7-1-34" class="i">+        return window.visible_menu = this;
</a><a href="#h7-1-35" id="h7-1-35" class="i">+      }
</a><a href="#h7-1-36" id="h7-1-36" class="i">+    };
</a><a href="#h7-1-37" id="h7-1-37" class="i">+
</a><a href="#h7-1-38" id="h7-1-38" class="i">+    Menu.prototype.hide = function() {
</a><a href="#h7-1-39" id="h7-1-39" class="i">+      this.elem.removeClass(&quot;visible&quot;);
</a><a href="#h7-1-40" id="h7-1-40" class="i">+      this.button.removeClass(&quot;menu-active&quot;);
</a><a href="#h7-1-41" id="h7-1-41" class="i">+      return window.visible_menu = null;
</a><a href="#h7-1-42" id="h7-1-42" class="i">+    };
</a><a href="#h7-1-43" id="h7-1-43" class="i">+
</a><a href="#h7-1-44" id="h7-1-44" class="i">+    Menu.prototype.addItem = function(title, cb) {
</a><a href="#h7-1-45" id="h7-1-45" class="i">+      var item;
</a><a href="#h7-1-46" id="h7-1-46" class="i">+      item = $(&quot;.menu-item.template&quot;, this.elem).clone().removeClass(&quot;template&quot;);
</a><a href="#h7-1-47" id="h7-1-47" class="i">+      item.html(title);
</a><a href="#h7-1-48" id="h7-1-48" class="i">+      item.on(&quot;click&quot;, (function(_this) {
</a><a href="#h7-1-49" id="h7-1-49" class="i">+        return function() {
</a><a href="#h7-1-50" id="h7-1-50" class="i">+          if (!cb(item)) {
</a><a href="#h7-1-51" id="h7-1-51" class="i">+            _this.hide();
</a><a href="#h7-1-52" id="h7-1-52" class="i">+          }
</a><a href="#h7-1-53" id="h7-1-53" class="i">+          return false;
</a><a href="#h7-1-54" id="h7-1-54" class="i">+        };
</a><a href="#h7-1-55" id="h7-1-55" class="i">+      })(this));
</a><a href="#h7-1-56" id="h7-1-56" class="i">+      item.appendTo(this.elem);
</a><a href="#h7-1-57" id="h7-1-57" class="i">+      this.items.push(item);
</a><a href="#h7-1-58" id="h7-1-58" class="i">+      return item;
</a><a href="#h7-1-59" id="h7-1-59" class="i">+    };
</a><a href="#h7-1-60" id="h7-1-60" class="i">+
</a><a href="#h7-1-61" id="h7-1-61" class="i">+    Menu.prototype.log = function() {
</a><a href="#h7-1-62" id="h7-1-62" class="i">+      var args;
</a><a href="#h7-1-63" id="h7-1-63" class="i">+      args = 1 &lt;= arguments.length ? __slice.call(arguments, 0) : [];
</a><a href="#h7-1-64" id="h7-1-64" class="i">+      return console.log.apply(console, [&quot;[Menu]&quot;].concat(__slice.call(args)));
</a><a href="#h7-1-65" id="h7-1-65" class="i">+    };
</a><a href="#h7-1-66" id="h7-1-66" class="i">+
</a><a href="#h7-1-67" id="h7-1-67" class="i">+    return Menu;
</a><a href="#h7-1-68" id="h7-1-68" class="i">+
</a><a href="#h7-1-69" id="h7-1-69" class="i">+  })();
</a><a href="#h7-1-70" id="h7-1-70" class="i">+
</a><a href="#h7-1-71" id="h7-1-71" class="i">+  window.Menu = Menu;
</a><a href="#h7-1-72" id="h7-1-72" class="i">+
</a><a href="#h7-1-73" id="h7-1-73" class="i">+  $(&quot;body&quot;).on(&quot;click&quot;, function(e) {
</a><a href="#h7-1-74" id="h7-1-74" class="i">+    if (window.visible_menu &amp;&amp; e.target !== window.visible_menu.button[0] &amp;&amp; $(e.target).parent()[0] !== window.visible_menu.elem[0]) {
</a><a href="#h7-1-75" id="h7-1-75" class="i">+      return window.visible_menu.hide();
</a><a href="#h7-1-76" id="h7-1-76" class="i">+    }
</a><a href="#h7-1-77" id="h7-1-77" class="i">+  });
</a><a href="#h7-1-78" id="h7-1-78" class="i">+
</a><a href="#h7-1-79" id="h7-1-79" class="i">+}).call(this);
</a><a href="#h7-1-80" id="h7-1-80" class="i">+
</a><a href="#h7-1-81" id="h7-1-81" class="i">+
</a> /* ---- data/1TaLkFrMwvbNsooF4ioKAY9EuxTBTjipT/js/utils/RateLimit.coffee ---- */
 
 
<a href="#h7-2" id="h7-2" class="h">@@ -1037,7 +1267,7 @@ jQuery.extend( jQuery.easing,
</a>           return false;
         };
       })(this));
<a href="#h7-2-3" id="h7-2-3" class="d">-      return $(&quot;.topics-more&quot;).on(&quot;click&quot;, (function(_this) {
</a><a href="#h7-2-4" id="h7-2-4" class="i">+      $(&quot;.topics-more&quot;).on(&quot;click&quot;, (function(_this) {
</a>         return function() {
           _this.list_all = true;
           $(&quot;.topics-more&quot;).text(&quot;Loading...&quot;);
<a href="#h7-3" id="h7-3" class="h">@@ -1045,6 +1275,23 @@ jQuery.extend( jQuery.easing,
</a>           return false;
         };
       })(this));
<a href="#h7-3-3" id="h7-3-3" class="i">+      return this.initFollowButton();
</a><a href="#h7-3-4" id="h7-3-4" class="i">+    };
</a><a href="#h7-3-5" id="h7-3-5" class="i">+
</a><a href="#h7-3-6" id="h7-3-6" class="i">+    TopicList.prototype.initFollowButton = function() {
</a><a href="#h7-3-7" id="h7-3-7" class="i">+      var username;
</a><a href="#h7-3-8" id="h7-3-8" class="i">+      this.follow = new Follow($(&quot;.feed-follow-list&quot;));
</a><a href="#h7-3-9" id="h7-3-9" class="i">+      if (this.parent_topic_uri) {
</a><a href="#h7-3-10" id="h7-3-10" class="i">+        this.follow.addFeed(&quot;New topics in this group&quot;, &quot;SELECT title AS title, body, added AS date_added, &apos;topic&apos; AS type, &apos;?Topic:&apos; || topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS url, parent_topic_uri AS param FROM topic LEFT JOIN json AS topic_creator_json ON (topic_creator_json.json_id = topic.json_id) WHERE parent_topic_uri IN (:params)&quot;, true, this.parent_topic_uri);
</a><a href="#h7-3-11" id="h7-3-11" class="i">+      } else {
</a><a href="#h7-3-12" id="h7-3-12" class="i">+        this.follow.addFeed(&quot;New topics&quot;, &quot;SELECT title AS title, body, added AS date_added, &apos;topic&apos; AS type, &apos;?Topic:&apos; || topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS url FROM topic LEFT JOIN json AS topic_creator_json ON (topic_creator_json.json_id = topic.json_id) WHERE parent_topic_uri IS NULL&quot;, true);
</a><a href="#h7-3-13" id="h7-3-13" class="i">+        if (Page.site_info.cert_user_id) {
</a><a href="#h7-3-14" id="h7-3-14" class="i">+          username = Page.site_info.cert_user_id.replace(/@.*/, &quot;&quot;);
</a><a href="#h7-3-15" id="h7-3-15" class="i">+          this.follow.addFeed(&quot;Username mentions&quot;, &quot;SELECT &apos;mention&apos; AS type, comment.added AS date_added, topic.title, commenter_user.value || &apos;: &apos; || comment.body AS body, topic_creator_json.directory AS topic_creator_address, topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS row_topic_uri, &apos;?Topic:&apos; || topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS url FROM topic LEFT JOIN json AS topic_creator_json ON (topic_creator_json.json_id = topic.json_id) LEFT JOIN comment ON (comment.topic_uri = row_topic_uri) LEFT JOIN json AS commenter_json ON (commenter_json.json_id = comment.json_id) LEFT JOIN json AS commenter_content ON (commenter_content.directory = commenter_json.directory AND commenter_content.file_name = &apos;content.json&apos;) LEFT JOIN keyvalue AS commenter_user ON (commenter_user.json_id = commenter_content.json_id AND commenter_user.key = &apos;cert_user_id&apos;) WHERE comment.body LIKE &apos;%[&quot; + username + &quot;%&apos; OR comment.body LIKE &apos;%@&quot; + username + &quot;%&apos;&quot;, true);
</a><a href="#h7-3-16" id="h7-3-16" class="i">+        }
</a><a href="#h7-3-17" id="h7-3-17" class="i">+        this.follow.addFeed(&quot;All comments&quot;, &quot;SELECT &apos;comment&apos; AS type, comment.added AS date_added, topic.title, commenter_user.value || &apos;: &apos; || comment.body AS body, topic_creator_json.directory AS topic_creator_address, topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS row_topic_uri, &apos;?Topic:&apos; || topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS url FROM topic LEFT JOIN json AS topic_creator_json ON (topic_creator_json.json_id = topic.json_id) LEFT JOIN comment ON (comment.topic_uri = row_topic_uri) LEFT JOIN json AS commenter_json ON (commenter_json.json_id = comment.json_id) LEFT JOIN json AS commenter_content ON (commenter_content.directory = commenter_json.directory AND commenter_content.file_name = &apos;content.json&apos;) LEFT JOIN keyvalue AS commenter_user ON (commenter_user.json_id = commenter_content.json_id AND commenter_user.key = &apos;cert_user_id&apos;)&quot;);
</a><a href="#h7-3-18" id="h7-3-18" class="i">+      }
</a><a href="#h7-3-19" id="h7-3-19" class="i">+      return this.follow.init();
</a>     };
 
     TopicList.prototype.loadTopics = function(type, cb) {
<a href="#h7-4" id="h7-4" class="h">@@ -1298,7 +1545,6 @@ jQuery.extend( jQuery.easing,
</a> }).call(this);
 
 
<a href="#h7-4-3" id="h7-4-3" class="d">-
</a> /* ---- data/1TaLkFrMwvbNsooF4ioKAY9EuxTBTjipT/js/TopicShow.coffee ---- */
 
 
<a href="#h7-5" id="h7-5" class="h">@@ -1322,6 +1568,7 @@ jQuery.extend( jQuery.easing,
</a>       this.topic_user_address = topic_user_address;
       this.topic_uri = this.topic_id + &quot;_&quot; + this.topic_user_address;
       this.topic = null;
<a href="#h7-5-3" id="h7-5-3" class="i">+      this.list_all = false;
</a>       this.loadTopic();
       this.loadComments(&quot;noanim&quot;);
       $(&quot;.comment-new .button-submit-form&quot;).on(&quot;click&quot;, (function(_this) {
<a href="#h7-6" id="h7-6" class="h">@@ -1331,7 +1578,7 @@ jQuery.extend( jQuery.easing,
</a>         };
       })(this));
       textarea = $(&quot;.comment-new #comment_body&quot;);
<a href="#h7-6-3" id="h7-6-3" class="d">-      return $(&quot;.comment-new #comment_body&quot;).on(&quot;input&quot;, (function(_this) {
</a><a href="#h7-6-4" id="h7-6-4" class="i">+      $(&quot;.comment-new #comment_body&quot;).on(&quot;input&quot;, (function(_this) {
</a>         return function() {
           var current_size;
           if (User.rules.max_size) {
<a href="#h7-7" id="h7-7" class="h">@@ -1344,6 +1591,21 @@ jQuery.extend( jQuery.easing,
</a>           }
         };
       })(this));
<a href="#h7-7-3" id="h7-7-3" class="i">+      $(&quot;.comments-more&quot;).on(&quot;click&quot;, (function(_this) {
</a><a href="#h7-7-4" id="h7-7-4" class="i">+        return function() {
</a><a href="#h7-7-5" id="h7-7-5" class="i">+          _this.list_all = true;
</a><a href="#h7-7-6" id="h7-7-6" class="i">+          $(&quot;.comments-more&quot;).text(&quot;Loading...&quot;);
</a><a href="#h7-7-7" id="h7-7-7" class="i">+          _this.loadComments(&quot;noanim&quot;);
</a><a href="#h7-7-8" id="h7-7-8" class="i">+          return false;
</a><a href="#h7-7-9" id="h7-7-9" class="i">+        };
</a><a href="#h7-7-10" id="h7-7-10" class="i">+      })(this));
</a><a href="#h7-7-11" id="h7-7-11" class="i">+      return this.initFollowButton();
</a><a href="#h7-7-12" id="h7-7-12" class="i">+    };
</a><a href="#h7-7-13" id="h7-7-13" class="i">+
</a><a href="#h7-7-14" id="h7-7-14" class="i">+    TopicShow.prototype.initFollowButton = function() {
</a><a href="#h7-7-15" id="h7-7-15" class="i">+      this.follow = new Follow($(&quot;.feed-follow-show&quot;));
</a><a href="#h7-7-16" id="h7-7-16" class="i">+      this.follow.addFeed(&quot;Comments in this topic&quot;, &quot;SELECT &apos;comment&apos; AS type, comment.added AS date_added, topic.title, commenter_user.value || &apos;: &apos; || comment.body AS body, topic_creator_json.directory AS topic_creator_address, topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS row_topic_uri, &apos;?Topic:&apos; || topic.topic_id || &apos;_&apos; || topic_creator_json.directory AS url FROM topic LEFT JOIN json AS topic_creator_json ON (topic_creator_json.json_id = topic.json_id) LEFT JOIN comment ON (comment.topic_uri = row_topic_uri) LEFT JOIN json AS commenter_json ON (commenter_json.json_id = comment.json_id) LEFT JOIN json AS commenter_content ON (commenter_content.directory = commenter_json.directory AND commenter_content.file_name = &apos;content.json&apos;) LEFT JOIN keyvalue AS commenter_user ON (commenter_user.json_id = commenter_content.json_id AND commenter_user.key = &apos;cert_user_id&apos;) WHERE row_topic_uri IN (:params)&quot;, true, this.topic_uri);
</a><a href="#h7-7-17" id="h7-7-17" class="i">+      return this.follow.init();
</a>     };
 
     TopicShow.prototype.queryTopic = function(topic_id, topic_user_address) {
<a href="#h7-8" id="h7-8" class="h">@@ -1362,13 +1624,13 @@ jQuery.extend( jQuery.easing,
</a>           var parent_topic_id, parent_topic_user_address, _ref;
           _this.topic = res[0];
           TopicList.applyTopicData($(&quot;.topic-full&quot;), _this.topic, &quot;show&quot;);
<a href="#h7-8-3" id="h7-8-3" class="d">-          if (_this.topic.parent_topic_hash) {
</a><a href="#h7-8-4" id="h7-8-4" class="i">+          if (_this.topic.parent_topic_uri) {
</a>             $(&quot;.topic-title&quot;).html(&quot;&amp;nbsp;&quot;).css(&quot;display&quot;, &quot;&quot;);
<a href="#h7-8-6" id="h7-8-6" class="d">-            _ref = _this.topic.parent_topic_hash.split(&quot;@&quot;), parent_topic_id = _ref[0], parent_topic_user_address = _ref[1];
</a><a href="#h7-8-7" id="h7-8-7" class="i">+            _ref = _this.topic.parent_topic_uri.split(&quot;_&quot;), parent_topic_id = _ref[0], parent_topic_user_address = _ref[1];
</a>             Page.cmd(&quot;dbQuery&quot;, [_this.queryTopic(parent_topic_id, parent_topic_user_address)], function(parent_res) {
               var parent_topic;
               parent_topic = parent_res[0];
<a href="#h7-8-11" id="h7-8-11" class="d">-              return $(&quot;.topic-title&quot;).html(&quot;&lt;span class=&apos;parent-link&apos;&gt;&lt;a href=&apos;?Main&apos;&gt;Main&lt;/a&gt; &amp;rsaquo;&lt;/span&gt; &lt;span class=&apos;parent-link&apos;&gt;&lt;a href=&apos;?Topics:&quot; + parent_topic.topic_id + &quot;_&quot; + parent_topic.topic_creator_user_id + &quot;/&quot; + (Text.toUrl(parent_topic.title)) + &quot;&apos;&gt;&quot; + parent_topic.title + &quot;&lt;/a&gt; &amp;rsaquo;&lt;/span&gt; &quot; + _this.topic.title);
</a><a href="#h7-8-12" id="h7-8-12" class="i">+              return $(&quot;.topic-title&quot;).html(&quot;&lt;span class=&apos;parent-link&apos;&gt;&lt;a href=&apos;?Main&apos;&gt;Main&lt;/a&gt; &amp;rsaquo;&lt;/span&gt; &lt;span class=&apos;parent-link&apos;&gt;&lt;a href=&apos;?Topics:&quot; + parent_topic.row_topic_uri + &quot;/&quot; + (Text.toUrl(parent_topic.title)) + &quot;&apos;&gt;&quot; + parent_topic.title + &quot;&lt;/a&gt; &amp;rsaquo;&lt;/span&gt; &quot; + _this.topic.title);
</a>             });
           }
           $(&quot;.topic-full&quot;).css(&quot;opacity&quot;, 1);
<a href="#h7-9" id="h7-9" class="h">@@ -1393,10 +1655,14 @@ jQuery.extend( jQuery.easing,
</a>       Page.cmd(&quot;wrapperSetLocalStorage&quot;, Page.local_storage);
       this.logStart(&quot;Loading comments...&quot;);
       query = &quot;SELECT comment.*, user.value AS user_name, user_json_content.directory AS user_address, (SELECT COUNT(*) FROM comment_vote WHERE comment_vote.comment_uri = comment.comment_id || &apos;_&apos; || user_json_content.directory)+1 AS votes FROM comment LEFT JOIN json AS user_json_data ON (user_json_data.json_id = comment.json_id) LEFT JOIN json AS user_json_content ON (user_json_content.directory = user_json_data.directory AND user_json_content.file_name = &apos;content.json&apos;) LEFT JOIN keyvalue AS user ON (user.json_id = user_json_content.json_id AND user.key = &apos;cert_user_id&apos;) WHERE comment.topic_uri = &apos;&quot; + this.topic_id + &quot;_&quot; + this.topic_user_address + &quot;&apos; ORDER BY added DESC&quot;;
<a href="#h7-9-3" id="h7-9-3" class="i">+      if (!this.list_all) {
</a><a href="#h7-9-4" id="h7-9-4" class="i">+        query += &quot; LIMIT 60&quot;;
</a><a href="#h7-9-5" id="h7-9-5" class="i">+      }
</a>       return Page.cmd(&quot;dbQuery&quot;, [query], (function(_this) {
         return function(comments) {
           var comment, comment_uri, elem, _i, _len;
           _this.logEnd(&quot;Loading comments...&quot;);
<a href="#h7-9-10" id="h7-9-10" class="i">+          $(&quot;.comments .comment:not(.template)&quot;).attr(&quot;missing&quot;, &quot;true&quot;);
</a>           for (_i = 0, _len = comments.length; _i &lt; _len; _i++) {
             comment = comments[_i];
             comment_uri = comment.comment_id + &quot;_&quot; + comment.user_address;
<a href="#h7-10" id="h7-10" class="h">@@ -1412,13 +1678,19 @@ jQuery.extend( jQuery.easing,
</a>               $(&quot;.score&quot;, elem).attr(&quot;id&quot;, &quot;comment_score_&quot; + comment_uri).on(&quot;click&quot;, _this.submitCommentVote);
             }
             _this.applyCommentData(elem, comment);
<a href="#h7-10-3" id="h7-10-3" class="d">-            elem.appendTo(&quot;.comments&quot;);
</a><a href="#h7-10-4" id="h7-10-4" class="i">+            elem.appendTo(&quot;.comments&quot;).removeAttr(&quot;missing&quot;);
</a>           }
           $(&quot;body&quot;).css({
             &quot;overflow&quot;: &quot;auto&quot;,
             &quot;height&quot;: &quot;auto&quot;
           });
<a href="#h7-10-10" id="h7-10-10" class="i">+          $(&quot;.comment[missing]&quot;).remove();
</a>           Page.addInlineEditors();
<a href="#h7-10-12" id="h7-10-12" class="i">+          if (comments.length === 60) {
</a><a href="#h7-10-13" id="h7-10-13" class="i">+            $(&quot;.comments-more&quot;).css(&quot;display&quot;, &quot;block&quot;);
</a><a href="#h7-10-14" id="h7-10-14" class="i">+          } else {
</a><a href="#h7-10-15" id="h7-10-15" class="i">+            $(&quot;.comments-more&quot;).css(&quot;display&quot;, &quot;none&quot;);
</a><a href="#h7-10-16" id="h7-10-16" class="i">+          }
</a>           if (cb) {
             return cb();
           }
<a href="#h7-11" id="h7-11" class="h">@@ -1540,6 +1812,7 @@ jQuery.extend( jQuery.easing,
</a> }).call(this);
 
 
<a href="#h7-11-3" id="h7-11-3" class="i">+
</a> /* ---- data/1TaLkFrMwvbNsooF4ioKAY9EuxTBTjipT/js/User.coffee ---- */
 
 
<b>diff --git a/<a id="h8" href="../file/js/utils/Follow.coffee.html">js/utils/Follow.coffee</a> b/<a href="../file/js/utils/Follow.coffee.html">js/utils/Follow.coffee</a></b>
<a href="#h8-0" id="h8-0" class="h">@@ -0,0 +1,81 @@
</a><a href="#h8-0-0" id="h8-0-0" class="i">+class Follow extends Class
</a><a href="#h8-0-1" id="h8-0-1" class="i">+	constructor: (@elem) -&gt;
</a><a href="#h8-0-2" id="h8-0-2" class="i">+		@menu = new Menu(@elem)
</a><a href="#h8-0-3" id="h8-0-3" class="i">+		@feeds = {}
</a><a href="#h8-0-4" id="h8-0-4" class="i">+		@follows = {}
</a><a href="#h8-0-5" id="h8-0-5" class="i">+		@elem.on &quot;click&quot;, =&gt;
</a><a href="#h8-0-6" id="h8-0-6" class="i">+			if Page.server_info.rev &gt; 850
</a><a href="#h8-0-7" id="h8-0-7" class="i">+				if @elem.hasClass &quot;following&quot;
</a><a href="#h8-0-8" id="h8-0-8" class="i">+					@showFeeds()
</a><a href="#h8-0-9" id="h8-0-9" class="i">+				else
</a><a href="#h8-0-10" id="h8-0-10" class="i">+					@followDefaultFeeds()
</a><a href="#h8-0-11" id="h8-0-11" class="i">+			else
</a><a href="#h8-0-12" id="h8-0-12" class="i">+				Page.cmd &quot;wrapperNotification&quot;, [&quot;info&quot;, &quot;Please update your ZeroNet client to use this feature&quot;]
</a><a href="#h8-0-13" id="h8-0-13" class="i">+			return false
</a><a href="#h8-0-14" id="h8-0-14" class="i">+
</a><a href="#h8-0-15" id="h8-0-15" class="i">+	init: =&gt;
</a><a href="#h8-0-16" id="h8-0-16" class="i">+		if not @feeds
</a><a href="#h8-0-17" id="h8-0-17" class="i">+			return
</a><a href="#h8-0-18" id="h8-0-18" class="i">+		Page.cmd &quot;feedListFollow&quot;, [], (@follows) =&gt;
</a><a href="#h8-0-19" id="h8-0-19" class="i">+			for title, [query, menu_item, is_default_feed, param] of @feeds
</a><a href="#h8-0-20" id="h8-0-20" class="i">+				if @follows[title] and param in @follows[title][1]
</a><a href="#h8-0-21" id="h8-0-21" class="i">+					menu_item.addClass(&quot;selected&quot;)
</a><a href="#h8-0-22" id="h8-0-22" class="i">+				else
</a><a href="#h8-0-23" id="h8-0-23" class="i">+					menu_item.removeClass(&quot;selected&quot;)
</a><a href="#h8-0-24" id="h8-0-24" class="i">+			@updateListitems()
</a><a href="#h8-0-25" id="h8-0-25" class="i">+			@elem.css &quot;display&quot;, &quot;inline-block&quot;
</a><a href="#h8-0-26" id="h8-0-26" class="i">+
</a><a href="#h8-0-27" id="h8-0-27" class="i">+
</a><a href="#h8-0-28" id="h8-0-28" class="i">+	addFeed: (title, query, is_default_feed=false, param=&quot;&quot;) -&gt;
</a><a href="#h8-0-29" id="h8-0-29" class="i">+		menu_item = @menu.addItem title, @handleMenuClick
</a><a href="#h8-0-30" id="h8-0-30" class="i">+		@feeds[title] = [query, menu_item, is_default_feed, param]
</a><a href="#h8-0-31" id="h8-0-31" class="i">+
</a><a href="#h8-0-32" id="h8-0-32" class="i">+
</a><a href="#h8-0-33" id="h8-0-33" class="i">+	handleMenuClick: (item) =&gt;
</a><a href="#h8-0-34" id="h8-0-34" class="i">+		item.toggleClass(&quot;selected&quot;)
</a><a href="#h8-0-35" id="h8-0-35" class="i">+		@updateListitems()
</a><a href="#h8-0-36" id="h8-0-36" class="i">+		@saveFeeds()
</a><a href="#h8-0-37" id="h8-0-37" class="i">+		return true
</a><a href="#h8-0-38" id="h8-0-38" class="i">+
</a><a href="#h8-0-39" id="h8-0-39" class="i">+
</a><a href="#h8-0-40" id="h8-0-40" class="i">+	showFeeds: -&gt;
</a><a href="#h8-0-41" id="h8-0-41" class="i">+		@menu.show()
</a><a href="#h8-0-42" id="h8-0-42" class="i">+
</a><a href="#h8-0-43" id="h8-0-43" class="i">+
</a><a href="#h8-0-44" id="h8-0-44" class="i">+	followDefaultFeeds: -&gt;
</a><a href="#h8-0-45" id="h8-0-45" class="i">+		for title, [query, menu_item, is_default_feed, param] of @feeds
</a><a href="#h8-0-46" id="h8-0-46" class="i">+			if is_default_feed
</a><a href="#h8-0-47" id="h8-0-47" class="i">+				menu_item.addClass &quot;selected&quot;
</a><a href="#h8-0-48" id="h8-0-48" class="i">+				@log &quot;Following&quot;, title
</a><a href="#h8-0-49" id="h8-0-49" class="i">+		@updateListitems()
</a><a href="#h8-0-50" id="h8-0-50" class="i">+		@saveFeeds()
</a><a href="#h8-0-51" id="h8-0-51" class="i">+
</a><a href="#h8-0-52" id="h8-0-52" class="i">+
</a><a href="#h8-0-53" id="h8-0-53" class="i">+	updateListitems: -&gt;
</a><a href="#h8-0-54" id="h8-0-54" class="i">+		if @menu.elem.find(&quot;.selected&quot;).length &gt; 0
</a><a href="#h8-0-55" id="h8-0-55" class="i">+			@elem.addClass &quot;following&quot;
</a><a href="#h8-0-56" id="h8-0-56" class="i">+		else
</a><a href="#h8-0-57" id="h8-0-57" class="i">+			@elem.removeClass &quot;following&quot;
</a><a href="#h8-0-58" id="h8-0-58" class="i">+
</a><a href="#h8-0-59" id="h8-0-59" class="i">+
</a><a href="#h8-0-60" id="h8-0-60" class="i">+	saveFeeds: -&gt;
</a><a href="#h8-0-61" id="h8-0-61" class="i">+		Page.cmd &quot;feedListFollow&quot;, [], (follows) =&gt;
</a><a href="#h8-0-62" id="h8-0-62" class="i">+			@follows = follows
</a><a href="#h8-0-63" id="h8-0-63" class="i">+			for title, [query, menu_item, is_default_feed, param] of @feeds
</a><a href="#h8-0-64" id="h8-0-64" class="i">+				if follows[title]
</a><a href="#h8-0-65" id="h8-0-65" class="i">+					params = (item for item in follows[title][1] when item != param)  # Remove current param from follow list
</a><a href="#h8-0-66" id="h8-0-66" class="i">+				else
</a><a href="#h8-0-67" id="h8-0-67" class="i">+					params = []
</a><a href="#h8-0-68" id="h8-0-68" class="i">+
</a><a href="#h8-0-69" id="h8-0-69" class="i">+				if menu_item.hasClass &quot;selected&quot;  # Add if selected
</a><a href="#h8-0-70" id="h8-0-70" class="i">+					params.push(param)
</a><a href="#h8-0-71" id="h8-0-71" class="i">+
</a><a href="#h8-0-72" id="h8-0-72" class="i">+				if params.length == 0   # Empty params
</a><a href="#h8-0-73" id="h8-0-73" class="i">+					delete follows[title]
</a><a href="#h8-0-74" id="h8-0-74" class="i">+				else
</a><a href="#h8-0-75" id="h8-0-75" class="i">+					follows[title] = [query, params]
</a><a href="#h8-0-76" id="h8-0-76" class="i">+
</a><a href="#h8-0-77" id="h8-0-77" class="i">+			Page.cmd &quot;feedFollow&quot;, [follows]
</a><a href="#h8-0-78" id="h8-0-78" class="i">+
</a><a href="#h8-0-79" id="h8-0-79" class="i">+
</a><a href="#h8-0-80" id="h8-0-80" class="i">+window.Follow = Follow</a><a href="#h8-0-81" id="h8-0-81" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h9" href="../file/js/utils/Menu.coffee.html">js/utils/Menu.coffee</a> b/<a href="../file/js/utils/Menu.coffee.html">js/utils/Menu.coffee</a></b>
<a href="#h9-0" id="h9-0" class="h">@@ -0,0 +1,46 @@
</a><a href="#h9-0-0" id="h9-0-0" class="i">+class Menu
</a><a href="#h9-0-1" id="h9-0-1" class="i">+	constructor: (@button) -&gt;
</a><a href="#h9-0-2" id="h9-0-2" class="i">+		@elem = $(&quot;.menu.template&quot;).clone().removeClass(&quot;template&quot;)
</a><a href="#h9-0-3" id="h9-0-3" class="i">+		@elem.appendTo(&quot;body&quot;)
</a><a href="#h9-0-4" id="h9-0-4" class="i">+		@items = []
</a><a href="#h9-0-5" id="h9-0-5" class="i">+
</a><a href="#h9-0-6" id="h9-0-6" class="i">+	show: -&gt;
</a><a href="#h9-0-7" id="h9-0-7" class="i">+		if window.visible_menu and window.visible_menu.button[0] == @button[0] # Same menu visible then hide it
</a><a href="#h9-0-8" id="h9-0-8" class="i">+			window.visible_menu.hide()
</a><a href="#h9-0-9" id="h9-0-9" class="i">+			@hide()
</a><a href="#h9-0-10" id="h9-0-10" class="i">+		else
</a><a href="#h9-0-11" id="h9-0-11" class="i">+			button_pos = @button.offset()
</a><a href="#h9-0-12" id="h9-0-12" class="i">+			@elem.css({&quot;top&quot;: button_pos.top+@button.outerHeight(), &quot;left&quot;: button_pos.left})
</a><a href="#h9-0-13" id="h9-0-13" class="i">+			@button.addClass(&quot;menu-active&quot;)
</a><a href="#h9-0-14" id="h9-0-14" class="i">+			@elem.addClass(&quot;visible&quot;)
</a><a href="#h9-0-15" id="h9-0-15" class="i">+			if window.visible_menu then window.visible_menu.hide()
</a><a href="#h9-0-16" id="h9-0-16" class="i">+			window.visible_menu = @
</a><a href="#h9-0-17" id="h9-0-17" class="i">+
</a><a href="#h9-0-18" id="h9-0-18" class="i">+
</a><a href="#h9-0-19" id="h9-0-19" class="i">+	hide: -&gt;
</a><a href="#h9-0-20" id="h9-0-20" class="i">+		@elem.removeClass(&quot;visible&quot;)
</a><a href="#h9-0-21" id="h9-0-21" class="i">+		@button.removeClass(&quot;menu-active&quot;)
</a><a href="#h9-0-22" id="h9-0-22" class="i">+		window.visible_menu = null
</a><a href="#h9-0-23" id="h9-0-23" class="i">+
</a><a href="#h9-0-24" id="h9-0-24" class="i">+
</a><a href="#h9-0-25" id="h9-0-25" class="i">+	addItem: (title, cb) -&gt;
</a><a href="#h9-0-26" id="h9-0-26" class="i">+		item = $(&quot;.menu-item.template&quot;, @elem).clone().removeClass(&quot;template&quot;)
</a><a href="#h9-0-27" id="h9-0-27" class="i">+		item.html(title)
</a><a href="#h9-0-28" id="h9-0-28" class="i">+		item.on &quot;click&quot;, =&gt;
</a><a href="#h9-0-29" id="h9-0-29" class="i">+			if not cb(item)
</a><a href="#h9-0-30" id="h9-0-30" class="i">+				@hide()
</a><a href="#h9-0-31" id="h9-0-31" class="i">+			return false
</a><a href="#h9-0-32" id="h9-0-32" class="i">+		item.appendTo(@elem)
</a><a href="#h9-0-33" id="h9-0-33" class="i">+		@items.push item
</a><a href="#h9-0-34" id="h9-0-34" class="i">+		return item
</a><a href="#h9-0-35" id="h9-0-35" class="i">+
</a><a href="#h9-0-36" id="h9-0-36" class="i">+
</a><a href="#h9-0-37" id="h9-0-37" class="i">+	log: (args...) -&gt;
</a><a href="#h9-0-38" id="h9-0-38" class="i">+		console.log &quot;[Menu]&quot;, args...
</a><a href="#h9-0-39" id="h9-0-39" class="i">+
</a><a href="#h9-0-40" id="h9-0-40" class="i">+window.Menu = Menu
</a><a href="#h9-0-41" id="h9-0-41" class="i">+
</a><a href="#h9-0-42" id="h9-0-42" class="i">+# Hide menu on outside click
</a><a href="#h9-0-43" id="h9-0-43" class="i">+$(&quot;body&quot;).on &quot;click&quot;, (e) -&gt;
</a><a href="#h9-0-44" id="h9-0-44" class="i">+	if window.visible_menu and e.target != window.visible_menu.button[0] and $(e.target).parent()[0] != window.visible_menu.elem[0]
</a><a href="#h9-0-45" id="h9-0-45" class="i">+		window.visible_menu.hide()</a><a href="#h9-0-46" id="h9-0-46" class="i">+
\ No newline at end of file
</a></pre>
</div>
</body>
</html>
