<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Verify urls are ZeroNet links. - 0git - 0git - a list of git repositories on ZeroNet
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="0git.git Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="../logo.png" alt="" width="32" height="32" /></a></td><td><h1>0git</h1><span class="desc">0git - a list of git repositories on ZeroNet
</span></td></tr><tr class="url"><td></td><td>git clone <a href="http://127.0.0.1:43110/0git.bit/0git.git">http://127.0.0.1:43110/0git.bit/0git.git</a></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.md.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/8fb9f652c5c33e149f810c2b0d61e04c0588f78e.html">8fb9f652c5c33e149f810c2b0d61e04c0588f78e</a>
<b>parent</b> <a href="../commit/870073b69be2d2601ccc43791c5cf529688c1a7a.html">870073b69be2d2601ccc43791c5cf529688c1a7a</a>
<b>Author:</b> Jakukyo Friel &lt;<a href="mailto:weakish@gmail.com">weakish@gmail.com</a>&gt;
<b>Date:</b>   Sun Jan  8 19:46:14 +0800

Verify urls are ZeroNet links.

A determined user can still submit non ZeroNet urls via directly
editing data.json.

<b>Diffstat:</b>
<table><tr><td><a href="#h0">index.html</a></td><td> | </td><td class="num">19</td><td><span class="i">+++++++++++++++</span><span class="d">----</span></td></tr>
</table>1 file changed, 15 insertions(+), 4 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/index.html.html">index.html</a> b/<a href="../file/index.html.html">index.html</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -1,6 +1,6 @@
</a> &lt;!DOCTYPE html&gt;
 &lt;head&gt;
<a href="#h0-0-2" id="h0-0-2" class="d">-    &lt;title&gt;0git - a list of git repositories on ZeroNet&lt;/title&gt;
</a><a href="#h0-0-3" id="h0-0-3" class="i">+    &lt;title&gt;0git - git repositories hosted on ZeroNet&lt;/title&gt;
</a> 
     &lt;!-- concisecss --&gt;
     &lt;link rel=&quot;stylesheet&quot; href=&quot;css/concise/concise.min.css&quot;&gt;
<a href="#h0-1" id="h0-1" class="h">@@ -11,7 +11,7 @@
</a> &lt;/head&gt;
 &lt;body&gt;
 &lt;div id=&quot;page_header&quot; class=&quot;_text-center _pts _mbm&quot;&gt;
<a href="#h0-1-3" id="h0-1-3" class="d">-    &lt;h1&gt;0git - a list of git repositories on ZeroNet&lt;/h1&gt;
</a><a href="#h0-1-4" id="h0-1-4" class="i">+    &lt;h1&gt;0git - git repositories hosted on ZeroNet&lt;/h1&gt;
</a> &lt;/div&gt;
 &lt;div id=&quot;composite_button&quot; grid style=&quot;display: block&quot;&gt;
     &lt;button column=&quot;2 +9&quot; class=&quot;-success&quot; onClick=&quot;return show_composite_form()&quot;&gt;Post new repository&lt;/button&gt;
<a href="#h0-2" id="h0-2" class="h">@@ -22,8 +22,14 @@
</a>         &lt;input column=&quot;6&quot; type=&quot;text&quot; id=&quot;description&quot; placeholder=&quot;brief description (plain text, no markup)&quot; required&gt;
     &lt;/div&gt;
     &lt;div grid&gt;
<a href="#h0-2-3" id="h0-2-3" class="d">-        &lt;input column=&quot;4&quot; type=&quot;url&quot; id=&quot;url&quot; placeholder=&quot;project site&quot; required&gt;
</a><a href="#h0-2-4" id="h0-2-4" class="d">-        &lt;input column=&quot;4&quot; type=&quot;url&quot; id=&quot;repo_url&quot; placeholder=&quot;repository clone url&quot; required&gt;
</a><a href="#h0-2-5" id="h0-2-5" class="i">+        &lt;input column=&quot;4&quot; type=&quot;url&quot; id=&quot;url&quot; placeholder=&quot;project site&quot;
</a><a href="#h0-2-6" id="h0-2-6" class="i">+               required
</a><a href="#h0-2-7" id="h0-2-7" class="i">+               pattern=&quot;(http://(127.0.0.1|localhost):43110)?/([123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]+)|([A-Za-z-]+)(/\.*)?&quot;
</a><a href="#h0-2-8" id="h0-2-8" class="i">+               title=&quot;ZeroNet url only.&quot;&gt;
</a><a href="#h0-2-9" id="h0-2-9" class="i">+        &lt;input column=&quot;4&quot; type=&quot;url&quot; id=&quot;repo_url&quot; placeholder=&quot;repository clone url&quot;
</a><a href="#h0-2-10" id="h0-2-10" class="i">+               required
</a><a href="#h0-2-11" id="h0-2-11" class="i">+               pattern=&quot;(http://(127.0.0.1|localhost):43110)?/([123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]+)|([A-Za-z-]+)(/\.*)?&quot;
</a><a href="#h0-2-12" id="h0-2-12" class="i">+               title=&quot;ZeroNet url only.&quot;&gt;
</a>     &lt;/div&gt;
     &lt;div grid class=&quot;_mtxs _mbxs&quot;&gt;
         &lt;span column=&quot;3 +5&quot; class=&quot;_c-gray-lighter&quot;&gt;posted as
<a href="#h0-3" id="h0-3" class="h">@@ -70,10 +76,15 @@ function _escape_html(text)
</a> 
 function _make_link_relative(url) {
     const zeronet_link_prefix = &apos;http://127.0.0.1:43110&apos;
<a href="#h0-3-3" id="h0-3-3" class="i">+    const alternative_zeronet_link_prefix = &apos;http://localhost:43110&apos;
</a>     if (url.startsWith(zeronet_link_prefix))
     {
         return url.slice(zeronet_link_prefix.length)
     }
<a href="#h0-3-8" id="h0-3-8" class="i">+    else if (url.startsWith(alternative_zeronet_link_prefix))
</a><a href="#h0-3-9" id="h0-3-9" class="i">+    {
</a><a href="#h0-3-10" id="h0-3-10" class="i">+        return url.slice(alternative_zeronet_link_prefix.length)
</a><a href="#h0-3-11" id="h0-3-11" class="i">+    }
</a>     else
     {
         return url
</pre>
</div>
</body>
</html>
