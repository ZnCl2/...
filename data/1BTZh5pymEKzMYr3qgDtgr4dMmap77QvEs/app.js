webpackJsonp([1],[,,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.zeroAuth=e.zeroFS=e.zeroDB=e.zeroPage=void 0;var a=n(124),i=r(a),o=n(125),s=r(o),c=n(48),u=r(c),l=n(126),d=r(l),f=n(49),p=r(f),v=new i.default,h=new s.default(v),m=new u.default(h),b=new d.default(h),g=new p.default(h,["zeroid.bit","kaffie.bit","cryptoid.bit","peak.id","zeroverse.bit","kxoid.bit"]);e.zeroPage=h,e.zeroDB=b,e.zeroFS=m,e.zeroAuth=g},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TIMESLICE=200,e.PING_INTERVAL=6e4,e.PACKET_DELAY=1e4},,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6);n(50),n(127),n(29),n(128),n(129),e.default={name:"Header",computed:{loggedIn:function(){return!!this.$store.state.siteInfo.cert_user_id}},methods:{login:function(){this.loggedIn?r.zeroPage.cmd("certSelect",{accepted_domains:[""]}):r.zeroPage.cmd("certSelect",{accepted_domains:r.zeroAuth.acceptedDomains})}}}},,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:[],name:"root"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{clear:{type:String,default:"both"}},name:"ClearFix"}},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,i){try{var o=e[a](i),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(54),o=n(31);e.default={name:"VideoPlayer",data:function(){return{packets:[],allowPlayback:!0,expectedPacket:null,skipWaitTimeout:null,playbackStarted:!1,paused:!1,waitForButton:null,width:640,height:480,packetDelay:0}},mounted:function(){this.$on("blob",this.onBlob)},methods:{onBlob:function(t){var e=void 0,n=void 0,r=void 0,o=t.split("!"),s=a(o,2);e=s[0],t=s[1];var c=t.split(","),u=a(c,2);r=u[0],t=u[1];var l=e.split("?"),d=a(l,2);if(e=d[0],n=d[1],n=parseInt(n,10),r=parseFloat(r),console.log("Received packet #"+n),!(null!==this.expectedPacket&&n<this.expectedPacket)){var f=void 0;if("pause"===e)f=null;else{var p=void 0;p="z"===t[0]?new i.Buffer(t.substr(1),"base64"):new i.Buffer(t,"hex"),f=URL.createObjectURL(new Blob([p],{type:e}))}this.handlePacket({packetId:n,type:e,url:f,duration:r,shown:!1,metadataLoaded:!1,errorred:!1})}},handlePacket:function(t){if(this.packets.push(t),this.packets.sort(function(t,e){return t.packetId-e.packetId}),this.updatePacketNodes(),console.log("Cached packets:",this.packets.map(function(t){return t.packetId})),this.allowPlayback)if(this.playbackStarted)this.packets.length>0&&this.startPlayback();else for(var e=0;e<this.packets.length-1;e++)if(this.packets[e+1].packetId-this.packets[e].packetId==1){var n=!0,r=!1,a=void 0;try{for(var i,o=this.packets.slice(0,e)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;URL.revokeObjectURL(s.url)}}catch(t){r=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return this.packets=this.packets.slice(e),this.updatePacketNodes(),void this.startPlayback()}},startPlayback:function(){var t=this;clearTimeout(this.skipWaitTimeout),this.allowPlayback=!1,this.playbackStarted=!0;var e=this.packets[0],n=e.packetId,a=e.type,i=e.url,o=e.duration,s=e.metadataLoaded,c=e.errorred;if(console.log("Playback packet #"+n),this.expectedPacket=n,"pause"===a)return this.packets.shift(),void(0===this.packets.length&&(this.paused=!0,this.waitForBuffering()));var u=this.$el.querySelector(".player-packet"+n);if(this.packetDelay>=u.duration)return this.packetDelay-=u.duration,u.parentNode.removeChild(u),this.packets.shift(),void(this.packets.length>0&&this.packets[0].packetId-n==1?this.startPlayback():this.waitForBuffering());e.shown=!0,this.updatePacketNodes();var l=void 0;this.paused=!1,u.onloadedmetadata=function(){u.onloadedmetadata=null,u.onplay=function(){u.onplay=null,l=Date.now()},u.onended=function(){u.onended=null,URL.revokeObjectURL(i),t.packets.shift(),t.updatePacketNodes();var e=Date.now()-l;t.packetDelay=e/1e3-o,t.packets.length>0&&t.packets[0].packetId-n==1?t.startPlayback():t.waitForBuffering()},console.log("Playing from",t.packetDelay),u.currentTime=Math.max(t.packetDelay,0),t.width=u.videoWidth,t.height=u.videoHeight,setTimeout(r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.play();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),t.waitForButton=n;case 9:case"end":return e.stop()}},e,t,[[0,5]])})),0)},s&&u.onloadedmetadata(),u.onerror=function(){u.onerror=null,t.packets.shift(),t.updatePacketNodes(),t.packets.length>0&&t.packets[0].packetId-n==1?t.startPlayback():t.waitForBuffering()},c&&u.onerror()},waitForBuffering:function(){var t=this;this.allowPlayback=!0,this.skipWaitTimeout=setTimeout(function(){return t.skipWait()},o.PACKET_DELAY),this.packetDelay=0},skipWait:function(){this.packets.length>0&&this.startPlayback()},play:function(){var t=this;this.$el.querySelector(".player-packet"+this.waitForButton).play(),this.packets.find(function(e){return e.packetId===t.waitForButton}).shown=!0,this.updatePacketNodes(),this.waitForButton=null},updatePacketNodes:function(){var t=this,e=!0,n=!1,r=void 0;try{for(var a,i=this.packets[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;!function(e){if(e.url){var n=t.$el.querySelector(".player-packet"+e.packetId);n||(n=document.createElement("video"),n.src=e.url,n.dataset.packet=e.packetId.toString(),n.className="player-packet"+e.packetId,n.onloadedmetadata=function(){e.metadataLoaded=!0},n.onerror=function(){e.errorred=!0},t.$refs.packets.appendChild(n)),n.style.opacity=e.shown?1:0}}(o)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}var s=!0,c=!1,u=void 0;try{for(var l,d=this.$el.querySelectorAll("video")[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var f=l.value;!function(e){t.packets.some(function(t){return t.packetId===parseInt(e.dataset.packet)})||e.parentNode.removeChild(e)}(f)}}catch(t){c=!0,u=t}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}}}}},,function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,i){try{var o=e[a](i),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(6);e.default={name:"Comments",props:["hub","id","owner"],data:function(){return{hub:"",id:"",myComment:"",comments:[],owner:!1}},mounted:function(){var t=this;i.zeroPage.on("peerReceive",function(e){return t.onPeerReceive(e)})},methods:{onPeerReceive:function(t){var e=this,n=t.params;return r(regeneratorRuntime.mark(function t(){var r,o,s,c,u,l,d,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r="chat|"+e.id+"|",n.site!==e.hub||!n.message.startsWith(r)){t.next=11;break}if(o=n.message.substr(r.length).split("|"),s=a(o,5),c=s[0],u=s[1],l=s[2],d=s[3],f=s[4],"owner"!==c){t.next=7;break}n.signed_by===e.hub&&e.showMessage("owner",l,d,f),t.next=11;break;case 7:return t.next=9,i.zeroPage.cmd("ecdsaVerify",[d,u,c]);case 9:if(!t.sent){t.next=11;break}e.showMessage(u,l,d,f);case 11:case"end":return t.stop()}},t,e)}))()},post:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n,r,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=encodeURIComponent(t.myComment.trim()),t.myComment="",n){e.next=4;break}return e.abrupt("return");case 4:if(!t.owner){e.next=10;break}return r=t.$store.state.siteInfo.cert_user_id,e.next=8,i.zeroPage.cmd("as",[t.hub,"peerBroadcast",{message:["chat",t.id,"owner","",r,n,Date.now()].join("|"),immediate:!1,privatekey:"stored"}]);case 8:e.next=17;break;case 10:return e.next=12,i.zeroPage.cmd("ecdsaSign",[n]);case 12:return a=e.sent,o=t.$store.state.siteInfo.auth_address,s=t.$store.state.siteInfo.cert_user_id,e.next=17,i.zeroPage.cmd("as",[t.hub,"peerBroadcast",{message:["chat",t.id,a,o,s||"",n,Date.now()].join("|"),immediate:!1,privatekey:!1}]);case 17:case"end":return e.stop()}},e,t)}))()},showMessage:function(t,e,n,r){this.comments.push({authAddress:t,certUserId:e||null,comment:decodeURIComponent(n),timestamp:+r}),this.comments.sort(function(t,e){return e.timestamp-t.timestamp})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ExtendedInput",props:["value","title","placeholder","readonly"],data:function(){return{value:"",title:"",placeholder:"",readonly:!1}},methods:{enter:function(){this.$emit("enter",this.value)},input:function(){this.$emit("input",this.value)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:[],name:"root"}},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,i){try{var o=e[a](i),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(6);n(59),n(29),e.default={name:"home",data:function(){return{searchQuery:""}},methods:{stream:function(){this.$router.navigate("stream")},watch:function(){this.$router.navigate("watch")},search:function(){this.$router.navigate(("search/"+encodeURIComponent(this.searchQuery)).replace(/\/$/,""))}},computed:{loggedIn:function(){return!!this.$store.state.siteInfo.cert_user_id}},asyncComputed:{peerMessageInstalled:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.zeroPage.cmd("serverInfo");case 2:return n=t.sent,t.abrupt("return",n.plugins.indexOf("PeerMessage")>-1);case 4:case"end":return t.stop()}},e,t)}))()}}}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(59),e.default={name:"about"}},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,i){try{var o=e[a](i),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(6),i=n(31);n(29),n(172),e.default={name:"home",data:function(){return{query:"",results:[]}},mounted:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.query=decodeURIComponent(t.$router.currentParams.query||""),e.next=3,a.zeroDB.query("\n\t\t\tSELECT\n\t\t\t\tvideos.*,\n\t\t\t\tjson.cert_user_id AS cert_user_id,\n\t\t\t\tjson.directory AS directory,\n\t\t\t\t(\n\t\t\t\t\t"+Date.now()+" - videos.ping < "+3*i.PING_INTERVAL+" AND\n\t\t\t\t\t"+Date.now()+" - videos.ping > -"+3*i.PING_INTERVAL+'\n\t\t\t\t) AS live\n\n\t\t\tFROM videos\n\t\t\tLEFT JOIN json ON json.json_id = videos.json_id\n\n\t\t\tWHERE (\n\t\t\t\tvideos.title LIKE "%'+t.query.replace(/"/g,'""')+"%\" AND\n\t\t\t\tlive -- till we don't know how to handle dead streams\n\t\t\t)\n\t\t");case 3:n=e.sent,t.results=n.map(function(t){return{title:t.title,description:t.description,author:t.cert_user_id,authAddress:t.directory.replace("users/",""),durationFormatted:"100500s",id:t.id,live:t.live,hub:t.hub}});case 5:case"end":return e.stop()}},e,t)}))()},methods:{search:function(){this.$router.navigate(("search/"+encodeURIComponent(this.query)).replace(/\/$/,""))},report:function(t){},watch:function(t){this.$router.navigate("watch/"+t.hub+"/"+t.id+"/"+encodeURIComponent(t.title))}}}},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,i){try{var o=e[a](i),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n(177),n(178),n(179);var i=n(180),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=n(31),c=n(6);e.default={name:"stream",data:function(){for(var t=decodeURIComponent(this.$router.currentParams.title),e=decodeURIComponent(this.$router.currentParams.description),n=parseFloat(this.$router.currentParams.delay),r={title:t,description:e,delay:n,screen:screen,currentBlobArray:[],capturing:!1,terminated:!1,paused:!1,requestingHub:null,videoId:"",pingTimeout:null,hub:""},i=["screen","camera"],o=0;o<i.length;o++){var s=i[o];if("no"===this.$router.currentParams[s])r[s]=null;else{var c=this.$router.currentParams[s].match(/^(\d+)x(\d+),fps=(\d+),br=(\d+),codec=([^,]+)$/),u=a(c,6),l=u[1],d=u[2],f=u[3],p=u[4],v=u[5];r[s]={width:l,height:d,fps:f,bitrate:p,codec:v,packetId:0,stream:null}}}return r},mounted:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n,r,a,i,s,u,l,d,f,p,v,h,m,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.requestingNosandbox){e.next=3;break}return t.requestNosandbox(),e.abrupt("return");case 3:for(n=function(e){t[e]&&(t[e].stream=new o.default,t[e].handler=function(n){return t.onCapture(e,n)},t[e].stream.on("capture",t[e].handler))},r=["screen","camera"],a=0;a<r.length;a++)i=r[a],n(i);if(!t.requestingNosandbox){e.next=10;break}t.requestNosandbox(),e.next=54;break;case 10:return s=t.$store.state.siteInfo.auth_address,e.next=13,c.zeroPage.cmd("mergerSiteList",[!0]);case 13:u=e.sent,l=!0,d=!1,f=void 0,e.prev=17,p=Object.values(u)[Symbol.iterator]();case 19:if(l=(v=p.next()).done){e.next=37;break}if(!((h=v.value)&&h.content&&h.settings.own)||h.content.owner){e.next=34;break}return e.next=24,c.zeroPage.cmd("as",[h.address,"fileGet",["content.json"]]);case 24:return m=e.sent,m=JSON.parse(m),m.owner=s,m.title=t.$store.state.siteInfo.cert_user_id,h.content=m,m=JSON.stringify(m,null,1),e.next=32,c.zeroPage.cmd("as",[h.address,"fileWrite",["content.json",btoa(m)]]);case 32:return e.next=34,c.zeroPage.cmd("as",[h.address,"siteSign",["stored"]]);case 34:l=!0,e.next=19;break;case 37:e.next=43;break;case 39:e.prev=39,e.t0=e.catch(17),d=!0,f=e.t0;case 43:e.prev=43,e.prev=44,!l&&p.return&&p.return();case 46:if(e.prev=46,!d){e.next=49;break}throw f;case 49:return e.finish(46);case 50:return e.finish(43);case 51:b=Object.values(u).find(function(t){return t&&t.content&&t.content.owner===s}),t.requestingHub=!b,t.hub=b?b.address:"";case 54:case"end":return e.stop()}},e,t,[[17,39,43,51],[44,,46,50]])}))()},destroyed:function(){for(var t=["screen","camera"],e=0;e<t.length;e++){var n=t[e];this[n]&&(this[n].stream.stop(),this[n].stream.off("capture",this[n].handler))}clearTimeout(this.pingTimeout)},computed:{requestingNosandbox:function(){return-1===this.$store.state.siteInfo.settings.permissions.indexOf("NOSANDBOX")},directLink:function(){return("\n\t\t\t\thttp://127.0.0.1:43110/"+this.$store.state.siteInfo.address+"\n\t\t\t\t/?/watch/"+this.hub+"/"+this.videoId+"\n\t\t\t\t/"+encodeURIComponent(this.title)+"\n\t\t\t").replace(/\s/g,"")},totalPackets:function(){for(var t=0,e=["screen","camera"],n=0;n<e.length;n++){var r=e[n];this[r]&&(t+=this[r].packetId)}return t}},watch:{requestingHub:function(t){var e=this;return r(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=8;break}return n.next=3,c.zeroPage.cmd("wrapperPermissionAdd",["Merger:StreamZ"]);case 3:return r=e.$store.state.siteInfo.address,n.next=6,c.zeroPage.cmd("siteClone",[r,"hub"]);case 6:n.next=9;break;case 8:!1===t&&e.capture();case 9:case"end":return n.stop()}},n,e)}))()}},methods:{requestNosandbox:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.zeroPage.cmd("wrapperPermissionAdd",["NOSANDBOX"]);case 2:n=e.sent,n&&!n.error&&(parent.location.href="?/"+t.$router.currentHash);case 4:case"end":return e.stop()}},e,t)}))()},capture:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.videoId=Math.random().toString(36).substr(2),n=t.$store.state.siteInfo.auth_address,e.next=4,c.zeroDB.insertRow("data/users/"+n+"/data.json","data/users/"+n+"/content.json","videos",{title:t.title,description:t.description,id:t.videoId,ping:0,hub:t.hub});case 4:return e.next=6,t.startCapture();case 6:case"end":return e.stop()}},e,t)}))()},pause:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n,r,a,i,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=["screen","camera"],r=0;case 2:if(!(r<n.length)){e.next=10;break}if(a=n[r],!t[a]){e.next=7;break}return e.next=7,t[a].stream.pause();case 7:r++,e.next=2;break;case 10:for(t.capturing=!1,t.paused=!0,i=["screen","camera"],o=0;o<i.length;o++)s=i[o],t[s]&&(t[s].packetId++,u=t.videoId+"*"+s+"@pause?"+t[s].packetId+"!0,pause",c.zeroPage.cmd("as",[t.hub,"peerBroadcast",{message:u,immediate:!1,privatekey:"stored"}]));case 14:case"end":return e.stop()}},e,t)}))()},terminate:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=["screen","camera"],r=0;case 2:if(!(r<n.length)){e.next=10;break}if(a=n[r],!t[a]){e.next=7;break}return e.next=7,t[a].stream.stop();case 7:r++,e.next=2;break;case 10:t.capturing=!1,t.terminated=!0,clearTimeout(t.pingTimeout);case 13:case"end":return e.stop()}},e,t)}))()},resumeCapture:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.capturing=!0,t.paused=!1,n=["screen","camera"],r=0;case 4:if(!(r<n.length)){e.next=12;break}if(a=n[r],!t[a]){e.next=9;break}return e.next=9,t[a].stream.resume();case 9:r++,e.next=4;break;case 12:t.pingTimeout=setTimeout(function(){return t.ping()},s.PING_INTERVAL);case 13:case"end":return e.stop()}},e,t)}))()},startCapture:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.capturing=!0,t.paused=!1,n=["screen","camera"],r=0;case 4:if(!(r<n.length)){e.next=12;break}if(a=n[r],!t[a]){e.next=9;break}return e.next=9,t[a].stream.start({screen:"getDisplayMedia",camera:"getUserMedia"}[a],{id:a,constraints:{video:{width:t[a].width,height:t[a].height,frameRate:{ideal:t[a].fps}}},timeSlice:s.TIMESLICE,restreamInterval:Math.round(1e3*t.delay/s.TIMESLICE),bitrate:.75*t[a].bitrate,mimeType:"video/webm"+("default"===t[a].codec?"":'; codecs="'+t[a].codec+'"')});case 9:r++,e.next=4;break;case 12:t.pingTimeout=setTimeout(function(){return t.ping()},s.PING_INTERVAL);case 13:case"end":return e.stop()}},e,t)}))()},onCapture:function(t,e){var n=e.data,r=e.type;this.capturing=!0,this[t].packetId++,n=this.videoId+"*"+t+"@"+r+"?"+this[t].packetId+"!"+this.delay+","+n,c.zeroPage.cmd("as",[this.hub,"peerBroadcast",{message:n,immediate:!1,privatekey:"stored"}])},ping:function(){var t=this,e=this.$store.state.siteInfo.auth_address;c.zeroDB.changeRow("data/users/"+e+"/data.json","data/users/"+e+"/content.json","videos",function(e){return e.id===t.videoId&&(e.ping=Date.now()),e}),this.pingTimeout=setTimeout(function(){return t.ping()},s.PING_INTERVAL)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(50),e.default={name:"stream/configuration",data:function(){return{title:"",description:"",delay:5,screenEnabled:!0,screenBitrate:2e3,screenFps:30,screenCodec:"default",screenWidth:screen.width,screenHeight:screen.height,cameraEnabled:!1,cameraBitrate:1e3,cameraFps:30,cameraCodec:"default",cameraWidth:640,cameraHeight:480}},methods:{stream:function(){var t=encodeURIComponent(this.title||"No title"),e=encodeURIComponent(this.description||"No description");this.$router.navigate(("\n\t\t\t\t\tstream\n\t\t\t\t\t/"+t+"\n\t\t\t\t\t/"+e+"\n\t\t\t\t\t/"+this.delay+"\n\t\t\t\t\t/"+(this.screenEnabled?"\n\t\t\t\t\t\t"+this.screenWidth+"x"+this.screenHeight+",\n\t\t\t\t\t\tfps="+this.screenFps+",\n\t\t\t\t\t\tbr="+this.screenBitrate+",\n\t\t\t\t\t\tcodec="+this.screenCodec+"\n\t\t\t\t\t":"no")+"\n\t\t\t\t\t/"+(this.cameraEnabled?"\n\t\t\t\t\t\t"+this.cameraWidth+"x"+this.cameraHeight+",\n\t\t\t\t\t\tfps="+this.cameraFps+",\n\t\t\t\t\t\tbr="+this.cameraBitrate+",\n\t\t\t\t\t\tcodec="+this.cameraCodec+"\n\t\t\t\t\t":"no")+"\n\t\t\t\t").replace(/\s/g,""))}}}},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,i){try{var o=e[a](i),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(6);e.default={name:"watch",data:function(){return{hub:null,id:null,title:null,hasCamera:!1,hasScreen:!1}},mounted:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hub=t.$router.currentParams.hub,t.id=t.$router.currentParams.id,t.title=decodeURIComponent(t.$router.currentParams.title),a.zeroPage.on("peerReceive",t.onPeerReceive),n=t.$store.state.siteInfo.settings.permissions,-1!==n.indexOf("Merger:StreamZ")){e.next=8;break}return e.next=8,a.zeroPage.cmd("wrapperPermissionAdd",["Merger:StreamZ"]);case 8:return e.next=10,a.zeroPage.cmd("mergerSiteAdd",[t.hub]);case 10:case"end":return e.stop()}},e,t)}))()},destroyed:function(){a.zeroPage.off("peerReceive",this.onPeerReceive)},methods:{onPeerReceive:function(t){var e=t.params;e.signed_by===this.hub&&e.message.startsWith(this.id+"*")&&(e.message.startsWith(this.id+"*camera@")?(this.hasCamera=!0,this.$refs.cameraPlayer.$emit("blob",e.message.substr((this.id+"*camera@").length))):e.message.startsWith(this.id+"*screen@")&&(this.hasScreen=!0,this.$refs.screenPlayer.$emit("blob",e.message.substr((this.id+"*screen@").length))))}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n(66),n(109);var a=n(28),i=r(a),o=n(117),s=r(o),c=n(5),u=r(c),l=n(121),d=r(l),f=n(131),p=r(f),v=n(135),h=r(v),m=n(137),b=r(m),g=n(144),_=r(g),x=n(148),y=r(x),w=n(152),k=r(w),P=n(153),C=r(P),I=n(157),R=n(6),S=n(191);i.default.use(s.default),i.default.component("icon",u.default),i.default.component("Header",d.default),i.default.component("StreamZ",p.default),i.default.component("ClearFix",h.default),i.default.component("VideoPlayer",b.default),i.default.component("Comments",_.default),i.default.component("ExtendedInput",y.default),i.default.prototype.$eventBus=new i.default,i.default.use(k.default);var E=new k.default.Store({state:{siteInfo:{settings:{own:!1,permissions:[]}},currentParams:null,currentRoute:null,currentHash:null},mutations:{setSiteInfo:function(t,e){t.siteInfo=e},route:function(t,e){t.currentParams=e.currentParams,t.currentRoute=e.currentRoute,t.currentHash=e.currentHash}}}),F=new i.default({el:"#app",render:function(t){return t(C.default)},data:{currentView:null},store:E});i.default.prototype.$zeroPage=R.zeroPage,function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,i){try{var o=e[a](i),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.zeroPage.getSiteInfo();case 2:e=t.sent,E.commit("setSiteInfo",e),(0,I.route)(F),F.$eventBus.$emit("setSiteInfo",e);case 6:case"end":return t.stop()}},t,this)}))(),R.zeroPage.on("setSiteInfo",function(t){t.params.address===E.state.siteInfo.address&&(E.commit("setSiteInfo",t.params),F.$eventBus.$emit("setSiteInfo",t.params))}),R.zeroPage.on("peerReceive",function(t){var e=t.params;(0,S.handlePeerReceive)(e)})},function(t,e,n){"use strict";n(67),n(105),n(106)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r=n(110);"string"==typeof r&&(r=[[t.i,r,""]]);var a={hmr:!0};a.transform=void 0,a.insertInto=void 0;n(113)(r,a);r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(111);e=t.exports=n(1)(!1),e.push([t.i,"html, body {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  background-color: #FFF;\n  font-family: Verdana, Arial, sans-serif;\n  font-size: 16px;\n  box-sizing: border-box; }\n\n* {\n  font-family: inherit;\n  font-size: inherit;\n  box-sizing: inherit; }\n\n@font-face {\n  src: url("+r(n(112))+');\n  font-family: "Baloo"; }\n\nh1 {\n  font-size: 24px; }\n\nbutton {\n  padding: 16px 24px;\n  border: none;\n  border-radius: 4px;\n  margin: 16px 0;\n  color: #FFF;\n  font-size: 16px;\n  cursor: pointer;\n  transition: all 0.2s;\n  background-color: #FF5252; }\n  button .icon {\n    width: 24px;\n    height: 24px;\n    vertical-align: middle; }\n  button:hover {\n    background-color: #ff1f1f; }\n  button.left {\n    float: left;\n    margin-right: 16px; }\n    button.left .icon {\n      margin-right: 12px; }\n  button.right {\n    float: right;\n    margin-left: 16px; }\n    button.right .icon {\n      margin-left: 12px; }\n',""])},,function(t,e,n){t.exports=n.p+"fonts/Baloo-Regular.ttf"},,,,,,,,,function(t,e,n){"use strict";function r(t){c||n(122)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(47),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n(130),c=!1,u=n(2),l=r,d=u(i.a,s.a,!1,l,"data-v-0bb8c0bd",null);d.options.__file="vue_components/Header/Header.vue",e.default=d.exports},function(t,e,n){var r=n(123);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(3)("20c6d694",r,!1,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,'\n.header[data-v-0bb8c0bd] {\n  width: 100%;\n  background-color: #FFF;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  z-index: 100;\n}\n.header-content[data-v-0bb8c0bd] {\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 16px 0;\n  display: flex;\n  flex-direction: row;\n}\n.header-content .left[data-v-0bb8c0bd], .header-content .right[data-v-0bb8c0bd] {\n    flex: 1 1 0;\n}\n.header-content .left .logo-title[data-v-0bb8c0bd] {\n    display: inline-block;\n    cursor: pointer;\n}\n.header-content .left .logo-title .logo[data-v-0bb8c0bd] {\n      height: 48px;\n      vertical-align: middle;\n}\n.header-content .left .logo-title .title[data-v-0bb8c0bd] {\n      display: inline-block;\n      margin-left: 8px;\n      vertical-align: middle;\n      font-family: "Baloo", "Verdana", "Arial", sans-serif;\n      font-size: 32px;\n}\n.header-content .right[data-v-0bb8c0bd] {\n    display: flex;\n    flex-direction: row;\n    justify-content: end;\n}\n.header-content .right .button[data-v-0bb8c0bd] {\n      display: inline-block;\n      vertical-align: top;\n      overflow: hidden;\n      width: 48px;\n      transition: all 0.3s;\n}\n.header-content .right .button[data-v-0bb8c0bd]:hover {\n        width: 112px;\n}\n.header-content .right .button.stream-button[data-v-0bb8c0bd] {\n        color: #FF5252;\n        cursor: pointer;\n}\n.header-content .right .button.stream-button[data-v-0bb8c0bd]:hover {\n          color: #eb0000;\n}\n.header-content .right .button.login-button[data-v-0bb8c0bd], .header-content .right .button.search-button[data-v-0bb8c0bd], .header-content .right .button.info-button[data-v-0bb8c0bd] {\n        color: #CCCCCC;\n        cursor: pointer;\n}\n.header-content .right .button.login-button[data-v-0bb8c0bd]:hover, .header-content .right .button.search-button[data-v-0bb8c0bd]:hover, .header-content .right .button.info-button[data-v-0bb8c0bd]:hover {\n          color: gray;\n}\n.header-content .right .button .button-content[data-v-0bb8c0bd] {\n        width: 136px;\n        overflow: hidden;\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n}\n.header-content .right .button .button-content .icon[data-v-0bb8c0bd] {\n          width: 32px;\n          height: 32px;\n          margin: 8px;\n}\n.header-content .right .button .button-content .text[data-v-0bb8c0bd] {\n          display: inline-block;\n}\n',""])},,,,,,,function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"header"},[r("div",{staticClass:"header-content"},[r("div",{staticClass:"left"},[r("div",{staticClass:"logo-title",on:{click:function(e){t.$router.navigate("")}}},[r("img",{staticClass:"logo",attrs:{src:n(30)}}),t._v(" "),r("div",{staticClass:"title"},[t._v("StreamZ")])])]),t._v(" "),r("div",{staticClass:"right"},[t.loggedIn?r("div",{staticClass:"button stream-button",on:{click:function(e){t.$router.navigate("stream")}}},[r("div",{staticClass:"button-content"},[r("icon",{staticClass:"icon",attrs:{name:"video"}}),t._v(" "),r("div",{staticClass:"text"},[t._v("Stream")])],1)]):t._e(),t._v(" "),r("div",{staticClass:"button info-button",on:{click:function(e){t.$router.navigate("about")}}},[r("div",{staticClass:"button-content"},[r("icon",{staticClass:"icon",attrs:{name:"info-circle"}}),t._v(" "),r("div",{staticClass:"text"},[t._v("About")])],1)]),t._v(" "),r("div",{staticClass:"button search-button",on:{click:function(e){t.$router.navigate("search")}}},[r("div",{staticClass:"button-content"},[r("icon",{staticClass:"icon",attrs:{name:"search"}}),t._v(" "),r("div",{staticClass:"text"},[t._v("Search")])],1)]),t._v(" "),r("div",{staticClass:"button login-button",on:{click:t.login}},[r("div",{staticClass:"button-content"},[t.loggedIn?[r("icon",{staticClass:"icon",attrs:{name:"sign-out-alt"}}),t._v(" "),r("div",{staticClass:"text"},[t._v("Logout")])]:[r("icon",{staticClass:"icon",attrs:{name:"sign-in-alt"}}),t._v(" "),r("div",{staticClass:"text"},[t._v("Login")])]],2)])])])])},a=[];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},function(t,e,n){"use strict";function r(t){c||n(132)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(51),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n(134),c=!1,u=n(2),l=r,d=u(i.a,s.a,!1,l,"data-v-69f69028",null);d.options.__file="vue_components/StreamZ.vue",e.default=d.exports},function(t,e,n){var r=n(133);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(3)("3c8c8c84",r,!1,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,'\n.streamz[data-v-69f69028] {\n  font-family: "Baloo", "Verdana", "Arial", sans-serif;\n}\n.logo[data-v-69f69028] {\n  height: 1em;\n  margin-bottom: -0.2em;\n}\n',""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"streamz"},[r("img",{staticClass:"logo",attrs:{src:n(30)}}),t._v("\n\tStreamZ\n")])}];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(52),a=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var o=n(136),s=n(2),c=s(a.a,o.a,!1,null,null,null);c.options.__file="vue_components/ClearFix.vue",e.default=c.exports},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{style:{clear:t.clear}})},a=[];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},function(t,e,n){"use strict";function r(t){c||n(138)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(53),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n(143),c=!1,u=n(2),l=r,d=u(i.a,s.a,!1,l,"data-v-48fa6497",null);d.options.__file="vue_components/VideoPlayer/VideoPlayer.vue",e.default=d.exports},function(t,e,n){var r=n(139);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(3)("0b8218c2",r,!1,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,"\n.video-player[data-v-48fa6497] {\n  position: relative;\n}\n.packets[data-v-48fa6497] {\n  width: 100%;\n}\n.packets[data-v-48fa6497] video {\n    width: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n.overload[data-v-48fa6497] {\n  position: absolute;\n  left: 0;\n  top: 0;\n  display: flex;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  color: #FFF;\n}\n.overload.transparent[data-v-48fa6497] {\n    background-color: rgba(0, 0, 0, 0.9);\n}\n.overload.opaque[data-v-48fa6497] {\n    background-color: rgba(255, 31, 31, 0.9);\n}\n",""])},,,,function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video-player",style:{width:t.width+"px",height:t.height+"px"}},[n("div",{ref:"packets",staticClass:"packets"}),t._v(" "),t.allowPlayback?n("div",{staticClass:"overload transparent"},[t._v("\n\t\tBuffering, please wait.\n\t")]):t._e(),t._v(" "),t.paused?n("div",{staticClass:"overload opaque"},[t._v("\n\t\tThe stream is paused.\n\t")]):t._e(),t._v(" "),t.waitForButton?n("div",{staticClass:"overload opaque",on:{click:t.play}},[t._v("\n\t\tClick to start.\n\t")]):t._e()])},a=[];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},function(t,e,n){"use strict";function r(t){c||n(145)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n(147),c=!1,u=n(2),l=r,d=u(i.a,s.a,!1,l,"data-v-c40b0dc6",null);d.options.__file="vue_components/Comments/Comments.vue",e.default=d.exports},function(t,e,n){var r=n(146);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(3)("243fcf50",r,!1,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,'\n.comments[data-v-c40b0dc6] {\n  max-width: 800px;\n  width: 100%;\n  margin: 0 auto;\n}\n.comments .list[data-v-c40b0dc6] {\n    margin-top: 32px;\n}\n.comments .list .comment[data-v-c40b0dc6] {\n      margin: 24px 0;\n}\n.comments .list .comment .info[data-v-c40b0dc6] {\n        margin-bottom: 4px;\n        font-weight: bold;\n        font-family: "Courier New", monospace;\n}\n.comments .list .comment .info .name[data-v-c40b0dc6] {\n          color: #008;\n}\n.comments .list .comment .info .address[data-v-c40b0dc6] {\n          color: #888;\n}\n.comments .list .comment .info .date[data-v-c40b0dc6] {\n          color: #800;\n}\n.comments .list .comment .info .owner[data-v-c40b0dc6] {\n          color: #B80;\n}\n',""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comments"},[n("ExtendedInput",{attrs:{placeholder:"Type your comment here..."},on:{enter:t.post},model:{value:t.myComment,callback:function(e){t.myComment=e},expression:"myComment"}}),t._v(" "),n("div",{staticClass:"list"},t._l(t.comments,function(e){return n("div",{staticClass:"comment"},[n("div",{staticClass:"info"},["owner"===e.authAddress?[n("span",{staticClass:"owner"},[t._v("Livestreamer")])]:e.certUserId?[n("span",{staticClass:"name"},[t._v(t._s(e.certUserId))]),t._v(" "),n("span",{staticClass:"address"},[t._v("("+t._s(e.authAddress)+")")])]:[n("span",{staticClass:"name"},[t._v("@"+t._s(e.authAddress))])],t._v(" "),n("span",{staticClass:"date"},[t._v("\n\t\t\t\t\t["+t._s(new Date(e.timestamp).toLocaleTimeString())+"]\n\t\t\t\t")])],2),t._v(" "),n("div",{staticClass:"body"},[t._v("\n\t\t\t\t"+t._s(e.comment)+"\n\t\t\t")])])}))],1)},a=[];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},function(t,e,n){"use strict";function r(t){c||n(149)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(56),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n(151),c=!1,u=n(2),l=r,d=u(i.a,s.a,!1,l,"data-v-2107315f",null);d.options.__file="vue_components/ExtendedInput.vue",e.default=d.exports},function(t,e,n){var r=n(150);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(3)("c4fa9372",r,!1,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,"\n.input[data-v-2107315f] {\n  display: flex;\n  flex-direction: row;\n  margin-top: 8px;\n  width: 100%;\n  border-radius: 4px;\n  border: 1px solid #DDD;\n  overflow: hidden;\n}\n.input[data-v-2107315f]:hover, .input[data-v-2107315f]:focus {\n    border-color: #AAF;\n}\n.input input[data-v-2107315f] {\n    flex: 1 1 0;\n    padding: 12px 16px;\n    border: none;\n    min-width: 0;\n}\n.input .extended-left[data-v-2107315f] {\n    margin: 16px;\n    margin-right: 8px;\n    color: #000000;\n}\n.input .extended-left + input[data-v-2107315f] {\n      padding-left: 8px;\n}\n.input .extended[data-v-2107315f] {\n    margin: 16px;\n    cursor: pointer;\n    color: #AAAAAA;\n}\n.input .extended[data-v-2107315f]:hover {\n      color: #2b2b2b;\n}\n",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input"},[t.title?n("div",{staticClass:"extended-left"},[t._v("\n\t\t"+t._s(t.title)+"\n\t")]):t._e(),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{readonly:t.readonly,placeholder:t.placeholder},domProps:{value:t.value},on:{input:[function(e){e.target.composing||(t.value=e.target.value)},t.input],keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.enter(e):null}}}),t._v(" "),this.$slots.default?n("div",{staticClass:"extended",on:{click:t.enter}},[t._t("default")],2):t._e()])},a=[];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},,function(t,e,n){"use strict";function r(t){c||n(154)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(57),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n(156),c=!1,u=n(2),l=r,d=u(i.a,s.a,!1,l,"data-v-7c0abf38",null);d.options.__file="vue_components/root.vue",e.default=d.exports},function(t,e,n){var r=n(155);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(3)("60848b8c",r,!1,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,"\n.current-view[data-v-7c0abf38] {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n.current-view > .stretch[data-v-7c0abf38] {\n    flex: 1 1 0;\n}\n",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"current-view"},[n("Header"),t._v(" "),n("div",{staticClass:"stretch"},[n(t.$parent.currentView,{ref:"currentView",tag:"component"})],1)],1)},a=[];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.route=void 0;var a=n(28),i=r(a),o=n(158),s=r(o),c=n(160),u=r(c),l=n(6),d=l.zeroPage,f=(0,s.default)(d);i.default.use(f.plugin),d.on("wrapperPopState",function(t){return f.router.listenForBack(t.params)});e.route=function(t){(0,u.default)(t,d).forEach(function(e){f.router.add({path:e.path,controller:function(n){var r=t.currentView;e.controller(n),t.$store.commit("route",f.router),r===t.currentView&&(t.currentView=null,t.$nextTick(function(){return t.currentView=r}))}})}),f.router.check(f.router.getURL())}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(28),i=r(a),o=n(159),s=r(o);e.default=function(t){var e=new s.default(t);return{plugin:{router:e,install:function(){Object.defineProperty(i.default.prototype,"$router",{get:function(){return e}})}},router:e}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();t.exports=function(){function t(e){r(this,t),this.routes=[],this.currentRoute="",this.currentParams={},this.currentHash="",this.zeroPage=e,this.check("")}return a(t,[{key:"getURL",value:function(){return this.clearSlashes(location.search.replace(/[?&]wrapper_nonce=([A-Za-z0-9]+)/,"").replace("?/",""))}},{key:"clearSlashes",value:function(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")}},{key:"add",value:function(t){this.routes.push(t)}},{key:"remove",value:function(t){var e=this.routes.findIndex(function(e){return e.controller===t||e.path===t});e>-1&&this.routes.splice(e,1)}},{key:"check",value:function(t){var e=this;this.routes.forEach(function(n){var r=t.replace(/^\//,"").match(new RegExp("^"+n.path.replace(/:([^/]+)/g,"([^/]*)").replace(/\*/g,"(?:[^/]*)")+"$"));if(r){r.shift();var a=n.path.match(/:([^/]+)/g),i={};r.forEach(function(t,e){i[a[e].replace(":","")]=t}),e.currentParams=i,e.currentRoute=n.path,e.currentHash=t,n.controller(i)}})}},{key:"refresh",value:function(){this.check(this.currentRoute)}},{key:"listenForBack",value:function(t){this.navigate(t.href.replace(/.*\?/,"").replace(/^\//,""),!1)}},{key:"navigate",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=t||"",e&&this.zeroPage.cmd("wrapperPushState",[{route:t},t,"/"+this.clearSlashes(t)]),this.check(t)}}]),t}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(161),i=r(a),o=n(165),s=r(o),c=n(169),u=r(c),l=n(174),d=r(l),f=n(183),p=r(f),v=n(187),h=r(v);e.default=function(t){return[{path:"",controller:function(){t.currentView=i.default}},{path:"about",controller:function(){t.currentView=s.default}},{path:"search",controller:function(){t.currentView=u.default}},{path:"search/:query",controller:function(){t.currentView=u.default}},{path:"stream",controller:function(){t.currentView=p.default}},{path:"stream/:title/:description/:delay/:screen/:camera",controller:function(){t.currentView=d.default}},{path:"watch/:hub/:id/:title",controller:function(){t.currentView=h.default}}]}},function(t,e,n){"use strict";function r(t){c||n(162)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(58),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n(164),c=!1,u=n(2),l=r,d=u(i.a,s.a,!1,l,"data-v-5e1a2e9c",null);d.options.__file="router_pages/home/home.vue",e.default=d.exports},function(t,e,n){var r=n(163);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(3)("aaebd9a6",r,!1,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,"\n.root[data-v-5e1a2e9c] {\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 16px 0;\n}\n.search[data-v-5e1a2e9c] {\n  display: flex;\n  flex-direction: row;\n  margin-top: 32px;\n  width: 100%;\n  border-radius: 4px;\n  border: 1px solid #DDD;\n  overflow: hidden;\n}\n.search[data-v-5e1a2e9c]:hover, .search[data-v-5e1a2e9c]:focus {\n    border-color: #AAF;\n}\n.search input[data-v-5e1a2e9c] {\n    width: 100%;\n    padding: 12px 16px;\n    border: none;\n}\n.search .search-button[data-v-5e1a2e9c] {\n    margin: 16px;\n    cursor: pointer;\n    color: #AAAAAA;\n}\n.search .search-button[data-v-5e1a2e9c]:hover {\n      color: #2b2b2b;\n}\nbutton[data-v-5e1a2e9c] {\n  padding: 24px 32px;\n  border: none;\n  border-radius: 4px;\n  width: 256px;\n  margin: 16px;\n  color: #FFF;\n  font-size: 24px;\n  cursor: pointer;\n  transition: all 0.2s;\n  box-shadow: 0 2px 16px rgba(0, 0, 0, 0.3);\n}\nbutton.stream[data-v-5e1a2e9c] {\n    background-color: #FF5252;\n}\nbutton.watch[data-v-5e1a2e9c] {\n    background-color: #448AFF;\n}\nbutton .icon[data-v-5e1a2e9c] {\n    width: 32px;\n    height: 32px;\n    vertical-align: middle;\n    margin-right: 16px;\n}\nbutton[data-v-5e1a2e9c]:hover {\n    margin-top: 20px;\n    margin-bottom: 12px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);\n}\n",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("p",[n("StreamZ"),t._v(" is a real-time streaming platform for ZeroNet. Brought\n\t\tto you with "),n("icon",{attrs:{name:"heart"}}),t._v(" by "),n("i",[t._v("Git Center")]),t._v(",\n\t\t"),n("i",[t._v("Glightstar")]),t._v(", "),n("i",[t._v("ZeroLSTN")]),t._v(", "),n("i",[t._v("Krixano")]),t._v(" and\n\t\t"),n("i",[t._v("Thunder33345")]),t._v(".\n\t")],1),t._v(" "),t.loggedIn?t._e():n("p",[t._v("\n\t\tYou are not logged in, so you won't be able to stream. Press the\n\t\trightmost button in the header to login.\n\t")]),t._v(" "),t.peerMessageInstalled?t._e():n("p",[t._v("\n\t\tYou don't have a "),n("b",[t._v("PeerMessage")]),t._v(" plugin, so you won't be able to\n\t\twatch or stream. Press the leftmost button in the header to get more\n\t\tinfo on how to install it.\n\t")]),t._v(" "),n("ExtendedInput",{attrs:{placeholder:"What are you going to watch today?"},on:{enter:t.search},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}},[n("icon",{attrs:{name:"search"}})],1)],1)},a=[];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},function(t,e,n){"use strict";function r(t){c||n(166)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(60),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n(168),c=!1,u=n(2),l=r,d=u(i.a,s.a,!1,l,"data-v-5fef71d8",null);d.options.__file="router_pages/about/about.vue",e.default=d.exports},function(t,e,n){var r=n(167);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(3)("7027a528",r,!1,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,"\n.root[data-v-5fef71d8] {\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 16px 0;\n}\n",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("p",[n("StreamZ"),t._v(" is a real-time streaming platform for ZeroNet. Brought\n\t\tto you with "),n("icon",{attrs:{name:"heart"}}),t._v(" by "),n("i",[t._v("Git Center")]),t._v(",\n\t\t"),n("i",[t._v("Glightstar")]),t._v(", "),n("i",[t._v("ZeroLSTN")]),t._v(", "),n("i",[t._v("Krixano")]),t._v(" and\n\t\t"),n("i",[t._v("Thunder33345")]),t._v(".\n\t")],1),t._v(" "),n("p",[n("StreamZ"),t._v(" uses PeerMessage plugin to deliver your video as fast as\n\t\tpossible. You can download the plugin\n\t\t"),n("a",{attrs:{href:"/kxonet.bit/?/plugin/gitcenter/1536381998652"}},[t._v("\n\t\t\tfor Python 2")]),t._v("\n\t\t(you are probably using Python 2 if you are using bundled ZeroNet)\n\t\tor\n\t\t"),n("a",{attrs:{href:"/kxonet.bit/?/plugin/gitcenter/1554637508475"}},[t._v("\n\t\t\tfor Python 3")]),t._v("\n\t\t(if you are using Python 3 version, you definitely know about it).\n\t\tPython 3 version is recommended, because it is a lot faster.\n\t")],1),t._v(" "),t._m(0),t._v(" "),n("p",[n("StreamZ"),t._v(" is currently closed-source, and will be released\n\t\topen-source in a year. If you want to get the sources right now,\n\t\tfeel free to "),n("a",{attrs:{href:"/Mail.ZeroNetwork.bit/?to=gitcenter"}},[t._v("\n\t\t\tsend a ZeroMail to @gitcenter")]),t._v(", we are ready to give you the sources if you prove that you\n\t\tdon't have malicious intentions.\n\t")],1)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n\t\tReport all the bugs you find to\n\t\t"),n("a",{attrs:{href:"/Talk.ZeroNetwork.bit/?Topic:1555759517_1Cy3ntkN2GN9MH6EaW6eHpi4YoRS2nK5Di/StreamZ"}},[t._v("ZeroTalk")]),t._v(". Don't forget to mention us like this: "),n("b",[t._v("@gitcenter\n\t\t@glightstar @zerolstn @krixano @thunder33345")]),t._v(".\n\t")])}];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},function(t,e,n){"use strict";function r(t){c||n(170)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(61),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n(173),c=!1,u=n(2),l=r,d=u(i.a,s.a,!1,l,"data-v-2318a808",null);d.options.__file="router_pages/search/search.vue",e.default=d.exports},function(t,e,n){var r=n(171);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(3)("0a38ec40",r,!1,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,'\n.root[data-v-2318a808] {\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 16px 0;\n}\n.no-results[data-v-2318a808] {\n  font-family: "Courier New", monospace;\n  color: #AAAAAA;\n  text-align: center;\n  margin: 32px 0;\n  font-size: 32px;\n}\n.no-results .smiley[data-v-2318a808] {\n    font-size: 96px;\n}\n.result[data-v-2318a808] {\n  display: flex;\n  flex-direction: row;\n  margin-top: 32px;\n}\n.result .left[data-v-2318a808] {\n    flex: 0 0 256px;\n    width: 256px;\n}\n.result .left .thumbnail[data-v-2318a808] {\n      width: 256px;\n      height: 192px;\n      background-color: rgba(0, 0, 0, 0.8);\n      text-align: center;\n      position: relative;\n}\n.result .left .thumbnail img[data-v-2318a808] {\n        max-width: 100%;\n        max-height: 100%;\n}\n.result .left .thumbnail .cover[data-v-2318a808] {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        opacity: 0;\n        transition: opacity 0.3s;\n}\n.result .left .thumbnail .report[data-v-2318a808] {\n        position: absolute;\n        left: 16px;\n        bottom: 16px;\n        color: #FFF;\n        opacity: 0.2;\n        cursor: pointer;\n        transition: opacity 0.3s;\n        color: #FF5252;\n}\n.result .left .thumbnail:hover .cover[data-v-2318a808] {\n        opacity: 1;\n}\n.result .left .thumbnail:hover .report[data-v-2318a808] {\n        opacity: 1;\n}\n.result .right[data-v-2318a808] {\n    flex: 1 1 0;\n    padding-left: 16px;\n}\n.result .right .title[data-v-2318a808] {\n      font-size: 20px;\n      cursor: pointer;\n}\n.result .right .author[data-v-2318a808] {\n      margin-top: 8px;\n      color: #888888;\n}\n.result .right .info[data-v-2318a808] {\n      margin-top: 16px;\n      color: #888888;\n}\n',""])},,function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("h1",[t._v("Search")]),t._v(" "),n("ExtendedInput",{attrs:{placeholder:"What are you going to watch today?"},on:{enter:t.search},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[n("icon",{attrs:{name:"search"}})],1),t._v(" "),t.results.length?t._e():n("div",{staticClass:"no-results"},[n("div",{staticClass:"smiley"},[t._v("(v-v)")]),n("br"),t._v("\n\t\tNothing here."),n("br"),n("br"),t._v("\n\t\tGood luck searching"),n("br"),t._v("\n\t\tfor something else.\n\t")]),t._v(" "),t._l(t.results,function(e){return n("div",{staticClass:"result"},[t._m(0,!0),t._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"title",on:{click:function(n){t.watch(e)}}},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"description"},[t._v(t._s(e.description))]),t._v(" "),n("div",{staticClass:"author"},[t._v("By "),n("b",[t._v(t._s(e.author))])]),t._v(" "),n("div",{staticClass:"info"},[t._v("\n\t\t\t\tID: "+t._s(e.id)),n("br"),t._v("\n\t\t\t\tUser: "+t._s(e.authAddress)),n("br"),t._v("\n\t\t\t\tHub: "+t._s(e.hub)+"\n\t\t\t")])])])})],2)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"left"},[r("div",{staticClass:"thumbnail"},[r("img",{attrs:{src:n(30)}}),t._v(" "),r("div",{staticClass:"cover"})])])}];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},function(t,e,n){"use strict";function r(t){c||n(175)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(62),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n(182),c=!1,u=n(2),l=r,d=u(i.a,s.a,!1,l,"data-v-5c3a2e08",null);d.options.__file="router_pages/stream/stream.vue",e.default=d.exports},function(t,e,n){var r=n(176);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(3)("d82b7c30",r,!1,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,"\n.root[data-v-5c3a2e08] {\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 32px 0;\n}\n.root > .comments[data-v-5c3a2e08] {\n    margin-top: 32px;\n}\n",""])},,,,function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,i){try{var o=e[a](i),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(181),u=function(t){return t&&t.__esModule?t:{default:t}}(c),l=n(54),d=function(t){function e(){return a(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"start",value:function(){function t(t,n){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e,n){var r=n.constraints,a=n.timeSlice,i=n.restreamInterval,o=n.bitrate,s=n.mimeType;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.constraints=r,this.timeSlice=a,this.restreamInterval=i,this.bitrate=o,this.mimeType=s,this.recorders=[],this.recordInterval=null,t.next=9,navigator.mediaDevices[e](r);case 9:this.stream=t.sent,this.resume();case 11:case"end":return t.stop()}},t,this)}));return t}()},{key:"resume",value:function(){var t=this;this.recorders.push(this._newMediaRecorder()),this.recordInterval=setInterval(function(){t.recorders.push(t._newMediaRecorder(function(){var e=t.recorders.shift();e.onGetRequest=function(){e.ondataavailable=null,e.stop()},e.requestData()}))},this.restreamInterval*this.timeSlice)}},{key:"pause",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,a=this.recorders[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=r.value;i.ondataavailable=null,i.onGetRequest=null,i.stop()}}catch(t){e=!0,n=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw n}}this.recorders=[],clearInterval(this.recordInterval)}},{key:"stop",value:function(){this.pause();var t=!0,e=!1,n=void 0;try{for(var r,a=this.stream.getTracks()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.stop()}}catch(t){e=!0,n=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw n}}}},{key:"_newMediaRecorder",value:function(t){var e=this,n=new MediaRecorder(this.stream,{mimeType:this.mimeType,bitsPerSecond:1e3*this.bitrate}),r=!1,a=[];return n.ondataavailable=function(i){!r&&t&&(r=!0,t());var o=new FileReader;o.addEventListener("loadend",function(t){var r=t.srcElement.result;if(a=a.concat(Array.from(new Uint8Array(r))),n.onGetRequest){n.onGetRequest();var i=new l.Buffer(a).toString("base64");e.emit("capture",{data:"z"+i,type:n.mimeType})}}),o.readAsArrayBuffer(i.data)},n.start(this.timeSlice),n}}]),e}(u.default);e.default=d},,function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[t.capturing||t.paused?[t.capturing?[n("div",{staticClass:"text"},[t._v("\n\t\t\t\tYou are streaming now. Here is a direct link to your stream:\n\t\t\t\t"),n("ExtendedInput",{attrs:{value:t.directLink,readonly:!0}}),t._v(" "),n("br"),n("br"),t._v("\n\t\t\t\t"+t._s(t.totalPackets)+" packet(s) sent.\n\t\t\t\t"),n("br"),n("br"),t._v(" "),n("button",{staticClass:"left",on:{click:t.pause}},[n("icon",{staticClass:"icon",attrs:{name:"pause"}}),t._v("\n\t\t\t\t\tPause\n\t\t\t\t")],1),t._v(" "),n("button",{staticClass:"left",on:{click:t.terminate}},[n("icon",{staticClass:"icon",attrs:{name:"stop"}}),t._v("\n\t\t\t\t\tTerminate\n\t\t\t\t")],1),t._v(" "),n("ClearFix")],1)]:[n("div",{staticClass:"text"},[t._v("\n\t\t\t\tYour stream is paused.\n\t\t\t\t"),n("br"),n("br"),t._v("\n\t\t\t\t"+t._s(t.totalPackets)+" packet(s) sent.\n\t\t\t\t"),n("br"),n("br"),t._v(" "),n("button",{staticClass:"left",on:{click:t.resumeCapture}},[n("icon",{staticClass:"icon",attrs:{name:"play"}}),t._v("\n\t\t\t\t\tResume\n\t\t\t\t")],1),t._v(" "),n("button",{staticClass:"left",on:{click:t.terminate}},[n("icon",{staticClass:"icon",attrs:{name:"stop"}}),t._v("\n\t\t\t\t\tTerminate\n\t\t\t\t")],1),t._v(" "),n("ClearFix")],1)],t._v(" "),n("div",{staticClass:"comments"},[n("Comments",{attrs:{hub:t.hub,id:t.videoId,owner:!0}})],1)]:t.terminated?[n("div",{staticClass:"text"},[t._v("\n\t\t\tYour stream is terminated.\n\t\t\t"),n("br"),n("br"),t._v("\n\t\t\t"+t._s(t.totalPackets)+" packet(s) were sent.\n\t\t")])]:t.requestingNosandbox?n("div",{staticClass:"text"},[t._v("\n\t\tTo record a video, we need a "),n("b",[t._v("NOSANDBOX")]),t._v(" permission. Please allow it.\n\t")]):null===t.requestingNosandbox||null===t.requestingHub?n("div",{staticClass:"text"},[t._v("\n\t\t...\n\t")]):t.requestingHub?n("div",{staticClass:"text"},[t._v("\n\t\tYou should also create a hub especially for you  to make the\n\t\tstream seamless.\n\t")]):null!==t.requestingHub?n("div",{staticClass:"text"},[t._v("\n\t\tPlease accept the capture request.\n\t")]):t._e()],2)},a=[];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},function(t,e,n){"use strict";function r(t){c||n(184)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(63),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n(186),c=!1,u=n(2),l=r,d=u(i.a,s.a,!1,l,"data-v-859565ac",null);d.options.__file="router_pages/stream/configuration.vue",e.default=d.exports},function(t,e,n){var r=n(185);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(3)("144987ed",r,!1,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,"\n.root[data-v-859565ac] {\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 16px 0;\n}\nh2[data-v-859565ac] {\n  margin-top: 32px;\n}\n.row[data-v-859565ac] {\n  display: flex;\n  flex-direction: row;\n}\n.row .space[data-v-859565ac] {\n    flex: 0 0 8px;\n    width: 8px;\n}\n.right[data-v-859565ac] {\n  display: flex;\n  flex-direction: row;\n  justify-content: end;\n}\n.right .button[data-v-859565ac] {\n    display: inline-block;\n    vertical-align: top;\n    overflow: hidden;\n    color: #FF5252;\n    cursor: pointer;\n}\n.right .button[data-v-859565ac]:hover {\n      color: #eb0000;\n}\n.right .button .button-content[data-v-859565ac] {\n      overflow: hidden;\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n}\n.right .button .button-content .icon[data-v-859565ac] {\n        width: 32px;\n        height: 32px;\n        margin: 8px;\n}\n.right .button .button-content .text[data-v-859565ac] {\n        display: inline-block;\n}\n",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("h1",[t._v("Stream")]),t._v(" "),n("ExtendedInput",{attrs:{placeholder:"Title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),n("ExtendedInput",{attrs:{placeholder:"Description"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),t._v(" "),n("ExtendedInput",{attrs:{title:"Delay"},model:{value:t.delay,callback:function(e){t.delay=e},expression:"delay"}},[t._v("\n\t\tseconds (smaller requires more CPU resources, but reduces latency)\n\t")]),t._v(" "),n("h2",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.screenEnabled,expression:"screenEnabled"}],attrs:{type:"checkbox",id:"stream_screen"},domProps:{checked:Array.isArray(t.screenEnabled)?t._i(t.screenEnabled,null)>-1:t.screenEnabled},on:{change:function(e){var n=t.screenEnabled,r=e.target,a=!!r.checked;if(Array.isArray(n)){var i=t._i(n,null);r.checked?i<0&&(t.screenEnabled=n.concat([null])):i>-1&&(t.screenEnabled=n.slice(0,i).concat(n.slice(i+1)))}else t.screenEnabled=a}}}),t._v(" "),n("label",{attrs:{for:"stream_screen"}},[t._v("Screen")])]),t._v(" "),n("div",{staticClass:"row"},[n("ExtendedInput",{attrs:{title:"Bitrate"},model:{value:t.screenBitrate,callback:function(e){t.screenBitrate=e},expression:"screenBitrate"}},[t._v("kbps")]),t._v(" "),n("div",{staticClass:"space"}),t._v(" "),n("ExtendedInput",{attrs:{title:"FPS"},model:{value:t.screenFps,callback:function(e){t.screenFps=e},expression:"screenFps"}}),t._v(" "),n("div",{staticClass:"space"}),t._v(" "),n("ExtendedInput",{attrs:{title:"Width"},model:{value:t.screenWidth,callback:function(e){t.screenWidth=e},expression:"screenWidth"}},[t._v("pixels")]),t._v(" "),n("div",{staticClass:"space"}),t._v(" "),n("ExtendedInput",{attrs:{title:"Height"},model:{value:t.screenHeight,callback:function(e){t.screenHeight=e},expression:"screenHeight"}},[t._v("pixels")])],1),t._v(" "),n("ExtendedInput",{attrs:{title:"Video codec"},model:{value:t.screenCodec,callback:function(e){t.screenCodec=e},expression:"screenCodec"}},[t._v("\n\t\t(common codecs: vp8, opus, h264, vp9)\n\t")]),t._v(" "),n("h2",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.cameraEnabled,expression:"cameraEnabled"}],attrs:{type:"checkbox",id:"stream_camera"},domProps:{checked:Array.isArray(t.cameraEnabled)?t._i(t.cameraEnabled,null)>-1:t.cameraEnabled},on:{change:function(e){var n=t.cameraEnabled,r=e.target,a=!!r.checked;if(Array.isArray(n)){var i=t._i(n,null);r.checked?i<0&&(t.cameraEnabled=n.concat([null])):i>-1&&(t.cameraEnabled=n.slice(0,i).concat(n.slice(i+1)))}else t.cameraEnabled=a}}}),t._v(" "),n("label",{attrs:{for:"stream_camera"}},[t._v("Camera")])]),t._v(" "),n("div",{staticClass:"row"},[n("ExtendedInput",{attrs:{title:"Bitrate"},model:{value:t.cameraBitrate,callback:function(e){t.cameraBitrate=e},expression:"cameraBitrate"}},[t._v("kbps")]),t._v(" "),n("div",{staticClass:"space"}),t._v(" "),n("ExtendedInput",{attrs:{title:"FPS"},model:{value:t.cameraFps,callback:function(e){t.cameraFps=e},expression:"cameraFps"}}),t._v(" "),n("div",{staticClass:"space"}),t._v(" "),n("ExtendedInput",{attrs:{title:"Width"},model:{value:t.cameraWidth,callback:function(e){t.cameraWidth=e},expression:"cameraWidth"}},[t._v("pixels")]),t._v(" "),n("div",{staticClass:"space"}),t._v(" "),n("ExtendedInput",{attrs:{title:"Height"},model:{value:t.cameraHeight,callback:function(e){t.cameraHeight=e},expression:"cameraHeight"}},[t._v("pixels")])],1),t._v(" "),n("ExtendedInput",{attrs:{title:"Video codec"},model:{value:t.cameraCodec,callback:function(e){t.cameraCodec=e},expression:"cameraCodec"}},[t._v("\n\t\t(common codecs: vp8, opus, h264, vp9)\n\t")]),t._v(" "),n("button",{staticClass:"right",on:{click:t.stream}},[t._v("\n\t\tStream\n\t\t"),n("icon",{staticClass:"icon",attrs:{name:"video"}})],1)],1)},a=[];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},function(t,e,n){"use strict";function r(t){c||n(188)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(64),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n(190),c=!1,u=n(2),l=r,d=u(i.a,s.a,!1,l,"data-v-cd35ce48",null);d.options.__file="router_pages/watch/watch.vue",e.default=d.exports},function(t,e,n){var r=n(189);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(3)("a692cbee",r,!1,{})},function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,"\n.root[data-v-cd35ce48] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.root h1[data-v-cd35ce48] {\n    margin: 32px 0;\n}\n.root .video[data-v-cd35ce48] {\n    margin-bottom: 32px;\n    text-align: center;\n    display: inline-flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n}\n",""])},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("h1",[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"video"},[n("VideoPlayer",{directives:[{name:"show",rawName:"v-show",value:t.hasScreen,expression:"hasScreen"}],ref:"screenPlayer",attrs:{id:t.id}}),t._v(" "),n("VideoPlayer",{directives:[{name:"show",rawName:"v-show",value:t.hasCamera,expression:"hasCamera"}],ref:"cameraPlayer",attrs:{id:t.id}})],1),t._v(" "),n("Comments",{attrs:{hub:t.hub,id:t.id,owner:!1}})],1)},a=[];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.a=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handlePeerReceive=void 0;var r=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(6);e.handlePeerReceive=function(t){var e=t.message,n=t.hash,i=t.ip;try{if(e.startsWith("chat|"));else{var o=e.split(/[*@?!,]/),s=r(o,6),c=s[0],u=s[1],l=s[2],d=s[3],f=s[4],p=s[5];if(c.length>30)throw new Error("Too long video ID");if("camera"!==u&&"screen"!==u)throw new Error("No data");if("pause"===p);else{if(l.length>30)throw new Error("Too long mimetype");if(!d.split("").every(function(t){return!isNaN(parseInt(t,10))}))throw new Error("Invalid packet ID");if(isNaN(parseFloat(f)))throw new Error("Invalid duration");if(!p)throw new Error("No data")}a.zeroPage.cmd("peerValid",[n])}}catch(t){console.warn("Rejecting message '"+n+"' from "+i+". Reason: "+t.message),a.zeroPage.cmd("peerInvalid",[n])}}}]);