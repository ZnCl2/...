(window.webpackJsonp=window.webpackJsonp||[]).push([[12,13],{110:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var a=n(0),r=n.n(a),c=n(1),i=n(44),l=n(2);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,c=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var o=Object(a.lazy)((function(){return Promise.all([n.e(1),n.e(7)]).then(n.bind(null,76))})),m=Object(a.lazy)((function(){return n.e(9).then(n.bind(null,107))})),d=Object(a.lazy)((function(){return Promise.all([n.e(5),n.e(10)]).then(n.bind(null,75))})),f=Object(a.lazy)((function(){return Promise.all([n.e(4),n.e(2)]).then(n.bind(null,74))}));function b(){var e,t=Object(a.useContext)(c.a).appState;return t&&t.user&&(e=r.a.createElement(E,{section:t.route.section,user:t.user})),r.a.createElement("div",{id:"user-admin-view",className:"view-container"},e)}var E=function(e){var t;if(e.user.user_id){var n=e.section;"profile"===n?t=r.a.createElement(p,{user:e.user}):"channels"===n?t=r.a.createElement(v,null):"topics"===n?t=r.a.createElement(g,null):"comments"===n?t=r.a.createElement(j,null):"new-topic"===n?t=r.a.createElement(N,null):"edit-topic"===n?t=r.a.createElement(O,null):"new-channel"===n?t=r.a.createElement(h,null):"edit-channel"===n&&(t=r.a.createElement(y,null))}return r.a.createElement("div",{id:"user-section-container"},t)};function p(e){var t,n,i=Object(a.useContext)(c.a),s=i.appState,o=i.zeroNetDispatch,m=u(Object(a.useState)(!0),2),d=m[0],b=m[1],E=u(Object(a.useState)(e.user.screen_name||""),2),p=E[0],v=E[1],h=u(Object(a.useState)(e.user.about||""),2),y=h[0],g=h[1],N=u(Object(a.useState)(!0),2),O=N[0];N[1];function j(e){g(e)}return r.a.useEffect((function(){b(!1)}),[]),d&&(t=r.a.createElement("div",{className:"ui active inverted dimmer"},r.a.createElement("div",{className:"ui text loader"}))),n=!0===O?r.a.createElement(a.Suspense,{fallback:r.a.createElement(l.a,null)},r.a.createElement(f,{textAreaId:"editor",onTextUpdate:function(e){return j(e)},placeholder:"about me... ",rows:"8",initialValue:""})):r.a.createElement("textarea",{onChange:j,defaultValue:y}),r.a.createElement("div",{id:"user-profile-section",className:"user-admin-section"},r.a.createElement("form",{id:"user-profile-form",className:"ui lightgray form segment"},t,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Profile Name (Optional)"),r.a.createElement("input",{defaultValue:p,type:"text",onChange:function(e){v(e.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"About"),n),r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:"native-btn",type:"button",onClick:function(){var e=$("#ckeditor1")[0].defaultValue;b(!0),g(e);var t="SELECT * FROM json WHERE json_id='"+s.user.json_id+"'";Page.cmd("dbQuery",[t],(function(e){var t=e[0];!function(e){Page.cmd("fileGet",{inner_path:e},function(t){var n=(t=JSON.parse(t)).user.findIndex((function(e){return e.user_id===s.user.user_id}));t.user[n].screen_name=p,t.user[n].about=y;var a=unescape(encodeURIComponent(JSON.stringify(t,void 0,"\t")));Page.cmd("fileWrite",[e,btoa(a)],function(a){Page.cmd("sitePublish",{inner_path:e},function(e){Page.cmd("wrapperNotification",["done","Profile Updated!",5e3]),b(!1),o.setUser(t.user[n])}.bind(this))}.bind(this))}.bind(this))}("merged-"+s.config.merger_name+"/"+t.directory+"/"+t.file_name)}))}},r.a.createElement("a",null,"Update Profile")))))}var v=function(){return r.a.createElement("div",{id:"user-channels-section",className:"user-admin-section"},r.a.createElement(i.default,null))},h=function(){return r.a.createElement("div",{id:"user-new-channel-section",className:"user-admin-section"},r.a.createElement(ChannelForm,null))};function y(){var e,t=Object(a.useContext)(c.a).appState,n=u(Object(a.useState)(!0),2),i=(n[0],n[1],u(Object(a.useState)(channelHelpers.getChannelEditTabs()),2)),s=i[0],o=(i[1],u(Object(a.useState)(0),2)),m=o[0],d=o[1],f=u(Object(a.useState)(),2),b=f[0],E=f[1];if(Object(a.useEffect)((function(){!function(){var e="SELECT * FROM channel WHERE channel_id='"+t.route.id+"'";Page.cmd("dbQuery",[e],function(e){E(e[0])}.bind(this))}()}),[]),b){var p=s.map((function(e,t){return r.a.createElement("a",{key:t,className:m===t?"item active":"item",onClick:function(){d(t)}},e.label)})),v=s.map((function(e,t){var n;return 0===t?n=r.a.createElement(ChannelForm,{channel:b}):1===t?n=r.a.createElement(ChannelModeratorsContainer,{channel:b}):2===t&&(n=r.a.createElement(ChannelLayoutEditorContainer,{channel:b})),r.a.createElement("div",{key:t,className:t===m?"ui bottom attached tab segment active":"ui bottom attached tab segment"},n)}));e=r.a.createElement("div",{className:"user-edit-channel-wrapper"},r.a.createElement("div",{className:"ui top attached tabular menu"},p),r.a.createElement("div",{id:"channel-edit-tabs-container"},v))}else e=r.a.createElement("div",{className:"ui segment lightgray"},r.a.createElement(l.a,{cssClass:"centered",msg:"Loading Channel..."}));return r.a.createElement("div",{id:"user-edit-channel-section",className:"user-admin-section"},e)}var g=function(e){return r.a.createElement("div",{id:"user-channels-section",className:"user-admin-section"},r.a.createElement(a.Suspense,{fallback:r.a.createElement(l.a,null)},r.a.createElement(o,null)))},N=function(){return r.a.createElement("div",{className:"user-section-container",id:"user-new-topic-section"},r.a.createElement(a.Suspense,{fallback:r.a.createElement(l.a,null)},r.a.createElement(m,null)))};function O(){var e,t=Object(a.useContext)(c.a),n=t.appState,i=(t.appDispatch,u(Object(a.useState)(!0),2)),s=i[0],o=i[1],d=u(Object(a.useState)(1),2),f=(d[0],d[1],u(Object(a.useState)(),2)),b=f[0],E=f[1];function p(){var e=n.route,t=topicHelpers.getTopicQuery(e.id);Page.cmd("dbQuery",[t],function(e){E(e),o(!1)}.bind(this))}return Object(a.useEffect)((function(){p()}),[]),e=s?r.a.createElement(l.a,{msg:"loading topic.."}):r.a.createElement(m,{topic:b,getTopic:p}),r.a.createElement("div",{id:"user-edit-topic-section",className:"user-admin-section"},e)}function j(){var e=Object(a.useContext)(c.a).zeroNetState.site_info.cert_user_id;return r.a.createElement("div",{id:"user-comments-section",className:"user-admin-section"},r.a.createElement(a.Suspense,{fallback:""},r.a.createElement(d,{userId:e})))}},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(1),i=n(3),l=n(4);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,c=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function o(e){var t=e.channel;return r.a.createElement("div",{className:"ui segment item"},r.a.createElement("div",{className:"channel-item-header"},r.a.createElement("h3",null,r.a.createElement("a",{href:"index.html?v=channel+id=1R67TfYzNkCnh89EFfGmXn5LMb4hXaMRQ3"},t.name)),r.a.createElement("span",{className:"topic-counter"},"[",t.topics_count,"]"),r.a.createElement("a",{className:"arrow-btn",href:"index.html?v=channel+id="+t.channel_id},r.a.createElement("i",{className:"icon arrow right"}))),r.a.createElement("div",{className:"channel-item-content"},r.a.createElement("div",{className:"ui segment"},r.a.createElement("p",null,t.body),r.a.createElement("hr",null),r.a.createElement("span",null,r.a.createElement("b",null,"chanOp:"),t.user_id))),r.a.createElement("div",{className:"channel-item-footer"},r.a.createElement("span",{className:"channel-item-last-activity"},r.a.createElement("b",null,"last activity: ",Object(i.a)(t.last_topic_date))),r.a.createElement("span",{className:"channel-item-created"},"created: ",Object(i.a)(t.added))))}t.default=function(){var e,t=Object(a.useContext)(c.a),n=t.appState,i=t.zeroNetState,s=u(Object(a.useState)(),2),m=s[0],d=s[1];function f(e){var t=n.sort_options.find((function(e,t){return!0===e.current})),a=Object(l.e)(e,t);d(a)}if(r.a.useEffect((function(){n.sort_options&&(m?f(m):function(){var e;"user-admin"===n.route.view&&(e=i.site_info.cert_user_id);var t=Object(l.c)(e);Page.cmd("dbQuery",[t],(function(e){f(e)}))}())}),[n.sort_options]),m){var b=m.map((function(e,t){return r.a.createElement(o,{key:t,index:t,channel:e})}));e=r.a.createElement("div",{className:"ui list"},b)}return r.a.createElement("div",{id:"channels-list"},e)}}}]);