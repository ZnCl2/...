(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[8],{

/***/ "./app/components/topics.js":
/*!**********************************!*\
  !*** ./app/components/topics.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _context_provider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../context-provider */ \"./app/context-provider.js\");\n/* harmony import */ var _helpers_app_helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/app-helpers.js */ \"./app/helpers/app-helpers.js\");\n/* harmony import */ var _helpers_topic_helpers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/topic-helpers.js */ \"./app/helpers/topic-helpers.js\");\n/* harmony import */ var _topic_list_item_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./topic-list-item.js */ \"./app/components/topic-list-item.js\");\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\n\n\n\n\nfunction TopicsContainer() {\n  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.useContext(_context_provider__WEBPACK_IMPORTED_MODULE_1__[\"Context\"]),\n      appState = _React$useContext.appState,\n      zeroNetState = _React$useContext.zeroNetState;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      topicCount = _useState4[0],\n      setTopicCount = _useState4[1];\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      topics = _useState6[0],\n      setTopics = _useState6[1];\n  /* COMPONENT */\n  // on mount\n\n\n  react__WEBPACK_IMPORTED_MODULE_0___default.a.useEffect(function () {\n    countTopics();\n  }, []); // on props change\n\n  react__WEBPACK_IMPORTED_MODULE_0___default.a.useEffect(function () {\n    countTopics(appState.sort_options);\n  }, [appState.sort_options, appState.user]); // count topics\n\n  function countTopics() {\n    setLoading(true);\n    var channelId, userId, searchPhrase;\n    if (appState.route.view === 'channel') channelId = appState.route.id;else if (appState.route.view === 'user-admin') userId = zeroNetState.site_info.cert_user_id;\n    if (appState.route.view === 'search') searchPhrase = appState.route.id;\n    var query = Object(_helpers_topic_helpers_js__WEBPACK_IMPORTED_MODULE_3__[\"countTopicsQuery\"])(channelId, userId, searchPhrase);\n    Page.cmd('dbQuery', [query], function (res) {\n      setTopicCount(res[0][\"count(*)\"]);\n      getTopics();\n    });\n  }\n\n  ; // get topics\n\n  function getTopics() {\n    var config = appState.config;\n    var route = appState.route;\n    var channelId, userId, searchPhrase;\n    if (route.view === 'channel' || route.view === 'user-admin' && route.section === 'edit-channel') channelId = route.id;else if (route.view === 'user-admin' && route.section === 'topics') userId = zeroNetState.site_info.cert_user_id;else if (route.view === 'search') searchPhrase = appState.route.id;\n    var showHidden = false;\n    if (route.view === 'user-admin') showHidden = true;\n    var sort_by = appState.sort_options.find(function (so) {\n      return so.current === true;\n    });\n    var query = Object(_helpers_topic_helpers_js__WEBPACK_IMPORTED_MODULE_3__[\"getTopicsQuery\"])(config, sort_by, channelId, userId, route.page, showHidden, searchPhrase);\n    Page.cmd('dbQuery', [query], function (res) {\n      setTopics(res);\n      setLoading(false);\n    });\n  }\n  /* RENDER */\n\n\n  var topicContainerDisplay;\n  if (loading) topicContainerDisplay = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopicList, null); // <TopicListNavigation topicCount={topicCount} /> \n  else {\n      topicContainerDisplay = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        id: \"topics-wrapper\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TopicList, {\n        topics: topics,\n        onDeleteTopic: countTopics\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TopicListNavigation, {\n        topics: topics,\n        topicCount: topicCount\n      }));\n    }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    id: \"topics-container\"\n  }, topicContainerDisplay);\n}\n\nvar TopicListNavigation = function TopicListNavigation(props) {\n  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_context_provider__WEBPACK_IMPORTED_MODULE_1__[\"Context\"]),\n      appState = _useContext.appState;\n\n  var route = appState.route;\n  var sortBy = appState.sort_by;\n  var urlPrefix = Object(_helpers_app_helpers_js__WEBPACK_IMPORTED_MODULE_2__[\"GenerateUrlPrefix\"])(route, sortBy);\n  var prevButtonHref, nextButtonHref;\n  if (route.page && route.page !== 1) prevButtonHref = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n    className: \"native-btn\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n    href: urlPrefix + (route.page - 1)\n  }, \"<\", \" Newer\"));\n  var pageNum;\n  if (route.page) pageNum = route.page;else pageNum = 1;\n\n  if (props.topicCount >= appState.config.listing.items_per_page * pageNum) {\n    var nextPageNumber;\n    if (route.page) nextPageNumber = route.page + 1;else nextPageNumber = 2;\n    nextButtonHref = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n      className: \"native-btn\"\n    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n      href: urlPrefix + nextPageNumber\n    }, \"Older \", \">\"));\n  }\n\n  var topicListNavigationDisplay = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", null, prevButtonHref, nextButtonHref);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    id: \"topic-list-navigation\"\n  }, topicListNavigationDisplay);\n};\n\nvar DummyTopicList = function DummyTopicList() {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"ui list\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"ui active inverted dimmer\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"ui active loader\"\n  })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null));\n};\n\nvar DummyTopic = function DummyTopic() {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"dummy-topic-item topic-item segment ui item\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"dummy-topic-votes\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"dummy-topic-votebar\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"votes-display\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n    className: \"arrow up\"\n  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n    className: \"blured\"\n  }, \"#\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n    className: \"arrow down\"\n  })))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"dummy-topic-body\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"dummy-topic-image\"\n  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"dummy-topic-content\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"dummy-topic-header blured\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h3\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", null, \"Topic Item Title\"))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"dummy-topic-line blured\"\n  }, \"submitted some time ago by \", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", null, \"user@zv.anonymous\"), \" to \", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", null, \"some zerovoat channel\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"dummy-topic-line blured\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n    className: \"icon comments\"\n  }), \" # comments\"))));\n};\n\nfunction TopicList(props) {\n  var _React$useContext2 = react__WEBPACK_IMPORTED_MODULE_0___default.a.useContext(_context_provider__WEBPACK_IMPORTED_MODULE_1__[\"Context\"]),\n      appState = _React$useContext2.appState;\n\n  var topicsDisplay;\n\n  if (props.topics.length > 0) {\n    topicsDisplay = props.topics.map(function (t, index) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_topic_list_item_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n        key: index,\n        topic: t,\n        onDeleteTopic: props.onDeleteTopic\n      });\n    });\n  } else {\n    topicsDisplay = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"ui segment lightgray\"\n    }, \"no topics yet, \", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n      href: \"index.html?v=user-admin+s=new-topic+id=\" + appState.route.id\n    }, \"create a new topic!\"));\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    id: \"topic-list-display\",\n    className: \"ui list\"\n  }, topicsDisplay);\n}\n\nvar DummyTopicView = function DummyTopicView(props) {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"view-container\",\n    id: \"topic-view\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"ui active inverted dimmer\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"ui text loader\"\n  }, \"Loading Topic\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"topic-view-header\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DummyTopic, null)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"topic-view-body ui segment\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"article\", {\n    className: \"ui segment blured\"\n  }, \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.\")));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TopicsContainer);\n\n//# sourceURL=webpack:///./app/components/topics.js?");

/***/ })

}]);