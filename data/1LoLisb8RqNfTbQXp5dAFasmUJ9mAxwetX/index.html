
<!DOCTYPE html>

<html>
<head>
 <title>New ZeroNet site!</title>
 <meta charset="utf-8">
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <base href="" target="_top" id="base">
 <script>base.href = document.location.href.replace("/media", "").replace("index.html", "").replace(/[&?]wrapper=False/, "").replace(/[&?]wrapper_nonce=[A-Za-z0-9]+/, "")</script>
</head>
<body style="background: grey">

<div id="out"></div>

<script type="text/javascript" src="js/ZeroFrame.js"></script>

<script type="text/javascript">
const portal = [
  {
    title: "Loli Hubs",
    links: {
      "1PomfMoeTPxQ5gLJBeD1sBvaizxbHxf8Zv": "PomfPomfMoe",
      "12wD9eHFshoJ5dVjjcKCTELd5zsfqAB6ms": "Lolirape",
      "1Dy2bs4GygFrBPxvZAvysuYQG7P8g3qSYj": "Loligod",
      "1Nekos4fiBqfcazyG1bAxdBT5oBvA76Zmo": "Nekololi",
    },
  },
  {
    title: "Hentai Hubs",
    links: {
      "1Ar1JLs2EJyqoFuF7zzR2zsYCxMDcxBXM8": "Alotaplot JA",
      "1G8VWDQc5fXLkRiijJB4EZerDLmDVY75MZ": "Alotaplot EN",
      "136euwHQt2Gm1Aj6yCsQYpyJ9NULcFTqQu": "Alotaplot ZH",
      "1ChByYBAm9S5pT7F3pckjSTb2wxTaYwGeX": "Anthology JA",
      "126Temra5S4SmEpt1DVcxy1nhEJBhyUPvr": "Manhwa EN",
      "1MxhTsxNSTu2nzevPHi7QRT8kP4B5BB5LW": "Nekonekonyan",
    },
  },
  {
    title: "3D Renders",
    links: {
      "1LoLimgqzXFyHn8bBrTuo3EDsczXQCpYRY": "3D Loli Porno",
      "16cYTZiW45hZ1tQCVVth5ZVqNe2ZZAWUFk": "3D Porno",
      "1Gay3DR1K69PoqMukjShz9sPiWqUSLtVxt": "3D Gay Porno",
    },
  },
  {
    title: "Chans",
    links: {
      "1ADQAHsqsie5PBeQhQgjcKmUu3qdPFg6aA/?:users/1MXvnQ44YQj7vYNDCs6DjuW1D2ZBkTBoZW:l:0": "Millchan Loli Board",
      "1DdPHedr5Tz55EtQWxqvsbEXPdc4uCVi9D/?:users/15agjuqYqSm75SoYXmXMNfBCTeVgXJkaMJ:loli:0": "08chan Loli Board",
      "19WTvkdL8rUnAqZNtg3XaPTiDsCAcc22eB": "Millchan Engine Hentai Hub",
    },
  },
];

var html = '';

portal.forEach(segment => {
    var inner = '';
    Object.keys(segment.links).forEach(address => {
      inner = inner + `
      <li><a href="/${address}">${segment.links[address]}</a></li>`
    });
html = html + `
  <div style="width: 400px; margin: auto; background: white; border-radius: 10px; padding: 1em; margin-bottom: 1em">
    <h1 style="text-align: center">${segment.title}</h1>
    <ul style="list-style: none">
      ${inner}
    </ul>
  </div>`
});

console.log(html);

class Page extends ZeroFrame {
	setSiteInfo(site_info) {
		var out = document.getElementById("out")
		out.innerHTML =
			"Page address: " + site_info.address +
			"<br>- Peers: " + site_info.peers +
			"<br>- Size: " + site_info.settings.size +
			"<br>- Modified: " + (new Date(site_info.content.modified*1000))
		out.innerHTML = html
	}

	onOpenWebsocket() {
		this.cmd("siteInfo", [], function(site_info) {
			page.setSiteInfo(site_info)
		})
	}

	onRequest(cmd, message) {
		if (cmd == "setSiteInfo")
			this.setSiteInfo(message.params)
		else
			this.log("Unknown incoming message:", cmd)
	}
}
page = new Page()

</script>

</body>
</html>
