<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>A Quick Introduction to React mmap.page</title>
    <link rel="stylesheet" href="/16XMwj6YRNqRHWbmSD8oxYUZCKfM1uzwP9/assets/css/style.css">
    <link rel="alternate" type="application/rss+xml" href="/16XMwj6YRNqRHWbmSD8oxYUZCKfM1uzwP9/rss.xml">
    <link rel="alternate" type="application/git+http" href="https://github.com/weakish/weakish.github.com.git"/>
</head>
<body>
  <div class="container-lg px-3 my-5 markdown-body">

    <h1><a href="/16XMwj6YRNqRHWbmSD8oxYUZCKfM1uzwP9/">mmap.page</a></h1>
    <h1 id="a-quick-introduction-to-react">
        
        
          A Quick Introduction to React
        
        
      </h1>
    
      <h2 id="hello-world">
        
        
          Hello World <a href="#hello-world" class="anchor-hash" title="link to this heading">#</a>
        
        
      </h2>
<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">ReactElement</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span>
<span class="k">import</span> <span class="nx">ReactDOM</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-dom</span><span class="dl">"</span>


<span class="nx">type</span> <span class="nx">HelloProps</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">readonly</span> <span class="na">name</span><span class="p">:</span> <span class="nx">string</span> <span class="p">}</span>

<span class="kd">function</span> <span class="nx">Hello</span><span class="p">({</span> <span class="nx">name</span> <span class="p">}:</span> <span class="nx">HelloProps</span><span class="p">):</span> <span class="nx">ReactElement</span><span class="o">&lt;</span><span class="nx">HelloProps</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>Hello <span class="si">{</span><span class="nx">name</span><span class="si">}</span>!<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">helloWorld</span><span class="p">:</span> <span class="nx">ReactElement</span><span class="o">&lt;</span><span class="nx">HelloProps</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">&lt;</span><span class="nc">Hello</span> <span class="na">name=</span><span class="s2">"World"</span> <span class="p">/&gt;</span>

<span class="kd">const</span> <span class="nx">rootElement</span><span class="p">:</span> <span class="nx">HTMLElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">root</span><span class="dl">"</span><span class="p">)</span>
<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">helloWorld</span><span class="p">,</span> <span class="nx">rootElement</span><span class="p">)</span>
</code></pre></div></div>
    
      <h2 id="react-components">
        
        
          React Components <a href="#react-components" class="anchor-hash" title="link to this heading">#</a>
        
        
      </h2>
<p>The <code>Hello</code> function is a React component,
which receives an object containing properties,
and returns a ReactElement.
Here I do not plan to change the value of the <code>name</code> property,
so I annotates it as readonly.
But these properties can be mutable.
ReactElements can be considered as extensible html elements,
or some content to be rendered.
A react component may return null for conditional rendering.</p>
    
      <h2 id="hooks">
        
        
          Hooks <a href="#hooks" class="anchor-hash" title="link to this heading">#</a>
        
        
      </h2>
<p>Hooks decouple state related logic from components.
Like components, hooks are just functions, nothing magical:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">SimpleReact</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">state</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">render</span><span class="p">(</span><span class="nx">Component</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">C</span> <span class="o">=</span> <span class="nx">Component</span><span class="p">()</span>
        <span class="nx">C</span><span class="p">.</span><span class="nx">render</span><span class="p">()</span>
        <span class="k">return</span> <span class="nx">C</span>
      <span class="p">},</span>
      <span class="nx">useState</span><span class="p">(</span><span class="nx">initialValue</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">state</span> <span class="o">=</span> <span class="nx">state</span> <span class="o">||</span> <span class="nx">initialValue</span>
        <span class="kd">function</span> <span class="nx">setState</span><span class="p">(</span><span class="nx">newValue</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">state</span> <span class="o">=</span> <span class="nx">newValue</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="p">[</span><span class="nx">state</span><span class="p">,</span> <span class="nx">setState</span><span class="p">]</span>
      <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})()</span>

<span class="kd">const</span> <span class="nx">useState</span> <span class="o">=</span> <span class="nx">SimpleReact</span><span class="p">.</span><span class="nx">useState</span>
<span class="kd">const</span> <span class="nx">render</span> <span class="o">=</span> <span class="nx">SimpleReact</span><span class="p">.</span><span class="nx">render</span>

<span class="kd">function</span> <span class="nx">useCountCharacters</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">text</span><span class="p">,</span> <span class="nx">setText</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span>
    <span class="kd">const</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">length</span>
    <span class="k">return</span> <span class="p">[</span><span class="nx">len</span><span class="p">,</span> <span class="nx">setText</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Component</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">len</span><span class="p">,</span> <span class="nx">setLen</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useCountCharacters</span><span class="p">(</span><span class="dl">""</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="nx">txt</span> <span class="o">=&gt;</span> <span class="nx">setLen</span><span class="p">(</span><span class="nx">txt</span><span class="p">),</span>
      <span class="na">render</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">({</span> <span class="nx">len</span> <span class="p">})</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">App</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="nx">Component</span><span class="p">)</span> <span class="c1">// { len: 0 }</span>
<span class="nx">App</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">App</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="nx">Component</span><span class="p">)</span> <span class="c1">// { len: 5 }</span>
</code></pre></div></div>
<p>The real React will re-render components on state changes automatically.
And there are other kind of hooks, e.g. <code>useEffect</code> for side-effects, triggered on state changes.
Also, the real React can handle multiple hooks, which can be considered as <a href="https://medium.com/@ryardley/react-hooks-not-magic-just-arrays-cd4f1857236e">an array of hooks</a>.
Whatever, the above naive implementation captures the essence of React Hooks.</p>
    
      <h2 id="jsx">
        
        
          JSX <a href="#jsx" class="anchor-hash" title="link to this heading">#</a>
        
        
      </h2>
<p><code>&lt;button&gt;Hello {name}!&lt;/button&gt;</code> and <code>&lt;Hello name=&quot;World&quot; /&gt;</code> are JSX,
an extension to JavaScript, or a DSL to express DOM elements.
TypeScript has excellent support for JSX. Thus JSX can be considered as typed HTML template expressions.</p>
<p>Component names such as <code>Hello</code> begin with an uppercase letter,
while intrinsic HTML elements such as <code>button</code> begin with a lowercase letter.
Certain attributes in HTML are renamed to resolve conflicts with TypeScript keywords.
For example, the <code>class</code> attributes are renamed to <code>className</code> in JSX.</p>
<p>A component cannot directly return multiple elements.
To return multiple elements, nest them inside a <code>div</code> element, then return that <code>div</code>.
Sometimes returning an div element is not possible.
For example, nesting multiple <code>&lt;td&gt;</code> elements in <code>div</code> results in invalid HTML.
And sometimes, you just do not want to wrap them inside a <code>div</code> element.
Under such conditions, you can wrap them inside a <code>&lt;React.Fragment&gt;</code>,
which can be considered as a seamless div element.</p>
<p><code>&lt;React.Fragment&gt;</code> accepts an optional <code>key</code> attribute,
which is its only acceptable attribute.
For example:</p>
<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// type annotations omitted for brevity</span>
<span class="kd">function</span> <span class="nx">Glossary</span><span class="p">({</span> <span class="nx">items</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
      <span class="si">{</span><span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">React</span><span class="p">.</span><span class="nc">Fragment</span> <span class="na">key=</span><span class="si">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">term</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">description</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">React</span><span class="p">.</span><span class="nc">Fragment</span><span class="p">&gt;</span>
      <span class="p">))</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>
<p><code>key</code> is a special attribute for React to identify member element in a list.
It helps React to detect which members have changed, added, or removed.</p>
<p>JSX is syntax sugar for calling <code>React.createElement</code>,
for example, <code>&lt;Hello name=&quot;World&quot; /&gt;</code> is equivalent to:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">Hello</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">World</span><span class="dl">"</span> <span class="p">});</span>
</code></pre></div></div>
<p>So JSX is optional, you can use React without JSX.</p>
    
      <h2 id="styling">
        
        
          Styling <a href="#styling" class="anchor-hash" title="link to this heading">#</a>
        
        
      </h2>
<p>React does not have an opinion about how styles are defined.
You can define styles in separate <code>*.css</code> files.
However, I prefer to define styles in TypeScript than CSS.
You can check <a href="https://michelebertoli.github.io/css-in-js/">this comparison of CSS-in-JS</a>.
Again, there are a lot of choices.</p>
<p>Among those projects, I checked the five projects written in TypeScript:</p>
<ul>
<li><a href="https://github.com/jsxstyle/jsxstyle">jsxstyle</a> and <a href="https://github.com/blakeembrey/react-free-style">react-free-style</a> are inline style systems. I do not like inline style systems.</li>
<li><a href="https://github.com/streamich/freestyler">freestyler</a>'s APIs are complex. There are too many choices.</li>
<li>Both <a href="https://stylable.io/">stylable</a> and <a href="https://typestyle.github.io/">typestyle</a> provide a type safe styling language.</li>
</ul>
<p>stylable has a syntax similar to CSS, while typestyle just uses object literals (no custom AST transform).
As I said before, I want to define styles <em>in TypeScript</em>, thus I pick typestyle.</p>
    
      <h2 id="alternative-implementations">
        
        
          Alternative Implementations <a href="#alternative-implementations" class="anchor-hash" title="link to this heading">#</a>
        
        
      </h2>
<ol>
<li>
<p><a href="https://preactjs.com/">Preact</a> is the most popular alternative implementation.
It is small (3KB gzipped) and fast.
However, to leverage many React libraries, <code>preact/compat</code> is required.
This compatibility layer is slow.</p>
</li>
<li>
<p><a href="https://infernojs.org/">Inferno</a> is a faster alternative implementation.
Unlike Preact, it is not that obsessed about the size (but still small).
Like Preact, its compatibility layer <code>inferno-compat</code> has extra overhead.
Also, hooks is <a href="https://github.com/infernojs/inferno/issues/1453">not supported yet</a>.</p>
</li>
<li>
<p><a href="https://github.com/NervJS/nerv">Nerv</a> is yet another small alternative implementation.
It features compatibility with IE 8 and a more identical React API.
Thus there is no <code>nerv-compat</code>.</p>
</li>
</ol>
    
      <h2 id="references">
        
        
          References <a href="#references" class="anchor-hash" title="link to this heading">#</a>
        
        
      </h2>
<ol>
<li><a href="https://twitter.com/chrisachard/status/1175022111758442497">Learn React in 10 tweets</a></li>
<li><a href="https://www.netlify.com/blog/2019/03/11/deep-dive-how-do-react-hooks-really-work/">Deep dive: How do React hooks really work?</a></li>
</ol>
    <div class="footer border-top border-gray-light mt-5 pt-3 text-gray">
      <div style="display: flex; justify-content: space-between; align-items: flex-start">
        <form id="site-search" action="https://duckduckgo.com/html/" method="get">
          <input name="q" type="search" value="site:mmap.page " required pattern="site:mmap\.page\s.+">
          <input type="submit" value="&#x1F50D;" title="search through site content via DuckDuckGo">
        </form>
        <p>
          <a href="mailto:weakish@gmail.com" title="weakish@gmail.com"><img src="https://icongr.am/feather/mail.svg" alt="Feather Icon Mail"></a>
          <a href="https://savannah.nongnu.org/people/viewgpg.php?user_id=65699" title="2414 AEA0 EA48 5263 9697  F1BA 55F6 EEC2 EA3F 0A87"><img src="https://icongr.am/feather/key.svg" alt="Feather Icon Key"></a>
          <a href="https://github.com/weakish/" title="GitHub"><img src="https://icongr.am/feather/github.svg" alt="Feather Icon Github"></a>
          <a href="https://www.instagram.com/jakukyo/" title="Instagram"><img src="https://icongr.am/feather/instagram.svg" alt="Feather Icon Instagram"></a>
          <a href="https://twitter.com/weakish" title="Twitter"><img src="https://icongr.am/feather/twitter.svg" alt="Feather Icon Twitter"></a>
          <a href="/16XMwj6YRNqRHWbmSD8oxYUZCKfM1uzwP9/rss.xml" title="RSS 2.0 Feed"><img src="https://icongr.am/feather/rss.svg" alt="Feather Icon RSS"></a>
          <a href="/16XMwj6YRNqRHWbmSD8oxYUZCKfM1uzwP9/uses/" title="uses"><img src="https://icongr.am/feather/book-open.svg" alt="Feather Icon Book Open"></a>
          
          
          <a href="/Me.ZeroNetwork.bit/?Profile/12h51ug6CcntU2aiBjhP8Ns2e5VypbWWtv/1GnJD7CXskmG8GywMbTvbP12wneCFW9XzR/weakish@zeroid.bit" title="ZeroMe"><img src="/16XMwj6YRNqRHWbmSD8oxYUZCKfM1uzwP9/assets/images/zeronet_logo.svg" alt="ZeroNet Logo" width="32" height="32"></a>
        </p>
      </div>
        <p>
        Permission to use, copy, modify, and/or distribute this site for any purpose with or without fee is hereby granted.
        This site is provided "as is" without express or implied warranty.
        </p>
        <p>
        This site does not use cookies or tracking codes.
        The hosting service provider (<a href="https://pages.github.com/">GitHub Pages</a>) probably collects server logs,
        but I do not have access to them.
        </p>
        <p>
        Site source is <a href="https://github.com/weakish/weakish.github.com/">available</a>
        and feedback is <a href="https://github.com/weakish/weakish.github.com/issues">welcome</a>.
        </p>
        <noscript>
        <p>
        This site does not use JavaScript.
        </p>
        </noscript>
    </div>
  </div>
</body>
</html>
