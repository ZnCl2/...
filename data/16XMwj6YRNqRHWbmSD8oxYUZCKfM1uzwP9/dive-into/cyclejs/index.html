<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dive into Cycle.js mmap.page</title>
    <link rel="stylesheet" href="/16XMwj6YRNqRHWbmSD8oxYUZCKfM1uzwP9/assets/css/style.css">
    <link rel="alternate" type="application/rss+xml" href="/16XMwj6YRNqRHWbmSD8oxYUZCKfM1uzwP9/rss.xml">
    <link rel="alternate" type="application/git+http" href="https://github.com/weakish/weakish.github.com.git"/>
</head>
<body>
  <div class="container-lg px-3 my-5 markdown-body">

    <h1><a href="/16XMwj6YRNqRHWbmSD8oxYUZCKfM1uzwP9/">mmap.page</a></h1>
    <h1 id="dive-into-cyclejs">
        
        
          Dive into Cycle.js
        
        
      </h1>
    
      <h2 id="core-abstraction">
        
        
          Core Abstraction <a href="#core-abstraction" class="anchor-hash" title="link to this heading">#</a>
        
        
      </h2>
<p><a href="https://cycle.js.org/">Cycle.js</a> has a simple core abstraction:
an application is a pure <code>main()</code> function,
whose input (<em>sources</em>) and output (<em>sinks</em>) are effects of the external world,
managed by plugins (<em>drivers</em>).</p>
<p><img src="https://cycle.js.org/img/cycle-nested-frontpage.svg" alt="dataflow" title="source: cycle.js.org" /></p>
<p>The primitives used inside the <code>main</code> function is reactive streams.
Thus Cycle.js applications are entirely <code>this</code> free and have nothing like <code>setState()</code> or <code>update()</code>.</p>
<p>The separation between function and drivers allows for great extensibility (easy to swap drivers) and testability (easy to test pure functions).</p>
<p>This abstraction also allows for awesome composablity:
the main function of every Cycle.js application is also a reusable function in main function of another Cycle.js application.
Sources and sinks are not only the interface between main function and the drivers, but also the interface between a child component and its parent.</p>
<p><img src="https://cycle.js.org/img/nested-components.svg" alt="nested-components" /></p>
    
      <h2 id="example">
        
        
          Example <a href="#example" class="anchor-hash" title="link to this heading">#</a>
        
        
      </h2>
<p>The core API of Cycle.js is <code>run(main, drivers)</code>.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Stream</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">xstream</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">run</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@cycle/run</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">div</span><span class="p">,</span> <span class="nx">label</span><span class="p">,</span> <span class="nx">input</span><span class="p">,</span> <span class="nx">hr</span><span class="p">,</span> <span class="nx">h1</span><span class="p">,</span> <span class="nx">makeDOMDriver</span><span class="p">,</span> <span class="nx">DOMSource</span><span class="p">,</span> <span class="nx">VNode</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@cycle/dom</span><span class="dl">'</span>

<span class="kr">interface</span> <span class="nx">Sources</span> <span class="p">{</span>
  <span class="nl">Dom</span><span class="p">:</span> <span class="nx">DOMSource</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">Sinks</span> <span class="p">{</span>
  <span class="nl">Dom</span><span class="p">:</span> <span class="nx">Stream</span><span class="o">&lt;</span><span class="nx">VNode</span><span class="o">&gt;</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">main</span><span class="p">(</span><span class="nx">sources</span><span class="p">:</span> <span class="nx">Sources</span><span class="p">):</span> <span class="nx">Sinks</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">input$</span> <span class="o">=</span> <span class="nx">sources</span><span class="p">.</span><span class="nx">Dom</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="dl">'</span><span class="s1">.field</span><span class="dl">'</span><span class="p">).</span><span class="nx">events</span><span class="p">(</span><span class="dl">'</span><span class="s1">input</span><span class="dl">'</span><span class="p">)</span>

  <span class="kd">const</span> <span class="nx">name$</span> <span class="o">=</span> <span class="nx">input$</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">ev</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">ev</span><span class="p">.</span><span class="nx">target</span> <span class="k">as</span> <span class="nx">HTMLInputElement</span><span class="p">).</span><span class="nx">value</span><span class="p">).</span><span class="nx">startWith</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>

  <span class="kd">const</span> <span class="nx">vdom$</span> <span class="o">=</span> <span class="nx">name$</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">name</span> <span class="o">=&gt;</span>
    <span class="nx">div</span><span class="p">([</span>
      <span class="nx">label</span><span class="p">(</span><span class="dl">'</span><span class="s1">Name:</span><span class="dl">'</span><span class="p">),</span>
      <span class="nx">input</span><span class="p">(</span><span class="dl">'</span><span class="s1">.field</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">attrs</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">}}),</span>
      <span class="nx">hr</span><span class="p">(),</span>
      <span class="nx">h1</span><span class="p">(</span><span class="s2">`Hello </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">),</span>
    <span class="p">])</span>
  <span class="p">)</span>

  <span class="k">return</span> <span class="p">{</span> <span class="na">Dom</span><span class="p">:</span> <span class="nx">vdom$</span> <span class="p">}</span>
<span class="p">}</span>

<span class="nx">run</span><span class="p">(</span><span class="nx">main</span><span class="p">,</span> <span class="p">{</span> <span class="na">Dom</span><span class="p">:</span> <span class="nx">makeDOMDriver</span><span class="p">(</span><span class="dl">'</span><span class="s1">#app-container</span><span class="dl">'</span><span class="p">)</span> <span class="p">})</span>
</code></pre></div></div>
<p>The above code is adapted from the JavaScript hello world sample on the frontpage of  <a href="https://cycle.js.org/">Cycle.js</a> official website. I use TypeScript instead.</p>
    <div class="footer border-top border-gray-light mt-5 pt-3 text-gray">
      <div style="display: flex; justify-content: space-between; align-items: flex-start">
        <form id="site-search" action="https://duckduckgo.com/html/" method="get">
          <input name="q" type="search" value="site:mmap.page " required pattern="site:mmap\.page\s.+">
          <input type="submit" value="&#x1F50D;" title="search through site content via DuckDuckGo">
        </form>
        <p>
          <a href="mailto:weakish@gmail.com" title="weakish@gmail.com"><img src="https://icongr.am/feather/mail.svg" alt="Feather Icon Mail"></a>
          <a href="https://savannah.nongnu.org/people/viewgpg.php?user_id=65699" title="2414 AEA0 EA48 5263 9697  F1BA 55F6 EEC2 EA3F 0A87"><img src="https://icongr.am/feather/key.svg" alt="Feather Icon Key"></a>
          <a href="https://github.com/weakish/" title="GitHub"><img src="https://icongr.am/feather/github.svg" alt="Feather Icon Github"></a>
          <a href="https://www.instagram.com/jakukyo/" title="Instagram"><img src="https://icongr.am/feather/instagram.svg" alt="Feather Icon Instagram"></a>
          <a href="https://twitter.com/weakish" title="Twitter"><img src="https://icongr.am/feather/twitter.svg" alt="Feather Icon Twitter"></a>
          <a href="/16XMwj6YRNqRHWbmSD8oxYUZCKfM1uzwP9/rss.xml" title="RSS 2.0 Feed"><img src="https://icongr.am/feather/rss.svg" alt="Feather Icon RSS"></a>
          <a href="/16XMwj6YRNqRHWbmSD8oxYUZCKfM1uzwP9/uses/" title="uses"><img src="https://icongr.am/feather/book-open.svg" alt="Feather Icon Book Open"></a>
          
          
          <a href="/Me.ZeroNetwork.bit/?Profile/12h51ug6CcntU2aiBjhP8Ns2e5VypbWWtv/1GnJD7CXskmG8GywMbTvbP12wneCFW9XzR/weakish@zeroid.bit" title="ZeroMe"><img src="/16XMwj6YRNqRHWbmSD8oxYUZCKfM1uzwP9/assets/images/zeronet_logo.svg" alt="ZeroNet Logo" width="32" height="32"></a>
        </p>
      </div>
        <p>
        Permission to use, copy, modify, and/or distribute this site for any purpose with or without fee is hereby granted.
        This site is provided "as is" without express or implied warranty.
        </p>
        <p>
        This site does not use cookies or tracking codes.
        The hosting service provider (<a href="https://pages.github.com/">GitHub Pages</a>) probably collects server logs,
        but I do not have access to them.
        </p>
        <p>
        Site source is <a href="https://github.com/weakish/weakish.github.com/">available</a>
        and feedback is <a href="https://github.com/weakish/weakish.github.com/issues">welcome</a>.
        </p>
        <noscript>
        <p>
        This site does not use JavaScript.
        </p>
        </noscript>
    </div>
  </div>
</body>
</html>
