<!DOCTYPE html>

<html>
<head>
 <title>ZeroChanish test (just testing zerotalk with images)</title>
 <meta charset="utf-8">
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <link rel="stylesheet" href="css/all.css" />
 <base href="" target="_top" id="base">
 <script>
 setTimeout(function() {
 	base.href = document.location.href.replace("/media", "").replace("index.html", "").replace(/([&?])wrapper=False/, "$1").replace(/&$/, "").replace(/[&?]wrapper_nonce=[A-Za-z0-9]+/, "") // Fix urls
 }, 100) // 100ms later, to workaround double js download in chrome
 </script>


<style type="text/css">
a { text-decoration: none; color: #800000 }
a:hover { color: #800000 }
a:active { border-bottom: 0.1em solid #333 }
p.solid {border-style: solid; 
  width: 900px;
  height: 80px; 
  border-color: #F0E68C;
  border-width: 2px;
  margin: 0px auto;
}
.daohang {border-style: solid; 
  width: 600px;
  height: 40px; 
  border-color: #800000;
  border-width: 0px;
  margin: 0px auto;
  padding: 5px 0px 0px 0px;
  text-align:center;font-size:20px;
  text-decoration: none; color: #F0FFF0
}
.box {border-style: solid; 
  width: 180px;
  height: 40px; 
  border-color: #800000;
  border-width: 0px;
  float:left;
  margin: 0px auto;
  padding: 0px 0px 0px 0px;
  text-align:center;font-size:20px;
  text-decoration: none; color: #F0FFF0
}
</style>


<script type="text/javascript">
    window.onload = function(){
        var imgArr =['img/1.jpg','img/2.jpg',"img/3.jpg","img/4.jpg","img/5.jpg","img/6.jpg","img/7.jpg","img/8.jpg",];
        chageImg("test",imgArr,100*50);
    };
    /**
     *
     * @param id img标签的id
     * @param arr 图片路径数组
     * @param ms 重复执行的毫秒数
     */
    function chageImg(id,arr,ms){
        var imgSrc = arr[0];
        var img = document.getElementById(id);
        img.src = imgSrc;
        var i = 0;
        setInterval(function(){
                if (i < arr.length -1) {
                    i++;
                } else {
                    i = 0;
                }
            img.src = arr[i];
            console.log(new Date().toLocaleString())
        },ms);
    }
</script>


</head>
<body>

<!-- editbar -->
<div class="editbg"></div>
<div class="editbar bottombar">
 <ul class="markdown-help">
  <li># H1</li>
  <li>## H2</li>
  <li>### H3</li>
  <li><i>_italic_</i></li>
  <li><b>**bold**</b></li>
  <li>~~<s>strikethrough</s>~~</li>
  <li>- Lists</li>
  <li>1. Numbered lists</li>
  <li>[Links](http://www.zeronet.io)</li>
  <li>[References][1]<br>[1]: Can be used</li>
  <li>![image alt](img/logo.png)</li>
  <li>Inline <code>`code`</code></li>
  <li><code>```python<br>print "Code block"<br>```</code></li>
  <li>&gt; Quotes</li>
  <li>--- Horizontal rule</li>
 </ul>
 <a href="#Markdown+help" class="icon-help">?</a> Editing: <span class="object">Post:21.body</span> <a href="#Save" class="button save">保存</a> <a href="#Delete" class="button button-delete button-outline delete">删除</a> <a href="#Cancel" class="cancel">取消</a>
</div>
<!-- EOF editbar -->

<!-- Head -->
<p class="solid"><img id="test" width="900" height="80"></p>
<div class="daohang">

<div class="box">
<a href="http://127.0.0.1:43110/1F1AHWYc7Mt3GBV9ZgphyyG2Go7uodmBtL/">返回主页</a>
</div>

<div class="box">
 <a href="#Follow" class="feed-follow feed-follow-list"><span class='text-follow'>关注此站</span><span class='text-following'>已关注</span><div class="icon-feed"></div></a>
</div>

<div class="box">
<a href="#New+topic" class="topic-new-link nolink">言论自由</a>
</div>
</div>
<!-- EOF Head -->

<div class="message-big">Initial sync in progress...</div>

<!-- Page: Main -->
<div class="center topics-list">


 <!-- New Topic -->

 <div class="topic topic-new" style="display: none">
  <a href="#" class="image nolink"><div class="icon icon-topic-chat"></div></a>
  <h2 class="title"><input type="text" id="topic_title" class="text" placeholder="Post title"></h2>
  <div class="body"><textarea id="topic_body" placeholder="Post text"></textarea></div>
  <h2 class="title"><input type="file" id="image_file" class="text"><input type="hidden" id="filedata"></h2>
  <div class="info"><a class="user_name user_name-my certselect" href="#Change+user" title='Change user'>user_name</a> &#9473; <span class="added">new topic</span></div>
  <a href="#Add+new+topic" class="button button-submit">发布高论</a>
  <div style="clear: both"></div>
 </div>
 <!-- EOF New Topic -->

 <div class="topics-loading"><img src="img/loading.gif"/>Loading...</div>

 <div class="topics">

  <!-- Template: Topic -->
  <div class="topic template">
   <div class="dot">&bullet;</div>
   <a href="#" class="image nolink"><div class="icon icon-topic-chat"></div></a>
   <h2 class="title"><a href="#" class="title-link">Title</a></h2>
   <div class="body">Body</div>
   <a href="#" class="link"><div class="icon icon-link"></div> <span class="link-url"></span></a>
   <div class="info">
    <a class="score" href="#Upvote">
     <span class="score-inactive"> <span class="icon-up">^</span><span class="score-num">1</span> </span>
     <span class="score-active"> <span class="icon-up">^</span><span class="score-num">2</span> </span>
    </a>
    <a href="#" class="comment-num"></a>
    <span class="added">added</span>
     &#9473; submitted by <span class="user_name">user_name</span>
   </div>
  </div>
  <!-- EOF Template: Topic main -->

 </div>

 <a href="#More" class="topics-more">显示更多</a>

</div>
<!-- EOF Page: Main -->


<!-- Page: Topic -->
<div class="center topics-full">

 <h1 class="topic-title"><span class='parent-link'><a href='?Main'>Main</a> &rsaquo;</span> <span class='parent-link'><a href='?Main'>ZeroNet news</a> &rsaquo; </span> <span class="parent-link">How did you find ZeroNet?</span></h1>

 <div class="topic topic-full">
  <a href="#" class="image nolink"><div class="icon icon-topic-chat"></div></a>
  <a href="#Follow" class="feed-follow feed-follow-show"><span class='text-follow'>Follow in Newsfeed</span><span class='text-following'>Following</span><div class="icon-feed"></div></a>
  <h2 class="title"><a href="#" class="title-link">Title</a></h2>
  <div class="body">Body</div>
  <div class="info">
    <a class="score" href="#Upvote">
     <span class="score-inactive"> <span class="icon-up">^</span><span class="score-num">?</span> </span>
     <span class="score-active"> <span class="icon-up">^</span><span class="score-num">0</span> </span>
    </a>
   <span class="user_name">username</span> posted <span class="added">added</span>
  </div>
 </div>

 <!-- New comment -->
 <div class="comment comment-new">
  <div class="info"><a class="user_name user_name-my certselect" href="#Change+user" title='Change user'>user_name</a> &#9473; <span class="added">new comment</span></div>
  <div class="body">
   <a class="button button-submit button-certselect certselect" href="#Change+user"><div class='icon-profile'></div>Sign in as...</a>
   <textarea id="comment_body"></textarea>
   <h2 class="title"><input type="file" id="comment_image_file" class="text"><input type="hidden" id="commentfiledata"></h2>
   <a href="#Submit+comment" class="button button-submit button-submit-form">Submit comment</a>
   <div style='float: right; margin-top: -6px; position: relative; text-align: right'>
    <div class="user-size user-size-used">Used space: 22k/100k</div>
    <div class="user-size">Used space: 22k/100k</div>
    <div class="user-size-warning">You are running out of your allowed space, please contact the site's admin at <a href="#">unknown</a> to raise your limit.</div>
   </div>
   <div style="clear: both"></div>
  </div>
 </div>
<!-- Comments -->
 <div class="comments center">

  <!-- Template: Comment -->
  <div class="comment template">
   <div class="info">
    <span class="user_name">user_name</span>
    &#9473;
    <span class="added">added</span>
    <a class="score" href="#Upvote">
     <span class="score-inactive"> <span class="icon-up">^</span><span class="score-num">1</span> </span>
     <span class="score-active"> <span class="icon-up">^</span><span class="score-num">2</span> </span>
    </a>
    <a href="#Reply" class="reply"><div class="icon icon-reply"></div> <span class="reply-text">Reply</span></a>
   </div>
   <div class="body">Body</div>
  </div>
  <!-- EOF Template: Comment -->
 </div>
 <a href="#More" class="comments-more">More comments</a>

</div>
<!-- EOF Page: Topic -->

<!-- Template: menu -->
<div class="menu template">
 <a href="#" class="menu-item template">Template</a>
</div>
<!-- EOF Template: menu -->


<script type="text/javascript" src="js/all.js" async></script>
<script type="text/javascript">

 document.addEventListener("DOMContentLoaded", function() {
filedataHiddenElement = document.querySelector("#filedata"); 
commentfiledataHiddenElement = document.querySelector("#commentfiledata"); 

  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object
    console.log(files);
    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

       //Only process image files.
       if (!f.type.match('image.*')) {
        alert("only image files allowed!");
         continue;
       }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          
          filedataHiddenElement.value = e.target.result;
          //not the best way to deal with with this, need to clean this up
          commentfiledataHiddenElement.value = e.target.result;
          //var u = document.createElement('p');

        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  }

document.getElementById('image_file').addEventListener('change', handleFileSelect, false);
document.getElementById('comment_image_file').addEventListener('change', handleFileSelect, false);

});

</script>
<script type="text/javascript" src="js/all.js"></script>
<script>
$(".head .more a").each( function(i, elem) {
    $(elem).attr("href", Text.fixLink($(elem).attr("href")))
});
</script>
</body>
</html>
