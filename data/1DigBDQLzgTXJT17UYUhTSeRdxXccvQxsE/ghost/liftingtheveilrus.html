<!--?xml version="1.0"-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="content-type" content="text/html; charset = utf-8">

<link rel="stylesheet" type="text/css" href="../themes/ghost.css">

<link rel="icon" href="../favicon.ico"><title>Срываем покровы — как протестировать браузер на наличие шпионажа.</title>
</head>
<body>

<div id="center">

<h2>Срываем покровы — как протестировать браузер на наличие шпионажа.</h2>

<p>Поддержка защиты конфиденциальности — это один из главных критериев, по которому пользователи выбирают (или,  в любом случае, должны выбирать) веб-браузер. Часто, мнения о приватности браузера производятся на основании предположений, маркетинга, или на основании политики конфиденциальности (которую может быть тяжело прочесть и понять, и которая может <em>упускать информацию или открыто врать)</em>. Было бы заметельно, будь у нас способ <em>доказать</em>, действительно ли браузер заботится о защите вашей конфиденциальности, или просто выделывается, неся чушь? К счастью, существует мощный инструмент, чётко позволяющий видеть, что творит браузер за вашей спиной, и я расскажу вам о нём прямо сейчас. <em>Сорвём же покровы!</em></p>

<h3>Получение, запуск и настройка инструмента</h3>

<p>Прежде всего, установите <a href="https://mitmproxy.org/">mitmproxy</a>. Вы можете сделать это просто набрав эту команду в терминале: <em>pip3 install mitmproxy</em>
 (вам понадобится сначала установить python3 — он должен быть доступен в большинстве репозиториев Linux). Что такое mitmproxy? Говоря простым языком, это локальный прокси-сервер,
 к которому вы можете подключить свой браузер, что позволит вам увидеть соединения им совершаемые (у него гораздо больше возможностей помимо этой, но только её мы рассматриваем в этой статье). </p>

<h4>Подключение браузера к mitmproxy</h4>

<p>Сначала запустите mitmproxy, набрав команду терминала <em>mitmproxy -p 3128</em>. 3128 — это порт, на котором выполняется прокси. Теперь зайдите в свойства прокси вашего браузера и вставьте IP — <em>127.0.0.1</em> и порт — <em>3128</em>
 (нужно заполнить и секцию HTTP, и HTTPS).
Для основанных на Chrome браузеров всё немножко сложнее, поскольку ими конфигурация прокси через GUI [графический интерфейс] не поддерживается. Вам придётся запускать их из командной строки примерно так: <em>имя браузера --proxy-server="127.0.0.1:3128"</em>. Замените "имя браузера" на имя исполняемого файла, например <em>iridium-browser --proxy-server="127.0.0.1:3128".</em></p>

<h4>Включение расшифровывания SSL</h4>

<p>Теперь, если ваш браузер из семейства шпионского ПО, вам уже должны быть заметны какие-то запросы в окне вашего терминала — но постойте: развёртывание mitmproxy всё ещё не окончено. По умолчанию он отображает исключительно HTTP запросы, поскольку браузеры не позволят ему расшифровывать SSL. К счастью, у него есть простой способ добавления корневого сертификата в ваш браузер, что и позволит именно это вам сделать (к этому и относится часть "mitm" в "mitmproxy"). Переключитесь на окно вашего браузера и введите <em>mitm.it</em> в адресной строке. Теперь выберите свою платформу и следуйте дальнейшим инструкциям. Если у вас всё успешно получилось, то у вас должна быть возможность пойти на любой HTTPS вебсайт и увидеть соответствующий запрос в mitmproxy (который начнётся с <em>GET https://</em>).
Заметка: инструкции для Chrome безосновательно сложны <em>и, как оказывается, даже не работают</em>.
 Всё, что вам нужно, — это зайти в Настройки, найти "серт" сверху и кликнуть <q>Настроить сертификаты</q>, затем импортировать mitmproxy-ca-cert.pem file (вкладка <q>Доверенные</q>). Окэй, расшифровывание SSL мы включили — что же остаётся теперь?</p>

<h3>Использование mitmproxy</h3>

<p><em>Только подождать!</em> Да, именно это и остаётся. Вся суть в ожидании и наблюдении за запросами, которые браузер делает без вашего участия. Вы можете перемещаться между запросами клавишами стрелок и рассматривать их детально нажатием Enter. Так вы увидите ВСЕ данные, которые браузер отправляет и получает. Конечно, для их понимания нужно много опыта, но зато, как минимум, у вас есть возможность при желании
 <em>Сорвать Покровы!</em> Вы можете быть чрезвычайно удивлены, наблюдая, как типичные веб-браузеры — даже те, которые общепринято считаются "уважающими вашу конфиденциальность" — делают <em>сотни запросов без вашего ведома</em>.
  Например, Waterfox набирает целых <a href="../images/wfox.png">109 нежелательных запросов</a>
 только при включении! А вот рекламируется он как ориентированный на защиту конфиденциальности — но, благодоря mitmproxy, вы можете сорвать покровы, и выставить рекламное утверждение ложью, которой оно и является. Это ли не мощь? Больше нет нужды полагаться на популярные мнения, на дезинформирующую рекалму или на дерьмовые политики конфиденциальности (которые следовало бы называть политиками шпионажа). Теперь, это всё, что вы должны проверить.</p>

<p>Конечно, вы не обнаружите всё шпионское ПО одним лишь ожиданием. Некоторые могут скрываться в местах, таких как страница новой вкладки или требовать посещение веб-сайта (например, сбор Oper'ой истории посещения сайтов). Также, многие запросы производятся только при первом запуске браузера — тогда, когда они пока ещё не проходят через mitmproxy, что не позволит вам их увидеть. Как преодолеть это препятствие?

</p><h4>Для основанных на Chrome</h4>

<p>Закройте свой браузер. Теперь идите в конфигурационную папку браузера (например <em>/home/hackerman/.config/vivaldi/</em>)
 и удалите файл "First Run". Это должно помочь. Воспользуйтесь клавишей Z в mitmproxy, чтобы удалить все предыдущие запросы, поскольку таким образом будет проще увидеть новые. Снова запустите браузер.</p>

<h4>Для основанных на Firefox</h4>

<p>Чуть-чуть сложнее. Вам также нужно пойти в конфигурационную папку браузера, но в пути к ней будет не .config, а <em>.mozilla</em> (для FF и IceCat), или <em>.waterfox</em> (для Waterfox), или <em>.moonchild productions</em> (для Pale Moon). Теперь ЗАКРОЙТЕ СВОЙ БРАУЗЕР (если он у вас открыт), найдите файл <em>prefs.js</em>, а в нём — строку <em>user_pref("network.proxy.http", "127.0.0.1");</em>. Затем скопируйте всё от этой строки до <em>user_pref("network.proxy.type", 1);</em>. Удалите всё остальное в этом файле и сохраните его. Ваш prefs.js должен выглядеть <a href="../txt/prefs.txt">примерно так</a>
 (сейчас, наверное, уже не всё обязательно нужно удалять, но давайте быть в безопасности..). Также удалите и все остальные файлы, кроме prefs.js и cert8.db (содержащий информацию о сертификате mitmproxy) — таким образом, ваш браузкр, основанный на Firefox, станет отличаться от исходной чистой инсталяции ТОЛЬКО свойствами прокси.</p>

<h3>Другие области применения mitmproxy</h3>

<p>Бесконечны. Вы можете даже проверить, делает ли дополнение ненужные запросы. Некоторые из так называемых дополнений для защиты конфиденциальности в действительности будут <em>вашу конфиденциальность нарушать</em>, делая запросы у вас за спиной.
 Да вы даже можете заняться <em>заняться настоящим хареством с его помощью</em>,
 — таким как выявление паролей или как отправка фэйковой веб-страницы вашей жертве — но это гораздо сложнее, чем простое тестирование конфиденциальности браузера, и является предметом для другой статьи. Вы точно также можете подключить и любую другую программу, передающую данные через HTTP, например, RSS-клиент. Наслаждайтесь..</p>

<h4>Translated by silverblack 29 / 06 / 2019.</h4>

</div>




</body></html>
