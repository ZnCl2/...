<head>
	<link rel="stylesheet" href="css/all.css">
</head>

<div id="main" class="container">
	<div class="row">
		<nav class="light-blue darken-4">
			<div class="col s12 m12 l12">
				<div class="nav-wrapper">
					<a href="#" class="brand-logo">Erfan</a>
					<a href="#" data-activates="mobile-menu" class="button-collapse"><i class="material-icons">menu</i></a>
					<ul class="nav-menu right hide-on-med-and-down">
						<li><a class="showman1" title="Showman1"><i class="fa fa-globe"></i></a></li>
						<li><a class="youtube" title="YouTube"><i class="fa fa-youtube"></i></a></li>
						<li><a class="facebook" title="Facebook"><i class="fa fa-facebook"></i></a></li>
						<li><a class="twitter" title="Twitter"><i class="fa fa-twitter"></i></a></li>
						<li><a class="google-plus" title="Google+"><i class="fa fa-google-plus"></i></a></li>
						<li><a class="instagram" title="Instagram"><i class="fa fa-instagram"></i></a></li>
					</ul>
					<ul class="side-nav" id="mobile-menu">
						<li><a class="showman1"><i class="fa fa-globe"></i>  Showman1</a></li>
						<li><a class="youtube"><i class="fa fa-youtube"></i>  YouTube</a></li>
						<li><a class="facebook"><i class="fa fa-facebook"></i>  Facebook</a></li>
						<li><a class="twitter"><i class="fa fa-twitter"></i>  Twitter</a></li>
						<li><a class="google-plus"><i class="fa fa-google-plus"></i>  Google+</a></li>
						<li><a class="instagram"><i class="fa fa-instagram"></i>  Instagram</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</div>
	<div class="row">
		<div class="col s12 m4 l4">
			<ul id="items" class="collection with-header">
				<li class="collection-header">
					<h4>Restart</h4>
				</li>
			</ul>
		</div>
		<div id="contents" class="col s12 m8 l8">
		</div>
	</div>
</div>

<script>
(function() {
	var setLS = function(ls, cb) {
		Page.cmd("wrapperSetLocalStorage", ls, function(res) {
			if(cb) cb(res);
		});
	};
	var getLS = function(cb) {
		Page.cmd("wrapperGetLocalStorage", [], function(ls) {
			if(cb) cb(ls);
		});
	};
	window.setLSVal = function(key, val, cb) {
		getLS(function(ls) {
			ls = ls || {};
			ls[key] = val;
			setLS(ls, cb);
		});
	};
	window.getLSVal = function(key, cb, def) {
		getLS(function(ls) {
			ls = ls || {};
			if(cb) cb(ls[key] || def);
		});
	};
}).call(this);
</script>
<script type="text/javascript" src="js/all.js"></script>
<script>
(function() {
	window.Page = new ZeroFrame();
	window.openLink = function(url) {
		Page.cmd("wrapperOpenWindow", url);
	}
}).call(this);

$(document).ready(function() {
	var defaultArtist = "نویسنده و کارگردان: سید محمد حسینی";
	var defaultAlbum = "برنامه عرفانی-علمی  ری استارت";
	var songs = [];

	var list = [
		{title: "01 - Din", content: "دین", audio: "Restart_01_-_Din.mp3"},
		{title: "02 - Fil", content: "فیل", audio: "Restart_02_-_Fil.mp3"},
		{title: "03 - Zahed", content: "زاهد", audio: "Restart_03_-_Zahed.mp3"},
		{title: "04 - Soale tekandahande dar restart", content: "سوال تکان‌دهنده", audio: "Restart_04_-_Soale_tekandahande_dar_restart.mp3"},
		{title: "05 - Pasokhe soale janjali", content: "پاسخ سوال جنجالی", audio: "Restart_05_-_Pasokhe_soale_janjali.mp3"},
		{title: "06", content: "", audio: "Restart_06.mp3"},
		{title: "07 - Jen va marg", content: "جن و مرگ", audio: "Restart_07_-_Jen_va_marg.mp3"},
		{title: "08 - Khoda chist", content: "خدا چیست", audio: "Restart_08_-_Khoda_chist.mp3"},
		{title: "09 - Nuh - Seyed - Molavi", content: "نوح - سید - مولوی", audio: "Restart_09_-_Nuh_-_Seyed_-_Molavi.mp3"},
		{title: "10 - Aya namazkhanha be jahanam miravand", content: "آیا نماز‌خوان‌ها به جهنم می‌روند؟", audio: "Restart_10_-_Aya_namazkhanha_be_jahanam_miravand.mp3"},
		{title: "11 - Attar - Dine 73", content: "دین هفتاد و سوم - عطار", audio: "Restart_11_-_Attar_-_Dine_73.mp3"},
		{title: "12 - Dine 73", content: "دین هفتاد و سوم", audio: "Restart_12_-_Dine_73.mp3"},
		{title: "13 - Dine 73", content: "دین هفتاد و سوم", audio: "Restart_13_-_Dine_73.mp3"},
		{title: "14 - Shahide chize khar", content: "شهیدِ چیزِ خر", audio: "Restart_14_-_Shahide_chize_khar.mp3"},
		{title: "15 - Makareme shirazi va vahdate vojood", content: "مکارم شیرازی و وحدت وجود", audio: "Restart_15_-_Makareme_shirazi_va_vahdate_vojood.mp3"},
		{title: "16 - Namaz - Seyed - Vahdate vojood", content: "نماز - سید - وحدت وجود", audio: "Restart_16_-_Namaz_-_Seyed_-_Vahdate_vojood.mp3"},
		{title: "17 - Pop va Salman Roshdi", content: "پاپ و سلمان رشدی", audio: "Restart_17_-_Pop_va_Salman_Roshdi.mp3"},
		{title: "18 - Sufiha hameja hastand", content: "صوفی‌ها همه‌جا هستند", audio: "Restart_18_-_Sufiha_hameja_hastand.mp3"},
		{title: "19 - Namaz va ruze be suye jahanam ya behesht", content: "نماز و روزه بسوی جهنم یا بهشت؟", audio: "Restart_19_-_Namaz_va_ruze_be_suye_jahanam_ya_behesht.mp3"},
		{title: "20 - Khoda didani ast", content: "خدا دیدنی است", audio: "Restart_20_-_Khoda_didani_ast.mp3"},
		{title: "21 - Shekame madar va donyaye baad az marg", content: "شکم مادر و دنیای بعد از مرگ", audio: "Restart_21_-_Shekame_madar_va_donyaye_baad_az_marg.mp3"},
		{title: "22 - Chera hame kafarand", content: "چرا همه کافراند؟", audio: "Restart_22_-_Chera_hame_kafarand.mp3"},
		{title: "23 - Makke - Edalate Khoda - Madare Hawking", content: "مکه - عدالت خدا - مادر هاوکینگ", audio: "Restart_23_-_Makke_-_Edalate_Khoda_-_Madare_Hawking.mp3"},
		{title: "24 - Raze bozorge molana", content: "راز بزرگ مولانا", audio: "Restart_24_-_Raze_bozorge_molana.mp3"},
		{title: "25 - Afsaneye adyan - Ensane kamel - Peyghambar saz", content: "افسانه ادیان - انسان کامل - پیغمبر ساز", audio: "Restart_25_-_Afsaneye_adyan_-_Ensane_kamel_-_Peyghambar_saz.mp3"},
		{title: "26 - Nur - Shallagh - Edam", content: "نور - شلاق - اعدام", audio: "Restart_26_-_Nur_-_Shallagh_-_Edam.mp3"},
		{title: "27 - Sheykh bahaie (+18)", content: "شیخ بهایی - مثبت 18", audio: "Restart_27_-_Sheykh_bahaie_+18.mp3"},
		{title: "28 - Marahele ensane kamel - Sufism", content: "مراحل انسان کامل - صوفیسم", audio: "Restart_28_-_Marahele_ensane_kamel_-_Sufism.mp3"},
		{title: "29 - Aghayan lotfan gush nadahand", content: "آقایان لطفا گوش ندهند", audio: "Restart_29_-_Aghayan_lotfan_gush_nadahand.mp3"},
		{title: "30 - Raze zartosht", content: "راز زرتشت", audio: "Restart_30_-_Raze_zartosht.mp3"},
		{title: "31 - Mach kardane hazrate hawwa", content: "ماچ کردن حضرت حوا", audio: "Restart_31_-_Mach_kardane_hazrate_hawwa.mp3"},
		{title: "2 - 1 - Porsesh va Pasokh", content: "پرسش و پاسخ", audio: "Restart2_-_1_-_Porsesh_va_Pasokh.mp3"},
		{title: "32 - Hokme ghatle attar", content: "حکم قتل عطار", audio: "Restart_32_-_Hokme_ghatle_attar.mp3"},
		{title: "33 - Sheytan - Mojudi bozorg va dustdashtani", content: "شیطان، موجودی بزرگ و دوست داشتنی", audio: "Restart_33_-_Sheytan_-_Mojudi_bozorg_va_dustdashtani.mp3"},
		{title: "34 - Moavieh - Yazid - Hossein - Moharram", content: "معاویه - یزید - حسین - محرم", audio: "Restart_34_-_Moavieh_-_Yazid_-_Hossein_-_Moharram.mp3"},
		{title: "35 - Wadie maarefat", content: "وادی معرفت - کسی که کار خوب می‌کنه به بهشت نمی‌ره", audio: "Restart_35_-_Wadie_maarefat.mp3"},
		{title: "36 - Wadie talab", content: "وادی طلب", audio: "Restart_36_-_Wadie_talab.mp3"},
		{title: "37 - Khabari dar rah ast", content: "خبری در راه است", audio: "Restart_37_-_Khabari_dar_rah_ast.mp3"},
		{title: "38 - Ayandeye iran", content: "ینده‌ی ایران", audio: "Restart_38_-_Ayandeye_iran.mp3"},
		{title: "39 - Pishguie shahnematollah e wali", content: "پیشگویی شاه نعمت الله ولی", audio: "Restart_39_-_Pishguie_shahnematollah_e_wali.mp3"},
		{title: "40 - Ensane kamel iranist", content: "انسان کامل ایرانی‌ست", audio: "Restart_40_-_Ensane_kamel_iranist.mp3"},
		{title: "41 - Raze 3om", content: "راز سوم", audio: "Restart_41_-_Raze_3om.mp3"},
		{title: "42 - Chegune ensane kamel ra biabim", content: "چگونه انسان کامل را بیابیم", audio: "Restart_42_-_Chegune_ensane_kamel_ra_biabim.mp3"},
		{title: "43 - Alame baad az marg", content: "عالم بعد از مرگ", audio: "Restart_43_-_Alame_baad_az_marg.mp3"},
		{title: "44 - Sufi - Aref", content: "صوفی، عارف", audio: "Restart_44_-_Sufi_-_Aref.mp3"},
		{title: "45 - Asrare wadie tohid", content: "اسرار وادی توحید", audio: "Restart_45_-_Asrare_wadie_tohid.mp3"},
		{title: "46 - Asrare wadie tohid", content: "اسرار وادی توحید", audio: "Restart_46_-_Asrare_wadie_tohid.mp3"},
		{title: "47 - Asrare wadie payambaran", content: "اسرار وادی پیامبران", audio: "Restart_47_-_Asrare_wadie_payambaran.mp3"},
		{title: "48 - Farghe ensane kamel ba payambar", content: "فرق انسان کامل با پیامبر", audio: "Restart_48_-_Farghe_ensane_kamel_ba_payambar.mp3"},
		{title: "49 - Fahmidan dar in wadie haram ast", content: "فهمیدن در این وادی حرام است", audio: "Restart_49_-_Fahmidan_dar_in_wadie_haram_ast.mp3"},
		{title: "50 - Raze aadad", content: "راز اعداد", audio: "Restart_50_-_Raze_aadad.mp3"},
		{title: "51 - Kourosh - Sufie kabir", content: "کوروش، صوفی کبیر", audio: "Restart_51_-_Kourosh_-_Sufie_kabir.mp3"},
		{title: "52 - Wadie heyrat", content: "وادی حیرت", audio: "Restart_52_-_Wadie_heyrat.mp3"},
		{title: "53 - Asrare eynolghozat", content: "اسرار عین‌القضات", audio: "Restart_53_-_Asrare_eynolghozat.mp3"}
	];
	
	var $items = $('#items');
	var $contents = $('#contents');
	var listItemTemplate = '<a href="#!" class="collection-item light-blue-text text-darken-2 waves-effect waves-blue">{title}</a>';
	var cardTemplate =	'<div id="content_{idx}" class="card" style="text-align: center; display: none;">' +
						'	<div class="card-content">' +
						'		<span class="card-title">{title}</span>' +
						'		<h5>{content}</h5>' +
						'		<div id="jplayer_{idx}" class="jPlayer audioPlayer light"></div>' +
						'	</div>' +
						'</div>';

	getLSVal('jplayer-volume', function(volume) {

		list.forEach(function(item, idx) {

			var $listItem = $(listItemTemplate.replace(/{title}/g, item.title));
			$listItem.on('click', function() {
				$('#items a').removeClass('selected-item');
				$(this).addClass('selected-item');
				$('[id^=content_]').hide();
				$('#content_' + idx).show();
				$("html, body").animate({ scrollTop: 0 }, "slow");
			});
			$items.append($listItem);

			$contents.append($(cardTemplate
				.replace(/{title}/g, item.title)
				.replace(/{content}/g, item.content)
				.replace(/{audio}/g, 'media/audio/' + item.audio)
				.replace(/{idx}/g, idx)
			));

			$("#jplayer_" + idx).flatie({
				media: {
					mp3: 'media/audio/' + item.audio
				},
				swfPath: "/js",
				volume: volume,
				globalVolume: true,
				smoothPlayBar: true,
				remainingDuration: true,
				toggleDuration: true,
				keyEnabled: true,
				autoBlur: false,
				setLSVal : setLSVal,
				consoleAlerts: false,
				errorAlerts: false,
				warningAlerts: false
			});
		});
		
		$(".button-collapse").sideNav();

		$('#items a').eq(-1).click();

		/*
		$('audio').each(function(idx, audio) {
			audio.addEventListener('playing', function() {
				$('audio').each(function(otherIdx, otherAudio) {
					if(audio !== otherAudio) otherAudio.pause();
				});
			}, true);
		});
		*/
	}, 0.8);

	$('.showman1').click(function() { openLink('http://www.showman1.com/'); });
	$('.youtube').click(function() { openLink('https://youtube.com/hosseinitv'); });
	$('.facebook').click(function() { openLink('https://facebook.com/hosseinitv'); });
	$('.twitter').click(function() { openLink('https://twitter.com/hosseinitv'); });
	$('.google-plus').click(function() { openLink('https://google.com/+hosseinitv'); });
	$('.instagram').click(function() { openLink('https://instagram.com/hosseinitv'); });
});
</script>