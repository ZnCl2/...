<html>
<head>
    <!-- Source: http://wiki.openstreetmap.org/wiki/Openlayers_Track_example -->
    <title>Car chargers with Bitcoin accepting shops nearby</title>
    <link rel="stylesheet" href="style.css" type="text/css" />
    <script src="ZeroFrame.js"></script>
    <script type="text/javascript">
        zero_frame = new ZeroFrame();
        zero_frame.monkeyPatchAjax();
    </script>

    <!-- bring in the OpenLayers javascript library -->
    <script src="OpenLayers.js"></script>
    <!-- bring in the OpenStreetMap OpenLayers layers.  -->
    <script src="OpenStreetMap.js"></script>

    <script type="text/javascript">

        var map; //complex object of type OpenLayers.Map

        async function init() {
            map = new OpenLayers.Map ("map", {
                controls:[
                    new OpenLayers.Control.Navigation(),
                    new OpenLayers.Control.PanZoomBar(),
                    new OpenLayers.Control.ScaleLine({geodesic: true}),
                    new OpenLayers.Control.MousePosition(),
                    new OpenLayers.Control.LayerSwitcher(),
                    new OpenLayers.Control.Attribution()],
                maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),
                maxResolution: 156543.0399,
                numZoomLevels: 19,
                units: 'm',
                projection: new OpenLayers.Projection("EPSG:900913"),
                displayProjection: new OpenLayers.Projection("EPSG:4326")
            } );

            // Define the map layer
            // Here we use a predefined layer that will be kept up to date with URL changes
            layerMapnik = new OpenLayers.Layer.OSM.Mapnik("Mapnik");
            map.addLayer(layerMapnik);

            // Start position for the map
            var lat=54;
            var lon=8.5
            var zoom=5;
            var lonLat = new OpenLayers.LonLat(lon, lat).transform(new OpenLayers.Projection("EPSG:4326"), map.getProjectionObject());
            map.setCenter(lonLat, zoom);


            // Add a layer with the superchargers
            var pois = new OpenLayers.Layer.Text("Superchargers",
                    { location:"./supercharger.txt",
                      projection: map.displayProjection
                    });
            map.addLayer(pois);

            // Add a layer with the destination chargers
            var pois = new OpenLayers.Layer.Text("Destination chargers",
                    { location:"./destination charger.txt",
                      projection: map.displayProjection
                    });
            map.addLayer(pois);

            // Add a layer with the open charge map
            var pois = new OpenLayers.Layer.Text("OpenChargeMap",
                    { location:"./openchargemap.txt",
                      projection: map.displayProjection
                    });
            map.addLayer(pois);

            // Add a layer with the WAVE
            var pois = new OpenLayers.Layer.Text("WAVE Trophy 2018",
                    { location:"./wave.txt",
                      projection: map.displayProjection
                    });
            map.addLayer(pois);

        }

        // Load JSON text from server hosted file and return JSON parsed object
        async function loadJSON(filePath) {
          // Load json file;
          json = await zero_frame.cmdp("fileGet", filePath)
          // Parse json
          return JSON.parse(json);
        }

    </script>

</head>
<!-- body.onload is called once the page is loaded (call the 'init' function) -->
<body onload="init();">
    <!-- define a DIV into which the map will appear. Make it take up the whole window -->
    <div style="width:90%; height:90%" id="map"></div>
</body>
</html>

