<!DOCTYPE html>

<html>
<head>
 <title>国内有意思的新闻</title>
 <meta charset="utf-8">
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <link rel="stylesheet" href="css/all.css" />
 <base href="" target="_top" id="base">
 <script>
 setTimeout(function() {
 	base.href = document.location.href.replace("/media", "").replace("index.html", "").replace(/([&?])wrapper=False/, "$1").replace(/&$/, "").replace(/[&?]wrapper_nonce=[A-Za-z0-9]+/, "") // Fix urls
 }, 100) // 100ms later, to workaround double js download in chrome
 </script>
</head>
<body>

<!-- editbar -->
<div class="editbg"></div>
<div class="editbar bottombar">
 <ul class="markdown-help">
  <li># H1</li>
  <li>## H2</li>
  <li>### H3</li>
  <li><i>_italic_</i></li>
  <li><b>**bold**</b></li>
  <li>~~<s>strikethrough</s>~~</li>
  <li>- Lists</li>
  <li>1. Numbered lists</li>
  <li>[References][1]<br>[1]: Can be used</li>
  <li>![image alt](img/logo.png)</li>
  <li>Inline <code>`code`</code></li>
  <li><code>```python<br>print "Code block"<br>```</code></li>
  <li>&gt; Quotes</li>
  <li>--- Horizontal rule</li>
 </ul>
 <a href="#Markdown+help" class="icon-help">?</a> 编辑: <span class="object">Post:21.body</span> <a href="#Save" class="button save">保存</a> <a href="#Delete" class="button button-delete button-outline delete">删除</a> <a href="#Cancel" class="cancel">取消</a>
</div>
<!-- EOF editbar -->

<!-- Head -->
<div class="head">
 <a class='logo nolink' href="?Home">首页</a>
</div>
<!-- EOF Head -->

<div class="message-big">正在加载初始化......</div>

<!-- Page: Main -->
<div class="center topics-list">
 <h1 class="topics-title">新话题</h1>
 <a href="#Follow" class="feed-follow feed-follow-list"><span class='text-follow'>关注新动态</span><span class='text-following'>关注</span><div class="icon-feed"></div></a>

 <!-- New Topic -->
 <a href="#New+topic" class="topic-new-link nolink">添加新话题</a>
 <div class="topic topic-new" style="display: none">
  <a href="#" class="image nolink"><div class="icon icon-topic-chat"></div></a>
  <h2 class="title"><input type="text" id="topic_title" class="text" placeholder="发表新话题"></h2>
  <div class="body"><textarea id="topic_body"  placeholder="输入话题内容" height="400px"></textarea></div>
  <h2 class="title"><input type="file" id="image_file" class="text"><input type="hidden" id="filedata"></h2>
  <div class="info"><a class="user_name user_name-my certselect" href="#Change+user" title='请登陆'>用户名</a> &#9473; <span class="added">新话题</span></div>
  <a href="#Add+new+topic" class="button button-submit">发表</a>
  <div style="clear: both"></div>
 </div>
 <!-- EOF New Topic -->

 <div class="topics-loading"><img src="img/loading.gif"/>萌萌地加载中....</div>

 <div class="topics">

  <!-- Template: Topic -->
  <div class="topic template">
   <div class="dot">&bullet;</div>
   <a href="#" class="image nolink"><div class="icon icon-topic-chat"></div></a>
   <h2 class="title"><a href="#" class="title-link">title</a></h2>
   <div class="body">Body</div>
   <a href="#" class="link"><div class="icon icon-link"></div> <span class="link-url"></span></a>
   <div class="info">
    <a class="score" href="#Upvote">
     <span class="score-inactive"> <span class="icon-up">^</span><span class="score-num">1</span> </span>
     <span class="score-active"> <span class="icon-up">^</span><span class="score-num">2</span> </span>
    </a>
    <a href="#" class="comment-num"></a>
    <span class="added">添加</span>
     &#9473; 发布者： <span class="user_name">用户名</span>
   </div>
  </div>
  <!-- EOF Template: Topic main -->

 </div>

 <a href="#More" class="topics-more">更多</a>

</div>
<!-- EOF Page: Main -->


<!-- Page: Topic -->
<div class="center topics-full">

 <div class="topic topic-full">
  <a href="#" class="image nolink"><div class="icon icon-topic-chat"></div></a>
  <a href="#Follow" class="feed-follow feed-follow-show"><span class='text-follow'>关注</span><span class='text-following'>关注</span><div class="icon-feed"></div></a>
  <h2 class="title"><a href="#" class="title-link">Title</a></h2>
  <div class="body">Body</div>
  <div class="info">
    <a class="score" href="#Upvote">
     <span class="score-inactive"> <span class="icon-up">^</span><span class="score-num">?</span> </span>
     <span class="score-active"> <span class="icon-up">^</span><span class="score-num">0</span> </span>
    </a>
   <span class="user_name">用户名</span> 发表<span class="added">添加</span>
  </div>
 </div>

 <!-- New comment -->
 <div class="comment comment-new">
  <div class="info"><a class="user_name user_name-my certselect" href="#Change+user" title='Change user'>用户</a> &#9473; <span class="added">新评论</span></div>
  <div class="body">
   <a class="button button-submit button-certselect certselect" href="#Change+user"><div class='icon-profile'></div>登陆...</a>
   <textarea id="comment_body"></textarea>
   <h2 class="title"><input type="file" id="comment_image_file" class="text"><input type="hidden" id="commentfiledata"></h2>
   <a href="#Submit+comment" class="button button-submit button-submit-form">发表评论</a>
   <div style='float: right; margin-top: -6px; position: relative; text-align: right'>
    <div class="user-size user-size-used">已经使用的空间: 22k/100k</div>
    <div class="user-size">已经使用的空间: 22k/100k</div>
    <div class="user-size-warning">你的使用完了管理员允许你的可用空间，请联系管理员增加<a href="#">你的</a>空间使用量。</div>
   </div>
   <div style="clear: both"></div>
  </div>
 </div>
<!-- Comments -->
 <div class="comments center">

  <!-- Template: Comment -->
  <div class="comment template">
   <div class="info">
    <span class="user_name">用户名</span>
    &#9473;
    <span class="added">添加</span>
    <a class="score" href="#Upvote">
     <span class="score-inactive"> <span class="icon-up">^</span><span class="score-num">1</span> </span>
     <span class="score-active"> <span class="icon-up">^</span><span class="score-num">2</span> </span>
    </a>
    <a href="#Reply" class="reply"><div class="icon icon-reply"></div> <span class="reply-text">回复</span></a>
   </div>
   <div class="body">Body</div>
  </div>
  <!-- EOF Template: Comment -->
 </div>
 <a href="#More" class="comments-more">加载更多评论</a>

</div>
<!-- EOF Page: Topic -->

<!-- Template: menu -->
<div class="menu template">
 <a href="#" class="menu-item template">Template</a>
</div>
<!-- EOF Template: menu -->


<script type="text/javascript" src="js/all.js" async></script>
<script type="text/javascript">

 document.addEventListener("DOMContentLoaded", function() {
filedataHiddenElement = document.querySelector("#filedata"); 
commentfiledataHiddenElement = document.querySelector("#commentfiledata"); 

  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object
    console.log(files);
    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

       //Only process image files.
       if (!f.type.match('image.*')) {
        alert("only image files allowed!");
         continue;
       }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          
          filedataHiddenElement.value = e.target.result;
          //not the best way to deal with with this, need to clean this up
          commentfiledataHiddenElement.value = e.target.result;
          //var u = document.createElement('p');

        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  }

document.getElementById('image_file').addEventListener('change', handleFileSelect, false);
document.getElementById('comment_image_file').addEventListener('change', handleFileSelect, false);

});

</script>
<script type="text/javascript" src="js/all.js"></script>
<script>
$(".head .more a").each( function(i, elem) {
    $(elem).attr("href", Text.fixLink($(elem).attr("href")))
});
</script>
</body>
</html>