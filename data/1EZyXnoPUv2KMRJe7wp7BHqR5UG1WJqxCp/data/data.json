{
	"title": "叶清浅",
	"description": "万家灯火，哪一盏是为我.",
	"links": "*   **网站**\n\n*   [Source code](https://github.com/HelloZeroNet)\n\n*   [Syncthing](https://syncthing.net/)",
	"next_post_id": 4,
	"demo": false,
	"modified": 1542037282,
	"post": [
		{
			"post_id": 3,
			"title": "在VPS上搭建https的ZeroNet反向代理",
			"date_published": 1541223146.913,
			"body": "<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">参考文献：</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">1.[恒馨博客-在CentOS7安装Nginx并部署Let's Encrypt免费SSL证书](https://towait.com/blog/how-to-install-lets-encrypt-on-centos-7/)</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">以获得原作者授权，侵删。</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">如转载请注明出处</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">如果你有以下几点需求：\n\n1\\. 让别人更方便地访问到你的博客，但不能一直开启电脑；</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">2\\. 方便随时随地访问ZeroNet；</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">3\\. 将ZeroNet分享给嫌麻烦朋友\n\n那么我的这篇教程将会对你有一定的帮助</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">系统支持：CentOS7</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">内存要求： <span style=\"font-size:14px;\">≥</span> 512M</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">安装思路：先在CentOS7上安装Nginx并部署Let's Encrypt免费SSL证书</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">再为Nginx配置指向ZeroNet的反向代理</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">注意事项：为了增强安全性，搭建的是HTTPS服务器，因此需要有一个自 己的域名并解析到服务器的IP，下文的配置过程中我将以lmkz.com为例还请自行替换</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">一、安装Nginx版certbot客户端</div>\n\n<div class=\"body\" data-editable=\"body\" data-editable-mode=\"meditor\">1\\. 安装certbot之前先需要安装EPEL软件源</div>\n\n`sudo yum install epel-release`\n\n2.安装Nginx版certbot\n\n`sudo yum install certbot-nginx`\n\n二、安装Nginx并进行配置\n\n1.安装Nginx\n\n`sudo yum install nginx`\n\n2.启动Nginx\n\n`sudo systemctl start nginx`\n\n3.修改主机配置文件并绑定域名\n\n`sudo vim /etc/nginx/nginx.conf`\n\n4.找到 server_name 参数并将其修改为\n\n`server_name zeronet.lmkz.com;`\n\n5\\. 保存退出后测试配置文件语法是否正确\n\n`sudo nginx -t`\n\n6.如果问题的话重启一下Nginx\n\n`sudo systemctl reload nginx`\n\n三、 设置防火墙放行规则\n\n如果你使用的是firewalld防火墙,使用以下命令\n\n`firewall-cmd --add-service=http`\n\n`firewall-cmd --add-service=https`\n\n`firewall-cmd --runtime-to-permanent`\n\n如果使用的是iptables防火墙则使用以下命令\n\n`sudo iptables -I INPUT -p tcp -m tcp --dport 80 -j ACCEPT`\n\n`sudo iptables -I INPUT -p tcp -m tcp --dport 443 -j ACCEPT`\n\n四、获取SSL证书\n\n1.执行命令\n\n`sudo certbot --nginx`\n\n<span class=\"pun\">进行这一步时,可能会出现问题</span>\n\n<span class=\"typ\">ImportError</span><span class=\"pun\">:</span> <span class=\"typ\">No</span> <span class=\"kwd\">module</span> <span class=\"pln\">named</span> <span class=\"str\">'requests.packages.urllib3'</span>\n\n<span class=\"pln\">查找之后发现这是由于python</span><span class=\"pun\">的模块版本的问题</span>，运行以下命令解决\n\n`<span class=\"pln\">sudo pip</span> <span class=\"pln\">install requests urllib3 pyOpenSSL</span> <span class=\"pun\">--</span><span class=\"pln\">force</span> <span class=\"pun\">--</span><span class=\"pln\">upgrade</span> <span class=\"pln\">sudo pip</span> <span class=\"pln\">install --upgrade</span> <span class=\"pun\">--</span><span class=\"pln\">force</span><span class=\"pun\">-</span><span class=\"pln\">reinstall</span> <span class=\"str\">'requests==2.6.0'</span>`\n\n2.输入邮箱并继续\n\n3.阅读服务条款（按A同意）并继续\n\n4.决定是否接受推广邮件（按Y/N选择是否接受）并继续\n\n5.确定激活域名（按Enter同意）并继续\n\n6.选择将http流量重定向到https而删除http访问（按2）结束\n\n五、配置Diffie-Hellman以增强安全性\n\n1.用openssl创建文件\n\n`sudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048`\n\n2.修改配置文件\n\n`sudo vim /etc/nginx/nginx.conf`\n\n向https所属的`server{}`中加入这行参数\n\n`ssl_dhparam /etc/ssl/certs/dhparam.pem;`\n\n3.保存退出后测试配置文件语法是否正确\n\n`sudo nginx -t`\n\n4.重启Nginx\n\n`sudo systemctl reload nginx`\n\n六、设置证书自动续期\n\n1\\. 使用`cron`执行定时命令\n\n`sudo crontab -e`\n\n2.添加以下内容\n\n`15 3 7 * * /usr/bin/certbot renew --quiet`\n\n前五个数据分别是分、时、日、月、年\n\n`15 3 7 * *`参数的意思是每个月7号早上3:15执行任务, `renew` 命令是certbot续期命令, `--quiet` 参数让certbot不做任何信息输出\n\n未完待续……\n\n![登录页面](http://127.0.0.1:43110/1FjA71G8f9vBkZcpL31vbijR6fq2ybXLEf/img/17072201.png)"
		},
		{
			"post_id": 2,
			"title": "New blog post",
			"date_published": 1541221568.176,
			"body": "Blog post body"
		},
		{
			"post_id": 1,
			"title": "Congratulations!",
			"date_published": 1433033779.604,
			"body": "Your zeronet blog has been successfully created!"
		}
	]
}