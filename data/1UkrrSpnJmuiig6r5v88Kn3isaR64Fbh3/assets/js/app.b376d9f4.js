(function(t){function e(e){for(var i,r,s=e[0],c=e[1],l=e[2],u=0,p=[];u<s.length;u++)r=s[u],o[r]&&p.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,s=1;s<a.length;s++){var c=a[s];0!==o[c]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},o={app:0},n=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"054b":function(t,e,a){"use strict";var i=a("a1d6"),o=a.n(i);o.a},"096c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.hasChanges?a("div",t._l(t.diff,(function(e){return a("span",{key:e.value,class:t.cssPartClass(e)},[t._v(t._s(e.value))])})),0):t._e()},o=[],n=a("bf68"),r=a("a6f4"),s={data:()=>({diff:[]}),props:{value:{type:String,default:""}},setup(t){const e=Object(r["e"])(t.value),a=Object(r["e"])([]),i=Object(r["a"])(()=>a.value.length>1);Object(r["f"])(()=>t.value,()=>{null!==e.value?a.value=Object(n["diffWords"])(e.value,t.value):e.value=t.value});const o=t=>({removed:t.removed,added:t.added});return{hasChanges:i,diff:a,cssPartClass:o,oldVal:e}}},c=s,l=(a("7dbb"),a("2877")),d=Object(l["a"])(c,i,o,!1,null,"33a6bd50",null);e["a"]=d.exports},"0ecc":function(t,e,a){},"0f5cb":function(t,e,a){"use strict";var i=a("6848"),o=a.n(i);e["default"]=o.a},1:function(t,e){},"103d":function(t,e,a){"use strict";var i=a("9ebf"),o=a.n(i);e["default"]=o.a},1891:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.disabled?a("div",[t._t("default")],2):a("div",t._g({class:t.classDropzone,on:{drop:function(e){return e.preventDefault(),t.handleDrop(e)},dragover:function(e){return e.preventDefault(),t.handleDragOver(e)},dragleave:t.handleDragLeave}},t.$listeners),[a("div",{staticClass:"caption"},[a("span",[t._v(t._s(t.caption))])]),a("div",{staticClass:"overlay"}),t._t("default")],2)])},o=[],n={props:{caption:{type:String,default:"Drop here..."},initialBorder:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},data(){return{started:!1}},computed:{classDropzone(){const{started:t,initialBorder:e}=this;return{dropzone:!0,"initial-border":e,started:t}}},methods:{handleDragOver(){this.started=!0},handleDragLeave(){this.started=!1},handleDrop(t){this.$emit("drop",t),this.started=!1}}},r=n,s=(a("1a07"),a("2877")),c=Object(s["a"])(r,i,o,!1,null,"9f66c6de",null);e["a"]=c.exports},"18d6":function(t,e,a){"use strict";var i=a("a31d"),o=a.n(i);e["default"]=o.a},"1a07":function(t,e,a){"use strict";var i=a("d92b"),o=a.n(i);o.a},"1a8b":function(t,e,a){"use strict";var i=a("dd10"),o=a.n(i);e["default"]=o.a},"1f27":function(t,e,a){},2:function(t,e){},2271:function(t,e,a){},2309:function(t,e,a){"use strict";var i=a("5898"),o=a.n(i);o.a},"25c3":function(t,e,a){},"26f4":function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));a("ac6a");var i=a("bd86"),o=a("a6f4"),n=a("3094"),r=a("b680"),s=a("e5dd"),c=a("c0d6");class l{constructor(t={}){Object(i["a"])(this,"topic",Object(o["e"])({json_id:null,topic_id:null,added:parseInt(Date.now()),category_id:null,cover_timestamp:null,details:null,imdb:null,title:null,youtube_url:null,coverNew:null,magnets:null})),Object(i["a"])(this,"topicFiles",Object(o["e"])([])),Object(i["a"])(this,"isCoverDeleted",Object(o["e"])(!1)),Object(i["a"])(this,"dirName",Object(o["a"])(()=>""+(this.topic.value.cover_timestamp||this.topic.value.added))),Object(i["a"])(this,"dirPath",Object(o["a"])(()=>n["a"].userFilePath(this.topic.value.json_id,this.dirName.value))),Object(i["a"])(this,"detailsSplitted",Object(o["a"])(()=>this.topic.value.details?this.topic.value.details.split("."):"")),Object(i["a"])(this,"detailsFirst",Object(o["a"])(()=>this.detailsSplitted.value&&this.detailsSplitted.value.slice(0,3).join(".")+" (...)")),Object(i["a"])(this,"detailsContinue",Object(o["a"])(()=>this.detailsSplitted.value&&this.detailsSplitted.value.slice(3).join("."))),Object(i["a"])(this,"imdb",Object(o["a"])(()=>{if(!this.topic.value.imdb)return!1;const t=this.topic.value.imdb.match(/tt\d+/);return!(!t||!t[0])&&t[0]})),Object(i["a"])(this,"cover",Object(o["a"])(()=>{if(this.topic.value.coverNew)return this.topic.value.coverNew;if(!this.isCoverDeleted.value&&this.topicFiles.value.length>0){if(this.topicFiles.value.includes("cover.jpg"))return this.dirPath.value+"/cover.jpg";if(this.topicFiles.value.includes("cover_thumb.jpg"))return this.dirPath.value+"/cover_thumb.jpg"}return null})),Object(i["a"])(this,"thumb",Object(o["a"])(()=>{if(this.topic.value.coverNew)return this.topic.value.coverNew;if(!this.isCoverDeleted.value&&this.topicFiles.value.length>0){if(this.topicFiles.value.includes("cover_thumb.jpg"))return this.dirPath.value+"/cover_thumb.jpg";if(this.topicFiles.value.includes("cover.jpg"))return this.dirPath.value+"/cover.jpg"}return null})),Object(i["a"])(this,"isNew",Object(o["a"])(()=>!this.topic.value.json_id||0===parseInt(this.topic.value.json_id))),this.hydrate(t),this.coverHydrate()}hydrate(t={}){this.topic.value={...this.topic.value,...t}}categoryId(t){this.topic.value.category_id=t}details(t){this.topic.value.details=t}async coverHydrate(){await Promise.all([n["a"].acmd("fileNeed",{inner_path:this.dirPath.value+"/cover_thumb.jpg"}),n["a"].acmd("fileNeed",{inner_path:this.dirPath.value+"/cover.jpg"})]),this.topicFiles.value=await n["a"].dirList(this.topic.value.json_id,this.dirName.value)||[]}setCover(t){null===t&&(this.isCoverDeleted.value=!0),this.topic.value.coverNew=t}setData(t,e){this.topic.value.hasOwnProperty(t)&&(this.topic.value[t]=e)}async save(t=!0){let{cover_timestamp:e}=this.topic.value;const{topic_id:a,json_id:i,coverNew:o,added:l,category_id:d,details:u,imdb:p,title:m,youtube_url:f}=this.topic.value;if(o&&o.match(/^data:.*?\//)){if(e)try{await n["a"].fileDelete(i,e+"/cover_thumb.jpg"),await n["a"].fileDelete(i,e+"/cover.jpg")}catch(g){n["a"].notification("error","Removing error: "+g.error)}try{e=parseInt(Date.now()),await n["a"].fileWrite(i,e+"/cover_thumb.jpg",o),await n["a"].fileWrite(i,e+"/cover.jpg",o),this.topic.value.cover_timestamp=e,this.topic.value.coverNew=o}catch(g){n["a"].notification("error","Publish error: "+g.error)}}const h=r["a"].trimSpecialAndLowercase(m),_=await n["a"].writeRowToTable(i,"topic",{added:l,category_id:d,cover_timestamp:e,details:u,imdb:p,title_lc:h,title:m,youtube_url:f,topic_id:a});return c["a"].dispatch("topics/update",{json_id:i,topic_id:a,added:l,category_id:d,cover_timestamp:e,details:u,imdb:p,title_lc:h,title:m,youtube_url:f}),t&&Object(s["b"])(i),_}async delete(){const{json_id:t,topic_id:e,category_id:a}=this.topic.value;if(this.topic.value.directory)try{await n["a"].fileDelete(t,this.dirName.value+"/cover_thumb.jpg"),await n["a"].fileDelete(t,this.dirName.value+"/cover.jpg")}catch(i){n["a"].notification("error","Removing error: "+i.error)}await c["a"].dispatch("topics/delete",{jsonId:t,topicId:e,categoryId:a}),await Object(s["b"])(t)}}},"271d":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"New":"Додати"}}'),delete t.options._Ctor}},2988:function(t,e,a){},"29c8":function(t,e,a){"use strict";a("ac6a");const i=function(t,e){const a=Object.keys(t).sort().toString();return a===e.sort().toString()};e["a"]=t=>i(t,["added","category_id","category_name","cert_auth_type","cert_user_id","cover_timestamp","details","directory","file_name","files","imdb","json_id","magnet","parent_topic_uri","publisher","publisher_url","site","size","title","title_lc","topic_id","type","youtube_url"])},"2ddc":function(t,e,a){"use strict";var i=a("9c8b"),o=a.n(i);o.a},"2e7a":function(t,e,a){},3:function(t,e){},3094:function(t,e,a){"use strict";a("ac6a");var i=a("bd86");const o="innerReady",n="response",r="wrapperReady",s="ping",c="pong",l="wrapperOpenedWebsocket",d="wrapperClosedWebsocket";class u{constructor(t){this.url=t,this.waiting_cb={},this.wrapper_nonce=document.location.href.replace(/.*wrapper_nonce=([A-Za-z0-9]+).*/,"$1"),this.connect(),this.next_message_id=1,this.init()}init(){return this}connect(){this.target=window.parent,window.addEventListener("message",t=>this.onMessage(t),!1),this.cmd(o)}onMessage(t){let e=t.data,a=e.cmd;a===n?void 0!==this.waiting_cb[e.to]?(this.waiting_cb[e.to](e.result),delete this.waiting_cb[e.to]):this.log("Websocket callback not found:",e):a===r?this.cmd(o):a===s?this.response(e.id,c):a===l?this.onOpenWebsocket():a===d?this.onCloseWebsocket():this.onRequest(a,e)}onRequest(t,e){this.log("Unknown request",e)}response(t,e){this.send({cmd:n,to:t,result:e})}cmd(t,e={},a=null){this.send({cmd:t,params:e},a)}cmdp(t,e={}){return new Promise((a,i)=>{this.cmd(t,e,t=>{t&&t.error?i(t.error):a(t)})})}send(t,e=null){t.wrapper_nonce=this.wrapper_nonce,t.id=this.next_message_id,this.next_message_id++,this.target.postMessage(t,"*"),e&&(this.waiting_cb[t.id]=e)}log(...t){console.log.apply(console,["[ZeroFrame]"].concat(t))}onOpenWebsocket(){this.log("Websocket open")}onCloseWebsocket(){this.log("Websocket close")}monkeyPatchAjax(){var t=this;XMLHttpRequest.prototype.realOpen=XMLHttpRequest.prototype.open,this.cmd("wrapperGetAjaxKey",[],t=>{this.ajax_key=t});var e=function(e,a,i){return a+="?ajax_key="+t.ajax_key,this.realOpen(e,a,i)};XMLHttpRequest.prototype.open=e,window.realFetch=window.fetch;var a=function(e){return e+="?ajax_key="+t.ajax_key,window.realFetch(e)};window.fetch=a}}var p=u,m=a("4151"),f=a.n(m),h=a("761a"),_=a.n(h);let g={};class b extends p{constructor({setSiteInfoCallback:t,options:e={}}={}){super(),Object(i["a"])(this,"router",void 0),Object(i["a"])(this,"siteInfo",void 0),Object(i["a"])(this,"serverInfo",void 0),Object(i["a"])(this,"initialized",!1),Object(i["a"])(this,"wrapperPushState",(t,e,a)=>{this.acmd("wrapperPushState",[t,e,a])}),t&&(this.setSiteInfo=t),e&&(this.options=e)}async initialize({router:t,options:e}){return this.options=e,t.pushState=this.wrapperPushState,this.router=t,!0===this.initialized||new Promise(t=>{this.initializedCallback=()=>t(!0)})}async onOpenWebsocket(){this.cmd("wrapperSetViewport","width=device-width, initial-scale=1, shrink-to-fit=no"),await Promise.all([this.updateInfo(),this.cacheJsonTable()]),"function"===typeof this.initializedCallback&&this.initializedCallback(),this.initialized=!0}acmd(...t){return new Promise((e,a)=>this.cmd(...t,t=>{t&&t.error?a(t):e(t)}))}async query(t,e=null){t=t.toString();try{const a=await this.acmd("dbQuery",[t,e]);return a}catch(a){0}}wrapperPopState({params:{state:{to:t,params:e,scrollTop:a=0}={}}}){e&&this.router&&(this.router.navigate(t,e),console.log({to:t,params:e,scrollTop:a}),setTimeout(()=>window.scroll(window.pageXOffset,a),100))}setSiteInfo(t){}onRequest(t,e){switch(t){case"wrapperPopState":this.wrapperPopState(e);break;case"setSiteInfo":this.setSiteInfo(e);break;default:this.log("Unknown command",t,e);break}}sitePublish(t,e){return this.acmd("sitePublish",{inner_path:t,sign:e})}wrapperNotification(t,e,a){return this.acmd("wrapperNotification",[t,e,a])}wrapperConfirm(t,e){return this.acmd("wrapperConfirm",[t,e])}dirListZn(t){return this.acmd("dirList",{inner_path:t})}fileListZn(t){return this.acmd("fileList",{inner_path:t})}fileWriteZn(t,e){return this.acmd("fileWrite",{inner_path:t,content_base64:e})}fileGetZn(t,e,a,i){return this.acmd("fileGet",{inner_path:t,required:e,format:a,timeout:i})}fileDeleteZn(t){return this.acmd("fileDelete",{inner_path:t})}siteSign(t){return this.acmd("siteSign",{inner_path:t})}certSelectZn(t=["zeroid.bit"]){return this.acmd("certSelect",[t])}getSiteInfo(){return this.acmd("siteInfo",{})}getServerInfo(){return this.acmd("serverInfo",{})}feedListFollowed(){return this.acmd("feedListFollow",{})}feedFollowZn(t){return this.acmd("feedFollow",[t])}async readSectionUserDataAsJson(t,e){if(!t||!e)return!1;const a=await this.getUserFileAsJson(t,"data.json"),i=_.a.plural(e);return a[i]?a[i]:{}}async writeSectionToUserData(t,e,a){if(!e)return!1;const i=await this.getUserFileAsJson(t,"data.json");return!!i[e]&&(i[e]=a,await this.fileWrite(t,"data.json",i),!0)}async dirList(t,e){if(!t||!e)return;const a=g[t]&&g[t].directory;return a?this.dirListZn(`${a}/${e}`):void 0}async fileList(t,e){if(!t||!e)return;const a=g[t]&&g[t].directory;return a?this.fileListZn(`${a}/${e}`):void 0}async fileWrite(t,e,a){if(!t||!e||!a)return;const i=g[t]&&g[t].directory;return i?this.fileWritePath(`${i}/${e}`,a):void 0}async fileGet(t,e,...a){if(!t||!e)return;const i=g[t]&&g[t].directory;return i?this.fileGetPath(`${i}/${e}`,...a):void 0}notification(t,e,a=3e3){return this.wrapperNotification(t,e,a)}confirm(t,e="OK"){return this.wrapperConfirm(t,e)}async fileWritePath(t,e){return"object"===typeof e?e=btoa(unescape(encodeURIComponent(JSON.stringify(e,void 0,"\t")))):e.match(/^data:/)&&([,e]=e.split(",")),this.fileWriteZn(t,e)}fileGetPath(t,e=!1,a="text",i=300){return this.fileGetZn(t,e,a,i)}fileDelete(t,e){if(!t||!e)return;const a=g[t]&&g[t].directory;return a?this.fileDeletePath(`${a}/${e}`):void 0}fileDeletePath(t){return this.fileDeleteZn(t)}getUserDir(t){return"data/users/"+t}async checkUserContent(t){const{defaults:{usersContent:e={}}={}}=this.options;try{let a=await this.fileGet(t,"content.json");a=JSON.parse(a)||{};const i={...a,...e};await this.fileWrite(t,"content.json",i)}catch(a){console.error(a)}}async checkUserContentPath(t){const{defaults:{usersContent:e={}}}=this.options;try{let a=await this.fileGetPath(t);a=JSON.parse(a)||{};const i={...a,...e};await this.fileWritePath(t,i)}catch(a){console.error(a)}}signUserContent(t){if(t)return this.siteSign(t)}async getPlainAuthInfo(){const{siteInfo:{cert_user_id:t,auth_address:e}}=this;return{cert_user_id:t,cert_user_hash:e}}async certSelect(){await this.certSelectZn(["zeroid.bit"]),await this.updateInfo();const{siteInfo:{auth_address:t,cert_user_id:e}}=this;return await this.prepareUserData(t,e),this.cacheJsonTable(),this.getPlainAuthInfo()}async prepareUserData(t,e){if(!t||!e)return;const a=`data/users/${t}/data.json`,i=`data/users/${t}/content.json`,o=await this.fileGetPath(a,!1);o||(await this.fileWritePath(a,JSON.parse(o)||{}),await this.publishUserContentPath(i))}async writeRowToTable(t,e,a){if(!t||!e||!a)return!1;let i=await this.fileGet(t,"data.json",!1);i=i?JSON.parse(i):{};const o=_.a.singular(e),n=_.a.plural(e),r=o+"_id",s="next_"+r;if(i[n]||(i[n]={},i[s]=0),!a[r]&&0!==a[r]){const t=i[s];a[r]=t,i[s]=t+1}return(a.target_json_id||0===a.target_json_id)&&(a.target_hash=this.getCertUserHashByJsonId(a.target_json_id),delete a.target_json_id),i[n][String(a[r])]=a,await this.fileWrite(t,"data.json",i),{json_id:t,id:a[r]}}async deleteRowFromTableById(t,e,a){if(!e||!a&&0!==a)return!1;const i=await this.getUserFileAsJson(t,"data.json"),o=_.a.plural(e);return i[o]&&i[o][String(a)]?(delete i[o][a],await this.fileWrite(t,"data.json",i),!0):void 0}async getUserFileAsJson(t,e="data.json"){const a=await this.fileGet(t,e,!1);return a?JSON.parse(a):{}}async cacheJsonTable(){const t="SELECT *, REPLACE(json.directory, 'data/users/', '') AS hash FROM json WHERE cert_user_id IS NOT NULL",e=await this.query(t);g={...f()(e,"json_id")}}getCertUserHashByJsonId(t){return g[t]&&g[t].hash}userFilePath(t,e){const a=g[t]&&g[t].directory;return a?`${a}/${e}`:null}async publishUserContent(t,e=!0,a=3e3){const i=this.userFilePath(t,"content.json");if(i)return new Promise(o=>{setTimeout(()=>o,a);const n=async()=>{try{await this.checkUserContent(t),await this.publishUserContentPath(i,e),o()}catch(a){this.notification("error",a.error,3e3),o()}};n()})}async publishUserContentPath(t,e=!0){if(t)return await this.checkUserContentPath(t),this.sitePublish(t,e)}async updateInfo(){this.siteInfo=await this.getSiteInfo(),this.serverInfo=await this.getServerInfo()}async feedListsFollowed(){return this.feedListFollowed()}async feedFollow(t,e,a=[]){const i=await this.feedListsFollowed();return i[t]=[e,a],this.feedFollowZn(i)}async feedUnfollow(t){const e=await this.feedListsFollowed();return delete e[t],this.feedFollowZn(e)}async feedIsFollowed(t){const e=await this.feedListsFollowed();return!!e[t]}async fileQuery(t,e){return this.acmd("fileQuery",[t,e])}}e["a"]=new b},3696:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return n})),a.d(e,"d",(function(){return r}));const i=t=>"File"===t.constructor.name?t:"FileList"===t.constructor.name&&t[0]?t[0]:null,o=async t=>new Promise(e=>{const a=new FileReader;a.onload=()=>e(a.result),a.readAsDataURL(t)}),n=async t=>new Promise(e=>{const a=new FileReader;a.onload=()=>e(a.result),a.readAsArrayBuffer(t)}),r=async t=>new Promise(e=>{const a=new FileReader;a.onload=()=>e(a.result),a.readAsText(t)})},"3c52":function(t,e,a){"use strict";var i=a("7208"),o=a.n(i);o.a},"3fa4":function(t,e,a){"use strict";var i=a("735b"),o=a.n(i);e["default"]=o.a},4:function(t,e){},"46e8":function(t,e,a){"use strict";var i=a("eb6a"),o=a.n(i);e["default"]=o.a},"495c":function(t,e,a){"use strict";(function(t){a("ac6a");var i=a("c282"),o=a("9348"),n=a("800b"),r=a("eef8"),s=a("1891"),c=a("af32"),l=a("85a1"),d=a("f6b3"),u=a("096c"),p=a("29c8"),m=(a("c678"),a("3573"),a("d821"),a("3d1c"),a("c817"),a("3696")),f=a("26f4"),h=a("af0c"),_=a("e5dd"),g=a("c0d6"),b=a("a6f4");e["a"]={components:{spinner:o["a"],iconInput:i["a"],dropzone:s["a"],dropzoneCover:c["a"],category:l["a"],search:d["a"],magnet:r["a"],diff:u["a"]},props:{topic:{validator:p["a"]}},setup(e,{root:{$router:a}}){const i=new f["a"](e.topic),o=Object(b["e"])({tr:"",xt:""}),r=Object(b["e"])(!1),s=()=>document.getElementById("importImageFile").click(),c=()=>document.getElementById("importTorrentFile").click(),l=()=>document.getElementById("importFile").click(),d=t=>C(t.dataTransfer.files),u=t=>$(t.dataTransfer.files),p=t=>C(t.clipboardData.files),v=t=>C(t.target.files),y=t=>$(t.target.files),w=t=>I(t.target.files);g["a"].getters["categories/list"].length<1&&g["a"].dispatch("categories/loadList");const j=t=>{const e=g["a"].getters["categories/list"][t];return null==e?null:`${e.parent_name} > ${e.name}`},C=async t=>{if((t=Object(m["a"])(t))&&!t)return;const e=await Object(m["c"])(t);i.setCover(e)},$=async t=>{if((t=Object(m["a"])(t))&&!t)return;const e=await Object(m["b"])(t),{xt:a="",dn:r="",dl:s="",tr:c="",publisher:l="",publisher_url:d="",files:u=""}=Object(n["a"])(e);o.value.xt=a,o.value.tr=c,i.topic.value.size=s,i.topic.value.title=r,i.topic.value.publisher=l,i.topic.value.publisher_url=d,i.topic.value.files=u},I=async e=>{if((e=Object(m["a"])(e))&&!e)return;const a=await Object(m["d"])(e),[o]=JSON.parse(a),n=new File([t.from(o.coverFile,"base64")],"cover.jpg"),r=new File([t.from(o.torrentFile,"base64")],"data.torrent");await Promise.all([C(n),$(r)]),i.topic.value={...i.topic.value,topic_id:null,category_id:i.topic.value.category_id,title:o.title,details:o.details,imdb:o.imdb,youtube_url:null,publisher:o.publisher,publisher_url:o.publisher_url}},O=async()=>{i.setData("json_id",g["a"].getters.currentUser.json_id),i.setData("added",parseInt(Date.now()));const{id:t,json_id:e}=await i.save(!1),n=[];o.value.xt&&n.push({xt:o.value.xt,dn:i.topic.value.title,dl:i.topic.value.size,tr:o.value.tr,added:parseInt(Date.now()),files:i.topic.value.files||"",publisher_url:i.topic.value.publisher_url,publisher:i.topic.value.publisher});const r=n.map(a=>{const{xt:i,tr:o,dl:n,dn:r,added:s,files:c,publisher_url:l,publisher:d}=a,u=new h["a"]({xt:i,tr:o,dl:n,dn:r,added:s,files:c,publisher:d,publisher_url:l}),p={target_type:"topic",target_json_id:e,target_id:t};return u.save(p,!1)});await Promise.all(r),await Object(_["b"])(e),a.go("topicView",{json_id:e,id:t})},k=Object(b["a"])({set(t){if(t){t=decodeURI(t);try{i.setData("title",t.match(/dn=(.*?)(?:&|$)/i)[1])}catch(e){console.log("Error parsing title from magnet...")}o.value.tr=t.match(/tr=(.*?)(?:&|$)/i)[1],o.value.xt=t.match(/btih:(.*?)(?:&|$)/i)[1]}},get(){return o.value.xt&&i.topic.value.title&&o.value.tr?`?xt=urn:btih:${o.value.xt}&dn=${encodeURI(i.topic.value.title)}&tr=${o.value.tr}`:""}});return{importImageFileSelect:s,importTorrentFileSelect:c,importFileSelect:l,handleDropCoverFile:d,handlePasteCoverFile:p,handleChangeImportFile:w,handleDropTorrentFile:u,handleChangeTorrentFile:y,handleChangeCoverFile:v,isNewTopic:i.isNew,topic_data:i.topic,setCover:t=>i.setCover(t),cover:i.cover,thumb:i.thumb,magnetval:k,formTitle:"",loading:"",selectTitle:t=>{t?a.go("topicEdit",{json_id:t.json_id,id:t.topic_id}):r.value=!1},titleChanged:r,categorySelected:j,submit:O}}}}).call(this,a("b639").Buffer)},"4fad":function(t,e){const a=[["Переписано ядро сайту","Змінена логіка додавання та відображення нових матеріалів","Додано можливість вставлення обкладинок із буфера обміну","Додано можливість вставлення обкладинок і матеріалів перетягуванням у форму","Додано можливість вставлення матеріалів перетягуванням у список magnet на сторінці матеріалу"],["Додано Diff для значень форм на сторінках Додавання/Редагування","Додано пошук при вводі назви матеріалу і можливість вибрати попередньо створений матеріал для редагування"],["Додано окрему категорію в ZeroHello Newsfeed 'Movies/Shows'","Додано читання категорій в ZeroHello","Додано сторінку налаштувань користувача"],["Змінено макет сторінки перегляду","Інші зміни"],["Додано коментарі","Додано можливість видалення матеріалів із форми редагування"],["Додано: можливість редагувати власні матеріали","Додано changelog та вивід версійності"],["Забрано: білдер релізів через його надто велику складність для користувача","Додано спрощену форму із валідацією введених даних, частина яких чудово в один клік імпортуються із торрент файлу","Змінено вигляд виводу релізів на головній сторінці","Багато інших змін"],["Перша робоча версія каталогу із білдером релізів"]],i=t=>"* "+t,o=t=>t.map(t=>i(t)).join("\n"),n=()=>(.001*a.length).toFixed(3),r=()=>o(a[0]),s=()=>{const t=a.map((t,e)=>`v${(.001*(a.length-e)).toFixed(3)}\n${o(t)}`);return t.join("\n\n")};t.exports={version:n(),changelog:s(),recentChanges:r()}},5:function(t,e){},5660:function(t,e,a){"use strict";var i=a("1f27"),o=a.n(i);o.a},"56d7":function(t,e,a){"use strict";a.r(e);var i=a("5f5b"),o=a("0874"),n=(a("ac6a"),a("2b0e")),r=a("7bb1"),s=a("2593"),c=a("4c93");Object.keys(c).forEach(t=>{Object(r["c"])(t,c[t])}),Object(r["c"])("confirmation",{params:["target"],validate:(t,{target:e})=>t===e,message:"{_field_} does not match {target}"}),Object(r["d"])("en",s),n["default"].component("ValidationObserver",r["a"]),n["default"].component("ValidationProvider",r["b"]);var l=a("a925"),d=a("a6f4"),u=a("3094");const p={optional:".*(.avi|.bin|.pdf|.epub|.gif|.jpeg|.jpg|.mp3|.mp4|.nes|.ogg|.pdf|.png|.sna|.wav|.webm|.zip)"};var m={usersContent:p},f=a("bd11"),h=a.n(f),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.view?a(t.view,{key:t.view.name,tag:"component"}):t._e()},g=[],b={props:["name"],computed:{view(){const t=this.name||"component";return this.$router.current[t]?this.$router.current[t]:(console.log("ZeroVue-Router: please set up component view correctly!"),!1)}}},v=b,y=a("2877"),w=Object(y["a"])(v,_,g,!1,null,null,null),j=w.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:t.$router.url(t.toPath,t.toParams)},on:{click:t.handleClick}},[t._t("default")],2)},$=[],I={props:{to:{validator(t){return"string"===typeof t||"object"===typeof t&&(!(!t.path||"string"!==typeof t.path)&&(!t.params||"object"===typeof t.params))}},params:{type:Object,default(){return{}}}},computed:{toIsString(){return this.to&&"string"===typeof this.to},toPath(){return this.toIsString?this.to:this.to.path},toParams(){return this.toIsString?this.params:this.to.params}},methods:{handleClick(t){t&&(t.ctrlKey||t.metaKey)||(t.preventDefault(),this.$router.go(this.toPath,this.toParams),this.$emit("click"))}}},O=I,k=Object(y["a"])(O,C,$,!1,null,null,null),S=k.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-navbar",{attrs:{id:"app-header",toggleable:"md",type:"dark"}},[a("b-nav-toggle",{attrs:{target:"nav_collapse"}}),a("b-navbar-brand",{key:"t-"+t.title},[a("span",{attrs:{title:t.description},domProps:{textContent:t._s(t.title)}}),a("b-badge",{attrs:{title:t.recentChanges}},[t._v("v"+t._s(t.version))])],1),a("b-collapse",{staticClass:"mt-2 mt-md-0",attrs:{"is-nav":"",id:"nav_collapse"}},[a("b-navbar-nav",{attrs:{"is-nav":""}},[a("b-nav-item",{attrs:{active:"home"==t.route,to:"home"}},[t._v(t._s(t.$t("Home")))]),a("b-nav-item",{attrs:{active:"categories"==t.route,to:"categories"}},[t._v(t._s(t.$t("Categories")))]),t.isLoggedIn?a("b-nav-item",{attrs:{active:"topicNew"==t.route,to:"topicNew"}},[t._v(t._s(t.$t("New Topic")))]):t._e(),t.isLoggedIn?a("b-nav-item",{attrs:{active:"my"==t.route,to:"my"}},[t._v(t._s(t.$t("My")))]):t._e(),"1PpvHgysHyZk6AEaG38SzH2FXgcr74vJt5"==t.currentUser.cert_user_hash?a("b-nav-item",{attrs:{active:"sysinfo"==t.route,to:"sysinfo"}},[t._v(t._s(t.$t("Sysinfo")))]):t._e()],1),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",[a("spinner",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],attrs:{scale:1}})],1),t.isLoggedIn?a("b-nav-item-dropdown",{attrs:{text:t.currentUser.cert_user_id,right:""}},[a("b-dropdown-item",{attrs:{to:"settings"}},[t._v("\n          "+t._s(t.$t("Settings"))+"\n        ")]),a("b-dropdown-divider"),a("b-dropdown-item",{on:{click:t.login}},[t._v(t._s(t.$t("Change acount / Logout")))])],1):a("b-nav-item",{on:{click:t.login}},[t._v(t._s(t.$t("Login")))])],1)],1)],1)},x=[],P=a("4fad"),E=a("2f62"),F=a("9b02"),N=a.n(F),L=a("2561"),D=a.n(L),U=a("9348"),R={data(){return{version:0,changes:""}},components:{spinner:U["a"]},computed:{...Object(E["c"])(["isLoading","isLoggedIn","currentUser"]),route(){return this.$router.current.name},title(){return N()(u["a"],"siteInfo.content.title","")},description(){return N()(u["a"],"siteInfo.content.description","")}},created(){this.version=P["version"],this.recentChanges=P["recentChanges"],this.fillUserInfoFromDB()},methods:{...Object(E["b"])(["setCurrentUser"]),async fillUserInfoFromDB(){let t=await u["a"].getPlainAuthInfo();if(t.cert_user_id){const e=await this.getUserFromDb(t.cert_user_id)||{},{json_id:a}=e;t={...t,json_id:a}}this.setCurrentUser(t)},async getUserFromDb(t){if(!t)return;const e=new D.a("json").where("cert_user_id",t),[a]=await u["a"].query(e);return a},async login(){u["a"].siteInfo.rev<160?u["a"].notification("error","Comments requires at least ZeroNet 0.3.0 Please upgade!"):(await u["a"].certSelect(),this.fillUserInfoFromDB())}}},A=R,z=(a("738d"),a("f18c")),H=Object(y["a"])(A,T,x,!1,null,"3e6f27f0",null);"function"===typeof z["default"]&&Object(z["default"])(H);var J=H.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-input",{staticClass:"mt-4 mb-4 col-10 mx-auto",attrs:{placeholder:t.$t("Filter category by name"),size:"sm",type:"text"},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),a("c-categories",{attrs:{"search-term":t.searchTerm}})],1)},B=[],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.filteredCategories,(function(e,i){return a("div",{key:i},[a("div",{staticClass:"text-center"},[a("h3",{staticClass:"mt-2 mb-1"},[t._v(t._s(i))]),t._l(e,(function(e){return a("b-button",{key:e.category_id,staticClass:"m-1",attrs:{variant:t.buttonVariant(e.parent_id),to:{path:"category",params:{id:e.category_id}},size:"sm"}},[t._v("\n        "+t._s(e.name)+" ("+t._s(e.item_number)+")\n      ")])}))],2)])})),0)},Z=[],G=a("6edf"),M=a.n(G),W=a("c0d6");function Y(t){!0!==Boolean(t)?setTimeout(()=>W["a"].dispatch("setLoading",t),100):W["a"].dispatch("setLoading",t)}async function Q(t){return t||0===t}let X=0,K=0;var tt={props:{value:{type:String,default:""},searchTerm:{type:String}},data(){return{loading:!0,btnVariants:["primary","secondary","success","danger","warning"],categories:{}}},async created(){Y(!0),await this.fetchData(),Y(!1)},computed:{filteredCategories(){if(!this.searchTerm)return this.categories;const t=t=>{if(t.item_number<1)return!1;if(t.length<1)return!1;const e=t.name.toLowerCase(),a=this.searchTerm.toLowerCase();return e.includes(a)},e={};for(const a in this.categories)e[a]=this.categories[a].filter(t);return e}},methods:{async fetchData(){this.$store.getters["categories/list"].length<1&&(Y(!0),await this.$store.dispatch("categories/loadList"),Y(!1));const t=Object.values(this.$store.getters["categories/list"]).filter(t=>t.item_number>0);this.categories=M()(t,"parent_name")},buttonVariant(t){5!==X&&t===K||(X=0),K=t;const e=this.btnVariants[X];return X++,e}}},et=tt,at=(a("9dd5"),Object(y["a"])(et,q,Z,!1,null,"0fca83fa",null)),it=at.exports,ot={components:{cCategories:it},data(){return{searchTerm:""}}},nt=ot,rt=a("7d3e"),st=Object(y["a"])(nt,V,B,!1,null,"07b05d1e",null);"function"===typeof rt["default"]&&Object(rt["default"])(st);var ct=st.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n  "+t._s(t.siteInfo)+"\n  "),a("br"),a("br"),a("br"),t._v("\n  "+t._s(t.serverInfo)+"\n")])},dt=[],ut={name:"sysinfo",computed:{siteInfo(){return u["a"].siteInfo},serverInfo(){return u["a"].serverInfo}}},pt=ut,mt=Object(y["a"])(pt,lt,dt,!1,null,"4aa3a652",null),ft=mt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v(t._s(t.$t("Settings")))]),a("h2",[t._v(t._s(t.$t("Feeds")))]),a("b-card",[t._l(t.feed_lists,(function(t,e){return a("feed-follow-button",{key:e,staticClass:"follow-feed m-1",attrs:{"follow-name":e,"follow-query":t[0],"btn-follow-name":e,"btn-unfollow-name":e}})})),a("em",{staticClass:"small text-muted mt-2",attrs:{slot:"footer"},slot:"footer"},[t._v("\n      * "+t._s(t.$t("Showing only categories you follow. You could follow any other category on category page."))),a("br"),t._v("\n      ** "+t._s(t.$t("You can follow back any category immediatly after you do unfollow and until you stay on this page."))+"\n    ")])],2)],1)},_t=[],gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],key:"follow-"+(t.followName||"Default")+"-"+t.feed_followed,attrs:{title:t.btnFollowTitle||t.$t("You could follow updates on ZeroHello home page feed"),pressed:t.feed_followed,size:"sm",variant:"primary"},on:{click:t.feed_default_follow}},[t.feed_followed?a("icon",{attrs:{name:"check"}}):a("icon",{attrs:{name:"plus"}}),t._v("\n  "+t._s(t.feed_followed?t.btnUnfollowName||t.$t("Followed"):t.btnFollowName||t.$t("Follow page"))+"\n")],1)},bt=[],vt=(a("46fe"),a("c369"),{props:{followName:{type:String,required:!0},followQuery:{type:String},btnFollowName:{type:String},btnUnfollowName:{type:String},btnFollowTitle:{type:String}},data(){return{feed_followed:!1}},async created(){this.feed_followed=await u["a"].feedIsFollowed(this.followName)},methods:{async feed_default_follow(){let t;this.feed_followed?(t=await u["a"].feedUnfollow(this.followName),this.$emit("unfollow")):(t=await u["a"].feedFollow(this.followName,this.followQuery),this.$emit("follow")),"ok"===t&&(this.feed_followed=!this.feed_followed)}}}),yt=vt,wt=a("accb"),jt=Object(y["a"])(yt,gt,bt,!1,null,"055c4ea9",null);"function"===typeof wt["default"]&&Object(wt["default"])(jt);var Ct=jt.exports,It={components:{feedFollowButton:Ct},data(){return{feed_lists:[]}},async created(){Y(!0),await this.updateFollowings(),Y(!1)},computed:{feed_names(){return Object.keys(this.feed_lists)}},methods:{async updateFollowings(){this.feed_lists=await u["a"].feedListsFollowed()}}},Ot=It,kt=a("46e8"),St=Object(y["a"])(Ot,ht,_t,!1,null,"6a98a54d",null);"function"===typeof kt["default"]&&Object(kt["default"])(St);var Tt=St.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.validId(t.topic.topic_id)?a("div",{key:"topic-view-"+t.topic.topic_id},[t.topic.category_id?a("breadcrumb",[a("router-link",{attrs:{to:{path:"category",params:{id:t.topic.category_id}}},domProps:{textContent:t._s(t.topic.category_name)}})],1):t._e(),a("b-row",[a("b-col",[a("c-details",{attrs:{topic:t.topic}})],1)],1),a("b-row",[a("b-col",[a("magnet-list",{key:"magnet-list-"+t.topic.topic_id,attrs:{"target-id":t.topic.topic_id,"target-json-id":t.topic.json_id}})],1)],1),a("b-row",[a("b-col",[a("comments",{key:"magnet-list-"+t.topic.topic_id,attrs:{"target-id":t.topic.topic_id,"target-json-id":t.topic.json_id}})],1)],1)],1):t._e()},Pt=[],Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"breadcrumps"},[a("router-link",{attrs:{to:{path:"home"}}},[t._v("Головна")]),t._t("default")],2)},Ft=[],Nt={name:"breadcrump"},Lt=Nt,Dt=(a("59cf"),Object(y["a"])(Lt,Et,Ft,!1,null,null,null)),Ut=Dt.exports,Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comments"},[t.comments_count>0?a("p",{staticClass:"comment-head"},[t._v("Коментарі ("+t._s(t.comments_count)+"):")]):t._e(),a("transition-group",{attrs:{name:"list",tag:"div"}},t._l(t.comments,(function(e,i){return a("div",{key:"comment-"+i,staticClass:"comment"},[a("p",{staticClass:"meta"},[t._v("\n        #"+t._s(i+1)+" by "+t._s(e.cert_user_id)+", on "+t._s(t.timestampToStr(e.added))+"\n      ")]),a("div",{staticClass:"text",domProps:{textContent:t._s(e.body)}}),a("rate",{key:"comment-rating-"+i+"-"+t.isLoggedIn,staticClass:"rating",attrs:{"target-type":"comment","target-json-id":e.json_id,"target-id":e.comment_id}})],1)})),0),t.isLoggedIn?a("spinner",{attrs:{loading:t.loading}},[a("div",{staticClass:"comment-form"},[t._v("\n      Enter comment:\n      "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"},{name:"validate",rawName:"v-validate",value:"required:true|max:750",expression:"'required:true|max:750'"}],staticClass:"form-control",attrs:{name:"comment"},domProps:{value:t.comment},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendComment(e)},input:function(e){e.target.composing||(t.comment=e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("comment"),expression:"errors.has('comment')"}],staticClass:"error-msg invalid"},[t._v(t._s(t.errors.first("comment")))]),a("b-button",{attrs:{variant:"success"},on:{click:t.sendComment}},[t._v("Send (enter)")]),a("div",{staticClass:"clear"})],1)]):t._e()],1)},At=[],zt=a("b9b9"),Ht=a.n(zt),Jt=a("e5dd"),Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[t.loading?a("div",{staticClass:"overlay"}):t._e(),t.loading?a("div",{staticClass:"spinner"},[a("div",[a("icon",{staticClass:"icons-color spinner-middle",attrs:{name:"circle-notch",scale:t.scale,spin:""}})],1)]):t._e(),a("div",{class:{content:!0,loading:t.loading}},[t._t("default")],2)])},Bt=[],qt=(a("ff81"),{props:{inline:{type:Boolean,default:!1},scale:{type:Number,default:4},loading:{type:Boolean,default:!1}}}),Zt=qt,Gt=(a("3c52"),Object(y["a"])(Zt,Vt,Bt,!1,null,"159c5421",null)),Mt=Gt.exports,Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"scale"+t.scale},[a("div",{class:["rate","upvote",{current:t.upvoted}],on:{click:function(e){return t.vote("+")}}},[a("icon",{staticClass:"icon",attrs:{scale:t.scale,name:"thumbs-up"}}),a("span",{staticClass:"counter",domProps:{textContent:t._s(t.positive)}})],1),a("div",{class:["rate","downvote",{current:t.downvoted}],on:{click:function(e){return t.vote("-")}}},[a("icon",{staticClass:"icon",attrs:{scale:t.scale,name:"thumbs-down"}}),a("span",{staticClass:"counter",domProps:{textContent:t._s(t.negative)}})],1)])},Yt=[],Qt=(a("b5bc"),a("a39b"),{props:{targetType:{type:String,default:"topic"},targetJsonId:{type:Number,default:null},targetId:{type:Number,default:null},scale:{type:Number,default:1}},data:()=>({inProgress:!1,currentVote:null,positive:null,negative:null}),created(){this.updateData()},computed:{...Object(E["c"])(["isLoggedIn","currentUser"]),upvoted(){return this.currentVote&&"+"===this.currentVote.direction},downvoted(){return this.currentVote&&"-"===this.currentVote.direction}},methods:{async updateData(){const{targetId:t,targetType:e,targetJsonId:a}=this,{positive:i,negative:o}=this.$store.getters["ratings/getRatings"](e,a,t);this.positive=i,this.negative=o,!this.currentVote&&this.currentUser.json_id&&(this.currentVote=await this.$store.dispatch("ratings/loadVote",{targetType:e,targetJsonId:a,targetId:t}))},async vote(t="+"){const{targetId:e,targetType:a,targetJsonId:i}=this;!this.currentVote&&this.currentUser.json_id&&(this.currentVote=await this.$store.dispatch("ratings/loadVote",{targetType:a,targetJsonId:i,targetId:e}));const o=this.currentVote||{},{direction:n}=o;if(!this.isLoggedIn||this.inProgress||n===t)return;this.inProgress=!0;const r="+"===t?"ratings/upvote":"ratings/downvote",s=await this.$store.dispatch(r,{targetType:a,targetJsonId:i,targetId:e,previousVote:n});s&&(o.direction=t,this.currentVote=o,this.updateData(),Object(Jt["b"])(this.currentUser.json_id)),this.inProgress=!1}}}),Xt=Qt,Kt=(a("5ddb"),Object(y["a"])(Xt,Wt,Yt,!1,null,"09edd2de",null)),te=Kt.exports,ee={components:{spinner:Mt,rate:te},props:{targetId:{type:Number},targetJsonId:{type:Number,default:null}},data(){return{comment:"",loading:!1,comments:[],comment_data:{comment_id:0}}},created(){this.refreshData()},computed:{...Object(E["c"])(["isLoggedIn","currentUser"]),comments_count(){return this.comments.length}},methods:{async refreshData(){const{targetJsonId:t,targetId:e}=this;let a=this.$store.getters["comments/topicList"](t,e);a||(await this.$store.dispatch("comments/topicLoad",{target_json_id:t,target_id:e}),a=this.$store.getters["comments/topicList"](t,e)),this.comments=a},timestampToStr(t){return Ht()(t,"default")},scrollToLastComment(){const t=document.querySelector(".comment:last-child");if(t)return t.scrollIntoView({behavior:"smooth",block:"center"})},async sendComment(){await this.$validator.validateAll(),this.errors.any()||(this.loading=!0,await this.$store.dispatch("comments/topicAdd",{target_json_id:this.targetJsonId,target_id:this.targetId,body:this.comment}),this.refreshData(),this.comment="",this.$emit("submitted",this.targetJsonId,this.targetId),this.$nextTick((function(){this.$validator.reset(),this.scrollToLastComment()})),Object(Jt["b"])(this.currentUser.json_id),this.loading=!1)}}},ae=ee,ie=(a("9453"),Object(y["a"])(ae,Rt,At,!1,null,"96f59790",null)),oe=ie.exports,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-3"},[a("magnet-add",{attrs:{"target-id":t.targetId,"target-json-id":t.targetJsonId},on:{added:t.handleAdd},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.handleAddAction;return[a("b-row",[a("b-col",{attrs:{md:"6"}},[t.items.length>0?a("b-input-group",[a("b-form-input",{attrs:{placeholder:t.$t("Type to Search")},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),a("b-input-group-append",[a("b-button",{attrs:{disabled:!t.filter},domProps:{textContent:t._s(t.$t("Clear"))},on:{click:function(e){t.filter=""}}})],1)],1):t._e()],1),a("b-col",{attrs:{md:"6"}},[t.isLoggedIn?a("b-button",{staticClass:"float-right",attrs:{variant:"success",title:t.$t("Import from .torrent file")},on:{click:i}},[a("icon",{attrs:{scale:"1",name:"upload"}}),t._v(" "+t._s(t.$t("Upload torrent"))+"\n          ")],1):t._e()],1)],1),t.items.length>0?a("b-table",{staticClass:"mt-1",attrs:{striped:"",small:"",hover:"",responsive:"md",fields:t.tableFields,items:t.items,filter:t.filter},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[t._v(t._s(e.index+1))]}},{key:"cell(publisher)",fn:function(e){return[e.item.publisher?a("external-link",{attrs:{href:e.item.publisher_url,title:"External link: "+e.item.publisher_url}},[a("icon",{attrs:{name:"link",scale:"1",color:"#fff"}}),t._v(" "+t._s(e.item.publisher)+"\n          ")],1):t._e()]}},{key:"cell(title)",fn:function(e){return[a("a",{attrs:{target:"_blank",href:"magnet:?xt=urn:btih:"+e.item.xt+"&dn="+encodeURI(e.item.dn)+"&tr="+e.item.tr}},[t._v(t._s(e.item.dn))])]}},{key:"cell(added)",fn:function(e){return[e.item.added?a("p",{staticClass:"date",domProps:{textContent:t._s(t.timestampToStr(e.item.added))}}):t._e()]}},{key:"cell(size)",fn:function(e){return[e.item.dl?a("p",{staticClass:"size",domProps:{textContent:t._s(t.filesize(e.item.dl))}}):t._e()]}},{key:"cell(rating)",fn:function(e){return[a("rate",{key:"magnet-"+e.item.magnet_id+"-"+t.isLoggedIn,staticClass:"d-flex",attrs:{"target-type":"magnet","target-json-id":e.item.json_id,"target-id":e.item.magnet_id}})]}},{key:"cell(actions)",fn:function(e){return[a("b-button",{attrs:{size:"sm"},on:{click:e.toggleDetails}},[t._v(t._s(t.$t("Details")))]),t._v(" \n          "),t.isAuthor(e.item.json_id)?a("b-button",{attrs:{size:"sm"},on:{click:function(a){return t.deleteItem(e.item.json_id,e.item.magnet_id)}}},[t._v("X")]):t._e()]}},{key:"row-details",fn:function(e){return[a("div",{staticClass:"files",domProps:{textContent:t._s(e.item.files)}})]}}],null,!0)}):t._e()]}}])})],1)},re=[],se=a("49d5"),ce=a.n(se),le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{on:{click:t.handleClick}},[t._t("default")],2)},de=[],ue={props:{href:{type:String}},methods:{handleClick(){if(confirm("Are you sure to open this clearnet link?\n\n"+this.href))return window.open(this.href)}}},pe=ue,me=(a("d138"),Object(y["a"])(pe,le,de,!1,null,"878a7dc0",null)),fe=me.exports,he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropzone",{attrs:{"initial-border":!1,disabled:!t.isLoggedIn},on:{drop:t.handleDropTorrentFile}},[a("input",{attrs:{id:"magnet-add-importTorrentFile",type:"file",accept:"application/x-bittorrent",hidden:""},on:{change:t.handleChangeTorrentFile}}),t.$scopedSlots.default?t._e():a("b-button",{attrs:{variant:"success",title:t.$t("Import from .torrent file")},on:{click:t.importTorrentFileSelect}},[a("icon",{attrs:{scale:"1",name:"upload"}}),t._v(" "+t._s(t.$t("Upload torrent"))+"\n  ")],1),t._t("default",null,{handleAddAction:t.importTorrentFileSelect})],2)},_e=[],ge=(a("3d1c"),a("800b")),be=a("1891"),ve=a("3696"),ye=a("af0c"),we={components:{dropzone:be["a"]},props:{targetId:{type:Number},targetJsonId:{type:Number,default:null}},setup(t,{emit:e}){const a=Object(d["a"])(()=>W["a"].getters.isLoggedIn),i=async i=>{if(!a||(i=Object(ve["a"])(i))&&!i)return;i=await Object(ve["b"])(i);const{xt:o="",dn:n="",dl:r="",tr:s="",publisher:c="",publisher_url:l="",files:d=""}=Object(ge["a"])(i),u=new ye["a"]({xt:o,tr:s,dl:r,dn:n,files:d,publisher:c,publisher_url:l});await u.save({target_type:"topic",target_json_id:t.targetJsonId,target_id:t.targetId}),e("added")},o=t=>i(t.target.files),n=t=>i(t.dataTransfer.files),r=()=>document.getElementById("magnet-add-importTorrentFile").click();return{isLoggedIn:a,handleChangeTorrentFile:o,handleDropTorrentFile:n,importTorrentFileSelect:r}}},je=we,Ce=a("0f5cb"),$e=Object(y["a"])(je,he,_e,!1,null,"d9e27fc0",null);"function"===typeof Ce["default"]&&Object(Ce["default"])($e);var Ie=$e.exports,Oe={components:{externalLink:fe,rate:te,magnetAdd:Ie},props:{targetId:{type:Number},targetJsonId:{type:Number,default:null}},setup(t){const{$i18n:e}=Object(d["c"])(),a=[{key:"index",label:"#",sortable:!0},{key:"title",label:e.t("Title"),sortable:!0},{key:"publisher",label:e.t("Source"),sortable:!0,tdClass:"text-nowrap"},{key:"added",label:e.t("Size")},{key:"size",label:e.t("Size"),sortable:!0,tdClass:"text-nowrap"},{key:"actions",label:e.t("Actions"),tdClass:"d-flex"},{key:"rating",label:e.t("Rating"),sortable:!0,tdClass:"text-center"}],i=Object(d["e"])([]),o=Object(d["e"])(null),n=Object(d["a"])(()=>W["a"].getters.isLoggedIn),r=async()=>{const{targetId:e,targetJsonId:a}=t,o=u["a"].getCertUserHashByJsonId(a),n=t=>`(select count(*) from ratings inner join json as sub1_json on sub1_json.json_id = ratings.json_id where ratings.target_type = 'magnet' and ratings.direction = '${t}' and ratings.target_id = magnets.magnet_id and magnets.target_hash = REPLACE(sub1_json.directory, 'data/users/', ''))`,r=new D.a("magnets").where({"magnets.target_hash":o,"magnets.target_id":e});r.join("json","json.json_id","magnets.json_id"),r.select("*",D.a.raw(n("+")+" as rating_positive"),D.a.raw(n("-")+" as rating_negative")),i.value=await u["a"].query(r),console.log(r),console.log(i.value),await W["a"].dispatch("ratings/storeRatings",{type:"magnet",idField:"magnet_id",items:i.value},{root:!0})},s=async(t,e)=>{Q(e)&&confirm("Are you sure to delete?")&&(await u["a"].deleteRowFromTableById(t,"magnet",e),Object(Jt["b"])(t),r())};r();const c=t=>Ht()(t,"d/m/yy H:M");return{timestampToStr:c,filesize:ce.a,isAuthor:Jt["a"],tableFields:a,items:i,filter:o,isLoggedIn:n,handleAdd:r,deleteItem:s}}},ke=Oe,Se=(a("2309"),a("5a39")),Te=Object(y["a"])(ke,ne,re,!1,null,"e84d7612",null);"function"===typeof Se["default"]&&Object(Se["default"])(Te);var xe=Te.exports,Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("overlay",{staticClass:"overlay",attrs:{bg:t.thumb,height:"100%","bg-height":"100vh"}},[a("div",{staticClass:"flex-info"},[a("div",{staticClass:"cover-container"},[a("img",{attrs:{src:t.cover,alt:t.topic.title}})]),a("div",{staticClass:"info-container"},[a("h2",{staticClass:"title"},[t._v("\n        "+t._s(t.topic.title)+"\n        "),t.isAuthor(t.topic.json_id)?a("router-link",{staticClass:"edit",attrs:{title:t.topic.title,to:{path:"topicEdit",params:{json_id:t.topic.json_id,id:t.topic.topic_id}}}},[a("icon",{attrs:{scale:"1",name:"pencil-alt"}})],1):t._e()],1),a("div",{staticClass:"actions"},[t.imdb?a("external-link",{staticClass:"btn btn-sm btn-imdb",attrs:{href:"https://www.imdb.com/title/"+t.imdb+"/",title:"YouTube"}},[a("icon",{attrs:{name:"brands/imdb",scale:"2",color:"#fff"}}),t._v(" IMDB\n        ")],1):t._e(),t.topic.youtube_url?a("external-link",{staticClass:"btn btn-sm btn-youtube",attrs:{href:t.topic.youtube_url,title:"YouTube"}},[a("icon",{attrs:{name:"brands/youtube-square",scale:"2",color:"#fff"}}),t._v(" YouTube\n        ")],1):t._e(),t.imdb?a("external-link",{staticClass:"btn btn-sm btn-opensubtitle",attrs:{href:"https://www.opensubtitles.org/uk/search/sublanguageid-all/imdbid-"+t.imdb,title:"IMDB"}},[a("icon",{attrs:{name:"font",scale:"2",color:"#fff"}}),t._v(" OpenSubtitles\n        ")],1):t._e()],1),a("rate",{key:"topic-rating-"+t.isLoggedIn,staticClass:"rating",attrs:{scale:2,"target-type":"topic","target-json-id":t.topic.json_id,"target-id":t.topic.topic_id}}),t.topic.added?a("p",{staticClass:"date",domProps:{textContent:t._s(t.timestampToStr(t.topic.added))}}):t._e(),a("div",{staticClass:"description"},[t.detailsContinue?a("details",[a("summary",[t._v(t._s(t.detailsFirst))]),a("p",{domProps:{textContent:t._s(t.detailsContinue)}})]):a("div",{domProps:{textContent:t._s(t.topic.details)}})])],1)])])},Ee=[],Fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"overlay-container",style:{width:t.width,height:t.height}},[a("div",{staticClass:"overlay",style:{backgroundImage:"url("+t.bg+")"}}),a("div",{staticClass:"content-container"},[t._t("default")],2)])},Ne=[],Le={props:{bg:{type:String},width:{type:String,default:"100%"},height:{type:String,default:"230px"},centerer:{type:Boolean,default:!1}}},De=Le,Ue=(a("771d"),Object(y["a"])(De,Fe,Ne,!1,null,"0e20bde9",null)),Re=Ue.exports,Ae=(a("7224"),a("b021"),a("4286"),a("49e7"),a("3573"),a("8197"),a("26f4")),ze={components:{overlay:Re,externalLink:fe,rate:te},props:{topic:Object},setup(t){const e=Object(d["a"])(()=>W["a"].getters.isLoggedIn),a=new Ae["a"](t.topic),{cover:i,thumb:o,detailsFirst:n,detailsContinue:r,imdb:s}=a,c=t=>Ht()(t,"fullDate");return{cover:i,thumb:o,detailsFirst:n,detailsContinue:r,imdb:s,isAuthor:Jt["a"],isLoggedIn:e,timestampToStr:c}}},He=ze,Je=(a("5660"),Object(y["a"])(He,Pe,Ee,!1,null,"0ca10fa2",null)),Ve=Je.exports,Be={components:{cDetails:Ve,breadcrumb:Ut,comments:oe,magnetList:xe},data(){return{topic:{id:null,category_id:null},comments:{}}},async created(){const{json_id:t,id:e}=this.$router.routeParams;if(t&&e)try{Y(!0),await this.fetchTopic(t,e),Y(!1)}catch(a){Y(!1)}},methods:{validId:Q,async fetchTopic(t,e){let a=this.$store.getters["topics/get"](t,e);a||(await this.$store.dispatch("topics/loadOne",{json_id:t,topic_id:e}),a=this.$store.getters["topics/get"](t,e)),this.topic=a}}},qe=Be,Ze=Object(y["a"])(qe,xt,Pt,!1,null,"896f000a",null),Ge=Ze.exports,Me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("breadcrumb",[a("span",{domProps:{textContent:t._s(t.$t("New"))}})]),a("c-form",{on:{save:t.saveTopic}})],1)},We=[],Ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("spinner",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),a("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.handleSubmit;return[a("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),i(t.submit)}}},[a("b-row",[a("b-col",[a("h3",[t._v(t._s(t.formTitle)+" "),t.topic_data.topic_id?a("span",[t._v("#"+t._s(t.topic_data.topic_id))]):t._e()])]),a("b-col",{attrs:{cols:"12",md:"auto"}}),a("b-col",[t.topic_data.category_id?a("b-button",{staticClass:"float-right",attrs:{variant:"success",title:t.$t("Import from torrent file")},on:{click:t.importTorrentFileSelect}},[a("icon",{attrs:{scale:"2",name:"torrent"}})],1):t._e(),t.topic_data.category_id?a("b-button",{staticClass:"float-right",attrs:{variant:"success",title:t.$t("Import from import file")},on:{click:t.importFileSelect}},[a("icon",{attrs:{scale:"2",name:"upload"}})],1):t._e()],1)],1),a("b-row",[a("b-col",{attrs:{md:"4",sm:"12"}},[a("validation-provider",{attrs:{name:t.$t("fields.cover.name"),rules:{required:!t.cover}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("dropzone-cover",{attrs:{value:t.thumb},on:{drop:t.handleDropCoverFile,paste:t.handlePasteCoverFile,select:t.importImageFileSelect,clear:function(e){return t.setCover(null)}}}),a("input",{staticClass:"form-control",attrs:{id:"importImageFile",type:"file",accept:"image/*",name:"cover",hidden:""},on:{change:t.handleChangeCoverFile}}),a("span",[t._v(t._s(i[0]))])]}}],null,!0)})],1),a("b-col",{attrs:{md:"8",sm:"12"}},[a("dropzone",{attrs:{"initial-border":!1},on:{drop:t.handleDropTorrentFile}},[a("category",{directives:[{name:"show",rawName:"v-show",value:!t.topic_data.category_id,expression:"!topic_data.category_id"}],model:{value:t.topic_data.category_id,callback:function(e){t.$set(t.topic_data,"category_id",e)},expression:"topic_data.category_id"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.topic_data.category_id,expression:"topic_data.category_id"}]},[a("input",{attrs:{id:"importFile",type:"file",accept:"application/json",hidden:""},on:{change:t.handleChangeImportFile}}),a("input",{attrs:{id:"importTorrentFile",type:"file",accept:"application/x-bittorrent",hidden:""},on:{change:t.handleChangeTorrentFile}}),a("icon-input",{staticClass:"mt-1",attrs:{pos:"left",id:"category",disabled:!0,name:"category","show-reset":!0,value:t.categorySelected(t.topic_data.category_id)},on:{reset:function(e){t.topic_data.category_id=null}}}),t.isNewTopic?t._e():a("diff",{staticClass:"diff",attrs:{value:t.categorySelected(t.topic_data.category_id)}}),a("validation-provider",{attrs:{name:t.$t("fields.name.name"),rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("icon-input",{staticClass:"mt-1",attrs:{icon:"file",pos:"left",id:"title",name:"title",placeholder:t.$t("fields.name.placeholder"),autocomplete:"off",error:i[0]},on:{input:function(e){t.titleChanged=!0}},model:{value:t.topic_data.title,callback:function(e){t.$set(t.topic_data,"title",e)},expression:"topic_data.title"}})]}}],null,!0)}),t.isNewTopic?t._e():a("diff",{staticClass:"diff",model:{value:t.topic_data.title,callback:function(e){t.$set(t.topic_data,"title",e)},expression:"topic_data.title"}}),a("search",{directives:[{name:"show",rawName:"v-show",value:t.titleChanged&&t.isNewTopic,expression:"titleChanged && isNewTopic"}],staticClass:"search",attrs:{"item-prefix":t.$t("Edit")+": ",value:t.topic_data.title,"show-create":!0},on:{select:t.selectTitle}}),a("validation-provider",{attrs:{name:t.$t("fields.details.name"),rules:"required","skip-if-empty":!1},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("b-form-textarea",{staticClass:"mt-1",attrs:{icon:"map-marker",pos:"left",id:"details",name:"details",placeholder:t.$t("fields.details.placeholder"),rows:3},model:{value:t.topic_data.details,callback:function(e){t.$set(t.topic_data,"details",e)},expression:"topic_data.details"}}),a("span",[t._v(t._s(i[0]))])]}}],null,!0)}),t.isNewTopic?t._e():a("diff",{staticClass:"diff",model:{value:t.topic_data.details,callback:function(e){t.$set(t.topic_data,"details",e)},expression:"topic_data.details"}}),a("validation-provider",{attrs:{name:t.$t("fields.imdb.name"),rules:{regex:/tt\d{5,7}/}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("icon-input",{staticClass:"mt-1",attrs:{icon:"map-marker",pos:"left",id:"imdb",name:"imdb",placeholder:t.$t("fields.imdb.placeholder"),error:i[0]},model:{value:t.topic_data.imdb,callback:function(e){t.$set(t.topic_data,"imdb",e)},expression:"topic_data.imdb"}})]}}],null,!0)}),t.isNewTopic?t._e():a("diff",{staticClass:"diff",model:{value:t.topic_data.imdb,callback:function(e){t.$set(t.topic_data,"imdb",e)},expression:"topic_data.imdb"}}),a("validation-provider",{attrs:{name:t.$t("fields.youtube_url.name"),rules:{regex:/(?:https?:\/\/)?(?:www\.)?youtu(.be\/|be\.com\/watch\?v=)([\w\-]{11})/}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("icon-input",{staticClass:"mt-1",attrs:{icon:"map-marker",pos:"left",id:"youtube_url",name:"youtube_url",placeholder:t.$t("fields.youtube_url.placeholder"),error:i[0]},model:{value:t.topic_data.youtube_url,callback:function(e){t.$set(t.topic_data,"youtube_url",e)},expression:"topic_data.youtube_url"}})]}}],null,!0)}),t.isNewTopic?t._e():a("diff",{staticClass:"diff",model:{value:t.topic_data.youtube_url,callback:function(e){t.$set(t.topic_data,"youtube_url",e)},expression:"topic_data.youtube_url"}}),t.isNewTopic?a("div",[a("validation-provider",{attrs:{name:t.$t("fields.magnet.name"),rules:{required:!0,regex:/\?xt=urn:[a-z0-9]+:[a-z0-9]{32,40}&dn=.+&tr=.+/}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("magnet",{attrs:{id:"magnet",name:"magnet",error:i[0]},model:{value:t.magnetval,callback:function(e){t.magnetval=e},expression:"magnetval"}})]}}],null,!0)}),a("validation-provider",{attrs:{name:t.$t("fields.size.name"),rules:{required:!0,regex:/^\d+$/}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("icon-input",{staticClass:"mt-1",attrs:{icon:"file",pos:"left",id:"size",name:"size",placeholder:t.$t("fields.size.placeholder"),error:i[0]},model:{value:t.topic_data.size,callback:function(e){t.$set(t.topic_data,"size",e)},expression:"topic_data.size"}})]}}],null,!0)}),t.isNewTopic?t._e():a("diff",{staticClass:"diff",model:{value:t.topic_data.size,callback:function(e){t.$set(t.topic_data,"size",e)},expression:"topic_data.size"}}),a("validation-provider",{attrs:{name:t.$t("fields.publisher.name"),rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("icon-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-1",attrs:{icon:"map-marker",pos:"left",id:"publisher",name:"publisher",placeholder:t.$t("fields.publisher.placeholder"),error:i[0]},model:{value:t.topic_data.publisher,callback:function(e){t.$set(t.topic_data,"publisher",e)},expression:"topic_data.publisher"}})]}}],null,!0)}),t.isNewTopic?t._e():a("diff",{staticClass:"diff",model:{value:t.topic_data.publisher,callback:function(e){t.$set(t.topic_data,"publisher",e)},expression:"topic_data.publisher"}}),a("validation-provider",{attrs:{name:t.$t("fields.publisher_url.name"),rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("icon-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-1",attrs:{icon:"map-marker",pos:"left",id:"publisher_url",name:"publisher_url",placeholder:t.$t("fields.publisher_url.placeholder"),error:i[0]},model:{value:t.topic_data.publisher_url,callback:function(e){t.$set(t.topic_data,"publisher_url",e)},expression:"topic_data.publisher_url"}})]}}],null,!0)}),t.isNewTopic?t._e():a("diff",{staticClass:"diff",model:{value:t.topic_data.publisher_url,callback:function(e){t.$set(t.topic_data,"publisher_url",e)},expression:"topic_data.publisher_url"}})],1):t._e(),a("div",{staticClass:"mt-4 text-center"},[a("b-button",{attrs:{variant:"success",type:"submit"}},[t._v(t._s(t.$t("Save")))])],1)],1)],1)],1)],1)],1)]}}])})],1)},Qe=[],Xe=a("495c"),Ke=Xe["a"],ta=(a("e7a4"),a("18d6")),ea=Object(y["a"])(Ke,Ye,Qe,!1,null,"437cd366",null);"function"===typeof ta["default"]&&Object(ta["default"])(ea);var aa=ea.exports,ia=a("b680"),oa={components:{cForm:aa,breadcrumb:Ut},methods:{async saveTopic(t){let{topic_id:e,cover_timestamp:a}=t;const{json_id:i,magnets:o=[],coverNew:n,details:r,imdb:s,title:c,youtube_url:l,added:d,category_id:p}=t;if(n&&n.match(/^data:.*?\//)){if(a)try{await u["a"].fileDelete(i,a+"/cover_thumb.jpg"),await u["a"].fileDelete(i,a+"/cover.jpg")}catch(m){u["a"].notification("error","Removing error: "+m.error)}try{a=parseInt(Date.now()),await u["a"].fileWrite(i,a+"/cover_thumb.jpg",n),await u["a"].fileWrite(i,a+"/cover.jpg",n)}catch(m){u["a"].notification("error","Publish error: "+m.error)}const t=ia["a"].trimSpecialAndLowercase(c);({id:e}=await u["a"].writeRowToTable(i,"topic",{added:d,category_id:p,cover_timestamp:a,details:r,imdb:s,title_lc:t,title:c,youtube_url:l,topic_id:e}));const f=o.map(t=>{const{magnet_id:a,xt:o,dn:n,dl:r,tr:s,added:c,files:l,publisher_url:d,publisher:p}=t;return u["a"].writeRowToTable(i,"magnet",{magnet_id:a,xt:o,dn:n,dl:r,tr:s,added:c,files:l,publisher_url:d,publisher:p,target_type:"topic",target_json_id:i,target_id:e})});await Promise.all(f),Object(Jt["b"])(i)}}}},na=oa,ra=a("c1ca"),sa=Object(y["a"])(na,Me,We,!1,null,"77194434",null);"function"===typeof ra["default"]&&Object(ra["default"])(sa);var ca=sa.exports,la=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.topic?a("div",[a("breadcrumb",[a("router-link",{attrs:{to:{path:"category",params:{id:t.topic.category_id}}},domProps:{textContent:t._s(t.topic.category_name)}}),a("router-link",{attrs:{to:{path:"topicView",params:{json_id:t.topic.json_id,id:t.topic.topic_id}}},domProps:{textContent:t._s(t.topic.title)}}),a("span",{domProps:{textContent:t._s(t.$t("Edit"))}})],1),a("c-form",{key:t.topic.topic_id,attrs:{topic:t.topic}}),t.validId(t.topic.topic_id)?a("b-button",{attrs:{variant:"danger"},on:{click:t.deleteTopic}},[t._v(t._s(t.$t("Delete")))]):t._e()],1):t._e()},da=[],ua={components:{cForm:aa,breadcrumb:Ut},data(){return{topic:null}},async created(){const{json_id:t,id:e}=this.$router.routeParams;Y(!0),await this.fetchTopic(t,e),Y(!1)},computed:{coverDir(){return this.topic.cover_timestamp||this.topic.added}},methods:{validId:Q,async fetchTopic(t,e){let a=this.$store.getters["topics/get"](t,e);a||(await this.$store.dispatch("topics/loadOne",{json_id:t,topic_id:e}),a=this.$store.getters["topics/get"](t,e)),this.topic=a},async deleteTopic(){if(!confirm("Are you shure to delete this topic?"))return;const t=new Ae["a"](this.topic);await t.delete(),this.$router.go("home")}}},pa=ua,ma=a("3fa4"),fa=Object(y["a"])(pa,la,da,!1,null,"20f41127",null);"function"===typeof ma["default"]&&Object(ma["default"])(fa);var ha=fa.exports,_a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("search-top-bar",{attrs:{"follow-name":t.$t("Home"),"follow-query":t.followQuery,"search-placeholder":t.$t("Search topics in all categories"),"btn-follow-name":t.$t("Follow page"),"btn-unfollow-name":t.$t("Followed"),"btn-follow-title":t.$t("You could follow updates on ZeroHello home page feed")},on:{search:t.searchHandler}}),a("p",{staticClass:"category-name"},[t._v("Загалом "),a("strong",[t._v(t._s(t.filesize(t.categoryTotalSize)))]),t._v(" релізів")]),a("topics-table",{key:t.searchTerm,attrs:{"show-category-name":"","search-term":t.searchTerm}})],1)},ga=[],ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"top-bar"},[a("b-form-input",{staticClass:"search",attrs:{placeholder:t.renderSearchPlaceholder,size:"sm",type:"text"},on:{input:t.searchHandler}}),a("feed-follow-button",{staticClass:"follow-feed",attrs:{"follow-name":t.followName,"follow-query":t.followQuery,"btn-follow-name":t.btnFollowName,"btn-unfollow-name":t.btnUnfollowName,"btn-follow-title":t.btnFollowTitle}})],1)},va=[],ya={components:{feedFollowButton:Ct},props:{followName:{type:String},followQuery:{type:String},btnFollowName:{type:String},btnUnfollowName:{type:String},btnFollowTitle:{type:String},searchPlaceholder:{type:String}},computed:{renderSearchPlaceholder(){return this.searchPlaceholder||$t("Search topics in all categories")}},methods:{searchHandler(t){return this.$emit("search",t)}}},wa=ya,ja=(a("dbeb"),Object(y["a"])(wa,ba,va,!1,null,"8bc4d1de",null)),Ca=ja.exports,$a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[t.pageItems.length<1?a("empty-state",{attrs:{title:t.$t("Oops. No publications here yet")+" ..."}},[t._v("\n    "+t._s(t.$t("Anyway you can"))+" "),a("b-button",{attrs:{size:"sm",variant:"outline-success",to:"topicNew"}},[t._v(t._s(t.$t("add")))]),t._v(" "+t._s(t.$t("own material"))+"!\n  ")],1):a("div",{staticClass:"topics"},t._l(t.pageItems,(function(t){return a("item-card",{key:t.json_id+"-"+t.topic_id,staticClass:"topic selected",attrs:{topic:t}})})),1),t.pagesCount>1?a("b-pagination-nav",{key:t.page,attrs:{align:"center","number-of-pages":t.pagesCount,"link-gen":t.paginationLinkGen,"use-router":""},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1)},Ia=[],Oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{staticClass:"text-center m-5 p-5"},[a("h2",{staticClass:"font-weight-bold mb-2"},[t._v(t._s(t.title))]),a("h5",{staticClass:"text-muted font-weight-normal"},[t._t("default")],2)])],1)},ka=[],Sa={props:{title:{type:String,default:""}}},Ta=Sa,xa=Object(y["a"])(Ta,Oa,ka,!1,null,"299b42a3",null),Pa=xa.exports,Ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.topic?a("div",[a("div",{key:t.thumb,staticClass:"topic",style:{backgroundImage:"url("+t.thumb+")"}},[a("router-link",{staticClass:"hover-overlay",attrs:{title:t.topic.title,to:{path:"topicView",params:{json_id:t.topic.json_id,id:t.topic.topic_id}}}})],1),a("div",{staticClass:"actions"},[t.isAuthor(t.topic.json_id)?a("router-link",{staticClass:"edit",attrs:{title:t.topic.title,to:{path:"topicEdit",params:{json_id:t.topic.json_id,id:t.topic.topic_id}}}},[a("icon",{attrs:{scale:"1.5",name:"pencil-alt"}})],1):t._e(),t.isAuthor(t.topic.json_id)?a("a",{staticClass:"delete",on:{click:t.handleDelete}},[a("icon",{attrs:{scale:"1.5",name:"trash-alt"}})],1):t._e()],1)]):t._e()},Fa=[],Na=(a("6b77"),{props:{topic:{type:Object}},setup(t){const e=new Ae["a"](t.topic),a=async()=>{confirm("Are you shure to delete this topic?")&&await e.delete()};return{thumb:e.thumb,isAuthor:Jt["a"],handleDelete:a}}}),La=Na,Da=(a("ddd3"),a("103d")),Ua=Object(y["a"])(La,Ea,Fa,!1,null,"00616ce7",null);"function"===typeof Da["default"]&&Object(Da["default"])(Ua);var Ra=Ua.exports,Aa=(t,e=null)=>{const a=Object(d["e"])(parseInt(t)||1),i=Object(d["a"])(()=>W["a"].getters[e+"/paginatorPagesCount"]),o=Object(d["a"])(()=>W["a"].getters[e+"/paginatorPageItems"]),n=({categoryId:t,searchTerm:e,perPage:a,page:i})=>W["a"].dispatch("topics/loadList",{categoryId:t,searchTerm:e,perPage:a,page:i}),r=()=>W["a"].dispatch(e+"/resetPagination");return{page:a,pagesCount:i,pageItems:o,loadPage:n,resetPagination:r}},za={components:{emptyState:Pa,itemCard:Ra},props:{categoryId:{type:String},showCategoryName:{type:Boolean,default:!1},searchTerm:{type:String}},setup(t,{root:{$router:e}}){const{categoryId:a,searchTerm:i}=t,{page:o,pageItems:n,pagesCount:r,loadPage:s,resetPagination:c}=Aa(e.routeParams.page,"topics");s({categoryId:a,searchTerm:i,perPage:15,page:o.value});const l=Object(d["f"])(o,t=>s({categoryId:a,searchTerm:i,page:t}));Object(d["d"])(()=>c()&&l());const u=a=>{const i={page:a};return t.categoryId&&(i["id"]=t.categoryId),{path:e.current.name,params:i}};return{page:o,pageItems:n,pagesCount:r,paginationLinkGen:u}}},Ha=za,Ja=(a("2ddc"),a("8564")),Va=Object(y["a"])(Ha,$a,Ia,!1,null,"329dbc55",null);"function"===typeof Ja["default"]&&Object(Ja["default"])(Va);var Ba=Va.exports,qa={components:{searchTopBar:Ca,topicsTable:Ba},setup(){const t=Object(d["e"])(""),e=e=>t.value=e,a=Object(d["e"])(0),i=async()=>{const t="select sum(magnets.dl) as size from magnets join topics on magnets.target_id = topics.topic_id";a.value=N()(await u["a"].query(t),"0.size",0)};i();const o="SELECT title as title, details as body, added as date_added, 'Movies/Shows' AS type, '/?/topic/' || json_id || '/' || topic_id AS url FROM 'topics'";return{filesize:ce.a,searchTerm:t,searchHandler:e,followQuery:o,categoryTotalSize:a}}},Za=qa,Ga=(a("e886"),a("d026")),Ma=Object(y["a"])(Za,_a,ga,!1,null,"6ade17ea",null);"function"===typeof Ga["default"]&&Object(Ga["default"])(Ma);var Wa=Ma.exports,Ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.category.category_id?a("search-top-bar",{key:t.category.category_id,attrs:{"follow-name":t.category.name,"follow-query":t.followQuery,"search-placeholder":t.$t("Search topics in current category",{name:t.category.name}),"btn-follow-name":t.$t("Follow page"),"btn-unfollow-name":t.$t("Followed"),"btn-follow-title":t.$t("You could follow updates on ZeroHello home page feed")},on:{search:t.searchHandler}}):t._e(),a("p",{staticClass:"category-name",domProps:{textContent:t._s(t.category.name+" (всього "+t.filesize(t.categoryTotalSize)+")")}}),a("topics-table",{key:t.searchTerm,attrs:{"category-id":t.$router.routeParams.id,"search-term":t.searchTerm}})],1)},Qa=[],Xa={components:{searchTopBar:Ca,topicsTable:Ba},data(){return{category:{category_id:null},categoryTotalSize:0,searchTerm:""}},computed:{followQuery(){return"SELECT title as title, details as body, added as date_added, 'Movies/Shows' AS type, '/?/topic/' || json_id || '/' || topic_id AS url FROM 'topics' WHERE category_id = "+this.category.category_id}},async created(){const{id:t}=this.$router.routeParams;let e=new D.a("categories").where({category_id:t});const[a]=await u["a"].query(e);e="select sum(magnets.dl) as size from magnets join topics on magnets.target_id = topics.topic_id where topics.category_id = "+t,this.categoryTotalSize=N()(await u["a"].query(e),"0.size",0),this.category=a},methods:{filesize:ce.a,searchHandler(t){this.searchTerm=t}}},Ka=Xa,ti=(a("dc2e"),a("e8a7")),ei=Object(y["a"])(Ka,Ya,Qa,!1,null,"f42e6110",null);"function"===typeof ti["default"]&&Object(ti["default"])(ei);var ai=ei.exports,ii=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"mt-3 mb-3"},[a("b-col",{attrs:{md:"6"}},[a("b-input-group",[a("b-form-input",{attrs:{placeholder:t.$t("Type to Search")},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),a("b-input-group-append",[a("b-button",{attrs:{disabled:!t.searchTerm},domProps:{textContent:t._s(t.$t("Clear"))},on:{click:function(e){t.searchTerm=""}}})],1)],1)],1),a("b-col",{attrs:{md:"6"}},[a("b-button",{staticClass:"float-right",attrs:{variant:"success",to:"topicNew"},domProps:{textContent:t._s(t.$t("Add"))}})],1)],1),t.pageItems.length>0?a("b-table",{staticClass:"clickable",attrs:{items:t.pageItems,fields:t.tableFields,striped:"",small:"",hover:"",responsive:"md"},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[t.isAuthor(e.item.json_id)?a("router-link",{attrs:{to:{path:"topicView",params:{json_id:e.item.json_id,id:e.item.topic_id}}}},[t._v("\n        "+t._s(t.$t("View"))+"\n      ")]):t._e(),t._v(" |\n      "),t.isAuthor(e.item.json_id)?a("router-link",{attrs:{to:{path:"topicEdit",params:{json_id:e.item.json_id,id:e.item.topic_id}}}},[t._v("\n        "+t._s(t.$t("Edit"))+"\n      ")]):t._e()]}}],null,!1,2997922405)}):t._e(),t.pagesCount>1?a("b-pagination-nav",{key:t.page,attrs:{align:"center","number-of-pages":t.pagesCount,"link-gen":t.paginationLinkGen,"use-router":""},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1)},oi=[],ni={setup(t,{root:{$router:e}}){const{$i18n:a}=Object(d["c"])(),i=[{key:"topic_id",label:"#",sortable:!0},{key:"category_id",label:a.t("Category"),sortable:!0},{key:"title",label:a.t("Title")},{key:"actions",label:a.t("Actions")}],{categoryId:o}=t,n=Object(d["e"])(""),{page:r,pageItems:s,pagesCount:c,loadPage:l,resetPagination:u}=Aa(e.routeParams.page,"topics");l({categoryId:o,searchTerm:n.value,perPage:15,page:r.value,owner:!0});const p=Object(d["f"])([r,n],([t,e])=>l({categoryId:o,searchTerm:e,page:t,owner:!0}));Object(d["d"])(()=>u()&&p());const m=a=>{const i={page:a};return t.categoryId&&(i["id"]=t.categoryId),{path:e.current.name,params:i}};return{isAuthor:Jt["a"],tableFields:i,page:r,pageItems:s,pagesCount:c,paginationLinkGen:m,searchTerm:n}}},ri=ni,si=a("c75c"),ci=Object(y["a"])(ri,ii,oi,!1,null,"32d3185f",null);"function"===typeof si["default"]&&Object(si["default"])(ci);var li=ci.exports,di=[{path:"/:page(\\d+)?",public:!0,header:J,name:"home",component:Wa},{path:"/sysinfo",header:J,name:"sysinfo",component:ft,owner:"1PpvHgysHyZk6AEaG38SzH2FXgcr74vJt5"},{path:"/categories",public:!0,header:J,name:"categories",component:ct},{path:"/categories/:id(\\d+)/:page(\\d+)?",public:!0,header:J,name:"category",component:ai},{path:"/topic/new",header:J,name:"topicNew",component:ca},{path:"/topic/:json_id(\\d+)/:id(\\d+)",public:!0,header:J,name:"topicView",component:Ge},{path:"/topic/:json_id(\\d+)/:id(\\d+)/edit",header:J,name:"topicEdit",component:ha},{path:"/my/:page(\\d+)?",header:J,name:"my",component:li},{path:"/settings",header:J,name:"settings",component:Tt},{path:"*",header:J,name:"not_found",component:"not-found-component"}];const ui=window.base.href.replace("/media","").replace("index.html","").replace(/([&?])wrapper=False/,"$1").replace(/&$/,"").replace(/[&?]wrapper_nonce=[A-Za-z0-9]+/,""),pi=di.map(t=>{const e=[],a=h()(t.path,e);return{route:t,pattern:a,keys:e}}),mi={data(){return{current:di[0],ready:!1}},created(){this.onConnect()},computed:{location(){return location.href.replace(/&wrapper.*?$/,"")}},methods:{getUrl(t){return-1===t.indexOf("?")?"":t.replace(/.*?\?/,"")},onConnect(){return console.log("On Connected"),this.ready=!0,this.route(this.getUrl(ui))},go(t,e={}){const a=this.relativeUrl(t,e),i={to:t,params:e,scrollTop:window.pageYOffset};return"function"===typeof this.pushState&&this.pushState(i,"",a),console.groupCollapsed("[Router]: going to "+(a||"/")),console.log(i),console.groupEnd(),this.navigate(t,e)},navigate(t,e={}){const a=this.relativeUrl(t,e);return this.route(a)},route(t){const e={},a=pi.find(a=>{const i=a.pattern.exec(t);return!!i&&(a.keys.forEach((t,a)=>e[t.name]=i[a+1]),!0)});a&&(this.current=a.route,this.routeParams=e,window.scroll(window.pageXOffset,0))},relativeUrl(t,e={}){const a=di.find(e=>e.name===t);return h.a.compile(a.path)(e)},url(t,e={}){const a=this.relativeUrl(t,e);return`${window.base.href.split(/[?#]/)[0]}?${a}`}}},fi={install:function(t){return t.prototype.$router=new t(mi),t.component("router-view",j),t.component("router-link",S)}};var hi=fi,_i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{key:"app-initialized-"+t.initialSync,attrs:{id:"app"},on:{drop:function(t){t.preventDefault()},dragover:function(t){t.preventDefault()}}},[a("div",{staticClass:"col-lg-10 mx-auto"},[a("router-view",{staticClass:"mb-3",attrs:{name:"header"}}),t.allowedPath?a("router-view"):a("empty-state",{attrs:{title:t.$t("Unauthorized access")+" ..."}},[t._v("\n      "+t._s(t.$t("Please login first with your ZeroID at top right corner!"))+"\n    ")])],1)])},gi=[],bi={components:{emptyState:Pa},computed:{...Object(E["c"])(["isLoggedIn"]),initialSync(){return u["a"].siteInfo.bad_files>0},allowedPath(){const t=!0===this.$router.current.public,e=null!=this.$router.current.owner,a="1PpvHgysHyZk6AEaG38SzH2FXgcr74vJt5"===this.$router.current.owner;return t||this.isLoggedIn&&(a||!e)}}},vi=bi,yi=(a("5c0b"),a("1a8b")),wi=Object(y["a"])(vi,_i,gi,!1,null,null,null);"function"===typeof yi["default"]&&Object(yi["default"])(wi);var ji=wi.exports;n["default"].config.productionTip=!1,n["default"].use(d["b"]),n["default"].use(i["a"]),n["default"].use(hi),n["default"].use(l["a"]),n["default"].component("icon",o["a"]);const Ci=new l["a"]({locale:"uk"}),$i=async()=>{const t=new n["default"]({i18n:Ci,store:W["a"],render:t=>t(ji)});await u["a"].initialize({router:t.$router,options:{defaults:m}}),t.$mount("#app")};$i()},5898:function(t,e,a){},"58aa":function(t,e,a){},"59cf":function(t,e,a){"use strict";var i=a("2e7a"),o=a.n(i);o.a},"5a39":function(t,e,a){"use strict";var i=a("63b7"),o=a.n(i);e["default"]=o.a},"5c0b":function(t,e,a){"use strict";var i=a("5e27"),o=a.n(i);o.a},"5c76":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Clear":"Очистити","Type to Search":"Напишіть що шукаєте","Add":"Додати","Category":"Категорія","Title":"Назва","Actions":"Дії","View":"Глянути","Edit":"Редагувати"}}'),delete t.options._Ctor}},"5ddb":function(t,e,a){"use strict";var i=a("759e"),o=a.n(i);o.a},"5e27":function(t,e,a){},6:function(t,e){},"63b7":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Clear":"Очистити","Type to Search":"Напишіть що шукаєте","Upload torrent":"Відвантажити торрент","Import from .torrent file":"Імпортувати з .torrent файлу","Add":"Додати","Category":"Категорія","Title":"Назва","Source":"Джерело","Size":"Розмір","Actions":"Дії","Rating":"Рейтинг","Details":"Деталі"}}'),delete t.options._Ctor}},"64da":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Search topics in current category":"Шукати у  категорії \'{name}\'","Follow page":"Стежити за категорією","You could follow updates on ZeroHello home page feed":"Ви можете стежити за оновленнями з цієї сторінки на головній сторінці ZeroHello","Followed":"Відстежується"}}'),delete t.options._Ctor}},6848:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Upload torrent":"Відвантажити торрент","Import from .torrent file":"Імпортувати з .torrent файлу"}}'),delete t.options._Ctor}},"6db9":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Categories":"Категорії","Change acount / Logout":"Змінити акаунт / Вийти","Dashboard":"Дошка","Home":"Домівка","Login":"Вхід","New Topic":"Додати","My":"Моє","Settings":"Налаштування","Sysinfo":"Інфо"}}'),delete t.options._Ctor}},7:function(t,e){},7208:function(t,e,a){},"735b":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Edit":"Редагування"}}'),delete t.options._Ctor}},"738d":function(t,e,a){"use strict";var i=a("25c3"),o=a.n(i);o.a},"759e":function(t,e,a){},"762d":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Anyway you can":"Тим не менш ви можете","add":"додати","own material":"власний матеріал","Oops. No publications here yet":"Упс. Тут поки що порожньо"}}'),delete t.options._Ctor}},7682:function(t,e,a){"use strict";var i=a("8ef1"),o=a.n(i);o.a},"771d":function(t,e,a){"use strict";var i=a("58aa"),o=a.n(i);o.a},"7d3e":function(t,e,a){"use strict";var i=a("ad8f"),o=a.n(i);e["default"]=o.a},"7dbb":function(t,e,a){"use strict";var i=a("d567"),o=a.n(i);o.a},8:function(t,e){},"800b":function(t,e,a){"use strict";a("ac6a");const i=a("8fe2"),o=a("1c46");function n(t){if(t.info.length)return t.info.length;let e=0;return t.info.files.forEach(t=>e+=t.length),e}function r(t){return o.createHash("sha1").update(i.encode(t)).digest("hex")}function s(t=[]){const e=t.map((t,e)=>`${e+1}. ${t.path.join("/")}`);return e.join("\n")}function c(t){return new Uint8Array(atob(t).split(","))}e["a"]=(t,e="buffer")=>{try{"base64"===e&&(t=c(t));const a=i.decode(t),o=i.decode(t,"utf8"),{publisher:l,info:{name:d,files:u=[]}}=o,p=o["publisher-url"],m=r(a.info),f=n(o),h=encodeURI(o.announce.replace(/\??h=.*?$/,"")),_=s(u);return{xt:m,dn:d,dl:f,tr:h,files:_,publisher:l,publisher_url:p}}catch(a){console.error("Cannot parse file: ",a)}}},8236:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Please select category":"Будь ласка виберіть категорію"}}'),delete t.options._Ctor}},8564:function(t,e,a){"use strict";var i=a("762d"),o=a.n(i);e["default"]=o.a},"85a1":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-select",{staticClass:"select-cat big",attrs:{value:t.value,"select-size":10},on:{change:t.updateValue}},[a("template",{slot:"first"},[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- "+t._s(t.$t("Please select category"))+" --")])]),t._l(t.categoriesGrouped,(function(e,i){return a("optgroup",{key:i,attrs:{label:i}},t._l(e,(function(e){return a("option",{key:e.category_id,domProps:{value:e.category_id}},[t._v("\n      "+t._s(e.name)+"\n    ")])})),0)}))],2)},o=[],n=a("6edf"),r=a.n(n),s=a("a6f4"),c=a("c0d6"),l={props:{value:{type:Number,degault:null}},setup(t,{emit:e}){const a=Object(s["a"])(()=>r()(c["a"].getters["categories/list"],"parent_name")),i=t=>e("input",t);return{categoriesGrouped:a,updateValue:i}}},d=l,u=(a("7682"),a("2877")),p=a("bbae"),m=Object(u["a"])(d,i,o,!1,null,"3286c6e3",null);"function"===typeof p["default"]&&Object(p["default"])(m);e["a"]=m.exports},"8ef1":function(t,e,a){},9:function(t,e){},9183:function(t,e,a){},"91c0":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"fields":{"magnet":{"name":"magnet-посилання","placeholder":"magnet-посилання"}}}}'),delete t.options._Ctor}},9348:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("icon",{staticClass:"icons-color spinner-middle",attrs:{name:"chair",scale:t.scale,pulse:""}})],1)},o=[],n=(a("ba43"),{props:{scale:{type:Number,default:1}}}),r=n,s=a("2877"),c=Object(s["a"])(r,i,o,!1,null,"0a51601a",null);e["a"]=c.exports},9453:function(t,e,a){"use strict";var i=a("b844"),o=a.n(i);o.a},"98fd":function(t,e,a){"use strict";var i=a("cd5f"),o=a.n(i);o.a},"9c8b":function(t,e,a){},"9d14":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Drag image here":"Пересуньте сюди зображення","Click and paste image from clipboard":"Клікніть вставте зображення з буфера обміну","or":"або","Select file":"Виберіть файл"}}'),delete t.options._Ctor}},"9dd5":function(t,e,a){"use strict";var i=a("2271"),o=a.n(i);o.a},"9ebf":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{}}'),delete t.options._Ctor}},a1d6:function(t,e,a){},a31d:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"fields":{"cover":{"name":"Обкладинка","placeholder":"Обкладинка"},"magnet":{"name":"magnet-посилання","placeholder":"magnet-посилання"},"name":{"name":"Ім\'я","placeholder":"Ім\'я"},"size":{"name":"Розмір (байт)","placeholder":"Розмір (байт)"},"publisher":{"name":"Джерело","placeholder":"Джерело"},"publisher_url":{"name":"Посилання на джерело","placeholder":"Посилання на джерело"},"details":{"name":"Деталі","placeholder":"Деталі"},"imdb":{"name":"IMDB ID","placeholder":"IMDB (наприклад tt2861424)"},"youtube_url":{"name":"Youtube Трейлер","placeholder":"Youtube Трейлер (наприклад https://www.youtube.com/watch?v=MWCVtI0ArN8)"}},"Add":"Додати","Edit":"Редагувати","Selected category":"Вибрана категорія","Import magnet, title, size from Torrent File (optional)":"Імпортуйте magnet, назву, розмір з торрент файлу (необов\'язково)","or fill them manually":"або заповніть їх вручну","Save":"Зберегти","You could select your similar existing material to edit":"Ви можете редагувати схожий існуючий матеріал зі списку","Import from torrent file":"Імпорт із файлу торрента","Import from import file":"Імпорт із файлу імпорту"}}'),delete t.options._Ctor}},a422:function(t,e,a){},accb:function(t,e,a){"use strict";var i=a("fe66"),o=a.n(i);e["default"]=o.a},ad8f:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Filter category by name":"Фільтр за іменем категорії"}}'),delete t.options._Ctor}},af0c:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var i=a("bd86"),o=a("a6f4"),n=a("3094"),r=a("e5dd"),s=a("c0d6");class c{constructor(t={}){Object(i["a"])(this,"magnet",Object(o["e"])({xt:null,dn:null,dl:null,tr:null,added:parseInt(Date.now()),json_id:null,magnet_id:null,target_type:null,target_hash:null,target_id:null,files:null,publisher_url:null,publisher:null})),Object(i["a"])(this,"link",Object(o["a"])({set(t){if(!t)return;this.magnetVal=t,t=decodeURI(t);let e=t.match(/dn=(.*?)(?:&|$)/i);e&&([,e]=e,this.title=e),this.announce=t.match(/tr=(.*?)(?:&|$)/i)[1],this.infoHash=t.match(/btih:(.*?)(?:&|$)/i)[1]},get(){return this.infoHash&&this.title&&this.announce?`?xt=urn:btih:${this.infoHash}&dn=${encodeURI(this.title)}&tr=${this.announce}`:this.magnetVal}})),Object(i["a"])(this,"save",async(t={target_type:"topic",target_json_id:null,target_id:null},e=!0)=>{if(null===t.target_json_id||null===t.target_id)throw Error("Save magnet: metadata is not properly set!");const{xt:a,dn:i,dl:o,tr:c,added:l,files:d,publisher_url:u,publisher:p}=this.magnet.value,m={xt:a,dn:i,dl:o,tr:c,added:l,files:d,publisher_url:u,publisher:p,...t},f=await n["a"].writeRowToTable(s["a"].getters.currentUser.json_id,"magnet",m);return e&&Object(r["b"])(s["a"].getters.currentUser.json_id),f}),this.hydrate(t)}hydrate(t={}){this.magnet.value={...this.magnet.value,...t}}setData(t,e){this.magnet.value.hasOwnProperty(t)&&(this.magnet.value[t]=e)}}},af32:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropzone",{attrs:{caption:"lah blah"},on:{paste:t.handlePaste,drop:t.handleDrop}},[t.value?a("div",{staticClass:"cover text-center"},[a("img",{staticClass:"thumb",attrs:{src:t.imageUrl}}),a("span",{staticClass:"remove",on:{click:t.handleClear}},[t._v("x")])]):t._e(),t.value?t._e():a("div",{staticClass:"caption-text"},[a("div",[t._v(t._s(t.$t("Drag image here")))]),a("div",[t._v(t._s(t.$t("or")))]),a("div",[t._v(t._s(t.$t("Click and paste image from clipboard")))]),a("div",[t._v(t._s(t.$t("or")))]),a("div",{on:{click:t.handleSelect}},[a("u",[t._v(t._s(t.$t("Select file")))])])]),t.error?a("div",[t._v(t._s(t.error))]):t._e()])},o=[],n=a("a6f4"),r=a("1891"),s={components:{dropzone:r["a"]},props:{error:{type:String},value:{type:String,default:""}},setup(t,{emit:e}){const a=Object(n["a"])(()=>t.value.match(/^data\//)?t.value:"data:"+t.value),i=t=>e("paste",t),o=t=>e("drop",t),r=t=>e("select",t),s=()=>e("clear");return{imageUrl:a,handlePaste:i,handleDrop:o,handleSelect:r,handleClear:s}}},c=s,l=(a("ea3f"),a("2877")),d=a("e644"),u=Object(l["a"])(c,i,o,!1,null,"b9b3105c",null);"function"===typeof d["default"]&&Object(d["default"])(u);e["a"]=u.exports},b5d8:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Home":"Головна","Search topics in all categories":"Шукати у всіх категоріях","Follow page":"Стежити","You could follow updates on ZeroHello home page feed":"Ви можете стежити за оновленнями з цієї сторінки на головній сторінці ZeroHello","Followed":"Відстежується"}}'),delete t.options._Ctor}},b680:function(t,e,a){"use strict";const i=t=>t?t.toLocaleLowerCase().replace(new RegExp(/[^а-яєїіґА-ЯЄЇІҐA-Za-z0-9]/,"g")," ").replace(new RegExp(/\s{2,}/,"g")," "):"";e["a"]={trimSpecialAndLowercase:i}},b844:function(t,e,a){},bbae:function(t,e,a){"use strict";var i=a("8236"),o=a.n(i);e["default"]=o.a},c0d6:function(t,e,a){"use strict";var i=a("2b0e"),o=a("2f62"),n=a("4151"),r=a.n(n),s=a("2561"),c=a.n(s),l=a("3094");i["default"].use(o["a"]);const d={list:{items:[],updated_at:0}},u={STORE_LIST(t,e){t.list.items=e,t.list.updated_at=Date.now()}},p={async loadList({commit:t}){const e=new c.a("topics").select(c.a.raw("count(*) as item_number")).where("topics.category_id",c.a.raw("`categories`.`category_id`")).as("item_number"),a=new c.a("categories").whereNot({"categories.parent_id":null});a.join(c.a.raw("categories as c"),"categories.parent_id","c.category_id"),a.select("categories.*","c.name as parent_name",e);let i=await l["a"].query(a);return i=r()(i,"category_id"),t("STORE_LIST",i)}},m={list(t){return t.list.items}};var f={namespaced:!0,state:d,mutations:u,actions:p,getters:m},h=(a("ac6a"),a("9b02")),_=a.n(h),g=a("0f5c"),b=a.n(g);i["default"].use(o["a"]);const v={items:{},topics:{}},y={STORE_TOPIC_COMMENTS(t,{target_json_id:e,target_id:a,items:i={}}){const o=_()(t,"items",{});b()(t,"items",{...o,...i});const n=_()(t,`topics.${e}/${a}`,[]);b()(t,`topics.${e}/${a}`,[...n,...Object.keys(i)])},STORE_TOPIC_COMMENT(t,{target_json_id:e,target_id:a,comment:i={}}){const o=`${i.json_id}/${i.comment_id}`,n={};n[o]=i;const r=_()(t,"items",{});b()(t,"items",{...r,...n});const s=_()(t,`topics.${e}/${a}`,[]);b()(t,`topics.${e}/${a}`,[...s,o])}},w={async topicAdd({commit:t,rootGetters:e},{target_json_id:a,target_id:i,body:o}){const{json_id:n}=e.currentUser;let r={target_type:"topic",target_id:i,target_json_id:a,body:o,added:parseInt(Date.now())};const{id:s}=await l["a"].writeRowToTable(n,"comment",r);r={...r,json_id:n,comment_id:s},t("STORE_TOPIC_COMMENT",{target_json_id:a,target_id:i,comment:r})},async topicLoad({commit:t,dispatch:e},{target_json_id:a,target_id:i}){const o=l["a"].getCertUserHashByJsonId(a),n=new c.a("comments").where({"comments.target_hash":o,"comments.target_id":i});n.join("json","json.json_id","comments.json_id");const s=t=>`(select count(*) from ratings inner join json as sub1_json on sub1_json.json_id = ratings.json_id where ratings.target_type = 'comment' and ratings.direction = '${t}' and ratings.target_id = comments.comment_id and ratings.target_hash = REPLACE(sub1_json.directory, 'data/users/', ''))`;n.select("json.*","comments.*",c.a.raw(s("+")+" as rating_positive"),c.a.raw(s("-")+" as rating_negative")),n.orderBy("comments.added","desc");const d=await l["a"].query(n),u=r()(d,t=>`${t.json_id}/${t.comment_id}`);t("STORE_TOPIC_COMMENTS",{target_json_id:a,target_id:i,items:u}),e("ratings/storeRatings",{type:"comment",idField:"comment_id",items:d},{root:!0})}},j={topicList(t){return(e,a)=>{const i=_()(t,`topics.${e}/${a}`);if(!i)return null;let o=i.map(e=>t.items[e]);return o=Object.values(o).sort((t,e)=>t.added>e.added),o}}};var C={namespaced:!0,state:v,mutations:y,actions:w,getters:j},$=a("b680");i["default"].use(o["a"]);const I={list:{items:{},updated_at:0},categories:{},pagination:{totalItems:0,categoryId:null,current:1,perPage:10,pagesCount:1,pageItemIds:[]}},O={STORE(t,e){const a={};a[`${e.json_id}/${e.topic_id}`]=e,t.list.items={...t.list.items,...a}},STORE_ITEMS(t,e){t.list.items={...t.list.items,...e},t.list.updated_at=Date.now()},STORE_CATEGORY(t,{categoryId:e,searchTerm:a="nosearch",page:i=1,pageItemIds:o,totalItems:n}){t.pagination.totalItems=n,t.pagination.pagesCount=Math.ceil(n/t.pagination.perPage),b()(t.categories,`${e}.${a}.${i}`,o),b()(t.categories,`${e}.${a}.count`,n),b()(t.categories,`${e}.${a}.count_updated_at`,Date.now())},STORE_CURRENT_PAGINATION(t,{page:e,perPage:a,pageItemIds:i=[]}){e&&(t.pagination.page=e),a&&(t.pagination.perPage=a),t.pagination.pageItemIds=i},RESET_PAGINATION(t){t.pagination={totalItems:0,categoryId:null,current:1,perPage:10,pagesCount:1,pageItemIds:[]}},FLUSH_DASHBOARD(t){delete t.categories["undefined"]},FLUSH_CATEGORY(t,{categoryId:e}){delete t.categories[e]},UPDATE_TOPIC(t,{json_id:e,topic_id:a,added:i,category_id:o,cover_timestamp:n,details:r,imdb:s,title_lc:c,title:l,youtube_url:d}){const u=_()(t.list.items,`${e}/${a}`,{});b()(t.list.items,`${e}/${a}`,{...u,json_id:e,topic_id:a,added:i,category_id:o,cover_timestamp:n,details:r,imdb:s,title_lc:c,title:l,youtube_url:d})},DELETE_TOPIC(t,{jsonId:e,topicId:a}){delete t.list.items[`${e}/${a}`]}},k={async delete({commit:t},{jsonId:e,topicId:a,categoryId:i}){await l["a"].deleteRowFromTableById(e,"topic",a),t("DELETE_TOPIC",{jsonId:e,topicId:a,categoryId:i}),t("FLUSH_DASHBOARD"),t("FLUSH_CATEGORY",{categoryId:i})},async loadOne({commit:t,dispatch:e},{json_id:a,topic_id:i}){const o=new c.a("topics").where({"topics.json_id":a,"topics.topic_id":i});o.join("categories","topics.category_id","categories.category_id"),o.join("json","json.json_id","topics.json_id"),o.select("topics.*","json.*","categories.name as category_name");const n=t=>`(select count(*) from ratings inner join json as sub1_json on sub1_json.json_id = ratings.json_id where ratings.target_type = 'topic' and ratings.direction = '${t}' and ratings.target_id = topics.topic_id and ratings.target_hash = REPLACE(sub1_json.directory, 'data/users/', ''))`;o.select("json.*","topics.*",c.a.raw(n("+")+" as rating_positive"),c.a.raw(n("-")+" as rating_negative"),"categories.name as category_name");const[r]=await l["a"].query(o);t("STORE",r),e("ratings/storeRatings",{type:"topic",idField:"topic_id",items:[r]},{root:!0})},async update({commit:t},{json_id:e,topic_id:a,added:i,category_id:o,cover_timestamp:n,details:r,imdb:s,title_lc:c,title:l,youtube_url:d}){t("UPDATE_TOPIC",{json_id:e,topic_id:a,added:i,category_id:o,cover_timestamp:n,details:r,imdb:s,title_lc:c,title:l,youtube_url:d})},resetPagination({commit:t}){t("RESET_PAGINATION")},async loadList({commit:t,dispatch:e,state:a,root:i},{categoryId:o,searchTerm:n,perPage:s,page:d,owner:u=!1}){s=s||a.pagination.perPage,d=d||a.pagination.page;const p=new c.a("topics").select(c.a.raw("count(*) as number")),m=new c.a("topics");m.join("categories","topics.category_id","categories.category_id"),m.join("json","json.json_id","topics.json_id");const f=t=>`(select count(*) from ratings inner join json as sub1_json on sub1_json.json_id = ratings.json_id where ratings.target_type = 'topic' and ratings.direction = '${t}' and ratings.target_id = topics.topic_id and ratings.target_hash = REPLACE(sub1_json.directory, 'data/users/', ''))`;if(m.select("json.*","topics.*",c.a.raw(f("+")+" as rating_positive"),c.a.raw(f("-")+" as rating_negative"),"categories.name as category_name"),u&&(m.where({"topics.json_id":i.store.getters.currentUser.json_id}),p.where({"topics.json_id":i.store.getters.currentUser.json_id})),(o||"0"===o)&&(m.where({"topics.category_id":o}),p.where({"topics.category_id":o})),n){const t=$["a"].trimSpecialAndLowercase(n).split(" ");t.forEach((t,e)=>{(t&&t.length||!isNaN(t))&&(0===e?(m.where("title_lc","like",c.a.raw(`"%${t}%"`)),p.where("title_lc","like",c.a.raw(`"%${t}%"`))):(m.orWhere("title_lc","like",c.a.raw(`"%${t}%"`)),p.orWhere("title_lc","like",c.a.raw(`"%${t}%"`))))})}m.orderBy("topics.added","desc");const h=d*s-s;m.offset(h),m.limit(s);const g=await l["a"].query(m),b=r()(g,t=>`${t.json_id}/${t.topic_id}`),v=Object.keys(b),y=_()(await l["a"].query(p),"0.number",0);t("STORE_CURRENT_PAGINATION",{perPage:s,page:d,pageItemIds:v}),t("STORE_CATEGORY",{categoryId:o,searchTerm:n,page:d,pageItemIds:v,totalItems:y}),t("STORE_ITEMS",b),e("ratings/storeRatings",{type:"topic",idField:"topic_id",items:g},{root:!0})}},S={get(t){return(e,a)=>_()(t.list.items,`${e}/${a}`,null)},paginatorPagesCount(t){return t.pagination.pagesCount},paginatorPageItems(t){return t.pagination.pageItemIds.map(e=>t.list.items[e])}};var T={namespaced:!0,state:I,mutations:O,actions:k,getters:S};i["default"].use(o["a"]);const x={my:{},list:{}},P={STORE_VOTE(t,{targetType:e,targetJsonId:a,targetId:i,value:o}){b()(t.my,`${e}.${a}/${i}`,o)},STORE_RATINGS(t,{type:e,items:a}){b()(t.list,e,a)}},E={async storeRatings({state:t,commit:e},{type:a,idField:i,items:o=[]}){const n=_()(t.list,a,{}),r={};o.forEach(t=>{const{rating_positive:e,rating_negative:a}=t;r[`${t.json_id}/${t[i]}`]={positive:e,negative:a}}),e("STORE_RATINGS",{type:a,items:{...n,...r}})},async loadVote({commit:t,getters:e,rootGetters:a},{targetType:i,targetJsonId:o,targetId:n}){const r=e.getVote(i,o,n);if(r||!1===r)return r;const{currentUser:{json_id:s}}=a;if(!s)return;const c=l["a"].getCertUserHashByJsonId(o),{currentUser:{cert_user_hash:d}}=a;let[u]=await l["a"].fileQuery(`data/users/${d}/data.json`,"ratings");u=u||{value:[]};const p=Object.values(u.value).find(t=>t.target_type===i&&t.target_hash===c&&t.target_id===n);return!!p&&(t("STORE_VOTE",{targetType:i,targetJsonId:o,targetId:n,value:p}),p)},async vote({getters:t,rootGetters:e,commit:a},{targetType:i,targetJsonId:o,targetId:n,direction:r="+"}){const{currentUser:{json_id:s}}=e,c={target_type:i,target_json_id:o,target_id:n,direction:r},d=t.getVote(i,o,n);d&&"undefined"!==typeof d.rating_id&&(c.rating_id=d.rating_id);const{id:u}=await l["a"].writeRowToTable(s,"rating",c);return a("STORE_VOTE",{targetType:i,targetJsonId:o,targetId:n,value:c}),Boolean(u||0===u)},async upvote({dispatch:t},{targetType:e,targetJsonId:a,targetId:i,previousVote:o}){const n=await t("vote",{targetType:e,targetJsonId:a,targetId:i,direction:"+"});if(n&&e){const t=`${a}/${i}`;let n=_()(x.list,`${e}.${t}.positive`,0),r=_()(x.list,`${e}.${t}.negative`,0);"-"===o&&(r-=1),n+=1,b()(x.list,`${e}.${t}`,{positive:n,negative:r})}return n},async downvote({dispatch:t},{targetType:e,targetJsonId:a,targetId:i,previousVote:o}){const n=await t("vote",{targetType:e,targetJsonId:a,targetId:i,direction:"-"});if(n&&e){const t=`${a}/${i}`;let n=_()(x.list,`${e}.${t}.positive`,0),r=_()(x.list,`${e}.${t}.negative`,0);"+"===o&&(n-=1),r+=1,b()(x.list,`${e}.${t}`,{positive:n,negative:r})}return n}},F={getVote(t){return(e,a,i)=>_()(t.my,`${e}.${a}/${i}`)},getRatings(t,e){return(e,a,i)=>({positive:_()(t.list,`${e}.${a}/${i}.positive`,0),negative:_()(t.list,`${e}.${a}/${i}.negative`,0)})}};var N={namespaced:!0,state:x,mutations:P,actions:E,getters:F};i["default"].use(o["a"]);const L={loading:!1,currentUser:{cert_user_id:null,cert_user_hash:null,json_id:null}},D={SET_LOADING(t,e){t.loading=e},SET_CURRENT_USER(t,e){const{cert_user_id:a,cert_user_hash:i,json_id:o}=e,n={cert_user_id:a,cert_user_hash:i,json_id:o};t.currentUser=n}},U={setLoading({commit:t,state:e},a){if(a=Boolean(a),e.loading!==a)return t("SET_LOADING",a)},setCurrentUser({commit:t},e){return t("SET_CURRENT_USER",e)}},R={isLoading(t){return t.loading},isLoggedIn(t){return Boolean(t.currentUser.cert_user_id)},currentUser(t){return t.currentUser}};e["a"]=new o["a"].Store({state:L,mutations:D,actions:U,getters:R,modules:{categories:f,comments:C,topics:T,ratings:N}})},c1ca:function(t,e,a){"use strict";var i=a("271d"),o=a.n(i);e["default"]=o.a},c282:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"inner-addon "+t.parentClass},[a("b-form-input",t._b({attrs:{value:t.value,disabled:t.disabled},on:{input:function(e){return t.$emit("input",e)},change:function(e){return t.$emit("change",e)},blur:function(e){return t.$emit("blur",e)},focus:function(e){return t.$emit("focus",e)}}},"b-form-input",t.$attrs,!1)),t.icon?a("icon",{attrs:{name:t.icon}}):t._e(),t.showReset?a("span",{staticClass:"reset",on:{click:function(e){return t.$emit("reset")}}},[t._v("X")]):t._e(),t.error?a("span",[t._v(t._s(t.error))]):t._e()],1)},o=[],n={inheritAttrs:!1,computed:{parentClass(){return this.icon&&this.icon?this.pos+"-addon":""}},props:{error:{type:String},disabled:{type:Boolean,default:!1},icon:{type:String},pos:{type:String},showReset:{type:Boolean},value:{type:[String,Number]}}},r=n,s=(a("98fd"),a("2877")),c=Object(s["a"])(r,i,o,!1,null,null,null);e["a"]=c.exports},c67d:function(t,e,a){"use strict";var i=a("91c0"),o=a.n(i);e["default"]=o.a},c75c:function(t,e,a){"use strict";var i=a("5c76"),o=a.n(i);e["default"]=o.a},c7f7:function(t,e,a){},c817:function(t,e,a){"use strict";var i=a("0874");i["a"].register({torrent:{width:512,height:512,enableBackground:"new 0 0 548.29 548.291",paths:[{d:"m277.893 433.35c-3.59 0-5.897.325-7.005.66v23.361h6.731c7.665 0 12.464-4.83 12.464-12.169-.001-8.125-4.8-11.852-12.19-11.852z"},{d:"m225.349 433.35c-3.596 0-5.903.325-7.005.66v23.361h6.74c7.656 0 12.458-4.83 12.458-12.169.004-8.125-4.802-11.852-12.193-11.852z"},{d:"m168.099 433.35c-11.26 0-17.265 12.398-17.265 27.643 0 15.035 6.375 26.992 17.265 26.992 10.985 0 17.166-12.073 17.166-27.538-.001-13.932-5.817-27.097-17.166-27.097z"},{d:"m472.929 131.394c-.031-2.523-.818-5-2.55-6.963l-105.724-120.754c-.025-.031-.057-.042-.089-.075-.63-.704-1.354-1.29-2.126-1.796-.231-.154-.462-.283-.704-.418-.688-.366-1.392-.671-2.126-.892-.209-.055-.377-.136-.577-.188-.803-.19-1.628-.308-2.467-.308h-259.809c-11.851 0-21.502 9.649-21.502 21.502v505.288c0 11.854 9.651 21.501 21.502 21.501h354.776c11.862 0 21.502-9.647 21.502-21.501v-394.2c-.005-.396-.062-.8-.106-1.196zm-376.172-109.892h249.058v110.006c0 5.943 4.813 10.751 10.751 10.751h94.961l.016 192.081c-49.959-.226-99.781 4.488-148.632-7.479-16.587-4.063-33.404-13.251-46.457-24.379-25.247-21.544-25.043-58.4-2.462-81.573 22.197-22.759 61.329-23.455 84.164-1.389 3.633 3.506 6.825 7.478 11.286 12.412 7.737-4.008 15.675-8.115 23.528-12.181-12.096-30.58-50.889-51.171-86.82-45.922-36.397 5.312-62.195 25.218-73.67 60.318-11.31 34.607-2.291 65.244 23.898 90.508 29.786 28.73 67.552 36.473 106.744 37.905 32.022 1.15 64.117.615 96.842 2.515h-132.69c-1.354-.094-2.714-.146-4.074-.242-25.071-1.784-48.153-12.388-67.817-28.935-38.417-32.314-48.528-83.394-24.507-123.56 24.163-40.379 75.994-57.334 121.537-39.768 3.76 1.452 7.491 2.975 12.672 5.047 4.789-7.706 9.461-15.244 14.08-22.667-44.243-35.875-127.152-20.147-165.651 30.499-43.352 57.03-30.884 122.995 31.041 179.625h-12.678c-40.035-29.821-60.772-82.479-50.636-131.319 11.258-54.26 58.453-96.634 114.766-103.675 6.938-.861 17.18 3.212 18.665-9.982 2.088-18.541-.81-22.121-19.6-19.422-63.509 9.068-110.852 41.542-133.552 102.046-22.339 59.549-10.896 114.344 28.824 162.354h-73.587zm40.581 413.485h-17.906v62.658h-11.347v-62.658h-17.72v-11.297h46.973zm30.118 63.855c-17.541 0-28.609-15.906-28.609-37.618 0-22.729 11.987-38.741 29.528-38.741 18.184 0 28.892 16.337 28.892 37.408 0 24.798-12.653 38.951-29.811 38.951zm71.927-1.192c-.923-2.199-2.396-8.236-4.154-17.454-1.749-9.659-4.704-12.725-11.166-12.955h-5.714v30.404h-11.26v-72.968c4.242-.87 10.615-1.522 17.168-1.522 8.945 0 15.035 1.754 19.19 5.932 3.409 3.392 5.349 8.557 5.349 14.805 0 9.531-5.451 16.011-11.254 18.54v.332c4.421 1.963 7.099 7.128 8.668 14.246 1.935 9.228 3.596 17.784 4.893 20.641h-11.72zm52.546 0c-.922-2.199-2.392-8.236-4.157-17.454-1.742-9.659-4.703-12.725-11.159-12.955h-5.714v30.404h-11.265v-72.968c4.246-.87 10.611-1.522 17.168-1.522 8.944 0 15.033 1.754 19.191 5.932 3.412 3.392 5.344 8.557 5.344 14.805 0 9.531-5.448 16.011-11.255 18.54v.332c4.426 1.963 7.103 7.128 8.667 14.246 1.926 9.228 3.602 17.784 4.892 20.641h-11.712zm57.797-.005h-37.564v-73.955h36.179v11.083h-24.83v19.091h23.445v10.972h-23.446v21.723h26.216zm59.277 0h-11.723l-16.236-32.474c-3.979-8.126-8.131-17.229-11.171-25.575l-.283.116c.462 9.544.556 19.296.556 31.465v26.457h-10.424v-73.944h12.922l16.055 31.719c4.152 8.209 7.748 16.766 10.613 24.777h.189c-.745-9.881-1.008-19.414-1.008-30.711v-25.795h10.521v73.965zm36.409-62.658v62.658h-11.359v-62.658h-17.727v-11.297h46.966v11.297"}]}})},cd5f:function(t,e,a){},d026:function(t,e,a){"use strict";var i=a("b5d8"),o=a.n(i);e["default"]=o.a},d138:function(t,e,a){"use strict";var i=a("2988"),o=a.n(i);o.a},d2ef:function(t,e,a){},d567:function(t,e,a){},d92b:function(t,e,a){},dbeb:function(t,e,a){"use strict";var i=a("9183"),o=a.n(i);o.a},dc2e:function(t,e,a){"use strict";var i=a("0ecc"),o=a.n(i);o.a},dd10:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Unauthorized access":"Несанкціонований доступ","Please login first with your ZeroID at top right corner!":"Будь ласка ввійдіть через ваш ZeroID у верхньому правому кутку!"}}'),delete t.options._Ctor}},ddd3:function(t,e,a){"use strict";var i=a("ed9d"),o=a.n(i);o.a},e5dd:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return s}));var i=a("3094"),o=a("a6f4"),n=a("c0d6");function r(t){const e=Object(o["a"])(()=>n["a"].getters.isLoggedIn),a=Object(o["a"])(()=>n["a"].getters.currentUser);return!!e.value&&("1PpvHgysHyZk6AEaG38SzH2FXgcr74vJt5"===a.value.cert_user_hash||String(t)===String(a.value.json_id))}async function s(t){const e=Object(o["a"])(()=>n["a"].getters.currentUser);String(t)===String(e.value.json_id)?await i["a"].publishUserContent(t):i["a"].notification("info","Sign manually in sidebar: "+i["a"].userFilePath(t,"content.json"),1e4)}},e644:function(t,e,a){"use strict";var i=a("9d14"),o=a.n(i);e["default"]=o.a},e7a4:function(t,e,a){"use strict";var i=a("d2ef"),o=a.n(i);o.a},e886:function(t,e,a){"use strict";var i=a("a422"),o=a.n(i);o.a},e8a7:function(t,e,a){"use strict";var i=a("64da"),o=a.n(i);e["default"]=o.a},ea3f:function(t,e,a){"use strict";var i=a("c7f7"),o=a.n(i);o.a},eb6a:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Settings":"Налаштування","Feeds":"Стрічки","Showing only categories you follow. You could follow any other category on category page.":"Відображаються лише категорії за якими ви слідкуєте. Ви можете підписатись на інші на сторінці категорії.","You can follow back any category immediatly after you do unfollow and until you stay on this page.":"Ви можете повторно підписатись на категорію яку щойно перестали читати, допоки не підете з цієї сторінки"}}'),delete t.options._Ctor}},ed9d:function(t,e,a){},eef8:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("icon-input",{staticClass:"mt-1",attrs:{icon:"magnet",pos:"left",placeholder:t.$t("fields.magnet.placeholder"),disabled:t.disabled,value:t.value},on:{input:t.updateValue,change:t.updateValue,blur:function(e){return t.$emit("blur",e)},focus:function(e){return t.$emit("focus",e)}}}),a("span",[t._v(t._s(t.error))])],1)},o=[],n=a("c282"),r={components:{iconInput:n["a"]},props:{error:{type:String},disabled:{type:Boolean,default:!1},value:{type:String,default:""}},methods:{updateValue(t){this.$emit("input",t)}}},s=r,c=a("2877"),l=a("c67d"),d=Object(c["a"])(s,i,o,!1,null,"200159be",null);"function"===typeof l["default"]&&Object(l["default"])(d);e["a"]=d.exports},f18c:function(t,e,a){"use strict";var i=a("6db9"),o=a.n(i);e["default"]=o.a},f6b3:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-list-group",[a("b-list-group-item",{key:"default",staticClass:"item",attrs:{"v-if":t.showCreate,href:"#"},on:{click:function(e){return t.select()}}},[t._v("Створити новий матеріал")]),t._l(t.items,(function(e){return a("b-list-group-item",{key:e.topic_id,staticClass:"item",attrs:{href:"#"},on:{click:function(a){return t.select(e)}}},[t._v(t._s(t.itemPrefix)+t._s(e.title))])}))],2)},o=[],n=(a("ac6a"),a("3094")),r=a("b680"),s=a("b047"),c=a.n(s),l=a("2f62"),d=a("2561"),u=a.n(d),p={props:{showCreate:{type:Boolean,default:!1},itemPrefix:{type:String,default:""},value:{type:String,default:""}},data:()=>({items:[]}),watch:{value(t,e){t&&t!==e&&t.length&&this.search(t)}},computed:{...Object(l["c"])(["isLoggedIn","currentUser"])},methods:{search:c()((async function(t){const e=new u.a("topics"),a=r["a"].trimSpecialAndLowercase(t).split(" ");a.forEach((t,a)=>{(t&&t.length||!isNaN(t))&&(0===a?e.where("title_lc","like",u.a.raw(`"%${t}%"`)):e.orWhere("title_lc","like",u.a.raw(`"%${t}%"`)))}),this.isLoggedIn&&e.where("json_id",this.currentUser.json_id),e.limit(5),this.items=await n["a"].query(e)}),500),select(t){this.$emit("select",t)}}},m=p,f=(a("054b"),a("2877")),h=Object(f["a"])(m,i,o,!1,null,"4178e1fe",null);e["a"]=h.exports},fe66:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"uk":{"Follow page":"Стежити","You could follow updates on ZeroHello home page feed":"Ви можете стежити за оновленнями з цієї сторінки на головній сторінці ZeroHello","Followed":"Відстежується"}}'),delete t.options._Ctor}}});