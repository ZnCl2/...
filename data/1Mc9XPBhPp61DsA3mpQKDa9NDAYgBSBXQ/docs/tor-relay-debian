<!DOCTYPE html>
 <html>
 <head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width="device-width," initial-scale=1">
   <meta name="author" content="The Tor Project, Inc.">
   <meta name="description" content="The Tor Project's free software protects your privacy online. Site blocked? Email [mailto:gettor@torproject.org] for help downloading Tor Browser.">
   <meta name="keywords" content="tor, tor project, tor browser, avoid censorship, traffic analysis, anonymous communications, privacy, avoid surveillance, online security, anonymous online, private browsing, anonymity online, online privacy, protect privacy, private mac browser, private windows browser, private android browser, linux browser, anonymity network, tor network, onion router, onion browser">
   <meta property="og:image" content="https://www.torproject.org/images/tor-logo.jpg">
   <title>Tor Project: Relay Configuration Instructions on Debian/Ubuntu</title>
   <link rel="icon" href="../images/favicon.ico">
   <link href="../css/master.min.css" rel="stylesheet">
   <!--[if lte IE 8]>
   <link href="../css/ie8-and-down.min.css" rel="stylesheet">
   <![endif]-->
   <!--[if lte IE 7]>
   <link href="../css/ie7-and-down.min.css" rel="stylesheet">
   <![endif]-->
   <!--[if IE 6]>
   <link href="../css/ie6.min.css" rel="stylesheet">
   <![endif]-->
</head>
<body>
<div id="wrap">
  <div id="header">
    <h1 id="logo"><a href="../index.html">Tor</a></h1>
      <div id="nav">
        <ul>
        <li><a href="../index.html">Home</a></li>
<li><a href="../about/overview.html">About Tor</a></li>
<li><a class="active documentation tor-relay-debian" href="documentation.html">Documentation</a></li>
<li><a href="../press/press.html">Press</a></li>
<li><a href="https://blog.torproject.org/blog/">Blog</a></li>
<li><a href="../about/contact.html">Contact</a></li>
        </ul>
      </div>
      <!-- END NAV -->
      <div id="calltoaction">
        <ul>
          <li class="donate"><a href="../download/download-easy.html">Download</a></li>
<li class="donate"><a href="../getinvolved/volunteer.html">Volunteer</a></li>
<li class="donate"><a href="../donate/donate-button.html">Donate</a></li>
        </ul>
      </div>
      <!-- END CALLTOACTION -->
  </div>
  <!-- END HEADER -->
<div id="content" class="clearfix">
  <div id="breadcrumbs">
    <a href="../index.html">Home &raquo; </a>
    <a href="documentation.html">Documentation &raquo; </a>
    <a href="tor-doc-relay.html">Configure Tor Relay</a>
  </div>
  <div id="maincol">
    <h1>Configuring a Tor relay on Debian/Ubuntu</h1>
    <hr>
    <p>
    The Tor network relies on volunteers to donate bandwidth. The more
    people who run relays, the faster the Tor network will be. If you have
    at least 250 kilobytes/s each way, please help out Tor by configuring your
    Tor to be a relay too.
    </p>
    <hr>
    <a id="zero"></a>
    <a id="install"></a>
    <h2><a class="anchor" href="tor-relay-debian#install">Step One: Download and Install Tor</a></h2>
    <br>
    <p>If you're on Debian, start with "apt-get install tor".</p>
    <p><b>Do not use the packages in Ubuntu's universe.</b> If you're
    on Ubuntu or if you want to track newer Tor packages, follow the
    <a href="debian.html#ubuntu">Tor on Ubuntu or Debian</a>
    instructions to use our repository.
    </p>
    <p>For other Unix/Linux users, you can download Tor from one of our
    <a href="../download/download-unix.html">repositories</a>.</p>
    <hr>
    <a id="setup"></a>
    <h2><a class="anchor" href="tor-relay-debian#setup">Step Two: Set it up as a relay</a></h2>
    <p>
    1. Make sure your clock, date, and timezone are set correctly. Install
    the ntp or openntpd (or similar) package to keep it that way.
    </p>
    <p>
    2. Edit the bottom part of <a href="faq.html#torrc">/etc/tor/torrc</a>. Define an ORPort. <b>Note
    that public relays default to being <a href="faq.html#ExitPolicies">exit relays</a></b> &mdash; either change your
    ExitPolicy line or read our <a
href="https://trac.torproject.org/projects/tor/wiki//doc/TorExitGuidelines">guidelines
    for exit relay operators</a>. Be sure to set your ContactInfo line
    so we can contact you if you need to upgrade or something goes wrong.
    </p>
    <p>
    3. If you are using a firewall, open a hole in your firewall
    so incoming connections can reach the ports you configured
    (ORPort, plus DirPort if you enabled it). If you have a
    hardware firewall (Linksys box, cablemodem, etc) you might like <a
    href="http://portforward.com/">portforward.com</a>. Also, make sure you
    allow all <em>outgoing</em> connections too, so your relay can reach the
    other Tor relays.
    </p>
    <p>
    4. Restart your relay: "service tor reload" (as root).
    </p>
    <hr>
    <a id="check"></a>
    <h2><a class="anchor" href="tor-relay-debian#check">Step Three: Make sure it is working</a></h2>
    <br>
    <p>Once your relay connects to the network, it will
    try to determine whether the ports you configured are reachable from
    the outside. This step is usually fast, but it may take a few minutes.
    Look for a <a href="faq.html#Logs">log entry</a> in your
    /var/log/tor/log like
    <tt>Self-testing indicates your ORPort is reachable from the outside. Excellent.</tt>
    If you don't see this message, it means that your relay is not reachable
    from the outside &mdash; you should re-check your firewalls, check that it's
    testing the IP and port you think it should be testing, etc.
    </p>
    <p>When it decides that it's reachable, it will upload a "server
    descriptor" to the directory authorities, to let clients know
    what address, ports, keys, etc your relay is using. After a few
    hours (to give it enough time to propagate), you can query
    <a href="https://atlas.torproject.org/">Atlas</a> to see whether your
    relay has successfully registered in the network.</p>
    <hr>
    <a id="after"></a>
    <h2><a class="anchor" href="tor-relay-debian#after">Step Four: Once it is working</a></h2>
    <br>
    <p>
    5. Read
    <a href="https://trac.torproject.org/projects/tor/wiki/doc/OperationalSecurity">about operational security</a>
    to get ideas how you can increase the security of your computer.
    </p>
    <p>
    6. Decide about rate limiting. Cable modem, DSL, and other users
    who have asymmetric bandwidth (e.g. more down than up) should
    rate limit to their slower bandwidth, to avoid congestion. See the <a
    href="faq.html#BandwidthShaping">rate
    limiting FAQ entry</a> for details.
    </p>
    <p>
    7. If your computer isn't running a webserver, and you haven't set
    AccountingMax, please consider
    changing your ORPort to 443 and/or your DirPort to 80. Many Tor users
    are stuck behind firewalls that only let them browse the web, and
    this change will let them reach your Tor relay. If you are already
    using ports 80 and 443, other useful ports are 22, 110, and 143.
    </p>
    <p>
    8. Consider backing up your Tor relay's private keys
    ("/var/lib/tor/keys/secret_id_key" and
    "/var/lib/tor/keys/ed25519_master_id_secret_key").
    You'll need these identity keys to
    <a href="faq.html#UpgradeOrMove">move or restore your Tor relay</a>.
    </p>
    <p>
    9. If you run an exit relay (great!), don't miss out on our <a
    href="https://trac.torproject.org/projects/tor/wiki/doc/TorExitGuidelines">Exit Guidelines</a>, including
    setting your reverse DNS hostname to make it obvious that you're
    a Tor exit relay, and serving the <a
    href="https://gitweb.torproject.org/tor.git/plain/contrib/operator-tools/tor-exit-notice.html">Tor
    exit notice</a> page on your DirPort.
    </p>
    <p>
    10. Subscribe to the <a
    href="https://lists.torproject.org/cgi-bin/mailman/listinfo/tor-announce">tor-announce</a>
    mailing list. It is very low volume, and it will keep you informed
    of new stable releases.
    As a relay operator, you should consider subscribing to the
    <a href="https://lists.torproject.org/cgi-bin/mailman/listinfo/tor-relays">
    tor-relays mailing list</a> too.
    We have more <a href="documentation.html#MailingLists">mailing
    lists</a> as well.
    </p>
    <p>
    11. Read the <a
    href="https://blog.torproject.org/blog/lifecycle-of-a-new-relay">"Lifecycle
    of a New Relay"</a> document to learn what sort of activity and usage
    patterns you can expect during your relay's first weeks of operation.
    </p>
    <p>
    12. If you want to run more than one relay that's great, but please set <a
    href="faq.html#MultipleRelays">the
    MyFamily option</a> in all your relays' configuration files.
    </p>
    <p>
    13. You might like to use the <a
    href="https://www.atagar.com/arm/">arm</a> relay monitor to watch
    your relay's activities from the command line. First, "sudo apt-get
    install tor-arm". Second, as the user that will be running arm, run
    "sudo adduser $USER debian-tor" to add your user to the debian-tor
    group so it can reach Tor's controlsocket. Then log out and log back
    in (so your user is actually in the group), and run "arm".
    </p>
    <p>
    14. When you change your Tor configuration, remember to verify that
    your relay still works correctly after the change.
    </p>
    <hr>
    <p>If you have suggestions for improving this document, please <a
    href="../about/contact.html">send them to us</a>. Thanks!</p>
  </div>
  <!-- END MAINCOL -->
  <div id="sidecol">
<div class="img-shadow">
  <div id="sidenav">
    <ul>
<li><a href="documentation.html">Documentation Overview</a></li>
<li><a href="../projects/torbrowser.html">Install Tor Browser</a></li>
<li><a href="https://guardianproject.info/apps/orbot/">Tor on Android</a></li>
<li><a href="../projects/projects.html">Other Tor software</a></li>
<li class="dropdown"><a class="active" href="installguide.html">Expert guides</a></li>
<li>
<ul>
<li><a href="debian.html">Installing Tor on Debian/Ubuntu</a></li>
<li><a href="rpms.html">Installing Tor on Fedora/CentOS</a></li>
<li><a href="tor-doc-unix.html">Installing Tor Source</a></li>
<li><a href="tor-doc-osx.html">MacPorts</a></li>
<li class="active"><a class="active" href="tor-relay-debian.html">Configuring a Relay manually</a></li>
<li><a href="tor-doc-relay.html">Configuring a Relay graphically</a></li>
<li><a href="tor-hidden-service.html">Configuring a Hidden Service</a></li>
<li><a href="bridges.html">Understanding bridges</a></li>
<li><a href="verifying-signatures.html">Verify package signatures</a></li>
</ul>
</li>
<li class="dropdown"><a href="manual.html">Manuals</a></li>
<li><a href="https://trac.torproject.org/projects/tor/wiki/">Tor Wiki</a></li>
<li><a href="faq.html">General FAQ</a></li>
<li><a href="faq-abuse.html">Abuse FAQ</a></li>
<li><a href="trademark-faq.html">Trademark FAQ</a></li>
<li><a href="../eff/tor-legal-faq.html">Tor Legal FAQ</a></li>
</ul>
  </div>
  <!-- END SIDENAV -->
</div>
<!-- END IMG-SHADOW -->
<div class="img-shadow">
  <div class="infoblock">
    <h2 class="bulb">Tor Tip</h2>
    <p>Tor is written for and supported by people like you. <a href="../donate/donate.html">Donate today</a>!</p>
  </div>
  <!-- END INFOBLOCK -->
</div>
<!-- END IMG-SHADOW -->
  </div>
  <!-- END SIDECOL -->
</div>
<!-- END CONTENT -->
    <div id="footer">
    	<div class="onion"><img src="../images/onion.jpg" alt="Tor" width="78" height="118"></div>
      <div class="about">
    <p>Trademark, copyright notices, and rules for use by third parties can be found
    <a href="trademark-faq.html">in our FAQ</a>.</p>
<!--
        Last modified: Fri Aug 11 11:19:58 2017 +0200
        Last compiled: Tue Aug 22 2017 15:17:33 +0000
-->
      </div>
      <!-- END ABOUT -->
      <div class="col first">
      	<h4>About Tor</h4>
        <ul>
          <li><a href="../about/overview.html">What Tor Does</a></li>
          <li><a href="../about/torusers.html">Users of Tor</a></li>
          <li><a href="../about/corepeople.html">Core Tor People</a></li>
          <li><a href="../about/sponsors.html">Sponsors</a></li>
          <li><a href="../about/contact.html">Contact Us</a></li>
        </ul>
      </div>
      <!-- END COL -->
      <div class="col">
      	<h4>Get Involved</h4>
        <ul>
          <li><a href="../donate/donate-foot.html">Donate</a></li>
          <li><a href="documentation.html#MailingLists">Mailing Lists</a></li>
          <li><a href="hidden-services.html">Hidden Services</a></li>
          <li><a href="../getinvolved/translation.html">Translations</a></li>
        </ul>
      </div>
      <!-- END COL -->
      <div class="col">
      	<h4>Documentation</h4>
        <ul>
          <li><a href="tor-manual.html">Manuals</a></li>
          <li><a href="documentation.html">Installation Guides</a></li>
          <li><a href="https://trac.torproject.org/projects/tor/wiki/">Tor Wiki</a></li>
          <li><a href="faq.html">General Tor FAQ</a></li>
        </ul>
      </div>
        <div class="col">
        <a href="https://internetdefenseleague.org/"><img src="../images/InternetDefenseLeague-footer-badge.png" alt="Internet Defense League" width="125" height="125"></a>
        </div>
      <!-- END COL -->
    </div>
    <!-- END FOOTER -->
  </div>
  <!-- END WRAP -->
</body>
</html>
