{
	"db_name": "Zero86",
	"db_file": "data/zero86.db",
	"version": 2,

	"maps": {
		"users/.+/content.json": {
			"to_json_table": [ "cert_auth_type", "cert_user_id" ],
			"file_name": "data.json"
		},

		"users/.+/data.json": {
			"to_table": [
				{ "node": "systems", "table": "system", "key_col": "id" }
			]
		}
	},

	"tables": {
		"json": {
			"cols": [
				["json_id", "INTEGER PRIMARY KEY AUTOINCREMENT"],
				["directory", "TEXT"],
				["file_name", "TEXT"],
				["cert_auth_type", "TEXT"],
				["cert_user_id", "TEXT"]
			],
			"indexes": ["CREATE UNIQUE INDEX path ON json(directory, file_name)"],
			"schema_changed": 1
		},

		"system": {
			"cols": [
				["id", "TEXT"],
				["title", "TEXT"],
                ["description", "TEXT"],
                ["boot_order", "INT"],
                ["memory", "INT"],
                ["video_memory", "INT"],
                ["filesystem", "BIT"],
                ["cd_id", "TEXT"],
                ["cd_size", "INT"],
                ["floppy_id", "TEXT"],
                ["floppy_size", "INT"],
                ["hard_disk_id", "TEXT"],
                ["hard_disk_size", "INT"],
                ["snapshot_id", "TEXT"],
                ["snapshot_size", "INT"],
				["date_added", "DATETIME"],
				["json_id", "INTEGER REFERENCES json (json_id)"]
			],
			"indexes": ["CREATE UNIQUE INDEX system_key ON system(date_added, json_id)"],
			"schema_changed": 1
		}
	}
}
