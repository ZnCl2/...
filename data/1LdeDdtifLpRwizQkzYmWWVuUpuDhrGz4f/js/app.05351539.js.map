{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Message.vue?5f3d","webpack:///./prod.config.js","webpack:///./src/store/modules/ConversationProviders/zn/index.js","webpack:///./prod.default.config.js","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/App.vue?6027","webpack:///./src/components/Viewpage.vue?f753","webpack:///./src/views/Conversation.vue?6a82","webpack:///./src/components/ConversationListNavbar.vue?3923","webpack:///src/components/ConversationListNavbar.vue","webpack:///./src/components/ConversationListNavbar.vue?dceb","webpack:///./src/components/ConversationListNavbar.vue","webpack:///./src/components/ConversationList.vue?976f","webpack:///./src/components/ConversationListItem.vue?e9f6","webpack:///./src/components/Icon.vue?f150","webpack:///src/components/Icon.vue","webpack:///./src/components/Icon.vue?cf51","webpack:///./src/components/Icon.vue","webpack:///./src/components/Dropdown.vue?d4a0","webpack:///src/components/Dropdown.vue","webpack:///./src/components/Dropdown.vue?50aa","webpack:///./src/components/Dropdown.vue","webpack:///./src/components/ConversationAvatar.vue?a588","webpack:///src/components/ConversationAvatar.vue","webpack:///./src/components/ConversationAvatar.vue?db34","webpack:///./src/components/ConversationAvatar.vue","webpack:///src/components/ConversationListItem.vue","webpack:///./src/components/ConversationListItem.vue?e965","webpack:///./src/components/ConversationListItem.vue","webpack:///./src/components/ConversationListActions.vue?77f8","webpack:///./src/components/ConversationProviderManager.vue?011a","webpack:///src/components/ConversationProviderManager.vue","webpack:///./src/components/ConversationProviderManager.vue?d91d","webpack:///./src/components/ConversationProviderManager.vue","webpack:///./src/components/Settings.vue?c64e","webpack:///src/components/Settings.vue","webpack:///./src/components/Settings.vue?32cf","webpack:///./src/components/Settings.vue","webpack:///src/components/ConversationListActions.vue","webpack:///./src/components/ConversationListActions.vue?40b2","webpack:///./src/components/ConversationListActions.vue","webpack:///src/components/ConversationList.vue","webpack:///./src/components/ConversationList.vue?63e3","webpack:///./src/components/ConversationList.vue","webpack:///./src/components/ConversationNavbar.vue?c903","webpack:///src/components/ConversationNavbar.vue","webpack:///./src/components/ConversationNavbar.vue?7219","webpack:///./src/components/ConversationNavbar.vue","webpack:///./src/components/Conversation.vue?6590","webpack:///./src/components/ConversationHistory.vue?063d","webpack:///./src/components/Message.vue?1149","webpack:///src/components/Message.vue","webpack:///./src/components/Message.vue?93ea","webpack:///./src/components/Message.vue","webpack:///./src/components/UserAvatar.vue?cb52","webpack:///src/components/UserAvatar.vue","webpack:///./src/components/UserAvatar.vue?24a9","webpack:///./src/components/UserAvatar.vue","webpack:///src/components/ConversationHistory.vue","webpack:///./src/components/ConversationHistory.vue?00cd","webpack:///./src/components/ConversationHistory.vue","webpack:///./src/components/Actionbar.vue?0722","webpack:///./src/components/ResourceExtUI.vue?b02e","webpack:///src/components/ResourceExtUI.vue","webpack:///./src/components/ResourceExtUI.vue?bbe6","webpack:///./src/components/ResourceExtUI.vue","webpack:///./src/components/InputExtUI.vue?f026","webpack:///src/components/InputExtUI.vue","webpack:///./src/components/InputExtUI.vue?a778","webpack:///./src/components/InputExtUI.vue","webpack:///src/components/Actionbar.vue","webpack:///./src/components/Actionbar.vue?3958","webpack:///./src/components/Actionbar.vue","webpack:///src/components/Conversation.vue","webpack:///./src/components/Conversation.vue?5124","webpack:///./src/components/Conversation.vue","webpack:///./src/components/ConversationInfoNavbar.vue?b91d","webpack:///src/components/ConversationInfoNavbar.vue","webpack:///./src/components/ConversationInfoNavbar.vue?8115","webpack:///./src/components/ConversationInfoNavbar.vue","webpack:///./src/components/ConversationInfo.vue?abea","webpack:///src/components/ConversationInfo.vue","webpack:///./src/components/ConversationInfo.vue?63a0","webpack:///./src/components/ConversationInfo.vue","webpack:///src/views/Conversation.vue","webpack:///./src/views/Conversation.vue?6da4","webpack:///./src/views/Conversation.vue","webpack:///src/components/Viewpage.vue","webpack:///./src/components/Viewpage.vue?f8ea","webpack:///./src/components/Viewpage.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/store/getters.js","webpack:///./src/store/actions.js","webpack:///./src/store/mutations.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/App.vue?165b","webpack:///./src/ZeroFrame.js","webpack:///./src/pluginInstallHandler.js","webpack:///./src/store/modules/ConversationProviders/zn/ZeroFrame.js","webpack:///./src/defaultPluginInstallHandler.js","webpack:///./src/defaultConfig.js","webpack:///./src/store/modules/ConversationProviders/index.js","webpack:///./src/store/modules/ConversationProviders sync ^\\.\\/.*$"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","publicPath","debug","process","prodConf","require","err","defaultNamespace","JSON","parseS","string","json","parse","e","copy","stringify","pageSiteInfo","Page","conversationId","messageBody","this","cmd","message","body","dateAdded","moment","format","privatekey","group","UUID","bR","btoa","res","iv","encMsg","siteInfo","log","out","document","getElementById","nUser","auth_address","userId","userName","cert_user_id","VueApp","$store","commit","state","innerHTML","address","peers","settings","size","Date","content","modified","page","setSiteInfo","params","rGroup","conversations","msgObj","decodeURIComponent","identityAddress","signed_by","cert","msgUUID","dispatch","hash","ZeroFrame","jdenticon","config","hues","lightness","color","grayscale","saturation","backColor","curUser","providerName","id","messagekeys","lastMessage","messages","getters","isAvailable","isReady","isLoggedIn","conversationExists","getCurUser","getUserAvatar","toSvg","getConversationAvatar","validateMessage","trim","managerComponent","Vue","component","computed","user","alreadyInConversation","mapGetters","state_curConversation","methods","changeCert","joinConversation","joinConversationInProvider","leaveConversation","leaveConversationInProvider","mapMutations","changeConversation","template","conversationListItemActions","onclick","classes","messageActions","mutations","logIn","logOut","addMessage","messageData","deleteMessage","messagekey","index","indexOf","conversationName","actions","init","console","sendMessage","Error","fetchMessages","Promise","resolve","reject","namespaced","map","webpackContext","req","webpackContextResolve","code","keys","_vm","_h","$createElement","_c","_self","staticClass","attrs","ref","staticRenderFns","curView","tag","isInConversation","conversationInfoOpen","anyProviderAvailable","_m","oneProviderMode","getAllConversationProviders","anyProviderReady","on","$event","toggleConversationInfoOpen","getCurConversation","_e","_v","openDialog","getAllConversations","_l","conversation","updateConversationInfoOpen","scrolledToBottom","setOpenDialog","staticStyle","class","dropdownActive","active","handleClick","ctrlKey","shiftKey","altKey","metaKey","preventDefault","conversationProviderHasAvatarProvider","_s","timestamp","getConversationListItemActions","scopedSlots","_u","fn","scope","stopPropagation","item","disabled","dropdownAction","sActive","align","menuType","directives","rawName","expression","setActive","_t","style","y","x","eager","$slots","items","useAvatar","domProps","avatarHTML","openDialogAnimation","target","currentTarget","usableConversationProviders","$$selectedVal","Array","filter","options","selected","val","_value","multiple","provider","isAvailableProvider","curProviderManagerComponent","toggleTheme","darkmode","ipluginName","pluginName","isPluginInstalled","composing","install","closeConversationAndConversationInfo","avatarVisible","openConversationInfo","updateHistoryScrolledToBottom","historyScrolledToBottom","curTyping","typer","curConversation","infiniteHandler","slot","showStickyDateSeparator","stickyDateSeparator","isNewDay","isFollowUp","isOwn","dateSeparator","scrollToBottom","bodyRendered","getMessageActions","rmsgbody","$emit","resourceExtsOpen","inputExtsOpen","actionbarInnerHeight","updateAddSnippet","msgBodyC","selectionStart","selectionEnd","selection","updateMsgBody","updateInputExtsOpen","toggleResourceExts","rows","maxRows","type","_k","keyCode","send","msgBody","_b","sendBtnBinds","resourceExtComponents","componentName","cI","updateActive","clamp","min","max","closeConversationInfo","curConversationInfoComponent","escapeHtml","text","replace","views","curViewId","ConversationProviders","plugins","isPluginReady","ready","pluginFunctionality","functionality","activePlugins","plugin","functionalities","pluginFunctionalityRenderMsgBody","renderMsgBody","msg","pluginNameI","resolveId","promise","addOnceId","worker","postMessage","msgbody","nrmsgbody","rcomponents","resourceExts","inputExtComponents","inputExts","pageHidden","pageHiddenProp","hidden","msHidden","webkitHidden","warn","openConversation","closeConversation","newMsg","pluginFunctionalityNewMsg","strippedConversation","displayNotification","notification","createNotification","title","showAlways","assign","Notification","permission","requestPermission","then","changeView","setViewId","changeViewId","registerPlugin","pluginPromise_addOn","event","func","pluginPromise_removeOn","pluginPromise_addOnce","once","pluginPromise_removeOnce","pluginPromise_addOnId","onId","pluginPromise_removeOnId","pluginPromise_addOnceId","onceId","pluginPromise_removeOnceId","pluginSetDeclaredFunctionalities","declaredFunctionalities","functionalityI","pluginReady","pluginSetResourceExts","compiledResourceExts","resourceExtI","resourceExt","componentObj","Function","args","pluginSetInputExts","compiledInputExts","inputExtI","inputExt","default","use","Vuex","Store","strict","createLogger","pluginInstallHandler","productionTip","promiseClass","obj","events","onmessage","funcI","removeOnceId","eventI","removeOnce","addOn","store","removeOn","addOnce","addOnId","removeOnId","initWorkerPromise","depPath","depType","getDepCode","declareFunctionalities","iPluginName","installPlugin","render","h","App","mounted","$nextTick","setTimeout","requestAnimationFrame","setAttribute","$mount","CMD_INNER_READY","CMD_RESPONSE","CMD_WRAPPER_READY","CMD_PING","CMD_PONG","CMD_WRAPPER_OPENED_WEBSOCKET","CMD_WRAPPER_CLOSE_WEBSOCKET","url","waiting_cb","wrapper_nonce","location","href","connect","next_message_id","parent","addEventListener","onMessage","undefined","to","response","onOpenWebsocket","onCloseWebsocket","onRequest","cb","error","concat","XMLHttpRequest","realOpen","open","ajax_key","newOpen","method","async","realFetch","fetch","newFetch","filesadded","loadjscssfile","filename","filetype","fileref","createElement","onload","onerror","getElementsByTagName","appendChild","checkloadjscssfile","initWorkerPromiseCB","notificationId","focus_tab","Worker","f","URL","createObjectURL","Blob","depCode","unescape","encodeURIComponent","loadDefaultProviders","loadDefaultPlugins","conversationProviders","providerI","getConversationProvider","getCurConversationProvider","conversationI","sort","a","b","isBefore","getConversation","getConversationMessages","msgII","msgI","unshift","getCurConversationMessages","getConversationProviderUser","getCurConversationUser","registerConversationProvider","addConversationProvider","sendMessage2Cur","updateTyping"],"mappings":"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OAAOnB,EAAIyH,cAActG,IAAS,oBAAoB,SAASA,GAAQ,OAAOnB,EAAIoH,iBAAiBjG,IAAS,gBAAgB,SAASA,GAAQ,OAAOnB,EAAIwI,aAAaD,EAAIpH,UAAc,IACnmB,GAAkB,G,gkBCmBtB,QACA,kBACA,OACA,SACA,YACA,YAEA,sBACA,oBACA,WACA,YACA,aAGA,KAdA,WAeA,OACA,sBAGA,aACA,SADA,WAEA,qBAEA,2BAJA,WAKA,gCAEA,yBAEA,2BACA,+BAGA,UAEA,mBAfA,WAkBA,IAFA,SAEA,uCACA,6BACA,KACA,MAIA,WAEA,wCAEA,SACA,cADA,SACA,GACA,gCAEA,iBAJA,SAIA,GACA,mCAEA,aAPA,SAOA,iEACA,6BACA,4DC7EoV,MCOhV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,wkBCsEf,SAASsH,GAAM1D,EAAK2D,EAAKC,GACzB,qBAGA,UAEA,iBACA,IACA,yCACA,iBACA,mCACA,gCACA,iBACA,eACA,iCACA,8BACA,iBAEA,uBACA,OACA,SAKA,QAEA,IACA,iBACA,YACA,OACA,iBACA,eAEA,kCACA,KARA,WASA,OACA,iBACA,eACA,WACA,OACA,WACA,oBACA,iBACA,yBAGA,QApBA,WAoBA,WACA,2BACA,iBACA,mCACA,gCACA,iBACA,eACA,iCACA,8BACA,iBACA,uDACA,KACA,MACA,UAGA,sDACA,iBACA,2BACA,wBACA,iBACA,eACA,yBACA,sBACA,iBACA,aAIA,aACA,SADA,WAEA,qBAEA,UAJA,WAKA,0BACA,oBAEA,QACA,QACA,IACA,IAGA,oCAEA,aAhBA,WAiBA,SAIA,OAHA,qCACA,mBAEA,IAEA,gBACA,2DAGA,YACA,cADA,SACA,GACA,gBAEA,iBAJA,SAIA,GACA,0BACA,oBAEA,QACA,QACA,IACA,IAGA,kCACA,yBACA,EACA,qBAGA,mBAEA,8CACA,4CACA,+BACA,8BAEA,oBA3BA,WA2BA,8DACA,sBAEA,KA9BA,WA8BA,WACA,mCACA,kBACA,GACA,wBACA,aACA,yBAIA,mBACA,qBAGA,mBA5CA,WA4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","file":"js/app.05351539.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/1LdeDdtifLpRwizQkzYmWWVuUpuDhrGz4f/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=029235a4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=029235a4&lang=scss&scoped=true&\"","module.exports = {\r\n\tpublicPath: '/1LdeDdtifLpRwizQkzYmWWVuUpuDhrGz4f/'\r\n};\r\n","// 1LdeDdtifLpRwizQkzYmWWVuUpuDhrGz4f\r\n\r\nimport Vue from 'vue';\r\nimport jdenticon from 'jdenticon';\r\nimport { mapGetters, mapMutations } from 'vuex';\r\nimport moment from 'moment';\r\nimport UUID from 'uuid/v5';\r\n\r\nimport ZeroFrame from './ZeroFrame.js';\r\n\r\nconst debug = process.env.NODE_ENV !== 'production';\r\n\r\nvar prodConf = null;\r\n\r\ntry {\r\n\tprodConf = require('../../../../../prod.config.js');\r\n} catch (err) {\r\n\tprodConf = require('../../../../../prod.default.config.js');\r\n}\r\n\r\nconst defaultNamespace = '4198df1b-c8ac-44a3-9240-c76de38f80b2';\r\n\r\nJSON.parseS = function(string) {\r\n\tlet json = null;\r\n\ttry {\r\n\t\tjson = JSON.parse(string);\r\n\t} catch (e) {\r\n\t\tjson = null;\r\n\t}\r\n\treturn json;\r\n};\r\n\r\nJSON.copy = function(json) {\r\n\tconst string = JSON.stringify(json);\r\n\treturn JSON.parseS(string);\r\n};\r\n\r\nlet pageSiteInfo = null;\r\n\r\nclass Page extends ZeroFrame {\r\n\tsendMessage(conversationId, messageBody) {\r\n\t\tif (conversationId === '#Lobby') {\r\n\t\t\tthis.cmd('peerBroadcast', {\r\n\t\t\t\tmessage: {\r\n\t\t\t\t\tconversationId,\r\n\t\t\t\t\tbody: messageBody,\r\n\t\t\t\t\tdateAdded: moment().format('x')\r\n\t\t\t\t},\r\n\t\t\t\tprivatekey: false\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconst group = UUID(conversationId, defaultNamespace);\r\n\t\t\tconst bR = btoa(group);\r\n\r\n\t\t\tthis.cmd(\r\n\t\t\t\t'aesEncrypt',\r\n\t\t\t\t[\r\n\t\t\t\t\tJSON.stringify({\r\n\t\t\t\t\t\tconversationId,\r\n\t\t\t\t\t\tbody: messageBody,\r\n\t\t\t\t\t\tdateAdded: moment().format('x')\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tbR\r\n\t\t\t\t],\r\n\t\t\t\tres => {\r\n\t\t\t\t\t// this.log('aesEncrypt', res);\r\n\r\n\t\t\t\t\tconst iv = res[1];\r\n\t\t\t\t\tconst encMsg = res[2];\r\n\r\n\t\t\t\t\tthis.cmd('peerBroadcast', {\r\n\t\t\t\t\t\tmessage: {\r\n\t\t\t\t\t\t\tiv,\r\n\t\t\t\t\t\t\tencMsg\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprivatekey: false\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tsetSiteInfo(siteInfo) {\r\n\t\tif (siteInfo && typeof siteInfo === 'object') {\r\n\t\t\tthis.log('setting siteInfo', siteInfo);\r\n\t\t\tpageSiteInfo = siteInfo;\r\n\t\t\tlet out = document.getElementById('out');\r\n\r\n\t\t\tlet nUser = null;\r\n\t\t\tif (pageSiteInfo) {\r\n\t\t\t\tif (pageSiteInfo.hasOwnProperty('auth_address')) {\r\n\t\t\t\t\tif (pageSiteInfo.auth_address) {\r\n\t\t\t\t\t\tnUser = {\r\n\t\t\t\t\t\t\tuserId: pageSiteInfo.auth_address,\r\n\t\t\t\t\t\t\tuserName: pageSiteInfo.cert_user_id\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (nUser) {\r\n\t\t\t\twindow.VueApp.$store.commit(\r\n\t\t\t\t\t'ConversationProviders/provider_' + state.name + '/logIn',\r\n\t\t\t\t\tnUser\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\twindow.VueApp.$store.commit(\r\n\t\t\t\t\t'ConversationProviders/provider_' + state.name + '/logOut'\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif (out) {\r\n\t\t\t\tout.innerHTML =\r\n\t\t\t\t\t'Page address: ' +\r\n\t\t\t\t\tsiteInfo.address +\r\n\t\t\t\t\t'<br>- Peers: ' +\r\n\t\t\t\t\tsiteInfo.peers +\r\n\t\t\t\t\t'<br>- Size: ' +\r\n\t\t\t\t\tsiteInfo.settings.size +\r\n\t\t\t\t\t'<br>- Modified: ' +\r\n\t\t\t\t\tnew Date(siteInfo.content.modified * 1000);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonOpenWebsocket() {\r\n\t\tthis.cmd('siteInfo', [], function(siteInfo) {\r\n\t\t\tpage.setSiteInfo(siteInfo);\r\n\t\t});\r\n\t}\r\n\r\n\tonRequest(cmd, message) {\r\n\t\tif (cmd === 'setSiteInfo') {\r\n\t\t\tthis.setSiteInfo(message.params);\r\n\t\t} else if (cmd === 'peerReceive') {\r\n\t\t\t// and it's from PeerMessage plugin\r\n\t\t\tthis.log('onRequest::peerReceive', message);\r\n\r\n\t\t\tif (!message.params.message.encMsg) {\r\n\t\t\t\tconst msgObj = message.params.message;\r\n\r\n\t\t\t\tconst conversationId = msgObj.conversationId;\r\n\t\t\t\tconst messageBody = decodeURIComponent(msgObj.body);\r\n\t\t\t\tconst dateAdded = msgObj.dateAdded;\r\n\t\t\t\tconst identityAddress = message.params.signed_by;\r\n\t\t\t\tconst userName = message.params.cert;\r\n\t\t\t\tconst msgUUID = UUID(\r\n\t\t\t\t\tdateAdded,\r\n\t\t\t\t\tUUID(\r\n\t\t\t\t\t\tidentityAddress,\r\n\t\t\t\t\t\tUUID(conversationId, defaultNamespace)\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\r\n\t\t\t\twindow.VueApp.$store.dispatch(\r\n\t\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\t\tstate.name +\r\n\t\t\t\t\t\t'/addMessage',\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\tconversationId,\r\n\t\t\t\t\t\tidentityAddress,\r\n\t\t\t\t\t\tuserName,\r\n\t\t\t\t\t\tmsgUUID,\r\n\t\t\t\t\t\tdateAdded,\r\n\t\t\t\t\t\tmessageBody\r\n\t\t\t\t\t]\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tfor (const rGroup in state.conversations) {\r\n\t\t\t\t\tconst group = UUID(rGroup, defaultNamespace);\r\n\t\t\t\t\tconst bR = btoa(group);\r\n\r\n\t\t\t\t\tthis.cmd(\r\n\t\t\t\t\t\t'aesDecrypt',\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\tmessage.params.message.iv,\r\n\t\t\t\t\t\t\tmessage.params.message.encMsg,\r\n\t\t\t\t\t\t\tbR\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tres => {\r\n\t\t\t\t\t\t\t// this.log('aesDecrypt', res);\r\n\r\n\t\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\t\tconst msgObj = JSON.parseS(res);\r\n\r\n\t\t\t\t\t\t\t\tif (msgObj) {\r\n\t\t\t\t\t\t\t\t\tconst conversationId =\r\n\t\t\t\t\t\t\t\t\t\tmsgObj.conversationId;\r\n\t\t\t\t\t\t\t\t\tconst messageBody = decodeURIComponent(\r\n\t\t\t\t\t\t\t\t\t\tmsgObj.body\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tconst dateAdded = msgObj.dateAdded;\r\n\t\t\t\t\t\t\t\t\tconst identityAddress =\r\n\t\t\t\t\t\t\t\t\t\tmessage.params.signed_by;\r\n\t\t\t\t\t\t\t\t\tconst userName = message.params.cert;\r\n\t\t\t\t\t\t\t\t\tconst msgUUID = UUID(\r\n\t\t\t\t\t\t\t\t\t\tdateAdded,\r\n\t\t\t\t\t\t\t\t\t\tUUID(\r\n\t\t\t\t\t\t\t\t\t\t\tidentityAddress,\r\n\t\t\t\t\t\t\t\t\t\t\tUUID(\r\n\t\t\t\t\t\t\t\t\t\t\t\tconversationId,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultNamespace\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\twindow.VueApp.$store.dispatch(\r\n\t\t\t\t\t\t\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\t\t\t\t\t\t\tstate.name +\r\n\t\t\t\t\t\t\t\t\t\t\t'/addMessage',\r\n\t\t\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\t\t\tconversationId,\r\n\t\t\t\t\t\t\t\t\t\t\tidentityAddress,\r\n\t\t\t\t\t\t\t\t\t\t\tuserName,\r\n\t\t\t\t\t\t\t\t\t\t\tmsgUUID,\r\n\t\t\t\t\t\t\t\t\t\t\tdateAdded,\r\n\t\t\t\t\t\t\t\t\t\t\tmessageBody\r\n\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.cmd('peerValid', [message.params.hash]); // This message is correct - broadcast to other peers\r\n\t\t} else {\r\n\t\t\tthis.log('Unknown incoming message:', cmd);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nlet page = new Page();\r\n\r\njdenticon.config = {\r\n\thues: [251],\r\n\tlightness: {\r\n\t\tcolor: [0.4, 0.8],\r\n\t\tgrayscale: [0.3, 0.9]\r\n\t},\r\n\tsaturation: {\r\n\t\tcolor: 0.5,\r\n\t\tgrayscale: 0.0\r\n\t},\r\n\tbackColor: '#a5212100'\r\n};\r\n\r\nconst state = {\r\n\tname: 'zn',\r\n\tcurUser: null,\r\n\tconversations: {\r\n\t\t/*\r\n        id: {\r\n            providerName,\r\n            id,\r\n            name,\r\n            messagekeys: [...keys],\r\n            lastMessage\r\n        }\r\n        */\r\n\t\t'#Lobby': {\r\n\t\t\tproviderName: 'zn',\r\n\t\t\tid: '#Lobby',\r\n\t\t\tname: '#Lobby',\r\n\t\t\tmessagekeys: [],\r\n\t\t\tlastMessage: null\r\n\t\t}\r\n\t},\r\n\tmessages: {\r\n\t\t/*\r\n        key: {\r\n            providerName,\r\n            conversationId,\r\n            key,\r\n            userId,\r\n            userName,\r\n            dateAdded,\r\n            body\r\n        }\r\n        */\r\n\t}\r\n};\r\n\r\nconst getters = {\r\n\tisAvailable: () => {\r\n\t\treturn true;\r\n\t},\r\n\r\n\tisReady: (state, getters) => {\r\n\t\treturn getters.isLoggedIn;\r\n\t},\r\n\r\n\tconversationExists: ({ conversations }) => conversationId => {\r\n\t\treturn conversations.hasOwnProperty(conversationId);\r\n\t},\r\n\r\n\tgetCurUser({ curUser }) {\r\n\t\treturn curUser;\r\n\t},\r\n\r\n\tisLoggedIn({ curUser }) {\r\n\t\treturn !!curUser;\r\n\t},\r\n\r\n\tgetUserAvatar: () => userId => {\r\n\t\t/*\r\n        can return:\r\n            0: no avatar\r\n            1: default avatar system\r\n            [2, Image]: image avatar (for canvas)\r\n            [3, HTML]: html avatar\r\n        */\r\n\t\t// return 0;\r\n\t\t// return 1;\r\n\t\treturn [\r\n\t\t\t3,\r\n\t\t\tjdenticon.toSvg(UUID(userId, UUID('userId', defaultNamespace)), 48)\r\n\t\t];\r\n\t},\r\n\r\n\tgetConversationAvatar: () => conversationId => {\r\n\t\t/*\r\n        can return:\r\n            0: no avatar\r\n            1: default avatar system\r\n            [2, Image]: image avatar (for canvas)\r\n            [3, HTML]: html avatar\r\n        */\r\n\t\t// return 0;\r\n\t\t// return 1;\r\n\t\tif (conversationId === '#Lobby') {\r\n\t\t\treturn [\r\n\t\t\t\t3,\r\n\t\t\t\t'<img src=\"' +\r\n\t\t\t\t\t(debug ? '/public' : prodConf.publicPath) +\r\n\t\t\t\t\t'/mstile-144x144.png\" />'\r\n\t\t\t];\r\n\t\t}\r\n\t\treturn [\r\n\t\t\t3,\r\n\t\t\tjdenticon.toSvg(\r\n\t\t\t\tUUID(conversationId, UUID('conversationId', defaultNamespace)),\r\n\t\t\t\t48\r\n\t\t\t)\r\n\t\t];\r\n\t},\r\n\r\n\tvalidateMessage: () => messageBody => {\r\n\t\treturn !!messageBody.trim();\r\n\t},\r\n\r\n\tmanagerComponent: (state, getters) => {\r\n\t\treturn Vue.component(state.name + '-joinComponent', {\r\n\t\t\tdata() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tconversationId: ''\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tcomputed: {\r\n\t\t\t\tisLoggedIn() {\r\n\t\t\t\t\treturn getters.isLoggedIn;\r\n\t\t\t\t},\r\n\t\t\t\tuser() {\r\n\t\t\t\t\treturn getters.getCurUser;\r\n\t\t\t\t},\r\n\t\t\t\talreadyInConversation() {\r\n\t\t\t\t\treturn getters.conversationExists(this.conversationId);\r\n\t\t\t\t},\r\n\t\t\t\t...mapGetters({\r\n\t\t\t\t\tstate_curConversation:\r\n\t\t\t\t\t\t'ConversationProviders/state_curConversation'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tmethods: {\r\n\t\t\t\tchangeCert() {\r\n\t\t\t\t\tpage.cmd('certSelect', [\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t'zeroid.bit',\r\n\t\t\t\t\t\t\t'kaffie.bit',\r\n\t\t\t\t\t\t\t'cryptoid.bit',\r\n\t\t\t\t\t\t\t'peak.id',\r\n\t\t\t\t\t\t\t'zeroverse.bit',\r\n\t\t\t\t\t\t\t'kxoid.bit'\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t]);\r\n\t\t\t\t},\r\n\t\t\t\tjoinConversation() {\r\n\t\t\t\t\tif (this.conversationId) {\r\n\t\t\t\t\t\tthis.joinConversationInProvider([this.conversationId]);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tleaveConversation() {\r\n\t\t\t\t\tif (this.conversationId) {\r\n\t\t\t\t\t\tthis.leaveConversationInProvider(this.conversationId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t...mapMutations({\r\n\t\t\t\t\tjoinConversationInProvider:\r\n\t\t\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\t\tstate.name +\r\n\t\t\t\t\t\t'/joinConversation',\r\n\t\t\t\t\tleaveConversationInProvider:\r\n\t\t\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\t\tstate.name +\r\n\t\t\t\t\t\t'/leaveConversation',\r\n\t\t\t\t\tchangeConversation:\r\n\t\t\t\t\t\t'ConversationProviders/changeConversation'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttemplate: `\r\n            <div class=\"manager-component\">\r\n                <template v-if=\"isLoggedIn\">\r\n                    <div class=\"input-group\">\r\n                        <span class=\"input-group-addon\">auth address</span>\r\n                        <input class=\"auth-address input\" v-model=\"user.userId\" readonly=\"true\" placeholder=\"auth address\" title=\"auth address\" />\r\n                    </div>\r\n                    <div class=\"input-group\" style=\"margin-top: .4rem; margin-bottom: .4rem;\">\r\n                        <span class=\"input-group-addon\">user name</span>\r\n                        <input class=\"user-name input\" v-model=\"user.userName\" readonly=\"true\" placeholder=\"user name\" title=\"user name\" />\r\n                    </div>\r\n                </template>\r\n                <div class=\"btn-group\">\r\n                    <button v-if=\"!isLoggedIn\" type=\"submit\" @click=\"changeCert()\" class=\"btn rounded lg primary\">Choose a cert</button>\r\n                    <button v-else type=\"submit\" @click=\"changeCert()\" class=\"btn rounded primary\">Change cert</button>\r\n                </div>\r\n                <br />\r\n                <p id=\"out\"></p>\r\n                <div v-if=\"isLoggedIn\">\r\n                    <h4>Join and leave conversations</h4>\r\n                    <input class=\"conversation-id input\" v-model=\"conversationId\" placeholder=\"conversation id\" title=\"conversation id\" />\r\n                    <div class=\"btn-group\" style=\"margin-top: .4rem;\">\r\n                        <button v-if=\"!alreadyInConversation\" type=\"submit\" @click=\"joinConversation()\" :disabled=\"!conversationId\" class=\"btn rounded lg primary\">Join Conversation</button>\r\n                        <button v-else type=\"submit\" @click=\"leaveConversation()\" class=\"btn flat outline rounded secondary\">Leave Conversation</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            `\r\n\t\t});\r\n\t},\r\n\r\n\tconversationListItemActions: (state, getters) => (\r\n\t\tconversationId,\r\n\t\t{ commit }\r\n\t) => {\r\n\t\tif (!getters.conversationExists(conversationId)) return null;\r\n\r\n\t\t// const conversation = state.conversations[conversationId];\r\n\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: 'Leave conversation',\r\n\t\t\t\tonclick: () => {\r\n\t\t\t\t\tcommit(\r\n\t\t\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\t\t\tstate.name +\r\n\t\t\t\t\t\t\t'/leaveConversation',\r\n\t\t\t\t\t\tconversationId\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tclasses: 'link secondary',\r\n\t\t\t\tconversationId\r\n\t\t\t}\r\n\t\t];\r\n\t},\r\n\r\n\tmessageActions: (state, getters) => (message, { commit }) => {\r\n\t\tconst conversationId = message.conversationId;\r\n\r\n\t\tif (!getters.conversationExists(conversationId)) return null;\r\n\r\n\t\t// const conversation = state.conversations[conversationId];\r\n\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: 'Delete message',\r\n\t\t\t\tonclick: () => {\r\n\t\t\t\t\tcommit(\r\n\t\t\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\t\t\tstate.name +\r\n\t\t\t\t\t\t\t'/deleteMessage',\r\n\t\t\t\t\t\t[conversationId, message.key]\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tclasses: 'link',\r\n\t\t\t\tconversationId\r\n\t\t\t}\r\n\t\t];\r\n\t}\r\n};\r\n\r\nconst mutations = {\r\n\tlogIn(state, nUser) {\r\n\t\tstate.curUser = nUser;\r\n\t},\r\n\r\n\tlogOut(state) {\r\n\t\tstate.curUser = null;\r\n\t},\r\n\r\n\taddMessage(state, [conversationId, messageData]) {\r\n\t\tstate.messages = {\r\n\t\t\t...state.messages,\r\n\t\t\t[messageData.key]: messageData\r\n\t\t};\r\n\t\tstate.conversations = {\r\n\t\t\t...state.conversations,\r\n\t\t\t[conversationId]: {\r\n\t\t\t\t...state.conversations[conversationId],\r\n\t\t\t\tmessagekeys: [\r\n\t\t\t\t\t...state.conversations[conversationId].messagekeys,\r\n\t\t\t\t\tmessageData.key\r\n\t\t\t\t],\r\n\t\t\t\tlastMessage: messageData\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn null;\r\n\t},\r\n\r\n\tdeleteMessage(state, [conversationId, messagekey]) {\r\n\t\tdelete state.messages[messagekey];\r\n\t\tstate.messages = {\r\n\t\t\t...state.messages\r\n\t\t};\r\n\t\tif (state.conversations[conversationId]) {\r\n\t\t\tconst index = state.conversations[\r\n\t\t\t\tconversationId\r\n\t\t\t].messagekeys.indexOf(messagekey);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tlet messagekeys = JSON.copy(\r\n\t\t\t\t\tstate.conversations[conversationId].messagekeys\r\n\t\t\t\t);\r\n\t\t\t\tmessagekeys.splice(index, 1);\r\n\r\n\t\t\t\tstate.conversations = {\r\n\t\t\t\t\t...state.conversations,\r\n\t\t\t\t\t[conversationId]: {\r\n\t\t\t\t\t\t...state.conversations[conversationId],\r\n\t\t\t\t\t\tmessagekeys,\r\n\t\t\t\t\t\tlastMessage:\r\n\t\t\t\t\t\t\tmessagekeys.length > 0\r\n\t\t\t\t\t\t\t\t? state.messages[\r\n\t\t\t\t\t\t\t\t\t\tmessagekeys[messagekeys.length - 1]\r\n\t\t\t\t\t\t\t\t  ]\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tjoinConversation(state, [conversationId, conversationName]) {\r\n\t\tconversationName = conversationName || conversationId;\r\n\t\tstate.conversations = {\r\n\t\t\t...state.conversations,\r\n\t\t\t[conversationId]: {\r\n\t\t\t\tproviderName: state.name,\r\n\t\t\t\tid: conversationId,\r\n\t\t\t\tname: conversationName,\r\n\t\t\t\tmessagekeys: [],\r\n\t\t\t\tlastMessage: null\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\r\n\tleaveConversation(state, conversationId) {\r\n\t\tdelete state.conversations[conversationId];\r\n\t\tstate.conversations = {\r\n\t\t\t...state.conversations\r\n\t\t};\r\n\t}\r\n\r\n\t// updateFetchMessages(state, [conversationId, totalPages, pageNr, slice]) {\r\n\t//     if (state.conversations.hasOwnProperty(conversationId)) {\r\n\t//         let messagesData = {};\r\n\r\n\t//         for (let msgI = 0; msgI < slice.length; msgI++) {\r\n\t//             let msg = slice[msgI];\r\n\t//             messagesData[msg.key] = msg;\r\n\t//         }\r\n\r\n\t//         const nMessagekeys = Object.keys(messagesData);\r\n\r\n\t//         let nLastMessage = false;\r\n\t//         if (pageNr === totalPages - 1) {\r\n\t//             nLastMessage =\r\n\t//                 slice\r\n\t//                     .sort((a, b) => {\r\n\t//                         return moment(a.dateAdded, 'x').isBefore(\r\n\t//                             moment(b.dateAdded, 'x')\r\n\t//                         )\r\n\t//                             ? 1\r\n\t//                             : -1;\r\n\t//                     })\r\n\t//                     .reverse()[0] || false;\r\n\t//         }\r\n\r\n\t//         state.conversations = {\r\n\t//             ...state.conversations,\r\n\t//             [conversationId]: {\r\n\t//                 ...state.conversations[conversationId],\r\n\t//                 totalPages,\r\n\t//                 page: pageNr\r\n\t//             }\r\n\t//         };\r\n\r\n\t//         state.messages = {\r\n\t//             ...state.messages,\r\n\t//             ...messagesData\r\n\t//         };\r\n\t//         state.conversations = {\r\n\t//             ...state.conversations,\r\n\t//             [conversationId]: {\r\n\t//                 ...state.conversations[conversationId],\r\n\t//                 messagekeys: [\r\n\t//                     ...new Set([\r\n\t//                         ...nMessagekeys,\r\n\t//                         ...state.conversations[conversationId].messagekeys\r\n\t//                     ])\r\n\t//                 ],\r\n\t//                 lastMessage:\r\n\t//                     nLastMessage ||\r\n\t//                     state.conversations[conversationId].lastMessage\r\n\t//             }\r\n\t//         };\r\n\t//     }\r\n\t// }\r\n};\r\n\r\nconst actions = {\r\n\tinit({ state }) {\r\n\t\tconsole.debug('initted conversation provider', state.name);\r\n\t},\r\n\r\n\taddMessage(\r\n\t\t{ state, getters, commit },\r\n\t\t[conversationId, userId, userName, msgUUID, dateAdded, messageBody]\r\n\t) {\r\n\t\tif (getters.conversationExists(conversationId)) {\r\n\t\t\tlet messageData = {\r\n\t\t\t\tproviderName: state.name,\r\n\t\t\t\tconversationId: conversationId,\r\n\t\t\t\tkey: msgUUID,\r\n\t\t\t\tuserId: userId,\r\n\t\t\t\tuserName: userName,\r\n\t\t\t\tdateAdded: dateAdded,\r\n\t\t\t\tbody: messageBody\r\n\t\t\t};\r\n\r\n\t\t\tcommit('addMessage', [conversationId, messageData]);\r\n\r\n\t\t\treturn messageData;\r\n\t\t} else {\r\n\t\t\tconsole.debug(\r\n\t\t\t\t'provider',\r\n\t\t\t\tstate.name,\r\n\t\t\t\t'has no conversation with id',\r\n\t\t\t\tconversationId\r\n\t\t\t);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\r\n\tsendMessage({ getters }, [conversationId, messageBody]) {\r\n\t\tif (getters.isLoggedIn) {\r\n\t\t\tif (getters.validateMessage(messageBody)) {\r\n\t\t\t\tconsole.debug(\r\n\t\t\t\t\t'provider sending message..',\r\n\t\t\t\t\tconversationId,\r\n\t\t\t\t\tmessageBody\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// send message to other peers\r\n\t\t\t\tpage.sendMessage(conversationId, messageBody);\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthrow new Error('Message invalid!');\r\n\t\t}\r\n\t\tthrow new Error('Not logged in!');\r\n\t},\r\n\r\n\t// fetchMessages({ commit }, conversationId) {\r\n\t//     return new Promise((resolve, reject) => {\r\n\t//         if (conversationId) {\r\n\t//             if (state.conversations.hasOwnProperty(conversationId)) {\r\n\t//                 const totalPages =\r\n\t//                     state.conversations[conversationId].totalPages;\r\n\t//                 const pageNr = state.conversations[conversationId].pageNr - 1;\r\n\r\n\t//                 if (pageNr >= 0) {\r\n\t//                     // commit('updateFetchMessages', [conversationId, totalPages, pageNr]);\r\n\t//                     socket.emit(\r\n\t//                         'fetchMessages',\r\n\t//                         conversationId,\r\n\t//                         pageNr,\r\n\t//                         16,\r\n\t//                         function ({\r\n\t//                             conversationId: _conversationId,\r\n\t//                             page: _pageNr,\r\n\t//                             perPage: _perPage,\r\n\t//                             totalPages: _totalPages,\r\n\t//                             slice: _slice\r\n\t//                         }) {\r\n\t//                             console.debug(\r\n\t//                                 'fetchMessages cb',\r\n\t//                                 conversationId,\r\n\t//                                 totalPages,\r\n\t//                                 pageNr,\r\n\t//                                 _conversationId,\r\n\t//                                 _pageNr,\r\n\t//                                 _perPage,\r\n\t//                                 _totalPages,\r\n\t//                                 _slice\r\n\t//                             );\r\n\r\n\t//                             commit('updateFetchMessages', [\r\n\t//                                 _conversationId,\r\n\t//                                 _totalPages,\r\n\t//                                 _pageNr,\r\n\t//                                 _slice\r\n\t//                             ]);\r\n\r\n\t//                             resolve({\r\n\t//                                 conversationId: _conversationId,\r\n\t//                                 totalPages: _totalPages,\r\n\t//                                 page: _pageNr,\r\n\t//                                 slice: _slice\r\n\t//                             });\r\n\t//                         }\r\n\t//                     );\r\n\t//                 } else {\r\n\t//                     resolve({\r\n\t//                         conversationId,\r\n\t//                         totalPages,\r\n\t//                         page: pageNr,\r\n\t//                         slice: []\r\n\t//                     });\r\n\t//                 }\r\n\t//             }\r\n\t//         }\r\n\t//     });\r\n\t// }\r\n\tfetchMessages({ getters }, conversationId) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (getters.conversationExists(conversationId)) {\r\n\t\t\t\tresolve({\r\n\t\t\t\t\tconversationId\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\tstate,\r\n\tgetters,\r\n\tmutations,\r\n\tactions\r\n};\r\n","module.exports = {\r\n\tpublicPath: '/'\r\n};\r\n","var map = {\n\t\"./af\": \"2bfb\",\n\t\"./af.js\": \"2bfb\",\n\t\"./ar\": \"8e73\",\n\t\"./ar-dz\": \"a356\",\n\t\"./ar-dz.js\": \"a356\",\n\t\"./ar-kw\": \"423e\",\n\t\"./ar-kw.js\": \"423e\",\n\t\"./ar-ly\": \"1cfd\",\n\t\"./ar-ly.js\": \"1cfd\",\n\t\"./ar-ma\": \"0a84\",\n\t\"./ar-ma.js\": \"0a84\",\n\t\"./ar-sa\": \"8230\",\n\t\"./ar-sa.js\": \"8230\",\n\t\"./ar-tn\": \"6d83\",\n\t\"./ar-tn.js\": \"6d83\",\n\t\"./ar.js\": \"8e73\",\n\t\"./az\": \"485c\",\n\t\"./az.js\": \"485c\",\n\t\"./be\": \"1fc1\",\n\t\"./be.js\": \"1fc1\",\n\t\"./bg\": \"84aa\",\n\t\"./bg.js\": \"84aa\",\n\t\"./bm\": \"a7fa\",\n\t\"./bm.js\": \"a7fa\",\n\t\"./bn\": \"9043\",\n\t\"./bn.js\": \"9043\",\n\t\"./bo\": \"d26a\",\n\t\"./bo.js\": \"d26a\",\n\t\"./br\": \"6887\",\n\t\"./br.js\": \"6887\",\n\t\"./bs\": \"2554\",\n\t\"./bs.js\": \"2554\",\n\t\"./ca\": \"d716\",\n\t\"./ca.js\": \"d716\",\n\t\"./cs\": \"3c0d\",\n\t\"./cs.js\": \"3c0d\",\n\t\"./cv\": \"03ec\",\n\t\"./cv.js\": \"03ec\",\n\t\"./cy\": \"9797\",\n\t\"./cy.js\": \"9797\",\n\t\"./da\": \"0f14\",\n\t\"./da.js\": \"0f14\",\n\t\"./de\": \"b469\",\n\t\"./de-at\": \"b3eb\",\n\t\"./de-at.js\": \"b3eb\",\n\t\"./de-ch\": \"bb71\",\n\t\"./de-ch.js\": \"bb71\",\n\t\"./de.js\": \"b469\",\n\t\"./dv\": \"598a\",\n\t\"./dv.js\": \"598a\",\n\t\"./el\": \"8d47\",\n\t\"./el.js\": \"8d47\",\n\t\"./en-SG\": \"cdab\",\n\t\"./en-SG.js\": \"cdab\",\n\t\"./en-au\": \"0e6b\",\n\t\"./en-au.js\": \"0e6b\",\n\t\"./en-ca\": \"3886\",\n\t\"./en-ca.js\": \"3886\",\n\t\"./en-gb\": \"39a6\",\n\t\"./en-gb.js\": \"39a6\",\n\t\"./en-ie\": \"e1d3\",\n\t\"./en-ie.js\": \"e1d3\",\n\t\"./en-il\": \"7333\",\n\t\"./en-il.js\": \"7333\",\n\t\"./en-nz\": \"6f50\",\n\t\"./en-nz.js\": \"6f50\",\n\t\"./eo\": \"65db\",\n\t\"./eo.js\": \"65db\",\n\t\"./es\": \"898b\",\n\t\"./es-do\": \"0a3c\",\n\t\"./es-do.js\": \"0a3c\",\n\t\"./es-us\": \"55c9\",\n\t\"./es-us.js\": \"55c9\",\n\t\"./es.js\": \"898b\",\n\t\"./et\": \"ec18\",\n\t\"./et.js\": \"ec18\",\n\t\"./eu\": \"0ff2\",\n\t\"./eu.js\": \"0ff2\",\n\t\"./fa\": \"8df4\",\n\t\"./fa.js\": \"8df4\",\n\t\"./fi\": \"81e9\",\n\t\"./fi.js\": \"81e9\",\n\t\"./fo\": \"0721\",\n\t\"./fo.js\": \"0721\",\n\t\"./fr\": \"9f26\",\n\t\"./fr-ca\": \"d9f8\",\n\t\"./fr-ca.js\": \"d9f8\",\n\t\"./fr-ch\": \"0e49\",\n\t\"./fr-ch.js\": \"0e49\",\n\t\"./fr.js\": \"9f26\",\n\t\"./fy\": \"7118\",\n\t\"./fy.js\": \"7118\",\n\t\"./ga\": \"5120\",\n\t\"./ga.js\": \"5120\",\n\t\"./gd\": \"f6b4\",\n\t\"./gd.js\": \"f6b4\",\n\t\"./gl\": \"8840\",\n\t\"./gl.js\": \"8840\",\n\t\"./gom-latn\": \"0caa\",\n\t\"./gom-latn.js\": \"0caa\",\n\t\"./gu\": \"e0c5\",\n\t\"./gu.js\": \"e0c5\",\n\t\"./he\": \"c7aa\",\n\t\"./he.js\": \"c7aa\",\n\t\"./hi\": \"dc4d\",\n\t\"./hi.js\": \"dc4d\",\n\t\"./hr\": \"4ba9\",\n\t\"./hr.js\": \"4ba9\",\n\t\"./hu\": \"5b14\",\n\t\"./hu.js\": \"5b14\",\n\t\"./hy-am\": \"d6b6\",\n\t\"./hy-am.js\": \"d6b6\",\n\t\"./id\": \"5038\",\n\t\"./id.js\": \"5038\",\n\t\"./is\": \"0558\",\n\t\"./is.js\": \"0558\",\n\t\"./it\": \"6e98\",\n\t\"./it-ch\": \"6f12\",\n\t\"./it-ch.js\": \"6f12\",\n\t\"./it.js\": \"6e98\",\n\t\"./ja\": \"079e\",\n\t\"./ja.js\": \"079e\",\n\t\"./jv\": \"b540\",\n\t\"./jv.js\": \"b540\",\n\t\"./ka\": \"201b\",\n\t\"./ka.js\": \"201b\",\n\t\"./kk\": \"6d79\",\n\t\"./kk.js\": \"6d79\",\n\t\"./km\": \"e81d\",\n\t\"./km.js\": \"e81d\",\n\t\"./kn\": \"3e92\",\n\t\"./kn.js\": \"3e92\",\n\t\"./ko\": \"22f8\",\n\t\"./ko.js\": \"22f8\",\n\t\"./ku\": \"2421\",\n\t\"./ku.js\": \"2421\",\n\t\"./ky\": \"9609\",\n\t\"./ky.js\": \"9609\",\n\t\"./lb\": \"440c\",\n\t\"./lb.js\": \"440c\",\n\t\"./lo\": \"b29d\",\n\t\"./lo.js\": \"b29d\",\n\t\"./lt\": \"26f9\",\n\t\"./lt.js\": \"26f9\",\n\t\"./lv\": \"b97c\",\n\t\"./lv.js\": \"b97c\",\n\t\"./me\": \"293c\",\n\t\"./me.js\": \"293c\",\n\t\"./mi\": \"688b\",\n\t\"./mi.js\": \"688b\",\n\t\"./mk\": \"6909\",\n\t\"./mk.js\": \"6909\",\n\t\"./ml\": \"02fb\",\n\t\"./ml.js\": \"02fb\",\n\t\"./mn\": \"958b\",\n\t\"./mn.js\": \"958b\",\n\t\"./mr\": \"39bd\",\n\t\"./mr.js\": \"39bd\",\n\t\"./ms\": \"ebe4\",\n\t\"./ms-my\": \"6403\",\n\t\"./ms-my.js\": \"6403\",\n\t\"./ms.js\": \"ebe4\",\n\t\"./mt\": \"1b45\",\n\t\"./mt.js\": \"1b45\",\n\t\"./my\": \"8689\",\n\t\"./my.js\": \"8689\",\n\t\"./nb\": \"6ce3\",\n\t\"./nb.js\": \"6ce3\",\n\t\"./ne\": \"3a39\",\n\t\"./ne.js\": \"3a39\",\n\t\"./nl\": \"facd\",\n\t\"./nl-be\": \"db29\",\n\t\"./nl-be.js\": \"db29\",\n\t\"./nl.js\": \"facd\",\n\t\"./nn\": \"b84c\",\n\t\"./nn.js\": \"b84c\",\n\t\"./pa-in\": \"f3ff\",\n\t\"./pa-in.js\": \"f3ff\",\n\t\"./pl\": \"8d57\",\n\t\"./pl.js\": \"8d57\",\n\t\"./pt\": \"f260\",\n\t\"./pt-br\": \"d2d4\",\n\t\"./pt-br.js\": \"d2d4\",\n\t\"./pt.js\": \"f260\",\n\t\"./ro\": \"972c\",\n\t\"./ro.js\": \"972c\",\n\t\"./ru\": \"957c\",\n\t\"./ru.js\": \"957c\",\n\t\"./sd\": \"6784\",\n\t\"./sd.js\": \"6784\",\n\t\"./se\": \"ffff\",\n\t\"./se.js\": \"ffff\",\n\t\"./si\": \"eda5\",\n\t\"./si.js\": \"eda5\",\n\t\"./sk\": \"7be6\",\n\t\"./sk.js\": \"7be6\",\n\t\"./sl\": \"8155\",\n\t\"./sl.js\": \"8155\",\n\t\"./sq\": \"c8f3\",\n\t\"./sq.js\": \"c8f3\",\n\t\"./sr\": \"cf1e\",\n\t\"./sr-cyrl\": \"13e9\",\n\t\"./sr-cyrl.js\": \"13e9\",\n\t\"./sr.js\": \"cf1e\",\n\t\"./ss\": \"52bd\",\n\t\"./ss.js\": \"52bd\",\n\t\"./sv\": \"5fbd\",\n\t\"./sv.js\": \"5fbd\",\n\t\"./sw\": \"74dc\",\n\t\"./sw.js\": \"74dc\",\n\t\"./ta\": \"3de5\",\n\t\"./ta.js\": \"3de5\",\n\t\"./te\": \"5cbb\",\n\t\"./te.js\": \"5cbb\",\n\t\"./tet\": \"576c\",\n\t\"./tet.js\": \"576c\",\n\t\"./tg\": \"3b1b\",\n\t\"./tg.js\": \"3b1b\",\n\t\"./th\": \"10e8\",\n\t\"./th.js\": \"10e8\",\n\t\"./tl-ph\": \"0f38\",\n\t\"./tl-ph.js\": \"0f38\",\n\t\"./tlh\": \"cf75\",\n\t\"./tlh.js\": \"cf75\",\n\t\"./tr\": \"0e81\",\n\t\"./tr.js\": \"0e81\",\n\t\"./tzl\": \"cf51\",\n\t\"./tzl.js\": \"cf51\",\n\t\"./tzm\": \"c109\",\n\t\"./tzm-latn\": \"b53d\",\n\t\"./tzm-latn.js\": \"b53d\",\n\t\"./tzm.js\": \"c109\",\n\t\"./ug-cn\": \"6117\",\n\t\"./ug-cn.js\": \"6117\",\n\t\"./uk\": \"ada2\",\n\t\"./uk.js\": \"ada2\",\n\t\"./ur\": \"5294\",\n\t\"./ur.js\": \"5294\",\n\t\"./uz\": \"2e8c\",\n\t\"./uz-latn\": \"010e\",\n\t\"./uz-latn.js\": \"010e\",\n\t\"./uz.js\": \"2e8c\",\n\t\"./vi\": \"2921\",\n\t\"./vi.js\": \"2921\",\n\t\"./x-pseudo\": \"fd7e\",\n\t\"./x-pseudo.js\": \"fd7e\",\n\t\"./yo\": \"7f33\",\n\t\"./yo.js\": \"7f33\",\n\t\"./zh-cn\": \"5c3a\",\n\t\"./zh-cn.js\": \"5c3a\",\n\t\"./zh-hk\": \"49ab\",\n\t\"./zh-hk.js\": \"49ab\",\n\t\"./zh-tw\": \"90ea\",\n\t\"./zh-tw.js\": \"90ea\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"4678\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shadow\",attrs:{\"id\":\"app\"}},[_c('Viewpage'),_c('div',{staticClass:\"dropdown-inners\"},[_c('div',{ref:\"dropdownOverlays\"}),_c('div',{ref:\"dropdownMenus\"})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"viewpage\",attrs:{\"cur-view\":_vm.curView}},[_c(_vm.curView,{key:_vm.curView,tag:\"component\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view-conversation\"},[_c('div',{staticClass:\"conversation-list-container\",attrs:{\"inconversation\":_vm.isInConversation,\"conversationinfo\":_vm.isInConversation && _vm.conversationInfoOpen}},[_c('ConversationListNavbar'),(_vm.anyProviderAvailable.length === 0)?[_vm._m(0)]:(\n\t\t\t\t\t(_vm.oneProviderMode &&\n\t\t\t\t\t\t!_vm.isReady(_vm.getAllConversationProviders[0].name)) ||\n\t\t\t\t\t\t_vm.anyProviderReady.length === 0\n\t\t\t\t)?[_c('div',{staticClass:\"one-provider-mode-container\"},[_c('ConversationProviderManager',{staticClass:\"card shadow\"})],1)]:[_c('ConversationList',{on:{\"update:conversationInfoOpen\":function($event){return _vm.toggleConversationInfoOpen($event)}}})]],2),(_vm.isInConversation)?_c('div',{key:_vm.isInConversation\n\t\t\t\t\t? 'conversation_' +\n\t\t\t\t\t  _vm.getCurConversation.providerName +\n\t\t\t\t\t  '_' +\n\t\t\t\t\t  _vm.getCurConversation.id\n\t\t\t\t\t: null,staticClass:\"conversation-container\",attrs:{\"inconversation\":_vm.isInConversation,\"conversationinfo\":_vm.isInConversation && _vm.conversationInfoOpen}},[_c('ConversationNavbar',{on:{\"update:conversationInfoOpen\":function($event){return _vm.toggleConversationInfoOpen($event)}}}),_c('Conversation')],1):_vm._e(),(_vm.isInConversation && _vm.conversationInfoOpen)?_c('div',{key:_vm.isInConversation && _vm.conversationInfoOpen\n\t\t\t\t\t? 'conversation-info_' +\n\t\t\t\t\t  _vm.getCurConversation.providerName +\n\t\t\t\t\t  '_' +\n\t\t\t\t\t  _vm.getCurConversation.id\n\t\t\t\t\t: null,staticClass:\"conversation-info-container\",attrs:{\"conversationinfo\":_vm.isInConversation && _vm.conversationInfoOpen}},[_c('ConversationInfoNavbar',{on:{\"update:conversationInfoOpen\":function($event){return _vm.toggleConversationInfoOpen($event)}}}),_c('ConversationInfo')],1):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"no-provider-available-container\"},[_c('div',{staticClass:\"card shadow\"},[_c('span',{staticClass:\"card-title clr-bg bgclr-secondary\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\tNo providers currently available!\\n\\t\\t\\t\\t\\t\\t\")])])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"conversation-list-navbar navbar card\"},[_c('div',{staticClass:\"navbar-section\"}),_c('div',{staticClass:\"navbar-section navbar-center\"},[_c('span',{staticClass:\"navbar-brand\"},[_vm._v(\"ThunderWave X\")])]),_c('div',{staticClass:\"navbar-section\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"conversation-list-navbar navbar card\">\r\n\t\t<div class=\"navbar-section\"></div>\r\n\t\t<div class=\"navbar-section navbar-center\">\r\n\t\t\t<span class=\"navbar-brand\">ThunderWave X</span>\r\n\t\t\t<!-- <span v-if=\"oneProviderMode\" class=\"navbar-brand2\">&nbsp;{{ getAllConversationProviders[0].name }}</span> -->\r\n\t\t</div>\r\n\t\t<div class=\"navbar-section\"></div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n// import { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'ConversationListNavbar',\r\n\tdata() {\r\n\t\treturn {};\r\n\t}\r\n\t// computed: {\r\n\t//     ...mapGetters({\r\n\t//         oneProviderMode: 'ConversationProviders/oneProviderMode',\r\n\t//         getAllConversationProviders: 'ConversationProviders/getAllConversationProviders'\r\n\t//     })\r\n\t// }\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationListNavbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationListNavbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConversationListNavbar.vue?vue&type=template&id=363b2fdc&\"\nimport script from \"./ConversationListNavbar.vue?vue&type=script&lang=js&\"\nexport * from \"./ConversationListNavbar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"conversation-list\",attrs:{\"open-dialog\":_vm.openDialog}},[(_vm.getAllConversations.length === 0)?_vm._l((3),function(i){return _c('div',{key:'conversation-sample_' + i,staticClass:\"conversation-list-item conversation-list-item-sample card\"},[_vm._m(0,true),_vm._m(1,true)])}):_vm._l((_vm.getAllConversations),function(conversation){return _c('ConversationListItem',{key:'conversation_' +\n\t\t\t\t\tconversation.providerName +\n\t\t\t\t\t'_' +\n\t\t\t\t\tconversation.id,attrs:{\"conversation\":conversation,\"active\":!!_vm.getCurConversation &&\n\t\t\t\t\tconversation.providerName ==\n\t\t\t\t\t\t_vm.getCurConversation.providerName &&\n\t\t\t\t\tconversation.id == _vm.getCurConversation.id},on:{\"update:conversationInfoOpen\":function($event){return _vm.updateConversationInfoOpen($event)}}})}),_c('ConversationListActions',{attrs:{\"scrolledToBottom\":_vm.scrolledToBottom},on:{\"update:openDialog\":_vm.setOpenDialog}})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"conversation-avatar-container\"},[_c('button',{staticClass:\"conversation-avatar btn action flat rounded\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('span',{staticClass:\"title_timestamp\"},[_c('span',{staticClass:\"title clr-secondary\"},[_c('div',{staticClass:\"sampletext bgclr-secondary\",staticStyle:{\"width\":\"128px\"}})]),_c('span',{staticClass:\"timestamp\"},[_c('div',{staticClass:\"sampletext bgclr-light\",staticStyle:{\"width\":\"64px\"}})])]),_c('span',{staticClass:\"last-message_conversation-action\"},[_c('span',{staticClass:\"last-message\"},[_c('span',{staticClass:\"username\"},[_c('div',{staticClass:\"sampletext bgclr-dark\",staticStyle:{\"width\":\"96px\"}}),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\")]),_c('span',{staticClass:\"body\"},[_c('div',{staticClass:\"sampletext bgclr-dark\",staticStyle:{\"width\":\"128px\"}})])]),_c('span',{staticClass:\"conversation-action\"})])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:'conversation-list-item card ' +\n\t\t\t(!_vm.dropdownActive ? 'hovershadow ' : '') +\n\t\t\t(_vm.active ? 'active secondary ' : ''),on:{\"click\":_vm.handleClick,\"contextmenu\":function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();_vm.dropdownActive = true}}},[_c('div',{staticClass:\"conversation-avatar-container\"},[(\n\t\t\t\t_vm.conversationProviderHasAvatarProvider(\n\t\t\t\t\t_vm.conversation.providerName\n\t\t\t\t)\n\t\t\t)?_c('ConversationAvatar',{key:_vm.conversation.id\n\t\t\t\t\t? 'conversation_' +\n\t\t\t\t\t  _vm.conversation.providerName +\n\t\t\t\t\t  '_' +\n\t\t\t\t\t  _vm.conversation.id\n\t\t\t\t\t: 'conversation_' + _vm.conversation.providerName,staticClass:\"flat rounded shadow lg\",attrs:{\"providerName\":_vm.conversation.providerName,\"conversationId\":_vm.conversation.id}}):_c('button',{staticClass:\"conversation-avatar btn action flat rounded\"})],1),_c('div',{staticClass:\"content\"},[_c('span',{staticClass:\"title_timestamp_conversation-action-dropdown\"},[_c('span',{staticClass:\"title clr-secondary\"},[_vm._v(_vm._s(_vm.conversation.name)+\"\\n\\t\\t\\t\\t\"),(!_vm.oneProviderMode)?_c('i',[_vm._v(\"(\"+_vm._s(_vm.conversation.providerName)+\")\")]):_vm._e()]),_c('span',{staticClass:\"timestamp\"},[_vm._v(_vm._s(_vm.conversation.lastMessage &&\n\t\t\t\t\t_vm.conversation.lastMessage.dateAdded\n\t\t\t\t\t\t? '' + _vm.timestamp\n\t\t\t\t\t\t: '')+\"\")]),(_vm.getConversationListItemActions)?_c('Dropdown',{staticClass:\"conversation-action-dropdown\",attrs:{\"items\":_vm.getConversationListItemActions,\"align\":\"right\",\"active\":_vm.dropdownActive},on:{\"update:active\":function($event){_vm.dropdownActive = $event}},scopedSlots:_vm._u([{key:\"activator\",fn:function(scope){return [_c('button',{class:'conversation-action-btn btn action link sm ' +\n\t\t\t\t\t\t\t\t(scope.active ? 'active ' : ''),on:{\"click\":function($event){$event.stopPropagation();return scope.on()}}},[_c('icon',[_vm._v(\"dots-vertical\")])],1)]}},{key:\"item\",fn:function(scope){return [_c('button',{class:'conversation-action-dropdown-menu-li btn ' +\n\t\t\t\t\t\t\t\t(scope.item.classes || 'link'),attrs:{\"disabled\":scope.item.disabled},on:{\"click\":function($event){$event.stopPropagation();return _vm.dropdownAction(scope)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(typeof scope.item.name === 'function'\n\t\t\t\t\t\t\t\t? scope.item.name()\n\t\t\t\t\t\t\t\t: scope.item.name)+\"\\n\\t\\t\\t\\t\\t\")])]}}],null,false,1106718548)}):_vm._e()],1),_c('span',{staticClass:\"last-message\"},[_c('span',{staticClass:\"username\"},[_vm._v(_vm._s(_vm.conversation.lastMessage && _vm.conversation.lastMessage.userId\n\t\t\t\t\t? (_vm.conversation.lastMessage.userName ||\n\t\t\t\t\t\t\t_vm.conversation.lastMessage.userId) + ':'\n\t\t\t\t\t: ''))]),_c('span',{staticClass:\"body\"},[_vm._v(_vm._s(_vm.conversation.lastMessage &&\n\t\t\t\tdecodeURIComponent(_vm.conversation.lastMessage.body)\n\t\t\t\t\t? decodeURIComponent(_vm.conversation.lastMessage.body)\n\t\t\t\t\t: ''))])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('i',{class:_vm.classes})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<i :class=\"classes\"></i>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'Icon',\r\n\tprops: {\r\n\t\tsize: {\r\n\t\t\ttype: Number,\r\n\t\t\tvalidator(value) {\r\n\t\t\t\treturn typeof value === 'number' && value === parseInt(value);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclasses() {\r\n\t\t\treturn (\r\n\t\t\t\t'icon mdi ' +\r\n\t\t\t\t(this.size\r\n\t\t\t\t\t? 'mdi-' + ['18', '24', '36', '48'][this.size] + 'px'\r\n\t\t\t\t\t: '') +\r\n\t\t\t\t' mdi-' +\r\n\t\t\t\t(this.$slots.default && this.$slots.default.length > 0\r\n\t\t\t\t\t? this.$slots.default[0].text\r\n\t\t\t\t\t: '')\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Icon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Icon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Icon.vue?vue&type=template&id=7791938d&\"\nimport script from \"./Icon.vue?vue&type=script&lang=js&\"\nexport * from \"./Icon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dropdown\",attrs:{\"active\":_vm.sActive,\"align\":_vm.align,\"menu-type\":_vm.menuType}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sActive),expression:\"sActive\"}],ref:\"overlay\",staticClass:\"overlay\",on:{\"click\":function($event){$event.stopPropagation();return _vm.setActive(false)},\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.setActive(false)}}}),_c('div',{ref:\"activator\",staticClass:\"activator\"},[_vm._t(\"activator\",null,{\"on\":_vm.setActive,\"active\":_vm.sActive,\"align\":_vm.align})],2),_c('div',{ref:\"menuContainer\",staticClass:\"menu-container\",style:('top: ' + _vm.y + 'px; left: ' + _vm.x + 'px; '),attrs:{\"active\":_vm.sActive,\"align\":_vm.align,\"menu-type\":_vm.menuType}},[_c('transition',{attrs:{\"name\":\"menu-active\"}},[(_vm.eager ? true : _vm.sActive)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.eager ? _vm.sActive : true),expression:\"eager ? sActive : true\"}],ref:\"menu\",staticClass:\"menu\"},[(_vm.$slots.content)?_vm._t(\"content\",null,{\"items\":_vm.items,\"on\":_vm.setActive,\"align\":_vm.align}):[_vm._l((_vm.items),function(item,index){return _vm._t(\"item\",[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(item)+\"\\n\\t\\t\\t\\t\\t\")],{\"item\":item,\"index\":index,\"on\":_vm.setActive,\"align\":_vm.align})})]],2):_vm._e()])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div\r\n\t\tclass=\"dropdown\"\r\n\t\t:active=\"sActive\"\r\n\t\t:align=\"align\"\r\n\t\t:menu-type=\"menuType\"\r\n\t>\r\n\t\t<div\r\n\t\t\tv-show=\"sActive\"\r\n\t\t\tclass=\"overlay\"\r\n\t\t\t@click.stop=\"setActive(false)\"\r\n\t\t\t@contextmenu.stop.prevent=\"setActive(false)\"\r\n\t\t\tref=\"overlay\"\r\n\t\t></div>\r\n\t\t<div class=\"activator\" ref=\"activator\">\r\n\t\t\t<slot\r\n\t\t\t\tname=\"activator\"\r\n\t\t\t\t:on=\"setActive\"\r\n\t\t\t\t:active=\"sActive\"\r\n\t\t\t\t:align=\"align\"\r\n\t\t\t></slot>\r\n\t\t</div>\r\n\t\t<div\r\n\t\t\tclass=\"menu-container\"\r\n\t\t\tref=\"menuContainer\"\r\n\t\t\t:active=\"sActive\"\r\n\t\t\t:align=\"align\"\r\n\t\t\t:menu-type=\"menuType\"\r\n\t\t\t:style=\"'top: ' + y + 'px; left: ' + x + 'px; '\"\r\n\t\t>\r\n\t\t\t<transition name=\"menu-active\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"menu\"\r\n\t\t\t\t\tv-if=\"eager ? true : sActive\"\r\n\t\t\t\t\tv-show=\"eager ? sActive : true\"\r\n\t\t\t\t\tref=\"menu\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<slot\r\n\t\t\t\t\t\tv-if=\"$slots.content\"\r\n\t\t\t\t\t\tname=\"content\"\r\n\t\t\t\t\t\t:items=\"items\"\r\n\t\t\t\t\t\t:on=\"setActive\"\r\n\t\t\t\t\t\t:align=\"align\"\r\n\t\t\t\t\t></slot>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<slot\r\n\t\t\t\t\t\t\tv-for=\"(item, index) in items\"\r\n\t\t\t\t\t\t\tname=\"item\"\r\n\t\t\t\t\t\t\t:item=\"item\"\r\n\t\t\t\t\t\t\t:index=\"index\"\r\n\t\t\t\t\t\t\t:on=\"setActive\"\r\n\t\t\t\t\t\t\t:align=\"align\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{{ item }}\r\n\t\t\t\t\t\t</slot>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</div>\r\n\t\t\t</transition>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tprops: {\r\n\t\tactive: false,\r\n\t\talign: {\r\n\t\t\tdefault: 'left',\r\n\t\t\tvalidator(value) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\ttypeof value === 'string' &&\r\n\t\t\t\t\t['left', 'right'].indexOf(value) !== -1\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmenuType: {\r\n\t\t\tdefault: 'list',\r\n\t\t\tvalidator(value) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\ttypeof value === 'string' &&\r\n\t\t\t\t\t['list', 'grid'].indexOf(value) !== -1\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\teager: false,\r\n\t\titems: {\r\n\t\t\tdefault: [],\r\n\t\t\ttype: Array\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsActive: this.active,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tsetActive(to = !this.sActive) {\r\n\t\t\tthis.sActive = to;\r\n\t\t\tthis.$emit('update:active', to);\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tactive(newval) {\r\n\t\t\tif (newval) {\r\n\t\t\t\tthis.$root.$app.$refs.dropdownOverlays.innerHTML = '';\r\n\t\t\t\tthis.$root.$app.$refs.dropdownMenus.innerHTML = '';\r\n\r\n\t\t\t\tthis.$root.$app.$refs.dropdownOverlays.appendChild(\r\n\t\t\t\t\tthis.$refs.overlay\r\n\t\t\t\t);\r\n\t\t\t\tthis.$root.$app.$refs.dropdownMenus.appendChild(\r\n\t\t\t\t\tthis.$refs.menuContainer\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tthis.sActive = newval;\r\n\t\t},\r\n\t\tsActive(newval) {\r\n\t\t\tif (newval) {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tlet rect = this.$el.getBoundingClientRect();\r\n\t\t\t\t\tlet activatorRect = this.$refs.activator.getBoundingClientRect();\r\n\t\t\t\t\tlet menuRect = this.$refs.menuContainer.getBoundingClientRect();\r\n\t\t\t\t\tthis.x =\r\n\t\t\t\t\t\tthis.align === 'left'\r\n\t\t\t\t\t\t\t? rect.left\r\n\t\t\t\t\t\t\t: rect.right - menuRect.width;\r\n\t\t\t\t\tthis.y = rect.y + activatorRect.height;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dropdown.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dropdown.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dropdown.vue?vue&type=template&id=8a15e46a&\"\nimport script from \"./Dropdown.vue?vue&type=script&lang=js&\"\nexport * from \"./Dropdown.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.useAvatar !== 0)?_c('button',{staticClass:\"conversation-avatar btn action\",attrs:{\"title\":_vm.conversationId}},[(_vm.useAvatar === 1 || _vm.useAvatar === 2)?_c('canvas',{ref:\"avatarCanvas\",staticClass:\"avatar-canvas\",attrs:{\"width\":\"48\",\"height\":\"48\"}}):(_vm.useAvatar === 3)?_c('div',{staticClass:\"avatar-html\",domProps:{\"innerHTML\":_vm._s(_vm.avatarHTML)}}):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<button\r\n\t\tv-if=\"useAvatar !== 0\"\r\n\t\tclass=\"conversation-avatar btn action\"\r\n\t\t:title=\"conversationId\"\r\n\t>\r\n\t\t<canvas\r\n\t\t\tv-if=\"useAvatar === 1 || useAvatar === 2\"\r\n\t\t\tclass=\"avatar-canvas\"\r\n\t\t\tref=\"avatarCanvas\"\r\n\t\t\twidth=\"48\"\r\n\t\t\theight=\"48\"\r\n\t\t></canvas>\r\n\t\t<div\r\n\t\t\tv-else-if=\"useAvatar === 3\"\r\n\t\t\tclass=\"avatar-html\"\r\n\t\t\tv-html=\"avatarHTML\"\r\n\t\t></div>\r\n\t</button>\r\n</template>\r\n\r\n<script>\r\nimport jdenticon from 'jdenticon';\r\n\r\nexport default {\r\n\tprops: ['providerName', 'conversationId'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuseAvatar: 0,\r\n\t\t\tavatarHTML: null\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tlet gUA = this.$store.getters[\r\n\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\tthis.providerName +\r\n\t\t\t\t'/getConversationAvatar'\r\n\t\t];\r\n\t\tif (gUA) {\r\n\t\t\tgUA = gUA(this.conversationId);\r\n\t\t\tif (gUA === 1) {\r\n\t\t\t\tthis.useAvatar = 1;\r\n\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\tlet ctx = this.$refs.avatarCanvas.getContext('2d');\r\n\t\t\t\t\tjdenticon.drawIcon(ctx, this.conversationId, 48);\r\n\t\t\t\t});\r\n\t\t\t} else if (\r\n\t\t\t\ttypeof gUA === 'object' &&\r\n\t\t\t\tgUA.hasOwnProperty('length')\r\n\t\t\t) {\r\n\t\t\t\tif (gUA[0] === 2) {\r\n\t\t\t\t\tthis.useAvatar = 2;\r\n\r\n\t\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t\tlet ctx = this.$refs.avatarCanvas.getContext('2d');\r\n\t\t\t\t\t\tctx.drawImage(gUA[1], 48, 48);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (gUA[0] === 3) {\r\n\t\t\t\t\tthis.useAvatar = 3;\r\n\r\n\t\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t\tthis.avatarHTML = gUA[1];\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationAvatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationAvatar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConversationAvatar.vue?vue&type=template&id=15e0ab2d&\"\nimport script from \"./ConversationAvatar.vue?vue&type=script&lang=js&\"\nexport * from \"./ConversationAvatar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div\r\n\t\t:class=\"\r\n\t\t\t'conversation-list-item card ' +\r\n\t\t\t\t(!dropdownActive ? 'hovershadow ' : '') +\r\n\t\t\t\t(active ? 'active secondary ' : '')\r\n\t\t\"\r\n\t\t@click=\"handleClick\"\r\n\t\t@contextmenu.exact.prevent=\"dropdownActive = true\"\r\n\t>\r\n\t\t<div class=\"conversation-avatar-container\">\r\n\t\t\t<ConversationAvatar\r\n\t\t\t\tv-if=\"\r\n\t\t\t\t\tconversationProviderHasAvatarProvider(\r\n\t\t\t\t\t\tconversation.providerName\r\n\t\t\t\t\t)\r\n\t\t\t\t\"\r\n\t\t\t\t:providerName=\"conversation.providerName\"\r\n\t\t\t\t:conversationId=\"conversation.id\"\r\n\t\t\t\tclass=\"flat rounded shadow lg\"\r\n\t\t\t\t:key=\"\r\n\t\t\t\t\tconversation.id\r\n\t\t\t\t\t\t? 'conversation_' +\r\n\t\t\t\t\t\t  conversation.providerName +\r\n\t\t\t\t\t\t  '_' +\r\n\t\t\t\t\t\t  conversation.id\r\n\t\t\t\t\t\t: 'conversation_' + conversation.providerName\r\n\t\t\t\t\"\r\n\t\t\t/>\r\n\t\t\t<button\r\n\t\t\t\tv-else\r\n\t\t\t\tclass=\"conversation-avatar btn action flat rounded\"\r\n\t\t\t></button>\r\n\t\t</div>\r\n\t\t<div class=\"content\">\r\n\t\t\t<span class=\"title_timestamp_conversation-action-dropdown\">\r\n\t\t\t\t<span class=\"title clr-secondary\"\r\n\t\t\t\t\t>{{ conversation.name }}\r\n\t\t\t\t\t<i v-if=\"!oneProviderMode\"\r\n\t\t\t\t\t\t>({{ conversation.providerName }})</i\r\n\t\t\t\t\t></span\r\n\t\t\t\t>\r\n\t\t\t\t<span class=\"timestamp\"\r\n\t\t\t\t\t>{{\r\n\t\t\t\t\t\tconversation.lastMessage &&\r\n\t\t\t\t\t\tconversation.lastMessage.dateAdded\r\n\t\t\t\t\t\t\t? '&nbsp;' + timestamp\r\n\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t}}&nbsp;</span\r\n\t\t\t\t>\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\tv-if=\"getConversationListItemActions\"\r\n\t\t\t\t\tclass=\"conversation-action-dropdown\"\r\n\t\t\t\t\t:items=\"getConversationListItemActions\"\r\n\t\t\t\t\talign=\"right\"\r\n\t\t\t\t\t@update:active=\"dropdownActive = $event\"\r\n\t\t\t\t\t:active=\"dropdownActive\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template v-slot:activator=\"scope\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t:class=\"\r\n\t\t\t\t\t\t\t\t'conversation-action-btn btn action link sm ' +\r\n\t\t\t\t\t\t\t\t\t(scope.active ? 'active ' : '')\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t@click.stop=\"scope.on()\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<icon>dots-vertical</icon>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-slot:item=\"scope\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t:class=\"\r\n\t\t\t\t\t\t\t\t'conversation-action-dropdown-menu-li btn ' +\r\n\t\t\t\t\t\t\t\t\t(scope.item.classes || 'link')\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t@click.stop=\"dropdownAction(scope)\"\r\n\t\t\t\t\t\t\t:disabled=\"scope.item.disabled\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\ttypeof scope.item.name === 'function'\r\n\t\t\t\t\t\t\t\t\t? scope.item.name()\r\n\t\t\t\t\t\t\t\t\t: scope.item.name\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</Dropdown>\r\n\t\t\t</span>\r\n\t\t\t<span class=\"last-message\">\r\n\t\t\t\t<span class=\"username\">{{\r\n\t\t\t\t\tconversation.lastMessage && conversation.lastMessage.userId\r\n\t\t\t\t\t\t? (conversation.lastMessage.userName ||\r\n\t\t\t\t\t\t\t\tconversation.lastMessage.userId) + ':&nbsp;'\r\n\t\t\t\t\t\t: ''\r\n\t\t\t\t}}</span>\r\n\t\t\t\t<span class=\"body\">{{\r\n\t\t\t\t\tconversation.lastMessage &&\r\n\t\t\t\t\tdecodeURIComponent(conversation.lastMessage.body)\r\n\t\t\t\t\t\t? decodeURIComponent(conversation.lastMessage.body)\r\n\t\t\t\t\t\t: ''\r\n\t\t\t\t}}</span>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Icon from './Icon';\r\nimport Dropdown from './Dropdown';\r\nimport ConversationAvatar from './ConversationAvatar.vue';\r\nimport { mapGetters, mapActions } from 'vuex';\r\nimport moment from 'moment';\r\n\r\nexport default {\r\n\tname: 'ConversationListItem',\r\n\tcomponents: {\r\n\t\tIcon,\r\n\t\tDropdown,\r\n\t\tConversationAvatar\r\n\t},\r\n\tprops: ['conversation', 'active'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdropdownActive: false,\r\n\t\t\tlastId: null\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tcurdate() {\r\n\t\t\treturn moment().format('MMMM Do, YYYY');\r\n\t\t},\r\n\t\ttimestamp() {\r\n\t\t\tif (this.conversation.lastMessage) {\r\n\t\t\t\tlet msgdate = moment(\r\n\t\t\t\t\tthis.conversation.lastMessage.dateAdded,\r\n\t\t\t\t\t'x'\r\n\t\t\t\t).format('MMMM Do, YYYY');\r\n\t\t\t\treturn this.curdate === msgdate\r\n\t\t\t\t\t? moment(\r\n\t\t\t\t\t\t\tthis.conversation.lastMessage.dateAdded,\r\n\t\t\t\t\t\t\t'x'\r\n\t\t\t\t\t  ).format('HH:mm')\r\n\t\t\t\t\t: moment(msgdate, 'MMMM Do, YYYY')\r\n\t\t\t\t\t\t\t.subtract(1, 'd')\r\n\t\t\t\t\t\t\t.format('MMMM Do, YYYY') === this.curdate\r\n\t\t\t\t\t? 'Yesterday'\r\n\t\t\t\t\t: moment(msgdate, 'MMMM Do, YYYY').format('M/D/Y');\r\n\t\t\t\t// return moment(conversation.lastMessage.dateAdded, \"x\").fromNow();\r\n\t\t\t}\r\n\t\t\treturn '';\r\n\t\t},\r\n\t\tgetConversationListItemActions() {\r\n\t\t\tif (!this.conversation) return null;\r\n\r\n\t\t\tconst actionsGetter = this.$store.getters[\r\n\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\tthis.conversation.providerName +\r\n\t\t\t\t\t'/conversationListItemActions'\r\n\t\t\t];\r\n\r\n\t\t\tif (!actionsGetter) return null;\r\n\r\n\t\t\tconst actions = actionsGetter(this.conversation.id, {\r\n\t\t\t\tcommit: this.$store.commit,\r\n\t\t\t\tdispatch: this.$store.dispatch\r\n\t\t\t});\r\n\t\t\tif (!actions) return null;\r\n\r\n\t\t\tactions.unshift({\r\n\t\t\t\tname:\r\n\t\t\t\t\t(this.conversation.name || this.conversation.id) +\r\n\t\t\t\t\t(!this.oneProviderMode\r\n\t\t\t\t\t\t? ' (' + this.conversation.providerName + ')'\r\n\t\t\t\t\t\t: ''),\r\n\t\t\t\tdisabled: true\r\n\t\t\t});\r\n\t\t\tactions.push({\r\n\t\t\t\tname: 'Close'\r\n\t\t\t});\r\n\r\n\t\t\treturn actions;\r\n\t\t},\r\n\t\t...mapGetters({\r\n\t\t\toneProviderMode: 'ConversationProviders/oneProviderMode'\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\thandleClick() {\r\n\t\t\tif (this.active) {\r\n\t\t\t\tthis.closeConversationInfo();\r\n\t\t\t\tthis.closeConversation();\r\n\t\t\t} else {\r\n\t\t\t\tthis.openConversation([\r\n\t\t\t\t\tthis.conversation.providerName,\r\n\t\t\t\t\tthis.conversation.id\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tconversationProviderHasAvatarProvider(providerName) {\r\n\t\t\treturn this.$store.getters[\r\n\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\tproviderName +\r\n\t\t\t\t\t'/getConversationAvatar'\r\n\t\t\t];\r\n\t\t},\r\n\t\tcloseConversationInfo() {\r\n\t\t\tthis.$emit('update:conversationInfoOpen', false);\r\n\t\t},\r\n\t\tdropdownAction(scope) {\r\n\t\t\tif (!scope.item.keepOpen) scope.on();\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tif (scope.item.onclick) scope.item.onclick();\r\n\t\t\t});\r\n\t\t},\r\n\t\t...mapActions(['openConversation', 'closeConversation', 'newMsg'])\r\n\t},\r\n\twatch: {\r\n\t\t'conversation.lastMessage'(newval, oldval) {\r\n\t\t\tif (newval && newval.key !== this.lastKey) {\r\n\t\t\t\tthis.lastKey = newval.key;\r\n\r\n\t\t\t\t// Send new message event to plugins\r\n\t\t\t\tthis.newMsg([this.conversation, newval]);\r\n\t\t\t} else if (!newval) {\r\n\t\t\t\tthis.lastKey = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationListItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationListItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConversationListItem.vue?vue&type=template&id=6369e0c3&\"\nimport script from \"./ConversationListItem.vue?vue&type=script&lang=js&\"\nexport * from \"./ConversationListItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"conversation-list-actions\",attrs:{\"open-dialog\":_vm.openDialog,\"open-dialog-animation\":_vm.openDialogAnimation},on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.setOpenDialog('')}}},[_c('transition',{attrs:{\"name\":\"dialog\"},on:{\"before-enter\":function($event){_vm.openDialogAnimation = 'open'},\"before-leave\":function($event){_vm.openDialogAnimation = 'closing'},\"after-leave\":function($event){_vm.openDialogAnimation = 'closed'}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.openDialog),expression:\"openDialog\"}],staticClass:\"conversation-list-action card shadow\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.openDialog == 'conversation-manager'),expression:\"openDialog == 'conversation-manager'\"}],staticClass:\"conversation-list-action-inner\"},[_c('ConversationProviderManager')],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.openDialog == 'settings'),expression:\"openDialog == 'settings'\"}],staticClass:\"conversation-list-action-inner\"},[_c('Settings')],1)])]),_c('div',{class:'openers ' + (_vm.scrolledToBottom || _vm.openDialog ? '' : 'hovering '),attrs:{\"left-active\":_vm.openDialog == 'conversation-manager',\"right-active\":_vm.openDialog == 'settings'}},[_c('button',{class:'conversation-manager-btn btn action lg primary ' +\n\t\t\t\t\t(_vm.scrolledToBottom ||\n\t\t\t\t\t_vm.openDialog == 'conversation-manager'\n\t\t\t\t\t\t? 'shadow '\n\t\t\t\t\t\t: '') +\n\t\t\t\t\t' ' +\n\t\t\t\t\t(_vm.openDialog != 'conversation-manager'\n\t\t\t\t\t\t? 'rounded '\n\t\t\t\t\t\t: '') +\n\t\t\t\t\t(_vm.openDialog != '' &&\n\t\t\t\t\t_vm.openDialog != 'conversation-manager'\n\t\t\t\t\t\t? 'flat '\n\t\t\t\t\t\t: ''),on:{\"click\":function($event){return _vm.setOpenDialog(\n\t\t\t\t\t_vm.openDialog == 'conversation-manager'\n\t\t\t\t\t\t? ''\n\t\t\t\t\t\t: 'conversation-manager'\n\t\t\t\t)}}},[_c('icon',[_vm._v(\"account\")])],1),_c('button',{class:'settings-btn btn action lg light ' +\n\t\t\t\t\t(_vm.scrolledToBottom || _vm.openDialog == 'settings'\n\t\t\t\t\t\t? 'shadow '\n\t\t\t\t\t\t: '') +\n\t\t\t\t\t' ' +\n\t\t\t\t\t(_vm.openDialog != 'settings' ? 'rounded ' : '') +\n\t\t\t\t\t(_vm.openDialog != '' && _vm.openDialog != 'settings'\n\t\t\t\t\t\t? 'flat '\n\t\t\t\t\t\t: ''),on:{\"click\":function($event){return _vm.setOpenDialog(_vm.openDialog == 'settings' ? '' : 'settings')}}},[_c('icon',[_vm._v(\"settings\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"conversation-provider-manager\"},[(!_vm.oneProviderMode)?_c('span',{staticClass:\"card-title\"},[_vm._v(\"Conversation provider manager\")]):_c('span',{staticClass:\"card-title clr-bg bgclr-secondary\"},[_vm._v(\"ThunderWave X\\n\\t\\t\"),_c('i',[_vm._v(_vm._s(_vm.getAllConversationProviders[0].name))])]),_c('div',{staticClass:\"conversation-provider-manager-outer\"},[_c('div',{staticClass:\"conversation-provider-manager-inner\"},[(_vm.usableConversationProviders.length == 0)?_c('div',[_c('h4',[_vm._v(\"\\n\\t\\t\\t\\t\\tThere are no conversation providers currently available!\\n\\t\\t\\t\\t\")])]):(!_vm.oneProviderMode)?_c('div',{staticClass:\"provider-selector input-group\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.providerName),expression:\"providerName\"}],staticClass:\"provider-name input\",attrs:{\"title\":\"provider name\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.providerName=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.usableConversationProviders),function(provider){return _c('option',{key:provider.name ? provider.name : '',attrs:{\"disabled\":provider.name &&\n\t\t\t\t\t\t\t\t!_vm.isAvailableProvider(provider.name)},domProps:{\"value\":provider.name ? provider.name : ''}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(provider.name\n\t\t\t\t\t\t\t\t? provider.name\n\t\t\t\t\t\t\t\t: 'Please select a provider')+\"\\n\\t\\t\\t\\t\\t\")])}),0)]):_vm._e(),(_vm.providerName)?_c('div',{staticClass:\"provider-manager-component-container\"},[(_vm.curProviderManagerComponent)?_c(_vm.curProviderManagerComponent,{tag:\"component\"}):_vm._e()],1):_c('div',[_c('h4',{staticStyle:{\"padding\":\"0 .8rem\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\tPlease select a conversation provider to start chatting\\n\\t\\t\\t\\t\\t:)\\n\\t\\t\\t\\t\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"conversation-provider-manager\">\r\n\t\t<span v-if=\"!oneProviderMode\" class=\"card-title\"\r\n\t\t\t>Conversation provider manager</span\r\n\t\t>\r\n\t\t<span v-else class=\"card-title clr-bg bgclr-secondary\"\r\n\t\t\t>ThunderWave X\r\n\t\t\t<i>{{ getAllConversationProviders[0].name }}</i></span\r\n\t\t>\r\n\t\t<div class=\"conversation-provider-manager-outer\">\r\n\t\t\t<div class=\"conversation-provider-manager-inner\">\r\n\t\t\t\t<div v-if=\"usableConversationProviders.length == 0\">\r\n\t\t\t\t\t<h4>\r\n\t\t\t\t\t\tThere are no conversation providers currently available!\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-else-if=\"!oneProviderMode\"\r\n\t\t\t\t\tclass=\"provider-selector input-group\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<!-- <span class=\"input-group-addon\">provider</span> -->\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclass=\"provider-name input\"\r\n\t\t\t\t\t\tv-model=\"providerName\"\r\n\t\t\t\t\t\ttitle=\"provider name\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\tv-for=\"provider in usableConversationProviders\"\r\n\t\t\t\t\t\t\t:key=\"provider.name ? provider.name : ''\"\r\n\t\t\t\t\t\t\t:value=\"provider.name ? provider.name : ''\"\r\n\t\t\t\t\t\t\t:disabled=\"\r\n\t\t\t\t\t\t\t\tprovider.name &&\r\n\t\t\t\t\t\t\t\t\t!isAvailableProvider(provider.name)\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\tprovider.name\r\n\t\t\t\t\t\t\t\t\t? provider.name\r\n\t\t\t\t\t\t\t\t\t: 'Please select a provider'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-if=\"providerName\"\r\n\t\t\t\t\tclass=\"provider-manager-component-container\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<component\r\n\t\t\t\t\t\tv-if=\"curProviderManagerComponent\"\r\n\t\t\t\t\t\t:is=\"curProviderManagerComponent\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-else>\r\n\t\t\t\t\t<h4 style=\"padding: 0 .8rem;\">\r\n\t\t\t\t\t\tPlease select a conversation provider to start chatting\r\n\t\t\t\t\t\t:)\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'ConversationProviderManager',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tproviderName: ''\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tif (this.oneProviderMode) {\r\n\t\t\t\tthis.providerName = this.usableConversationProviders[0].name;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tcomputed: {\r\n\t\tusableConversationProviders() {\r\n\t\t\tlet filtered = this.getAllConversationProviders.filter(provider => {\r\n\t\t\t\treturn this.providerManagerComponent(provider.name);\r\n\t\t\t});\r\n\t\t\tif (!this.oneProviderMode) {\r\n\t\t\t\tfiltered.unshift('');\r\n\t\t\t}\r\n\t\t\treturn filtered;\r\n\t\t},\r\n\t\tcurProviderManagerComponent() {\r\n\t\t\treturn this.providerManagerComponent(this.providerName);\r\n\t\t},\r\n\t\t...mapGetters({\r\n\t\t\tisAvailableProvider: 'ConversationProviders/isAvailable',\r\n\t\t\tgetAllConversationProviders:\r\n\t\t\t\t'ConversationProviders/getAllConversationProviders',\r\n\t\t\toneProviderMode: 'ConversationProviders/oneProviderMode'\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\tproviderManagerComponent(providerName) {\r\n\t\t\tif (providerName) {\r\n\t\t\t\tlet component = this.$store.getters[\r\n\t\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\t\tproviderName +\r\n\t\t\t\t\t\t'/managerComponent'\r\n\t\t\t\t];\r\n\t\t\t\treturn component;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationProviderManager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationProviderManager.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConversationProviderManager.vue?vue&type=template&id=305d9bb5&\"\nimport script from \"./ConversationProviderManager.vue?vue&type=script&lang=js&\"\nexport * from \"./ConversationProviderManager.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"settings\"},[_c('span',{staticClass:\"card-title\"},[_vm._v(\"Settings\")]),_c('div',{staticClass:\"settings-outer\"},[_c('div',{staticClass:\"settings-inner\"},[_c('button',{staticClass:\"btn link\",on:{\"click\":function($event){return _vm.toggleTheme()}}},[_c('icon',[_vm._v(\"theme-light-dark\")]),_c('span',[_vm._v(\"Switch to \"+_vm._s(_vm.darkmode ? 'light' : 'dark')+\" theme\")])],1),_c('h4',[_vm._v(\"Plugins\")]),_c('div',{staticClass:\"plugin-selector input-group\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.ipluginName),expression:\"ipluginName\"}],staticClass:\"input\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.ipluginName=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.pluginNames),function(pluginName){return _c('option',{key:pluginName + '_' + (pluginName ? _vm.isPluginInstalled(pluginName) : ''),domProps:{\"value\":pluginName ? pluginName : ''}},[_vm._v(\"\\n                        \"+_vm._s(pluginName ? pluginName : 'Please select a plugin')+\" \"),(pluginName && _vm.isPluginInstalled(pluginName))?_c('i',[_vm._v(\"(installed)\")]):_vm._e()])}),0)]),_c('div',{staticClass:\"plugin-selector input-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.ipluginName),expression:\"ipluginName\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"pluginName\"},domProps:{\"value\":(_vm.ipluginName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.ipluginName=$event.target.value}}})]),_c('div',[_c('button',{staticClass:\"btn secondary\",attrs:{\"type\":\"submit\",\"disabled\":!_vm.ipluginName || _vm.isPluginInstalled(_vm.ipluginName)},on:{\"click\":_vm.install}},[_vm._v(\"Install plugin\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"settings\">\r\n        <span class=\"card-title\">Settings</span>\r\n        <div class=\"settings-outer\">\r\n            <div class=\"settings-inner\">\r\n                <button class=\"btn link\" @click=\"toggleTheme()\">\r\n                    <icon>theme-light-dark</icon>\r\n                    <span>&nbsp;Switch to {{ darkmode ? 'light' : 'dark' }} theme</span>\r\n                </button>\r\n                <h4>Plugins</h4>\r\n                <div class=\"plugin-selector input-group\">\r\n                    <!-- <span class=\"input-group-addon\">plugin</span> -->\r\n                    <select v-model=\"ipluginName\" class=\"input\">\r\n                        <option v-for=\"(pluginName) in pluginNames\" :value=\"pluginName ? pluginName : ''\" :key=\"pluginName + '_' + (pluginName ? isPluginInstalled(pluginName) : '')\">\r\n                            {{ pluginName ? pluginName : 'Please select a plugin' }} <i v-if=\"pluginName && isPluginInstalled(pluginName)\">(installed)</i>\r\n                        </option>\r\n                    </select>\r\n                </div>\r\n                <div class=\"plugin-selector input-group\">\r\n                    <input class=\"input\" type=\"text\" v-model=\"ipluginName\" placeholder=\"pluginName\" />\r\n                </div>\r\n                <div>\r\n                    <button type=\"submit\" @click=\"install\" class=\"btn secondary\" :disabled=\"!ipluginName || isPluginInstalled(ipluginName)\">Install plugin</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Icon from './Icon';\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n    name: 'Settings',\r\n    components: {\r\n        Icon\r\n    },\r\n    data() {\r\n        return {\r\n            pluginNames: [\r\n                '',\r\n                'markdown',\r\n                'emojione',\r\n                'tempsaveMsginput',\r\n                'pushNotification',\r\n            ],\r\n            ipluginName: '',\r\n            darkmode: document.getElementById(\"html\").classList.contains(\"darkmode\") || false\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapGetters(['isPluginInstalled'])\r\n    },\r\n    methods: {\r\n        install() {\r\n            if (this.ipluginName) {\r\n                this.installPlugin(this.ipluginName);\r\n                this.ipluginName = '';\r\n            }\r\n        },\r\n        toggleTheme() {\r\n            document.getElementById(\"html\").classList.toggle(\"darkmode\");\r\n            const darkmode = document.getElementById(\"html\").classList.contains(\"darkmode\") || false;\r\n            this.darkmode = darkmode;\r\n        }\r\n    }\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=bbb2f520&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div\r\n\t\tclass=\"conversation-list-actions\"\r\n\t\t:open-dialog=\"openDialog\"\r\n\t\t:open-dialog-animation=\"openDialogAnimation\"\r\n\t\t@click.self=\"setOpenDialog('')\"\r\n\t>\r\n\t\t<transition\r\n\t\t\tname=\"dialog\"\r\n\t\t\t@before-enter=\"openDialogAnimation = 'open'\"\r\n\t\t\t@before-leave=\"openDialogAnimation = 'closing'\"\r\n\t\t\t@after-leave=\"openDialogAnimation = 'closed'\"\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tv-show=\"openDialog\"\r\n\t\t\t\tclass=\"conversation-list-action card shadow\"\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-show=\"openDialog == 'conversation-manager'\"\r\n\t\t\t\t\tclass=\"conversation-list-action-inner\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<ConversationProviderManager />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-show=\"openDialog == 'settings'\"\r\n\t\t\t\t\tclass=\"conversation-list-action-inner\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Settings />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</transition>\r\n\t\t<div\r\n\t\t\t:class=\"\r\n\t\t\t\t'openers ' + (scrolledToBottom || openDialog ? '' : 'hovering ')\r\n\t\t\t\"\r\n\t\t\t:left-active=\"openDialog == 'conversation-manager'\"\r\n\t\t\t:right-active=\"openDialog == 'settings'\"\r\n\t\t>\r\n\t\t\t<button\r\n\t\t\t\t:class=\"\r\n\t\t\t\t\t'conversation-manager-btn btn action lg primary ' +\r\n\t\t\t\t\t\t(scrolledToBottom ||\r\n\t\t\t\t\t\topenDialog == 'conversation-manager'\r\n\t\t\t\t\t\t\t? 'shadow '\r\n\t\t\t\t\t\t\t: '') +\r\n\t\t\t\t\t\t' ' +\r\n\t\t\t\t\t\t(openDialog != 'conversation-manager'\r\n\t\t\t\t\t\t\t? 'rounded '\r\n\t\t\t\t\t\t\t: '') +\r\n\t\t\t\t\t\t(openDialog != '' &&\r\n\t\t\t\t\t\topenDialog != 'conversation-manager'\r\n\t\t\t\t\t\t\t? 'flat '\r\n\t\t\t\t\t\t\t: '')\r\n\t\t\t\t\"\r\n\t\t\t\t@click=\"\r\n\t\t\t\t\tsetOpenDialog(\r\n\t\t\t\t\t\topenDialog == 'conversation-manager'\r\n\t\t\t\t\t\t\t? ''\r\n\t\t\t\t\t\t\t: 'conversation-manager'\r\n\t\t\t\t\t)\r\n\t\t\t\t\"\r\n\t\t\t>\r\n\t\t\t\t<icon>account</icon>\r\n\t\t\t</button>\r\n\t\t\t<button\r\n\t\t\t\t:class=\"\r\n\t\t\t\t\t'settings-btn btn action lg light ' +\r\n\t\t\t\t\t\t(scrolledToBottom || openDialog == 'settings'\r\n\t\t\t\t\t\t\t? 'shadow '\r\n\t\t\t\t\t\t\t: '') +\r\n\t\t\t\t\t\t' ' +\r\n\t\t\t\t\t\t(openDialog != 'settings' ? 'rounded ' : '') +\r\n\t\t\t\t\t\t(openDialog != '' && openDialog != 'settings'\r\n\t\t\t\t\t\t\t? 'flat '\r\n\t\t\t\t\t\t\t: '')\r\n\t\t\t\t\"\r\n\t\t\t\t@click=\"\r\n\t\t\t\t\tsetOpenDialog(openDialog == 'settings' ? '' : 'settings')\r\n\t\t\t\t\"\r\n\t\t\t>\r\n\t\t\t\t<icon>settings</icon>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport Icon from './Icon';\r\nimport ConversationProviderManager from './ConversationProviderManager.vue';\r\nimport Settings from './Settings.vue';\r\n\r\nexport default {\r\n\tname: 'ConversationListActions',\r\n\tcomponents: {\r\n\t\tIcon,\r\n\t\tConversationProviderManager,\r\n\t\tSettings\r\n\t},\r\n\tprops: ['scrolledToBottom'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\topenDialog: '',\r\n\t\t\topenDialogAnimation: 'closed'\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tsetOpenDialog(to = '') {\r\n\t\t\tthis.openDialog = to;\r\n\t\t\tthis.$emit('update:openDialog', this.openDialog);\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationListActions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationListActions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConversationListActions.vue?vue&type=template&id=7395a520&\"\nimport script from \"./ConversationListActions.vue?vue&type=script&lang=js&\"\nexport * from \"./ConversationListActions.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div class=\"conversation-list\" :open-dialog=\"openDialog\">\r\n\t\t<template v-if=\"getAllConversations.length === 0\">\r\n\t\t\t<div\r\n\t\t\t\tv-for=\"i in 3\"\r\n\t\t\t\tclass=\"conversation-list-item conversation-list-item-sample card\"\r\n\t\t\t\t:key=\"'conversation-sample_' + i\"\r\n\t\t\t>\r\n\t\t\t\t<div class=\"conversation-avatar-container\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"conversation-avatar btn action flat rounded\"\r\n\t\t\t\t\t></button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"content\">\r\n\t\t\t\t\t<span class=\"title_timestamp\">\r\n\t\t\t\t\t\t<span class=\"title clr-secondary\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"sampletext bgclr-secondary\"\r\n\t\t\t\t\t\t\t\tstyle=\"width: 128px;\"\r\n\t\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span class=\"timestamp\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"sampletext bgclr-light\"\r\n\t\t\t\t\t\t\t\tstyle=\"width: 64px;\"\r\n\t\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span class=\"last-message_conversation-action\">\r\n\t\t\t\t\t\t<span class=\"last-message\">\r\n\t\t\t\t\t\t\t<span class=\"username\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclass=\"sampletext bgclr-dark\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"width: 96px;\"\r\n\t\t\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span class=\"body\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclass=\"sampletext bgclr-dark\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"width: 128px;\"\r\n\t\t\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span class=\"conversation-action\"></span>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t\t<template v-else>\r\n\t\t\t<ConversationListItem\r\n\t\t\t\tv-for=\"conversation in getAllConversations\"\r\n\t\t\t\t@update:conversationInfoOpen=\"\r\n\t\t\t\t\tupdateConversationInfoOpen($event)\r\n\t\t\t\t\"\r\n\t\t\t\t:conversation=\"conversation\"\r\n\t\t\t\t:active=\"\r\n\t\t\t\t\t!!getCurConversation &&\r\n\t\t\t\t\t\tconversation.providerName ==\r\n\t\t\t\t\t\t\tgetCurConversation.providerName &&\r\n\t\t\t\t\t\tconversation.id == getCurConversation.id\r\n\t\t\t\t\"\r\n\t\t\t\t:key=\"\r\n\t\t\t\t\t'conversation_' +\r\n\t\t\t\t\t\tconversation.providerName +\r\n\t\t\t\t\t\t'_' +\r\n\t\t\t\t\t\tconversation.id\r\n\t\t\t\t\"\r\n\t\t\t/>\r\n\t\t</template>\r\n\t\t<ConversationListActions\r\n\t\t\t@update:openDialog=\"setOpenDialog\"\r\n\t\t\t:scrolledToBottom=\"scrolledToBottom\"\r\n\t\t/>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport ConversationListItem from './ConversationListItem.vue';\r\nimport ConversationListActions from './ConversationListActions.vue';\r\nimport { mapGetters } from 'vuex';\r\n\r\nlet ticking = false;\r\n\r\nexport default {\r\n\tname: 'ConversationList',\r\n\tcomponents: {\r\n\t\tConversationListItem,\r\n\t\tConversationListActions\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\topenDialog: '',\r\n\t\t\tscrolledToBottom: false\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$el.addEventListener('scroll', () => {\r\n\t\t\tthis.scrollUpdater();\r\n\t\t});\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.scrollUpdater();\r\n\t\t});\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters({\r\n\t\t\tgetAllConversations: 'ConversationProviders/getAllConversations',\r\n\t\t\tgetCurConversation: 'ConversationProviders/getCurConversation'\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\tsetOpenDialog(to = '') {\r\n\t\t\tthis.openDialog = to;\r\n\t\t\tthis.$emit('update:openDialog', this.openDialog);\r\n\t\t},\r\n\t\tscrollUpdater() {\r\n\t\t\tlet last_known_scroll_position = this.$el.scrollTop;\r\n\r\n\t\t\tif (!ticking) {\r\n\t\t\t\twindow.requestAnimationFrame(() => {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tlast_known_scroll_position >=\r\n\t\t\t\t\t\tthis.$el.scrollHeight - this.$el.clientHeight - 25\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.scrolledToBottom = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.scrolledToBottom = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tticking = false;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tticking = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateConversationInfoOpen(to = false) {\r\n\t\t\tthis.$emit('update:conversationInfoOpen', !!to);\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConversationList.vue?vue&type=template&id=f777b4a6&\"\nimport script from \"./ConversationList.vue?vue&type=script&lang=js&\"\nexport * from \"./ConversationList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"conversation-navbar navbar card\"},[_c('div',{staticClass:\"navbar-section solo-navbar-section\"},[_c('button',{staticClass:\"backbtn btn action link lg primary\",on:{\"click\":function($event){return _vm.closeConversationAndConversationInfo()}}},[_c('icon',[_vm._v(\"arrow-left\")])],1),_c('div',{staticClass:\"conversation-avatar-container\"},[(_vm.avatarVisible)?_c('ConversationAvatar',{key:_vm.getCurConversation.id\n\t\t\t\t\t\t? 'conversation_' +\n\t\t\t\t\t\t  _vm.getCurConversation.providerName +\n\t\t\t\t\t\t  '_' +\n\t\t\t\t\t\t  _vm.getCurConversation.id\n\t\t\t\t\t\t: 'conversation_' + _vm.getCurConversation.providerName,staticClass:\"flat rounded shadow lg\",attrs:{\"providerName\":_vm.getCurConversation.providerName,\"conversationId\":_vm.getCurConversation.id}}):_vm._e()],1),_c('div',{staticClass:\"conversation-short-info input-group inline\",attrs:{\"avatar-visible\":_vm.avatarVisible}},[_c('button',{staticClass:\"conversation-name btn flat rounded\",attrs:{\"readonly\":\"true\"},on:{\"click\":function($event){return _vm.openConversationInfo()}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.getCurConversation.name)+\"\\n\\t\\t\\t\")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"conversation-navbar navbar card\">\r\n\t\t<div class=\"navbar-section solo-navbar-section\">\r\n\t\t\t<button\r\n\t\t\t\t@click=\"closeConversationAndConversationInfo()\"\r\n\t\t\t\tclass=\"backbtn btn action link lg primary\"\r\n\t\t\t>\r\n\t\t\t\t<icon>arrow-left</icon>\r\n\t\t\t</button>\r\n\t\t\t<div class=\"conversation-avatar-container\">\r\n\t\t\t\t<ConversationAvatar\r\n\t\t\t\t\tv-if=\"avatarVisible\"\r\n\t\t\t\t\t:providerName=\"getCurConversation.providerName\"\r\n\t\t\t\t\t:conversationId=\"getCurConversation.id\"\r\n\t\t\t\t\tclass=\"flat rounded shadow lg\"\r\n\t\t\t\t\t:key=\"\r\n\t\t\t\t\t\tgetCurConversation.id\r\n\t\t\t\t\t\t\t? 'conversation_' +\r\n\t\t\t\t\t\t\t  getCurConversation.providerName +\r\n\t\t\t\t\t\t\t  '_' +\r\n\t\t\t\t\t\t\t  getCurConversation.id\r\n\t\t\t\t\t\t\t: 'conversation_' + getCurConversation.providerName\r\n\t\t\t\t\t\"\r\n\t\t\t\t/>\r\n\t\t\t\t<!-- <button v-else class=\"conversation-avatar btn action flat rounded shadow lg\"></button> -->\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclass=\"conversation-short-info input-group inline\"\r\n\t\t\t\t:avatar-visible=\"avatarVisible\"\r\n\t\t\t>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"conversation-name btn flat rounded\"\r\n\t\t\t\t\treadonly=\"true\"\r\n\t\t\t\t\t@click=\"openConversationInfo()\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{{ getCurConversation.name }}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Icon from './Icon';\r\nimport ConversationAvatar from './ConversationAvatar.vue';\r\nimport { mapGetters, mapActions } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'ConversationNavbar',\r\n\tcomponents: {\r\n\t\tIcon,\r\n\t\tConversationAvatar\r\n\t},\r\n\tdata() {\r\n\t\treturn {};\r\n\t},\r\n\tcomputed: {\r\n\t\tavatarVisible() {\r\n\t\t\treturn (\r\n\t\t\t\tthis.getCurConversation.id &&\r\n\t\t\t\tthis.conversationProviderHasAvatarProvider(\r\n\t\t\t\t\tthis.getCurConversation.providerName\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t},\r\n\t\t...mapGetters({\r\n\t\t\tgetCurConversation: 'ConversationProviders/getCurConversation'\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\tconversationProviderHasAvatarProvider(providerName) {\r\n\t\t\treturn this.$store.getters[\r\n\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\tproviderName +\r\n\t\t\t\t\t'/getConversationAvatar'\r\n\t\t\t];\r\n\t\t},\r\n\t\topenConversationInfo() {\r\n\t\t\tthis.$emit('update:conversationInfoOpen', true);\r\n\t\t},\r\n\t\tcloseConversationInfo() {\r\n\t\t\tthis.$emit('update:conversationInfoOpen', false);\r\n\t\t},\r\n\t\tcloseConversationAndConversationInfo() {\r\n\t\t\tthis.closeConversationInfo();\r\n\t\t\tthis.closeConversation();\r\n\t\t},\r\n\t\t...mapActions(['closeConversation'])\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationNavbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationNavbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConversationNavbar.vue?vue&type=template&id=71dff094&\"\nimport script from \"./ConversationNavbar.vue?vue&type=script&lang=js&\"\nexport * from \"./ConversationNavbar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"conversation\"},[_c('ConversationHistory',{on:{\"update:scrolledToBottom\":function($event){return _vm.updateHistoryScrolledToBottom($event)}}}),(_vm.historyScrolledToBottom && _vm.curTyping.length > 0)?_c('div',{staticClass:\"typing-indicator\"},[_c('div',{staticClass:\"typing-avatars\"},_vm._l((_vm.curTyping),function(typer){return _c('UserAvatar',{key:typer.userId,staticClass:\"rounded flat\",attrs:{\"providerName\":_vm.curConversation.providerName,\"userId\":typer.userId}})}),1),_c('span',{staticClass:\"typing-ids\"},[_vm._l((_vm.curTypingShortened),function(typer,index){return _c('span',{key:typeof typer === 'string' ? typer : typer.userId,staticClass:\"typer-id\"},[(typeof typer === 'string')?_c('span',[_vm._v(_vm._s(typer)+\" more\")]):_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(typer.hasOwnProperty('userName')\n\t\t\t\t\t\t\t? typer.userName\n\t\t\t\t\t\t\t: typer.userId)+_vm._s(_vm.curTyping.length > 1 &&\n\t\t\t\t\t\tindex === _vm.curTyping.length - 2\n\t\t\t\t\t\t\t? 'and'\n\t\t\t\t\t\t\t: index !== _vm.curTyping.length - 1\n\t\t\t\t\t\t\t? ','\n\t\t\t\t\t\t\t: '')+\"\\n\\t\\t\\t\\t\")])])}),_c('i',[_vm._v(\"\"+_vm._s(_vm.curTyping.length === 1 ? 'is' : 'are')+\" typing\\n\\t\\t\\t\\t...\")])],2)]):_vm._e(),_c('Actionbar',{attrs:{\"historyScrolledToBottom\":_vm.historyScrolledToBottom}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"ConversationHistory\",staticClass:\"conversation-history\",attrs:{\"infinite-wrapper\":\"\"}},[_c('infinite-loading',{attrs:{\"direction\":\"top\",\"spinner\":\"waveDots\",\"forceUseInfiniteWrapper\":true,\"distance\":50},on:{\"infinite\":_vm.infiniteHandler}},[_c('span',{attrs:{\"slot\":\"no-results\"},slot:\"no-results\"},[_vm._v(\"Error while loading data :/\")]),_c('span',{attrs:{\"slot\":\"no-more\"},slot:\"no-more\"},[_vm._v(\"You've reached the very top :o\")])]),_c('div',{staticClass:\"sticky-date-separator divider text-center\",attrs:{\"visible\":_vm.showStickyDateSeparator,\"data-content\":_vm.stickyDateSeparator}}),_vm._l((_vm.loadedMessages),function(message,index){return _c('div',{key:'message_' + message.key,class:'message-container ' +\n\t\t\t\t\t(_vm.isNewDay(index) ? 'isnewday ' : '') +\n\t\t\t\t\t(_vm.isFollowUp(index) ? 'isfollowup ' : '') +\n\t\t\t\t\t(!_vm.isFollowUp(index + 1) ? 'isfollowlast ' : '') +\n\t\t\t\t\t(_vm.isOwn(index) ? 'isown ' : ''),attrs:{\"date-added\":message.dateAdded,\"message-key\":message.key}},[(_vm.isNewDay(index))?_c('div',{staticClass:\"date-separator divider text-center\",attrs:{\"data-content\":_vm.dateSeparator(message.dateAdded)}}):_vm._e(),_c('div',{staticClass:\"user-avatar_message\"},[(!_vm.isFollowUp(index + 1))?_c('div',{staticClass:\"user-avatar-action-dropdown\"},[_c('UserAvatar',{staticClass:\"rounded\",attrs:{\"providerName\":message.providerName,\"userId\":message.userId,\"userName\":message.userName}})],1):_vm._e(),_c('Message',{attrs:{\"message\":message,\"isFollowUp\":_vm.isFollowUp(index),\"isOwn\":_vm.isOwn(index)}})],1)])}),_c('br'),_c('button',{staticClass:\"scroll2bottom-btn btn lg action rounded shadow secondary\",attrs:{\"scrolled-to-bottom\":_vm.scrolledToBottom},on:{\"click\":function($event){return _vm.scrollToBottom()}}},[_c('icon',[_vm._v(\"arrow-down\")])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:'message card ' +\n\t\t\t(_vm.dropdownActive ? '' : 'hovershadow ') +\n\t\t\t(_vm.isOwn ? 'secondary2 ' : '') +\n\t\t\t(_vm.bodyRendered ? 'rendered' : ''),on:{\"contextmenu\":function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();_vm.dropdownActive = true}}},[_c('div',{staticClass:\"username_message-action\",on:{\"contextmenu\":function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.stopPropagation();}}},[(!_vm.isFollowUp)?_c('button',{staticClass:\"username text-break btn link sm secondary\"},[_c('span',[_vm._v(_vm._s(_vm.message.userName || _vm.message.userId))]),_c('span',{staticClass:\"invisible-text\"},[_vm._v(\":\")])]):_vm._e(),(_vm.getMessageActions)?_c('Dropdown',{staticClass:\"message-action-dropdown\",attrs:{\"items\":_vm.getMessageActions,\"align\":_vm.isOwn ? 'right' : 'left',\"active\":_vm.dropdownActive},on:{\"update:active\":function($event){_vm.dropdownActive = $event}},scopedSlots:_vm._u([{key:\"activator\",fn:function(scope){return [_c('button',{class:'message-action-btn btn action link sm ' +\n\t\t\t\t\t\t\t(scope.active ? 'active ' : ''),on:{\"click\":function($event){$event.stopPropagation();return scope.on()},\"contextmenu\":function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();$event.stopPropagation();return scope.on()}}},[_c('icon',[_vm._v(\"dots-vertical\")])],1)]}},{key:\"item\",fn:function(scope){return [_c('button',{class:'message-action-dropdown-menu-li btn ' +\n\t\t\t\t\t\t\t(scope.item.classes || 'link'),attrs:{\"disabled\":scope.item.disabled},on:{\"click\":function($event){$event.stopPropagation();return _vm.dropdownAction(scope)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(typeof scope.item.name === 'function'\n\t\t\t\t\t\t\t? scope.item.name()\n\t\t\t\t\t\t\t: scope.item.name)+\"\\n\\t\\t\\t\\t\")])]}}],null,false,4275394175)}):_vm._e()],1),_c('div',{staticClass:\"body text-break\",domProps:{\"innerHTML\":_vm._s(_vm.rmsgbody)},on:{\"contextmenu\":function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.stopPropagation();}}}),_c('div',{staticClass:\"timestamp-container\",on:{\"contextmenu\":function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.stopPropagation();}}},[_c('button',{staticClass:\"timestamp btn link sm\"},[_c('span',{staticClass:\"invisible-text\"},[_vm._v(\"\"+_vm._s(_vm.moment(_vm.message.dateAdded, 'x').format('M/D/Y'))+\"-\")]),_c('span',[_vm._v(_vm._s(_vm.moment(_vm.message.dateAdded, 'x').format('HH:mm:ss')))])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div\r\n\t\t:class=\"\r\n\t\t\t'message card ' +\r\n\t\t\t\t(dropdownActive ? '' : 'hovershadow ') +\r\n\t\t\t\t(isOwn ? 'secondary2 ' : '') +\r\n\t\t\t\t(bodyRendered ? 'rendered' : '')\r\n\t\t\"\r\n\t\t@contextmenu.exact.prevent=\"dropdownActive = true\"\r\n\t>\r\n\t\t<div class=\"username_message-action\" @contextmenu.exact.stop>\r\n\t\t\t<button\r\n\t\t\t\tv-if=\"!isFollowUp\"\r\n\t\t\t\tclass=\"username text-break btn link sm secondary\"\r\n\t\t\t>\r\n\t\t\t\t<span>{{ message.userName || message.userId }}</span>\r\n\t\t\t\t<span class=\"invisible-text\">:&nbsp;</span>\r\n\t\t\t</button>\r\n\t\t\t<Dropdown\r\n\t\t\t\tv-if=\"getMessageActions\"\r\n\t\t\t\tclass=\"message-action-dropdown\"\r\n\t\t\t\t:items=\"getMessageActions\"\r\n\t\t\t\t:align=\"isOwn ? 'right' : 'left'\"\r\n\t\t\t\t@update:active=\"dropdownActive = $event\"\r\n\t\t\t\t:active=\"dropdownActive\"\r\n\t\t\t>\r\n\t\t\t\t<template v-slot:activator=\"scope\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\t:class=\"\r\n\t\t\t\t\t\t\t'message-action-btn btn action link sm ' +\r\n\t\t\t\t\t\t\t\t(scope.active ? 'active ' : '')\r\n\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t@click.stop=\"scope.on()\"\r\n\t\t\t\t\t\t@contextmenu.exact.prevent.stop=\"scope.on()\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<icon>dots-vertical</icon>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-slot:item=\"scope\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\t:class=\"\r\n\t\t\t\t\t\t\t'message-action-dropdown-menu-li btn ' +\r\n\t\t\t\t\t\t\t\t(scope.item.classes || 'link')\r\n\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t@click.stop=\"dropdownAction(scope)\"\r\n\t\t\t\t\t\t:disabled=\"scope.item.disabled\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\ttypeof scope.item.name === 'function'\r\n\t\t\t\t\t\t\t\t? scope.item.name()\r\n\t\t\t\t\t\t\t\t: scope.item.name\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</template>\r\n\t\t\t</Dropdown>\r\n\t\t</div>\r\n\t\t<div\r\n\t\t\tclass=\"body text-break\"\r\n\t\t\tv-html=\"rmsgbody\"\r\n\t\t\t@contextmenu.exact.stop\r\n\t\t></div>\r\n\t\t<div class=\"timestamp-container\" @contextmenu.exact.stop>\r\n\t\t\t<button class=\"timestamp btn link sm\">\r\n\t\t\t\t<span class=\"invisible-text\"\r\n\t\t\t\t\t>&nbsp;{{\r\n\t\t\t\t\t\tmoment(message.dateAdded, 'x').format('M/D/Y')\r\n\t\t\t\t\t}}&nbsp;-&nbsp;</span\r\n\t\t\t\t>\r\n\t\t\t\t<span>{{\r\n\t\t\t\t\tmoment(message.dateAdded, 'x').format('HH:mm:ss')\r\n\t\t\t\t}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Icon from './Icon';\r\nimport Dropdown from './Dropdown';\r\nimport { mapGetters } from 'vuex';\r\nimport moment from 'moment';\r\n\r\nconst escapeHtml = function(text) {\r\n\tlet map = {\r\n\t\t'&': '&amp;',\r\n\t\t'<': '&lt;',\r\n\t\t'>': '&gt;',\r\n\t\t'\"': '&quot;',\r\n\t\t\"'\": '&#039;'\r\n\t};\r\n\r\n\treturn text.replace(/[&<>\"']/g, m => {\r\n\t\treturn map[m];\r\n\t});\r\n};\r\n\r\nexport default {\r\n\tname: 'Message',\r\n\tcomponents: {\r\n\t\tIcon,\r\n\t\tDropdown\r\n\t},\r\n\tprops: ['message', 'isFollowUp', 'isOwn'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trmsgbody: '',\r\n\t\t\tdropdownActive: false,\r\n\t\t\tbodyRendered: false\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.renderMsg();\r\n\t},\r\n\tcomputed: {\r\n\t\tgetMessageActions() {\r\n\t\t\tif (!this.message) return null;\r\n\r\n\t\t\tconst actionsGetter = this.$store.getters[\r\n\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\tthis.message.providerName +\r\n\t\t\t\t\t'/messageActions'\r\n\t\t\t];\r\n\r\n\t\t\tif (!actionsGetter) return null;\r\n\r\n\t\t\tlet actions = actionsGetter(this.message, {\r\n\t\t\t\tcommit: this.$store.commit,\r\n\t\t\t\tdispatch: this.$store.dispatch\r\n\t\t\t});\r\n\t\t\tif (!actions) return null;\r\n\r\n\t\t\t// actions.unshift({\r\n\t\t\t//     name: (this.message.userName || this.message.userId) + ' - ' + this.message.key,\r\n\t\t\t//     disabled: true\r\n\t\t\t// });\r\n\t\t\tactions.push({\r\n\t\t\t\tname: 'Close'\r\n\t\t\t});\r\n\r\n\t\t\treturn actions;\r\n\t\t},\r\n\t\t...mapGetters(['renderMsgBody', 'pluginFunctionalityRenderMsgBody'])\r\n\t},\r\n\tmethods: {\r\n\t\tmoment,\r\n\t\trenderMsg() {\r\n\t\t\tthis.rmsgbody = escapeHtml(decodeURIComponent(this.message.body));\r\n\r\n\t\t\tthis.renderMsgBody(this.message)().then(rmsgbody => {\r\n\t\t\t\tif (this.rmsgbody !== rmsgbody) {\r\n\t\t\t\t\tthis.bodyRendered = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.rmsgbody = rmsgbody;\r\n\t\t\t});\r\n\t\t},\r\n\t\tdropdownAction(scope) {\r\n\t\t\tif (!scope.item.keepOpen) scope.on();\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tif (scope.item.onclick) scope.item.onclick();\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tpluginFunctionalityRenderMsgBody(newval, oldval) {\r\n\t\t\tif (JSON.stringify(newval) !== JSON.stringify(oldval)) {\r\n\t\t\t\tthis.renderMsg();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.invisible-text {\r\n\twidth: 0;\r\n\theight: 0;\r\n\topacity: 0;\r\n\twhite-space: nowrap;\r\n\tdisplay: inline-block;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=029235a4&scoped=true&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&id=029235a4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"029235a4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.useAvatar !== 0)?_c('button',{staticClass:\"user-avatar btn action\",attrs:{\"title\":_vm.userName || _vm.userId},on:{\"click\":function($event){return _vm.$emit('click', $event)},\"contextmenu\":function($event){return _vm.$emit('contextmenu', $event)}}},[(_vm.useAvatar === 1 || _vm.useAvatar === 2)?_c('canvas',{ref:\"avatarCanvas\",staticClass:\"avatar-canvas\",attrs:{\"width\":\"48\",\"height\":\"48\"}}):(_vm.useAvatar === 3)?_c('div',{staticClass:\"avatar-html\",domProps:{\"innerHTML\":_vm._s(_vm.avatarHTML)}}):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<button\r\n\t\tv-if=\"useAvatar !== 0\"\r\n\t\tclass=\"user-avatar btn action\"\r\n\t\t:title=\"userName || userId\"\r\n\t\t@click=\"$emit('click', $event)\"\r\n\t\t@contextmenu=\"$emit('contextmenu', $event)\"\r\n\t>\r\n\t\t<canvas\r\n\t\t\tv-if=\"useAvatar === 1 || useAvatar === 2\"\r\n\t\t\tclass=\"avatar-canvas\"\r\n\t\t\tref=\"avatarCanvas\"\r\n\t\t\twidth=\"48\"\r\n\t\t\theight=\"48\"\r\n\t\t></canvas>\r\n\t\t<div\r\n\t\t\tv-else-if=\"useAvatar === 3\"\r\n\t\t\tclass=\"avatar-html\"\r\n\t\t\tv-html=\"avatarHTML\"\r\n\t\t></div>\r\n\t</button>\r\n</template>\r\n\r\n<script>\r\nimport jdenticon from 'jdenticon';\r\n\r\nexport default {\r\n\tprops: ['providerName', 'userId', 'userName'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuseAvatar: 0,\r\n\t\t\tavatarHTML: null\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tlet gUA = this.$store.getters[\r\n\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\tthis.providerName +\r\n\t\t\t\t'/getUserAvatar'\r\n\t\t];\r\n\t\tif (gUA) {\r\n\t\t\tgUA = gUA(this.userId);\r\n\t\t\tif (gUA === 1) {\r\n\t\t\t\tthis.useAvatar = 1;\r\n\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\tlet ctx = this.$refs.avatarCanvas.getContext('2d');\r\n\t\t\t\t\tjdenticon.drawIcon(ctx, this.userId, 48);\r\n\t\t\t\t});\r\n\t\t\t} else if (\r\n\t\t\t\ttypeof gUA === 'object' &&\r\n\t\t\t\tgUA.hasOwnProperty('length')\r\n\t\t\t) {\r\n\t\t\t\tif (gUA[0] === 2) {\r\n\t\t\t\t\tthis.useAvatar = 2;\r\n\r\n\t\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t\tlet ctx = this.$refs.avatarCanvas.getContext('2d');\r\n\t\t\t\t\t\tctx.drawImage(gUA[1], 48, 48);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (gUA[0] === 3) {\r\n\t\t\t\t\tthis.useAvatar = 3;\r\n\r\n\t\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t\tthis.avatarHTML = gUA[1];\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAvatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAvatar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserAvatar.vue?vue&type=template&id=43ffc541&\"\nimport script from \"./UserAvatar.vue?vue&type=script&lang=js&\"\nexport * from \"./UserAvatar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div\r\n\t\tclass=\"conversation-history\"\r\n\t\tref=\"ConversationHistory\"\r\n\t\tinfinite-wrapper\r\n\t>\r\n\t\t<infinite-loading\r\n\t\t\tdirection=\"top\"\r\n\t\t\t@infinite=\"infiniteHandler\"\r\n\t\t\tspinner=\"waveDots\"\r\n\t\t\t:forceUseInfiniteWrapper=\"true\"\r\n\t\t\t:distance=\"50\"\r\n\t\t>\r\n\t\t\t<span slot=\"no-results\">Error while loading data :/</span>\r\n\t\t\t<span slot=\"no-more\">You've reached the very top :o</span>\r\n\t\t</infinite-loading>\r\n\t\t<div\r\n\t\t\tclass=\"sticky-date-separator divider text-center\"\r\n\t\t\t:visible=\"showStickyDateSeparator\"\r\n\t\t\t:data-content=\"stickyDateSeparator\"\r\n\t\t></div>\r\n\t\t<div\r\n\t\t\tv-for=\"(message, index) in loadedMessages\"\r\n\t\t\t:class=\"\r\n\t\t\t\t'message-container ' +\r\n\t\t\t\t\t(isNewDay(index) ? 'isnewday ' : '') +\r\n\t\t\t\t\t(isFollowUp(index) ? 'isfollowup ' : '') +\r\n\t\t\t\t\t(!isFollowUp(index + 1) ? 'isfollowlast ' : '') +\r\n\t\t\t\t\t(isOwn(index) ? 'isown ' : '')\r\n\t\t\t\"\r\n\t\t\t:key=\"'message_' + message.key\"\r\n\t\t\t:date-added=\"message.dateAdded\"\r\n\t\t\t:message-key=\"message.key\"\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tv-if=\"isNewDay(index)\"\r\n\t\t\t\tclass=\"date-separator divider text-center\"\r\n\t\t\t\t:data-content=\"dateSeparator(message.dateAdded)\"\r\n\t\t\t></div>\r\n\t\t\t<div class=\"user-avatar_message\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-if=\"!isFollowUp(index + 1)\"\r\n\t\t\t\t\tclass=\"user-avatar-action-dropdown\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<!-- <Dropdown v-if=\"!isFollowUp(index)\" class=\"user-avatar-action-dropdown\" :items=\"['a', 'b', 'c']\" :align=\"isOwn ? 'right' : 'left'\" @update:active=\"dropdownActive = $event\" :active=\"dropdownActive\">\r\n                    <template v-slot:activator=\"scope\"> -->\r\n\t\t\t\t\t<UserAvatar\r\n\t\t\t\t\t\t:providerName=\"message.providerName\"\r\n\t\t\t\t\t\t:userId=\"message.userId\"\r\n\t\t\t\t\t\t:userName=\"message.userName\"\r\n\t\t\t\t\t\tclass=\"rounded\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<!-- </template>\r\n                    <template v-slot:item=\"scope\">\r\n                        <button class=\"user-avatar-action-dropdown-menu-li btn link\" @click.stop=\"scope.on()\">{{ scope.item }}</button>\r\n                    </template>\r\n                    </Dropdown> -->\r\n\t\t\t\t</div>\r\n\t\t\t\t<Message\r\n\t\t\t\t\t:message=\"message\"\r\n\t\t\t\t\t:isFollowUp=\"isFollowUp(index)\"\r\n\t\t\t\t\t:isOwn=\"isOwn(index)\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<br />\r\n\t\t<button\r\n\t\t\tclass=\"scroll2bottom-btn btn lg action rounded shadow secondary\"\r\n\t\t\t@click=\"scrollToBottom()\"\r\n\t\t\t:scrolled-to-bottom=\"scrolledToBottom\"\r\n\t\t>\r\n\t\t\t<icon>arrow-down</icon>\r\n\t\t</button>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Icon from './Icon';\r\n// import Dropdown from './Dropdown';\r\nimport Message from './Message.vue';\r\nimport UserAvatar from './UserAvatar.vue';\r\nimport InfiniteLoading from 'vue-infinite-loading';\r\nimport moment from 'moment';\r\nimport { mapGetters } from 'vuex';\r\n\r\nlet ticking = false;\r\nlet scrollTimeout = null;\r\n\r\nexport default {\r\n\tname: 'ConversationHistory',\r\n\tcomponents: {\r\n\t\tIcon,\r\n\t\t// Dropdown,\r\n\t\tMessage,\r\n\t\tUserAvatar,\r\n\t\tInfiniteLoading\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tloadedMsgNr: 0,\r\n\t\t\tloadedMessages: [],\r\n\t\t\tstickyDateSeparator: '',\r\n\t\t\tshowStickyDateSeparator: false,\r\n\t\t\tscrolledToBottom: true\r\n\t\t\t// dropdownActive: false\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.loadMsgs(25, () => {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.$refs.ConversationHistory.scrollTop = this.$refs.ConversationHistory.scrollHeight;\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.$el.addEventListener('scroll', () => {\r\n\t\t\tthis.scrollUpdater();\r\n\t\t});\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.scrollUpdater();\r\n\t\t});\r\n\t},\r\n\tcomputed: {\r\n\t\tcurdate() {\r\n\t\t\treturn moment().format('MMMM Do, YYYY');\r\n\t\t},\r\n\t\t...mapGetters(['curConversation']),\r\n\t\t...mapGetters({\r\n\t\t\tgetCurConversationMessages:\r\n\t\t\t\t'ConversationProviders/getCurConversationMessages',\r\n\t\t\tgetCurConversationUser:\r\n\t\t\t\t'ConversationProviders/getCurConversationUser'\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\tinfiniteHandler($state) {\r\n\t\t\tthis.$store\r\n\t\t\t\t.dispatch(\r\n\t\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\t\tthis.curConversation.providerName +\r\n\t\t\t\t\t\t'/fetchMessages',\r\n\t\t\t\t\tthis.curConversation.conversationId\r\n\t\t\t\t)\r\n\t\t\t\t.then(({ conversationId, totalPages, page, slice }) => {\r\n\t\t\t\t\tconsole.debug(\r\n\t\t\t\t\t\t'fetchMessages',\r\n\t\t\t\t\t\tconversationId,\r\n\t\t\t\t\t\ttotalPages,\r\n\t\t\t\t\t\tpage,\r\n\t\t\t\t\t\tslice\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\ttypeof slice === 'object' &&\r\n\t\t\t\t\t\tslice.hasOwnProperty('length') &&\r\n\t\t\t\t\t\tslice.length > 0\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.loadedMessages.unshift(...slice);\r\n\r\n\t\t\t\t\t\tif (page === 0) {\r\n\t\t\t\t\t\t\tconsole.debug('infiniteHandler: complete');\r\n\t\t\t\t\t\t\t$state.complete();\r\n\t\t\t\t\t\t} else if (page > 0) {\r\n\t\t\t\t\t\t\tconsole.debug('infiniteHandler: loaded');\r\n\t\t\t\t\t\t\t$state.loaded();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.loadMsgs(10, (err, status) => {\r\n\t\t\t\t\t\t\tconsole.debug('loadMsgs', err, status);\r\n\r\n\t\t\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\t\t\tconsole.debug('infiniteHandler: error');\r\n\t\t\t\t\t\t\t\t$state.error();\r\n\t\t\t\t\t\t\t} else if (status === 0 /* || page >= 0*/) {\r\n\t\t\t\t\t\t\t\tconsole.debug('infiniteHandler: loaded');\r\n\t\t\t\t\t\t\t\t$state.loaded();\r\n\t\t\t\t\t\t\t} else if (status === 1) {\r\n\t\t\t\t\t\t\t\tconsole.debug('infiniteHandler: complete');\r\n\t\t\t\t\t\t\t\t$state.complete();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.debug('infiniteHandler: error 2');\r\n\t\t\t\t\t\t\t\t$state.error();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tconsole.debug('infiniteHandler: error');\r\n\t\t\t\t\t$state.error();\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tscrollUpdater() {\r\n\t\t\tlet convhist = this.$el;\r\n\t\t\tlet last_known_scroll_position = convhist.scrollTop;\r\n\r\n\t\t\tif (scrollTimeout) {\r\n\t\t\t\tclearTimeout(scrollTimeout);\r\n\t\t\t}\r\n\r\n\t\t\tif (!ticking) {\r\n\t\t\t\twindow.requestAnimationFrame(() => {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tlast_known_scroll_position >=\r\n\t\t\t\t\t\tconvhist.scrollHeight - convhist.clientHeight - 128\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.scrolledToBottom = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.scrolledToBottom = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet lowerD = 0;\r\n\r\n\t\t\t\t\tlet newdayMessageContainers = convhist.getElementsByClassName(\r\n\t\t\t\t\t\t'message-container isnewday'\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tthis.stickyDateSeparator = '';\r\n\t\t\t\t\tthis.showStickyDateSeparator = true;\r\n\r\n\t\t\t\t\tfor (\r\n\t\t\t\t\t\tlet elI = 0;\r\n\t\t\t\t\t\telI < newdayMessageContainers.length;\r\n\t\t\t\t\t\telI++\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tlet el = newdayMessageContainers[elI];\r\n\r\n\t\t\t\t\t\tlet distance =\r\n\t\t\t\t\t\t\tel.offsetTop - 34 - last_known_scroll_position;\r\n\t\t\t\t\t\tlet first = last_known_scroll_position >= distance;\r\n\t\t\t\t\t\tlet second = distance >= lowerD;\r\n\t\t\t\t\t\tlet third = distance <= 0;\r\n\t\t\t\t\t\tif (first && (second || lowerD === 0) && third) {\r\n\t\t\t\t\t\t\tlowerD = distance;\r\n\r\n\t\t\t\t\t\t\tthis.stickyDateSeparator = this.dateSeparator(\r\n\t\t\t\t\t\t\t\tel.getAttribute('date-added')\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tticking = false;\r\n\r\n\t\t\t\t\tscrollTimeout = setTimeout(() => {\r\n\t\t\t\t\t\tthis.stickyDateSeparator = '';\r\n\t\t\t\t\t\tthis.showStickyDateSeparator = false;\r\n\t\t\t\t\t}, 2500);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tticking = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tloadMsgs(maxTries = 5, cb) {\r\n\t\t\tlet curConvMsgs = this.getCurConversationMessages;\r\n\r\n\t\t\tif (this.loadedMsgNr < curConvMsgs.length) {\r\n\t\t\t\tlet curTries = 0;\r\n\r\n\t\t\t\tlet lmsgs = [];\r\n\r\n\t\t\t\twhile (\r\n\t\t\t\t\tthis.loadedMsgNr < curConvMsgs.length &&\r\n\t\t\t\t\tcurTries < maxTries\r\n\t\t\t\t) {\r\n\t\t\t\t\tlet newConvMsg = curConvMsgs[this.loadedMsgNr];\r\n\t\t\t\t\tlmsgs.unshift(newConvMsg);\r\n\t\t\t\t\tcurTries++;\r\n\t\t\t\t\tthis.loadedMsgNr++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.loadedMessages = this.loadedMessages.filter(msg1 => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tcurConvMsgs.findIndex(msg2 => {\r\n\t\t\t\t\t\t\treturn msg1.key === msg2.key;\r\n\t\t\t\t\t\t}) !== -1\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.loadedMessages.unshift(...lmsgs);\r\n\r\n\t\t\t\tconsole.debug(\r\n\t\t\t\t\t'loaded',\r\n\t\t\t\t\tcurTries,\r\n\t\t\t\t\t'messages (total loaded',\r\n\t\t\t\t\tthis.loadedMsgNr,\r\n\t\t\t\t\t'/',\r\n\t\t\t\t\tcurConvMsgs.length,\r\n\t\t\t\t\t')',\r\n\t\t\t\t\tlmsgs\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (this.loadedMsgNr >= curConvMsgs.length) {\r\n\t\t\t\t\ttypeof cb === 'function' && cb(null, 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypeof cb === 'function' && cb(null, 0, lmsgs);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\ttypeof cb === 'function' && cb(null, 1);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdateSeparator(ts) {\r\n\t\t\treturn moment(ts, 'x').format('MMMM Do, YYYY') === this.curdate\r\n\t\t\t\t? 'Today'\r\n\t\t\t\t: moment(this.curdate, 'MMMM Do, YYYY')\r\n\t\t\t\t\t\t.subtract(1, 'd')\r\n\t\t\t\t\t\t.format('MMMM Do, YYYY') ===\r\n\t\t\t\t  moment(ts, 'x').format('MMMM Do, YYYY')\r\n\t\t\t\t? 'Yesterday'\r\n\t\t\t\t: moment(ts, 'x').format('MMMM Do, YYYY');\r\n\t\t},\r\n\t\tisFollowUp(mI) {\r\n\t\t\tif (mI <= 0 || mI > this.loadedMessages.length - 1) return false;\r\n\r\n\t\t\tlet lmsg = this.loadedMessages[mI - 1];\r\n\t\t\tlet msg = this.loadedMessages[mI];\r\n\r\n\t\t\treturn (\r\n\t\t\t\tmsg.userId === lmsg.userId &&\r\n\t\t\t\tmoment(lmsg.dateAdded, 'x')\r\n\t\t\t\t\t.add(15, 'minutes')\r\n\t\t\t\t\t.isSameOrAfter(moment(msg.dateAdded, 'x'))\r\n\t\t\t);\r\n\t\t},\r\n\t\tisNewDay(mI) {\r\n\t\t\tif (mI <= 0) return true;\r\n\r\n\t\t\tlet lmsg = this.loadedMessages[mI - 1];\r\n\t\t\tlet msg = this.loadedMessages[mI];\r\n\r\n\t\t\treturn !moment(lmsg.dateAdded, 'x').isSame(\r\n\t\t\t\tmoment(msg.dateAdded, 'x'),\r\n\t\t\t\t'day'\r\n\t\t\t);\r\n\t\t},\r\n\t\tisOwn(mI) {\r\n\t\t\tlet msg = this.loadedMessages[mI];\r\n\r\n\t\t\treturn msg.userId == this.getCurConversationUser.userId;\r\n\t\t},\r\n\t\tscrollToBottom() {\r\n\t\t\tlet convhist = this.$el;\r\n\t\t\tconvhist.scroll({\r\n\t\t\t\ttop: convhist.scrollHeight,\r\n\t\t\t\tbehavior: true ? 'smooth' : 'instant'\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tgetCurConversationMessages(curConvMsgs, oldConvMsgs) {\r\n\t\t\t// console.debug(\r\n\t\t\t//     'getCurConversationMessages',\r\n\t\t\t//     oldConvMsgs,\r\n\t\t\t//     curConvMsgs,\r\n\t\t\t//     oldConvMsgs.length > 0 && oldConvMsgs[0].key,\r\n\t\t\t//     curConvMsgs.length > 0 && curConvMsgs[0].key\r\n\t\t\t// );\r\n\r\n\t\t\tif (\r\n\t\t\t\toldConvMsgs.length > 0 &&\r\n\t\t\t\tcurConvMsgs.length > 0 &&\r\n\t\t\t\tcurConvMsgs[0].key === oldConvMsgs[0].key\r\n\t\t\t)\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tlet convhist = this.$el;\r\n\t\t\tlet convhist_scrollTop = convhist.scrollTop;\r\n\t\t\tlet convhist_scrollHeight = convhist.scrollHeight;\r\n\t\t\tlet convhist_clientHeight = convhist.clientHeight;\r\n\r\n\t\t\tlet maxTries = curConvMsgs.length - oldConvMsgs.length;\r\n\t\t\tlet curTries = 0;\r\n\r\n\t\t\tlet lmsgs = [];\r\n\r\n\t\t\twhile (curTries < maxTries) {\r\n\t\t\t\tlet newConvMsg = curConvMsgs[curTries];\r\n\t\t\t\tlmsgs.unshift(newConvMsg);\r\n\t\t\t\tcurTries++;\r\n\t\t\t\tthis.loadedMsgNr++;\r\n\t\t\t}\r\n\r\n\t\t\tthis.loadedMessages = this.loadedMessages.filter(msg1 => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tcurConvMsgs.findIndex(msg2 => {\r\n\t\t\t\t\t\treturn msg1.key === msg2.key;\r\n\t\t\t\t\t}) !== -1\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\tthis.loadedMessages.push(...lmsgs);\r\n\r\n\t\t\tconsole.debug(\r\n\t\t\t\t'n-loaded',\r\n\t\t\t\tcurTries,\r\n\t\t\t\t'messages (total loaded',\r\n\t\t\t\tthis.loadedMsgNr,\r\n\t\t\t\t'/',\r\n\t\t\t\tcurConvMsgs.length,\r\n\t\t\t\t')',\r\n\t\t\t\tlmsgs\r\n\t\t\t);\r\n\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tif (\r\n\t\t\t\t\tconvhist_scrollTop >=\r\n\t\t\t\t\tconvhist_scrollHeight - convhist_clientHeight - 128\r\n\t\t\t\t) {\r\n\t\t\t\t\tconvhist.scroll({\r\n\t\t\t\t\t\ttop: convhist.scrollHeight,\r\n\t\t\t\t\t\tbehavior: true ? 'smooth' : 'instant'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tscrolledToBottom(newval) {\r\n\t\t\tthis.$emit('update:scrolledToBottom', newval);\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationHistory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationHistory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConversationHistory.vue?vue&type=template&id=1bde0184&\"\nimport script from \"./ConversationHistory.vue?vue&type=script&lang=js&\"\nexport * from \"./ConversationHistory.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"actionbar card\",style:(_vm.resourceExtsOpen\n\t\t\t? 'height: 100%; '\n\t\t\t: _vm.inputExtsOpen\n\t\t\t? 'height: auto; '\n\t\t\t: 'height: ' + _vm.actionbarInnerHeight + 'px; '),attrs:{\"exts-open\":_vm.resourceExtsOpen,\"history-scrolled-to-bottom\":_vm.historyScrolledToBottom}},[_c('transition',{attrs:{\"name\":\"exts-open\"}},[_c('div',{class:'exts-container ' +\n\t\t\t\t\t(_vm.resourceExtsOpen || _vm.inputExtsOpen ? 'hardshadow' : ''),style:(_vm.resourceExtsOpen\n\t\t\t\t\t? 'height: calc(100% - ' +\n\t\t\t\t\t  _vm.actionbarInnerHeight +\n\t\t\t\t\t  'px); '\n\t\t\t\t\t: _vm.inputExtsOpen\n\t\t\t\t\t? 'height: auto; '\n\t\t\t\t\t: 'height: 0; ')},[_c('ResourceExtUI',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.resourceExtsOpen),expression:\"resourceExtsOpen\"}],on:{\"update:addSnippet\":function($event){return _vm.updateAddSnippet($event)}}}),_c('InputExtUI',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.inputExtsOpen),expression:\"inputExtsOpen\"}],staticClass:\"shadow\",attrs:{\"msgBody\":_vm.msgBodyC,\"selectionStart\":_vm.selectionStart,\"selectionEnd\":_vm.selectionEnd,\"selection\":_vm.selection},on:{\"update:msgBody\":function($event){return _vm.updateMsgBody($event)},\"update:addSnippet\":function($event){return _vm.updateAddSnippet($event)},\"update:active\":function($event){return _vm.updateInputExtsOpen($event)}}})],1)]),_c('div',{ref:\"actionbarInner\",staticClass:\"actionbar-inner input-group\",style:('height: ' + _vm.actionbarInnerHeight + 'px; ')},[_c('button',{staticClass:\"toggle-resource-exts-btn btn action lg shadow secondary\",on:{\"click\":function($event){return _vm.toggleResourceExts()}}},[_c('icon',[_vm._v(\"dots-vertical\")])],1),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.msgBody),expression:\"msgBody\"}],ref:\"msginput\",staticClass:\"msginput input\",attrs:{\"rows\":_vm.rows,\"max-rows\":_vm.maxRows,\"placeholder\":\"Write a message\"},domProps:{\"value\":(_vm.msgBody)},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();return _vm.send($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.msgBody=$event.target.value}}}),_c('button',_vm._b({staticClass:\"sendbtn btn action lg shadow primary\",on:{\"click\":function($event){return _vm.send()}}},'button',_vm.sendBtnBinds,false),[_c('icon',[_vm._v(\"send\")])],1),_c('span',{ref:\"msgBodyHeightTest\",staticClass:\"msginput input\",staticStyle:{\"visibility\":\"hidden\",\"position\":\"absolute\",\"pointer-events\":\"none\",\"width\":\"calc(100% - 6.4rem - .8rem + 2px)\",\"left\":\"3.2rem\",\"overflow\":\"hidden\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"resource-ext-ui\"},_vm._l((_vm.resourceExtComponents()),function(c){return _c(c.component,{key:c.pluginName + '-' + c.componentName,tag:\"component\",on:{\"update:addSnippet\":function($event){return _vm.updateAddSnippet($event)}}})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"resource-ext-ui\">\r\n\t\t<component\r\n\t\t\tv-for=\"c in resourceExtComponents()\"\r\n\t\t\t:is=\"c.component\"\r\n\t\t\t:key=\"c.pluginName + '-' + c.componentName\"\r\n\t\t\t@update:addSnippet=\"updateAddSnippet($event)\"\r\n\t\t/>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'ResourceExtUI',\r\n\tcomputed: {\r\n\t\t...mapGetters(['resourceExtComponents'])\r\n\t},\r\n\tmethods: {\r\n\t\tupdateAddSnippet(snippet) {\r\n\t\t\tthis.$emit('update:addSnippet', snippet);\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceExtUI.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceExtUI.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResourceExtUI.vue?vue&type=template&id=bf5abfa8&\"\nimport script from \"./ResourceExtUI.vue?vue&type=script&lang=js&\"\nexport * from \"./ResourceExtUI.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-ext-ui\"},_vm._l((_vm.extendedInputExtComponents),function(c,cI){return _c(c.component,{key:c.pluginName + '-' + c.componentName,tag:\"component\",attrs:{\"msgBody\":_vm.msgBodyC,\"selectionStart\":_vm.selectionStart,\"selectionEnd\":_vm.selectionEnd,\"selection\":_vm.selection},on:{\"update:msgBody\":function($event){return _vm.updateMsgBody($event)},\"update:addSnippet\":function($event){return _vm.updateAddSnippet($event)},\"update:active\":function($event){return _vm.updateActive(cI, $event)}}})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"input-ext-ui\">\r\n\t\t<component\r\n\t\t\tv-for=\"(c, cI) in extendedInputExtComponents\"\r\n\t\t\t:is=\"c.component\"\r\n\t\t\t:key=\"c.pluginName + '-' + c.componentName\"\r\n\t\t\t:msgBody=\"msgBodyC\"\r\n\t\t\t:selectionStart=\"selectionStart\"\r\n\t\t\t:selectionEnd=\"selectionEnd\"\r\n\t\t\t:selection=\"selection\"\r\n\t\t\t@update:msgBody=\"updateMsgBody($event)\"\r\n\t\t\t@update:addSnippet=\"updateAddSnippet($event)\"\r\n\t\t\t@update:active=\"updateActive(cI, $event)\"\r\n\t\t/>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'InputExtUI',\r\n\tprops: {\r\n\t\tmsgBody: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\tselectionStart: Number,\r\n\t\tselectionEnd: Number,\r\n\t\tselection: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tactiveComponents: []\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tmsgBodyC() {\r\n\t\t\treturn this.msgBody;\r\n\t\t},\r\n\t\textendedInputExtComponents() {\r\n\t\t\tlet rtrn = this.inputExtComponents();\r\n\r\n\t\t\tthis.activeComponents = [];\r\n\r\n\t\t\tfor (let cI = 0; cI < rtrn.length; cI++) {\r\n\t\t\t\tthis.activeComponents.push(false);\r\n\t\t\t}\r\n\r\n\t\t\treturn rtrn;\r\n\t\t},\r\n\t\tanyActiveComponent() {\r\n\t\t\tlet rtrn = false;\r\n\r\n\t\t\tfor (let cI = 0; cI < this.activeComponents.length; cI++) {\r\n\t\t\t\tif (this.activeComponents[cI]) {\r\n\t\t\t\t\trtrn = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn rtrn;\r\n\t\t},\r\n\t\t...mapGetters(['inputExtComponents'])\r\n\t},\r\n\tmethods: {\r\n\t\tupdateMsgBody(nMsgBody) {\r\n\t\t\tthis.$emit('update:msgBody', nMsgBody);\r\n\t\t},\r\n\t\tupdateAddSnippet(snippet) {\r\n\t\t\tthis.$emit('update:addSnippet', snippet);\r\n\t\t},\r\n\t\tupdateActive(cI, to = false) {\r\n\t\t\tthis.activeComponents[cI] = !!to;\r\n\t\t\tthis.$emit('update:active', to ? true : this.anyActiveComponent);\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputExtUI.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputExtUI.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InputExtUI.vue?vue&type=template&id=7755bc21&\"\nimport script from \"./InputExtUI.vue?vue&type=script&lang=js&\"\nexport * from \"./InputExtUI.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div\r\n\t\tclass=\"actionbar card\"\r\n\t\t:exts-open=\"resourceExtsOpen\"\r\n\t\t:history-scrolled-to-bottom=\"historyScrolledToBottom\"\r\n\t\t:style=\"\r\n\t\t\tresourceExtsOpen\r\n\t\t\t\t? 'height: 100%; '\r\n\t\t\t\t: inputExtsOpen\r\n\t\t\t\t? 'height: auto; '\r\n\t\t\t\t: 'height: ' + actionbarInnerHeight + 'px; '\r\n\t\t\"\r\n\t>\r\n\t\t<transition name=\"exts-open\">\r\n\t\t\t<div\r\n\t\t\t\t:class=\"\r\n\t\t\t\t\t'exts-container ' +\r\n\t\t\t\t\t\t(resourceExtsOpen || inputExtsOpen ? 'hardshadow' : '')\r\n\t\t\t\t\"\r\n\t\t\t\t:style=\"\r\n\t\t\t\t\tresourceExtsOpen\r\n\t\t\t\t\t\t? 'height: calc(100% - ' +\r\n\t\t\t\t\t\t  actionbarInnerHeight +\r\n\t\t\t\t\t\t  'px); '\r\n\t\t\t\t\t\t: inputExtsOpen\r\n\t\t\t\t\t\t? 'height: auto; '\r\n\t\t\t\t\t\t: 'height: 0; '\r\n\t\t\t\t\"\r\n\t\t\t>\r\n\t\t\t\t<ResourceExtUI\r\n\t\t\t\t\tv-show=\"resourceExtsOpen\"\r\n\t\t\t\t\t@update:addSnippet=\"updateAddSnippet($event)\"\r\n\t\t\t\t/>\r\n\t\t\t\t<InputExtUI\r\n\t\t\t\t\tv-show=\"inputExtsOpen\"\r\n\t\t\t\t\t:msgBody=\"msgBodyC\"\r\n\t\t\t\t\t:selectionStart=\"selectionStart\"\r\n\t\t\t\t\t:selectionEnd=\"selectionEnd\"\r\n\t\t\t\t\t:selection=\"selection\"\r\n\t\t\t\t\t@update:msgBody=\"updateMsgBody($event)\"\r\n\t\t\t\t\t@update:addSnippet=\"updateAddSnippet($event)\"\r\n\t\t\t\t\t@update:active=\"updateInputExtsOpen($event)\"\r\n\t\t\t\t\tclass=\"shadow\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</transition>\r\n\t\t<div\r\n\t\t\tclass=\"actionbar-inner input-group\"\r\n\t\t\tref=\"actionbarInner\"\r\n\t\t\t:style=\"'height: ' + actionbarInnerHeight + 'px; '\"\r\n\t\t>\r\n\t\t\t<button\r\n\t\t\t\t@click=\"toggleResourceExts()\"\r\n\t\t\t\tclass=\"toggle-resource-exts-btn btn action lg shadow secondary\"\r\n\t\t\t>\r\n\t\t\t\t<icon>dots-vertical</icon>\r\n\t\t\t</button>\r\n\t\t\t<textarea\r\n\t\t\t\tv-model=\"msgBody\"\r\n\t\t\t\t@keypress.enter.exact.prevent=\"send\"\r\n\t\t\t\t:rows=\"rows\"\r\n\t\t\t\t:max-rows=\"maxRows\"\r\n\t\t\t\tclass=\"msginput input\"\r\n\t\t\t\tref=\"msginput\"\r\n\t\t\t\tplaceholder=\"Write a message\"\r\n\t\t\t></textarea>\r\n\t\t\t<button\r\n\t\t\t\t@click=\"send()\"\r\n\t\t\t\tclass=\"sendbtn btn action lg shadow primary\"\r\n\t\t\t\tv-bind=\"sendBtnBinds\"\r\n\t\t\t>\r\n\t\t\t\t<icon>send</icon>\r\n\t\t\t</button>\r\n\t\t\t<span\r\n\t\t\t\tref=\"msgBodyHeightTest\"\r\n\t\t\t\tstyle=\"visibility: hidden; position: absolute; pointer-events: none; width: calc(100% - 6.4rem - .8rem + 2px); left: 3.2rem; overflow: hidden;\"\r\n\t\t\t\tclass=\"msginput input\"\r\n\t\t\t></span>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Icon from './Icon';\r\nimport ResourceExtUI from './ResourceExtUI';\r\nimport InputExtUI from './InputExtUI';\r\nimport { mapGetters, mapActions } from 'vuex';\r\n\r\nfunction clamp(val, min, max) {\r\n\treturn val > max ? max : val < min ? min : val;\r\n}\r\n\r\nlet ticking = false;\r\n\r\nconst ticker = dis => {\r\n\tif (ticking) {\r\n\t\twindow.requestAnimationFrame(() => {\r\n\t\t\tdis.selectionStart =\r\n\t\t\t\tdis.$refs.msginput.selectionStart >= 0\r\n\t\t\t\t\t? dis.$refs.msginput.selectionStart\r\n\t\t\t\t\t: dis.msgBody.length;\r\n\t\t\tdis.selectionEnd =\r\n\t\t\t\tdis.$refs.msginput.selectionEnd >= 0\r\n\t\t\t\t\t? dis.$refs.msginput.selectionEnd\r\n\t\t\t\t\t: dis.msgBody.length;\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tticker(dis);\r\n\t\t\t}, 400);\r\n\t\t});\r\n\t}\r\n};\r\n\r\nlet typingTimeout = null;\r\n\r\nexport default {\r\n\tname: 'Actionbar',\r\n\tcomponents: {\r\n\t\tIcon,\r\n\t\tResourceExtUI,\r\n\t\tInputExtUI\r\n\t},\r\n\tprops: ['historyScrolledToBottom'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tselectionStart: 0,\r\n\t\t\tselectionEnd: 0,\r\n\t\t\tmsgBody: '',\r\n\t\t\trows: 1,\r\n\t\t\tmaxRows: 10,\r\n\t\t\tresourceExtsOpen: false,\r\n\t\t\tinputExtsOpen: false,\r\n\t\t\tactionbarInnerHeight: 0\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.selectionStart =\r\n\t\t\t\tthis.$refs.msginput.selectionStart >= 0\r\n\t\t\t\t\t? this.$refs.msginput.selectionStart\r\n\t\t\t\t\t: this.msgBody.length;\r\n\t\t\tthis.selectionEnd =\r\n\t\t\t\tthis.$refs.msginput.selectionEnd >= 0\r\n\t\t\t\t\t? this.$refs.msginput.selectionEnd\r\n\t\t\t\t\t: this.msgBody.length;\r\n\t\t\tthis.$refs.msginput.addEventListener('focus', e => {\r\n\t\t\t\tif (!ticking) {\r\n\t\t\t\t\tticking = true;\r\n\t\t\t\t\tticker(this);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.$refs.msginput.addEventListener('blur', e => {\r\n\t\t\t\tthis.selectionStart =\r\n\t\t\t\t\te.target.selectionStart >= 0\r\n\t\t\t\t\t\t? e.target.selectionStart\r\n\t\t\t\t\t\t: this.msgBody.length;\r\n\t\t\t\tthis.selectionEnd =\r\n\t\t\t\t\te.target.selectionEnd >= 0\r\n\t\t\t\t\t\t? e.target.selectionEnd\r\n\t\t\t\t\t\t: this.msgBody.length;\r\n\t\t\t\tticking = false;\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\tcomputed: {\r\n\t\tmsgBodyC() {\r\n\t\t\treturn this.msgBody;\r\n\t\t},\r\n\t\tselection() {\r\n\t\t\tlet selectionStart = this.selectionStart;\r\n\t\t\tlet selectionEnd = this.selectionEnd;\r\n\r\n\t\t\tif (selectionStart > selectionEnd) {\r\n\t\t\t\tlet oldSelectionEnd = selectionEnd;\r\n\t\t\t\tselectionEnd = selectionStart;\r\n\t\t\t\tselectionStart = oldSelectionEnd;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.msgBody.substring(selectionStart, selectionEnd);\r\n\t\t},\r\n\t\tsendBtnBinds() {\r\n\t\t\tlet binds = {};\r\n\t\t\tif (!this.validateMessage(this.msgBody)) {\r\n\t\t\t\tbinds.disabled = 'true';\r\n\t\t\t}\r\n\t\t\treturn binds;\r\n\t\t},\r\n\t\t...mapGetters({\r\n\t\t\tvalidateMessage: 'ConversationProviders/validateMessage'\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\tupdateMsgBody(nMsgBody) {\r\n\t\t\tthis.msgBody = nMsgBody;\r\n\t\t},\r\n\t\tupdateAddSnippet(snippet) {\r\n\t\t\tlet selectionStart = this.selectionStart;\r\n\t\t\tlet selectionEnd = this.selectionEnd;\r\n\r\n\t\t\tif (selectionStart > selectionEnd) {\r\n\t\t\t\tlet oldSelectionEnd = selectionEnd;\r\n\t\t\t\tselectionEnd = selectionStart;\r\n\t\t\t\tselectionStart = oldSelectionEnd;\r\n\t\t\t}\r\n\r\n\t\t\tlet selectedStart = this.msgBody.substring(0, selectionStart);\r\n\t\t\tlet selectedEnd = this.msgBody.substring(\r\n\t\t\t\tselectionEnd,\r\n\t\t\t\tthis.msgBody.length\r\n\t\t\t);\r\n\r\n\t\t\tthis.msgBody = selectedStart + snippet + selectedEnd;\r\n\r\n\t\t\tthis.$refs.msginput.selectionStart = selectedStart + snippet.length;\r\n\t\t\tthis.$refs.msginput.selectionEnd = selectedStart + snippet.length;\r\n\t\t\tthis.selectionStart = selectedStart + snippet.length;\r\n\t\t\tthis.selectionEnd = selectedStart + snippet.length;\r\n\t\t},\r\n\t\tupdateInputExtsOpen(to = false) {\r\n\t\t\tthis.inputExtsOpen = to;\r\n\t\t},\r\n\t\tsend() {\r\n\t\t\tthis.sendMessage2Cur(this.msgBody)\r\n\t\t\t\t.then(messageData => {\r\n\t\t\t\t\tif (messageData) {\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\tthis.msgBody = '';\r\n\t\t\t\t\t\t\tthis.updateTyping(false);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\ttoggleResourceExts(to = !this.resourceExtsOpen) {\r\n\t\t\tthis.resourceExtsOpen = !!to;\r\n\t\t},\r\n\t\ttoggleInputExts(to = !this.inputExtsOpen) {\r\n\t\t\tthis.inputExtsOpen = !!to;\r\n\t\t},\r\n\t\tsetActionbarInnerHeight() {\r\n\t\t\tlet rows = this.msgBody.split('\\n').length;\r\n\t\t\tthis.rows = clamp(rows, 1, this.maxRows);\r\n\r\n\t\t\tlet preparedMsgBody = document.createElement('span');\r\n\t\t\tlet preparedMsgBodyArr = this.msgBody.split('\\n');\r\n\t\t\tfor (let i = 0; i < preparedMsgBodyArr.length; i++) {\r\n\t\t\t\tlet p = preparedMsgBodyArr[i];\r\n\t\t\t\tlet c = document.createElement('span');\r\n\t\t\t\tc.innerText = p;\r\n\t\t\t\tpreparedMsgBody.appendChild(c);\r\n\t\t\t\tpreparedMsgBody.appendChild(document.createElement('br'));\r\n\t\t\t}\r\n\t\t\tthis.$refs.msgBodyHeightTest.innerHTML = '';\r\n\t\t\tthis.$refs.msgBodyHeightTest.appendChild(preparedMsgBody);\r\n\r\n\t\t\t// this.$refs.msgBodyHeightTest.innerHTML = this.msgBody.replace(/\\n/gm, '<br />');\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tlet msgBodyHeight = this.$refs.msgBodyHeightTest.offsetHeight;\r\n\t\t\t\tthis.$refs.msginput.style.height =\r\n\t\t\t\t\t'calc(' + msgBodyHeight + 'px - 2 * .225rem)';\r\n\t\t\t\tthis.actionbarInnerHeight = msgBodyHeight;\r\n\t\t\t});\r\n\t\t},\r\n\t\t...mapActions({\r\n\t\t\tsendMessage2Cur: 'ConversationProviders/sendMessage2Cur',\r\n\t\t\tupdateTyping: 'ConversationProviders/updateTyping'\r\n\t\t})\r\n\t},\r\n\twatch: {\r\n\t\tmsgBody() {\r\n\t\t\tthis.setActionbarInnerHeight();\r\n\r\n\t\t\tthis.toggleInputExts(\r\n\t\t\t\tthis.msgBody.trim() && this.$children[1].anyActiveComponent\r\n\t\t\t);\r\n\r\n\t\t\tif (this.msgBody.trim()) {\r\n\t\t\t\tclearTimeout(typingTimeout);\r\n\t\t\t\tthis.updateTyping(true);\r\n\t\t\t}\r\n\r\n\t\t\ttypingTimeout = setTimeout(() => {\r\n\t\t\t\tthis.updateTyping(false);\r\n\t\t\t}, 2500);\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Actionbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Actionbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Actionbar.vue?vue&type=template&id=3aa00b06&\"\nimport script from \"./Actionbar.vue?vue&type=script&lang=js&\"\nexport * from \"./Actionbar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div class=\"conversation\">\r\n\t\t<ConversationHistory\r\n\t\t\t@update:scrolledToBottom=\"updateHistoryScrolledToBottom($event)\"\r\n\t\t/>\r\n\t\t<div\r\n\t\t\tv-if=\"historyScrolledToBottom && curTyping.length > 0\"\r\n\t\t\tclass=\"typing-indicator\"\r\n\t\t>\r\n\t\t\t<div class=\"typing-avatars\">\r\n\t\t\t\t<UserAvatar\r\n\t\t\t\t\tv-for=\"typer in curTyping\"\r\n\t\t\t\t\t:providerName=\"curConversation.providerName\"\r\n\t\t\t\t\t:userId=\"typer.userId\"\r\n\t\t\t\t\tclass=\"rounded flat\"\r\n\t\t\t\t\t:key=\"typer.userId\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<span class=\"typing-ids\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tv-for=\"(typer, index) in curTypingShortened\"\r\n\t\t\t\t\tclass=\"typer-id\"\r\n\t\t\t\t\t:key=\"typeof typer === 'string' ? typer : typer.userId\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<span v-if=\"typeof typer === 'string'\"\r\n\t\t\t\t\t\t>{{ typer }} more</span\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<span v-else>\r\n\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\ttyper.hasOwnProperty('userName')\r\n\t\t\t\t\t\t\t\t? typer.userName\r\n\t\t\t\t\t\t\t\t: typer.userId\r\n\t\t\t\t\t\t}}{{\r\n\t\t\t\t\t\t\tcurTyping.length > 1 &&\r\n\t\t\t\t\t\t\tindex === curTyping.length - 2\r\n\t\t\t\t\t\t\t\t? '&nbsp;and&nbsp;'\r\n\t\t\t\t\t\t\t\t: index !== curTyping.length - 1\r\n\t\t\t\t\t\t\t\t? ',&nbsp;'\r\n\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t</span> </span\r\n\t\t\t\t><i\r\n\t\t\t\t\t>&nbsp;{{ curTyping.length === 1 ? 'is' : 'are' }} typing\r\n\t\t\t\t\t...</i\r\n\t\t\t\t>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t\t<Actionbar :historyScrolledToBottom=\"historyScrolledToBottom\" />\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport ConversationHistory from './ConversationHistory.vue';\r\nimport UserAvatar from './UserAvatar.vue';\r\nimport Actionbar from './Actionbar.vue';\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'Conversation',\r\n\tcomponents: {\r\n\t\tConversationHistory,\r\n\t\tUserAvatar,\r\n\t\tActionbar\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thistoryScrolledToBottom: true\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tcurTyping() {\r\n\t\t\tlet gCT = this.$store.getters[\r\n\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\tthis.curConversation.providerName +\r\n\t\t\t\t\t'/getCurTyping'\r\n\t\t\t];\r\n\t\t\tif (gCT) {\r\n\t\t\t\tlet arr = gCT(this.curConversation.conversationId);\r\n\t\t\t\tif (\r\n\t\t\t\t\tarr &&\r\n\t\t\t\t\ttypeof arr === 'object' &&\r\n\t\t\t\t\tarr.hasOwnProperty('length') &&\r\n\t\t\t\t\ttypeof arr.length === 'number' &&\r\n\t\t\t\t\tarr.length > 0\r\n\t\t\t\t) {\r\n\t\t\t\t\tarr = JSON.parse(JSON.stringify(arr));\r\n\t\t\t\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t\tlet u = arr[i];\r\n\t\t\t\t\t\tif (u.userId === this.getCurConversationUser.userId) {\r\n\t\t\t\t\t\t\tarr.splice(i, 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn arr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn [];\r\n\t\t},\r\n\t\tcurTypingShortened() {\r\n\t\t\tlet shortened = this.curTyping.slice(0, 5);\r\n\r\n\t\t\tif (this.curTyping.length > 5) {\r\n\t\t\t\tshortened.push((this.curTyping.length - 5).toString());\r\n\t\t\t}\r\n\r\n\t\t\treturn shortened;\r\n\t\t},\r\n\t\t...mapGetters({\r\n\t\t\tcurConversation: 'curConversation',\r\n\t\t\tgetCurConversationUser:\r\n\t\t\t\t'ConversationProviders/getCurConversationUser'\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\tupdateHistoryScrolledToBottom(to = true) {\r\n\t\t\tthis.historyScrolledToBottom = !!to;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Conversation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Conversation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Conversation.vue?vue&type=template&id=340a1a7d&\"\nimport script from \"./Conversation.vue?vue&type=script&lang=js&\"\nexport * from \"./Conversation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"conversation-info-navbar navbar card\"},[_c('div',{staticClass:\"navbar-section solo-navbar-section\"},[_c('button',{staticClass:\"closebtn btn action link lg\",on:{\"click\":function($event){return _vm.closeConversationInfo()}}},[_c('icon',[_vm._v(\"close\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"conversation-info-navbar navbar card\">\r\n\t\t<div class=\"navbar-section solo-navbar-section\">\r\n\t\t\t<button\r\n\t\t\t\t@click=\"closeConversationInfo()\"\r\n\t\t\t\tclass=\"closebtn btn action link lg\"\r\n\t\t\t>\r\n\t\t\t\t<icon>close</icon>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Icon from './Icon';\r\n\r\nexport default {\r\n\tname: 'ConversationInfoNavbar',\r\n\tcomponents: {\r\n\t\tIcon\r\n\t},\r\n\tdata() {\r\n\t\treturn {};\r\n\t},\r\n\tmethods: {\r\n\t\tcloseConversationInfo() {\r\n\t\t\tthis.$emit('update:conversationInfoOpen', false);\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationInfoNavbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationInfoNavbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConversationInfoNavbar.vue?vue&type=template&id=7bd4589f&\"\nimport script from \"./ConversationInfoNavbar.vue?vue&type=script&lang=js&\"\nexport * from \"./ConversationInfoNavbar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"conversation-info\"},[_c('div',{staticClass:\"conversation-avatar-container\"},[(\n\t\t\t\t_vm.conversationProviderHasAvatarProvider(\n\t\t\t\t\t_vm.getCurConversation.providerName\n\t\t\t\t)\n\t\t\t)?_c('ConversationAvatar',{key:_vm.getCurConversation.id\n\t\t\t\t\t? 'conversation_' +\n\t\t\t\t\t  _vm.getCurConversation.providerName +\n\t\t\t\t\t  '_' +\n\t\t\t\t\t  _vm.getCurConversation.id\n\t\t\t\t\t: 'conversation_' + _vm.getCurConversation.providerName,staticClass:\"rounded lg\",attrs:{\"providerName\":_vm.getCurConversation.providerName,\"conversationId\":_vm.getCurConversation.id}}):_vm._e()],1),_c('div',{staticClass:\"conversation-info-inner\"},[_c('div',{staticClass:\"conversation-name-container input-group\"},[_c('input',{staticClass:\"conversation-name input rounded lg hardshadow\",attrs:{\"readonly\":\"true\"},domProps:{\"value\":_vm.getCurConversation.name}})]),(!_vm.oneProviderMode)?_c('div',{staticClass:\"card\"},[_c('b',{staticClass:\"clr-secondary\",staticStyle:{\"margin\":\"0\"}},[_vm._v(\"Provider\")]),_c('p',{staticStyle:{\"margin-bottom\":\"0\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.getCurConversation.providerName)+\"\\n\\t\\t\\t\")])]):_vm._e()]),(_vm.curConversationInfoComponent)?[_c('hr'),_c('div',{staticClass:\"conversation-info-component-container\"},[_c(_vm.curConversationInfoComponent,{tag:\"component\"})],1)]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"conversation-info\">\r\n\t\t<div class=\"conversation-avatar-container\">\r\n\t\t\t<ConversationAvatar\r\n\t\t\t\tv-if=\"\r\n\t\t\t\t\tconversationProviderHasAvatarProvider(\r\n\t\t\t\t\t\tgetCurConversation.providerName\r\n\t\t\t\t\t)\r\n\t\t\t\t\"\r\n\t\t\t\t:providerName=\"getCurConversation.providerName\"\r\n\t\t\t\t:conversationId=\"getCurConversation.id\"\r\n\t\t\t\tclass=\"rounded lg\"\r\n\t\t\t\t:key=\"\r\n\t\t\t\t\tgetCurConversation.id\r\n\t\t\t\t\t\t? 'conversation_' +\r\n\t\t\t\t\t\t  getCurConversation.providerName +\r\n\t\t\t\t\t\t  '_' +\r\n\t\t\t\t\t\t  getCurConversation.id\r\n\t\t\t\t\t\t: 'conversation_' + getCurConversation.providerName\r\n\t\t\t\t\"\r\n\t\t\t/>\r\n\t\t\t<!-- <button v-else class=\"conversation-avatar btn action rounded lg\"></button> -->\r\n\t\t</div>\r\n\t\t<div class=\"conversation-info-inner\">\r\n\t\t\t<div class=\"conversation-name-container input-group\">\r\n\t\t\t\t<input\r\n\t\t\t\t\tclass=\"conversation-name input rounded lg hardshadow\"\r\n\t\t\t\t\t:value=\"getCurConversation.name\"\r\n\t\t\t\t\treadonly=\"true\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div v-if=\"!oneProviderMode\" class=\"card\">\r\n\t\t\t\t<b class=\"clr-secondary\" style=\"margin: 0;\">Provider</b>\r\n\t\t\t\t<p style=\"margin-bottom: 0;\">\r\n\t\t\t\t\t{{ getCurConversation.providerName }}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<template v-if=\"curConversationInfoComponent\">\r\n\t\t\t<hr />\r\n\t\t\t<div class=\"conversation-info-component-container\">\r\n\t\t\t\t<component :is=\"curConversationInfoComponent\" />\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport ConversationAvatar from './ConversationAvatar.vue';\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'ConversationInfo',\r\n\tcomponents: {\r\n\t\tConversationAvatar\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcurConversationInfoComponent: null\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.curConversationInfoComponent = this.conversationInfoComponent(\r\n\t\t\t\tthis.getCurConversation.providerName,\r\n\t\t\t\tthis.getCurConversation.id\r\n\t\t\t);\r\n\t\t});\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters({\r\n\t\t\tgetCurConversation: 'ConversationProviders/getCurConversation',\r\n\t\t\toneProviderMode: 'ConversationProviders/oneProviderMode'\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\tconversationProviderHasAvatarProvider(providerName) {\r\n\t\t\treturn this.$store.getters[\r\n\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\tproviderName +\r\n\t\t\t\t\t'/getConversationAvatar'\r\n\t\t\t];\r\n\t\t},\r\n\t\tconversationInfoComponent(providerName, conversationId) {\r\n\t\t\tif (providerName && conversationId) {\r\n\t\t\t\tlet component = this.$store.getters[\r\n\t\t\t\t\t'ConversationProviders/provider_' +\r\n\t\t\t\t\t\tproviderName +\r\n\t\t\t\t\t\t'/conversationInfoComponent'\r\n\t\t\t\t];\r\n\r\n\t\t\t\tif (component && typeof component === 'function') {\r\n\t\t\t\t\treturn component(conversationId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConversationInfo.vue?vue&type=template&id=2457df3e&\"\nimport script from \"./ConversationInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./ConversationInfo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div class=\"view-conversation\">\r\n\t\t<div\r\n\t\t\tclass=\"conversation-list-container\"\r\n\t\t\t:inconversation=\"isInConversation\"\r\n\t\t\t:conversationinfo=\"isInConversation && conversationInfoOpen\"\r\n\t\t>\r\n\t\t\t<ConversationListNavbar />\r\n\t\t\t<template v-if=\"anyProviderAvailable.length === 0\">\r\n\t\t\t\t<div class=\"no-provider-available-container\">\r\n\t\t\t\t\t<div class=\"card shadow\">\r\n\t\t\t\t\t\t<span class=\"card-title clr-bg bgclr-secondary\">\r\n\t\t\t\t\t\t\tNo providers currently available!\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</template>\r\n\t\t\t<template\r\n\t\t\t\tv-else-if=\"\r\n\t\t\t\t\t(oneProviderMode &&\r\n\t\t\t\t\t\t!isReady(getAllConversationProviders[0].name)) ||\r\n\t\t\t\t\t\tanyProviderReady.length === 0\r\n\t\t\t\t\"\r\n\t\t\t>\r\n\t\t\t\t<div class=\"one-provider-mode-container\">\r\n\t\t\t\t\t<ConversationProviderManager class=\"card shadow\" />\r\n\t\t\t\t</div>\r\n\t\t\t</template>\r\n\t\t\t<template v-else>\r\n\t\t\t\t<ConversationList\r\n\t\t\t\t\t@update:conversationInfoOpen=\"\r\n\t\t\t\t\t\ttoggleConversationInfoOpen($event)\r\n\t\t\t\t\t\"\r\n\t\t\t\t/>\r\n\t\t\t</template>\r\n\t\t</div>\r\n\t\t<div\r\n\t\t\tv-if=\"isInConversation\"\r\n\t\t\tclass=\"conversation-container\"\r\n\t\t\t:inconversation=\"isInConversation\"\r\n\t\t\t:conversationinfo=\"isInConversation && conversationInfoOpen\"\r\n\t\t\t:key=\"\r\n\t\t\t\tisInConversation\r\n\t\t\t\t\t? 'conversation_' +\r\n\t\t\t\t\t  getCurConversation.providerName +\r\n\t\t\t\t\t  '_' +\r\n\t\t\t\t\t  getCurConversation.id\r\n\t\t\t\t\t: null\r\n\t\t\t\"\r\n\t\t>\r\n\t\t\t<ConversationNavbar\r\n\t\t\t\t@update:conversationInfoOpen=\"\r\n\t\t\t\t\ttoggleConversationInfoOpen($event)\r\n\t\t\t\t\"\r\n\t\t\t/>\r\n\t\t\t<Conversation />\r\n\t\t</div>\r\n\t\t<!-- <div v-else class=\"conversation-container\" innoconversation=\"true\">\r\n            <span>Please select a conversation from the left or use the conversation provider to start a new conversation</span>\r\n        </div> -->\r\n\t\t<div\r\n\t\t\tv-if=\"isInConversation && conversationInfoOpen\"\r\n\t\t\tclass=\"conversation-info-container\"\r\n\t\t\t:conversationinfo=\"isInConversation && conversationInfoOpen\"\r\n\t\t\t:key=\"\r\n\t\t\t\tisInConversation && conversationInfoOpen\r\n\t\t\t\t\t? 'conversation-info_' +\r\n\t\t\t\t\t  getCurConversation.providerName +\r\n\t\t\t\t\t  '_' +\r\n\t\t\t\t\t  getCurConversation.id\r\n\t\t\t\t\t: null\r\n\t\t\t\"\r\n\t\t>\r\n\t\t\t<ConversationInfoNavbar\r\n\t\t\t\t@update:conversationInfoOpen=\"\r\n\t\t\t\t\ttoggleConversationInfoOpen($event)\r\n\t\t\t\t\"\r\n\t\t\t/>\r\n\t\t\t<ConversationInfo />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport ConversationListNavbar from '../components/ConversationListNavbar.vue';\r\nimport ConversationList from '../components/ConversationList.vue';\r\nimport ConversationNavbar from '../components/ConversationNavbar.vue';\r\nimport Conversation from '../components/Conversation.vue';\r\nimport ConversationInfoNavbar from '../components/ConversationInfoNavbar.vue';\r\nimport ConversationInfo from '../components/ConversationInfo.vue';\r\nimport ConversationProviderManager from '../components/ConversationProviderManager.vue';\r\n\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'ViewConversation',\r\n\tcomponents: {\r\n\t\tConversationListNavbar,\r\n\t\tConversationList,\r\n\t\tConversationNavbar,\r\n\t\tConversation,\r\n\t\tConversationInfoNavbar,\r\n\t\tConversationInfo,\r\n\t\tConversationProviderManager\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tconversationInfoOpen: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tisInConversation() {\r\n\t\t\treturn !!this.getCurConversation;\r\n\t\t},\r\n\t\tanyProviderAvailable() {\r\n\t\t\tlet available = [];\r\n\r\n\t\t\tfor (\r\n\t\t\t\tlet providerI = 0;\r\n\t\t\t\tproviderI < this.getAllConversationProviders.length;\r\n\t\t\t\tproviderI++\r\n\t\t\t) {\r\n\t\t\t\tlet provider = this.getAllConversationProviders[providerI];\r\n\r\n\t\t\t\tif (this.isAvailable(provider.name)) {\r\n\t\t\t\t\tavailable.push(provider);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn available;\r\n\t\t},\r\n\t\tanyProviderReady() {\r\n\t\t\tlet ready = [];\r\n\r\n\t\t\tfor (\r\n\t\t\t\tlet providerI = 0;\r\n\t\t\t\tproviderI < this.getAllConversationProviders.length;\r\n\t\t\t\tproviderI++\r\n\t\t\t) {\r\n\t\t\t\tlet provider = this.getAllConversationProviders[providerI];\r\n\r\n\t\t\t\tif (this.isReady(provider.name)) {\r\n\t\t\t\t\tready.push(provider);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn ready;\r\n\t\t},\r\n\t\t...mapGetters({\r\n\t\t\tgetCurConversation: 'ConversationProviders/getCurConversation',\r\n\t\t\tgetAllConversationProviders:\r\n\t\t\t\t'ConversationProviders/getAllConversationProviders',\r\n\t\t\toneProviderMode: 'ConversationProviders/oneProviderMode',\r\n\t\t\tisAvailable: 'ConversationProviders/isAvailable',\r\n\t\t\tisReady: 'ConversationProviders/isReady'\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\ttoggleConversationInfoOpen(to = false) {\r\n\t\t\tthis.conversationInfoOpen = !!to;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Conversation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Conversation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Conversation.vue?vue&type=template&id=7ac63471&\"\nimport script from \"./Conversation.vue?vue&type=script&lang=js&\"\nexport * from \"./Conversation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div class=\"viewpage\" :cur-view=\"curView\">\r\n\t\t<component :is=\"curView\" :key=\"curView\" />\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Conversation from '../views/Conversation.vue';\r\n\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'Viewpage',\r\n\tcomponents: {\r\n\t\tConversation\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['curView'])\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Viewpage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Viewpage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Viewpage.vue?vue&type=template&id=29d572b8&\"\nimport script from \"./Viewpage.vue?vue&type=script&lang=js&\"\nexport * from \"./Viewpage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div id=\"app\" class=\"shadow\">\r\n\t\t<Viewpage />\r\n\t\t<div class=\"dropdown-inners\">\r\n\t\t\t<div ref=\"dropdownOverlays\"></div>\r\n\t\t\t<div ref=\"dropdownMenus\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Viewpage from './components/Viewpage.vue';\r\nimport { mapActions } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'app',\r\n\tcomponents: {\r\n\t\tViewpage\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$root.$app = this;\r\n\r\n\t\tfor (\r\n\t\t\tlet providerI = 0;\r\n\t\t\tproviderI < this.$store.state.loadDefaultProviders.length;\r\n\t\t\tproviderI++\r\n\t\t) {\r\n\t\t\tlet providerName = this.$store.state.loadDefaultProviders[\r\n\t\t\t\tproviderI\r\n\t\t\t];\r\n\r\n\t\t\tconsole.debug('loading provider', providerName);\r\n\t\t\tconst provider = require('./store/modules/ConversationProviders/' +\r\n\t\t\t\tproviderName).default;\r\n\r\n\t\t\tthis.$store.registerModule(\r\n\t\t\t\t['ConversationProviders', 'provider_' + providerName],\r\n\t\t\t\tprovider\r\n\t\t\t);\r\n\t\t\tthis.$store.dispatch(\r\n\t\t\t\t'ConversationProviders/addConversationProvider',\r\n\t\t\t\tproviderName\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// this.openConversation(['local', 'b07c302a-836e-49c0-9d31-6485a776913d']);\r\n\r\n\t\tfor (\r\n\t\t\tlet pluginI = 0;\r\n\t\t\tpluginI < this.$store.state.loadDefaultPlugins.length;\r\n\t\t\tpluginI++\r\n\t\t) {\r\n\t\t\tlet pluginName = this.$store.state.loadDefaultPlugins[pluginI];\r\n\r\n\t\t\tthis.installPlugin(pluginName);\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions(['openConversation'])\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import '../node_modules/normalize.css/normalize.css';\r\n@import 'scss/main.scss';\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=0388043e&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import UUID from 'uuid/v4';\r\n\r\nconst escapeHtml = function(text) {\r\n\tlet map = {\r\n\t\t'&': '&amp;',\r\n\t\t'<': '&lt;',\r\n\t\t'>': '&gt;',\r\n\t\t'\"': '&quot;',\r\n\t\t\"'\": '&#039;'\r\n\t};\r\n\r\n\treturn text.replace(/[&<>\"']/g, m => {\r\n\t\treturn map[m];\r\n\t});\r\n};\r\n\r\nexport const curView = ({ views, curViewId }) => {\r\n\treturn views[curViewId];\r\n};\r\nexport const curConversation = ({ ConversationProviders }) => {\r\n\treturn ConversationProviders.curConversation;\r\n};\r\n\r\nexport const isPluginInstalled = ({ plugins }) => pluginName => {\r\n\treturn plugins.hasOwnProperty(pluginName);\r\n};\r\n\r\nexport const isPluginReady = ({ plugins }, getters) => pluginName => {\r\n\treturn getters.isPluginInstalled(pluginName) && plugins[pluginName].ready;\r\n};\r\n\r\nexport const pluginFunctionality = ({ plugins }, getters) => functionality => {\r\n\tlet activePlugins = [];\r\n\r\n\tfor (let pluginName in plugins) {\r\n\t\tlet plugin = plugins[pluginName];\r\n\t\tif (getters.isPluginReady(pluginName)) {\r\n\t\t\tif (plugin.functionalities.indexOf(functionality) !== -1) {\r\n\t\t\t\tactivePlugins.push(pluginName);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn activePlugins;\r\n};\r\n\r\nexport const pluginFunctionalityRenderMsgBody = (state, getters) => {\r\n\treturn getters.pluginFunctionality('renderMsgBody');\r\n};\r\n\r\nexport const renderMsgBody = ({ plugins }, getters) => msg => {\r\n\tlet pluginFunctionalityRenderMsgBody =\r\n\t\tgetters.pluginFunctionalityRenderMsgBody;\r\n\r\n\treturn async () => {\r\n\t\tlet rmsgbody = decodeURIComponent(msg.body);\r\n\t\tlet modified = false;\r\n\r\n\t\tfor (\r\n\t\t\tlet pluginNameI = 0;\r\n\t\t\tpluginNameI < pluginFunctionalityRenderMsgBody.length;\r\n\t\t\tpluginNameI++\r\n\t\t) {\r\n\t\t\tlet pluginName = pluginFunctionalityRenderMsgBody[pluginNameI];\r\n\t\t\tlet plugin = plugins[pluginName];\r\n\r\n\t\t\tlet nrmsgbody = await new Promise((resolve, reject) => {\r\n\t\t\t\tlet resolveId = UUID();\r\n\t\t\t\tplugin.promise.addOnceId(resolveId, data => {\r\n\t\t\t\t\t// console.log('main resolving in renderMsgBody for', resolveId, data, pluginName, msg, rmsgbody);\r\n\t\t\t\t\tif (data.hasOwnProperty('renderMsgBody')) {\r\n\t\t\t\t\t\tresolve(data.renderMsgBody);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tplugin.worker.postMessage({\r\n\t\t\t\t\trenderMsgBody: {\r\n\t\t\t\t\t\tmsgbody: rmsgbody,\r\n\t\t\t\t\t\tmsg\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresolveId\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tif (nrmsgbody !== rmsgbody) {\r\n\t\t\t\tmodified = true;\r\n\t\t\t}\r\n\r\n\t\t\trmsgbody = nrmsgbody;\r\n\t\t}\r\n\r\n\t\tif (!modified) {\r\n\t\t\trmsgbody = escapeHtml(rmsgbody);\r\n\t\t}\r\n\r\n\t\treturn rmsgbody;\r\n\t};\r\n};\r\n\r\nexport const resourceExtComponents = ({ plugins }, getters) => () => {\r\n\tlet rcomponents = [];\r\n\r\n\tfor (let pluginName in plugins) {\r\n\t\tlet plugin = plugins[pluginName];\r\n\t\tif (getters.isPluginReady(pluginName)) {\r\n\t\t\tif (plugin.hasOwnProperty('resourceExts')) {\r\n\t\t\t\tfor (let cI = 0; cI < plugin.resourceExts.length; cI++) {\r\n\t\t\t\t\tlet c = plugin.resourceExts[cI];\r\n\r\n\t\t\t\t\trcomponents.push({\r\n\t\t\t\t\t\tpluginName,\r\n\t\t\t\t\t\tcomponentName: c.name,\r\n\t\t\t\t\t\tcomponent: c.component\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn rcomponents;\r\n};\r\n\r\nexport const inputExtComponents = ({ plugins }, getters) => () => {\r\n\tlet rcomponents = [];\r\n\r\n\tfor (let pluginName in plugins) {\r\n\t\tlet plugin = plugins[pluginName];\r\n\t\tif (getters.isPluginReady(pluginName)) {\r\n\t\t\tif (plugin.hasOwnProperty('inputExts')) {\r\n\t\t\t\tfor (let cI = 0; cI < plugin.inputExts.length; cI++) {\r\n\t\t\t\t\tlet c = plugin.inputExts[cI];\r\n\r\n\t\t\t\t\trcomponents.push({\r\n\t\t\t\t\t\tpluginName,\r\n\t\t\t\t\t\tcomponentName: c.name,\r\n\t\t\t\t\t\tcomponent: c.component\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn rcomponents;\r\n};\r\n","const pageHidden = () => {\r\n\tlet pageHiddenProp = null;\r\n\r\n\tif (typeof document.hidden !== 'undefined') {\r\n\t\tpageHiddenProp = 'hidden';\r\n\t} else if (typeof document.msHidden !== 'undefined') {\r\n\t\tpageHiddenProp = 'msHidden';\r\n\t} else if (typeof document.webkitHidden !== 'undefined') {\r\n\t\tpageHiddenProp = 'webkitHidden';\r\n\t}\r\n\r\n\tif (!pageHiddenProp) {\r\n\t\tconsole.warn(\r\n\t\t\t\"A feature which depends on the Page Visibility API can not be used due to the lack of it's support in this browser.\"\r\n\t\t);\r\n\t}\r\n\r\n\treturn pageHiddenProp !== null && document[pageHiddenProp];\r\n};\r\n\r\nexport const openConversation = (\r\n\t{ commit },\r\n\t[providerName, conversationId]\r\n) => {\r\n\tcommit('changeView', 'Conversation');\r\n\tcommit('ConversationProviders/changeConversation', [\r\n\t\tproviderName,\r\n\t\tconversationId\r\n\t]);\r\n};\r\nexport const closeConversation = ({ commit }) => {\r\n\tcommit('ConversationProviders/changeConversation', [null, null]);\r\n};\r\n\r\nexport const newMsg = ({ state, getters }, [conversation, msg]) => {\r\n\tlet pluginFunctionalityNewMsg = getters.pluginFunctionality('newMsg');\r\n\r\n\tlet strippedConversation = JSON.parse(JSON.stringify(conversation));\r\n\tdelete strippedConversation.messagekeys;\r\n\r\n\tconst curUser = getters[\r\n\t\t'ConversationProviders/getConversationProviderUser'\r\n\t](conversation.providerName);\r\n\r\n\tfor (\r\n\t\tlet pluginNameI = 0;\r\n\t\tpluginNameI < pluginFunctionalityNewMsg.length;\r\n\t\tpluginNameI++\r\n\t) {\r\n\t\tlet pluginName = pluginFunctionalityNewMsg[pluginNameI];\r\n\t\tlet plugin = state.plugins[pluginName];\r\n\r\n\t\tplugin.worker.postMessage({\r\n\t\t\tnewMsg: {\r\n\t\t\t\tcurUser,\r\n\t\t\t\tconversation: strippedConversation,\r\n\t\t\t\tmsg\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const displayNotification = ({ state }, [pluginName, notification]) => {\r\n\tconsole.log('displayNotification action', pluginName, notification);\r\n\r\n\tconst createNotification = () => {\r\n\t\tif (\r\n\t\t\t!notification.title ||\r\n\t\t\t(!notification.showAlways ? !pageHidden() : false)\r\n\t\t) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst options = Object.assign({}, notification.options);\r\n\r\n\t\treturn new Notification(notification.title, options);\r\n\t};\r\n\r\n\tif (typeof Notification === 'undefined') {\r\n\t\tconsole.warn('This browser does not support notifications');\r\n\t} else if (Notification.permission === 'granted') {\r\n\t\tcreateNotification();\r\n\t} else if (Notification.permission !== 'denied') {\r\n\t\tNotification.requestPermission().then(permission => {\r\n\t\t\tif (permission === 'granted') {\r\n\t\t\t\tcreateNotification();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n};\r\n","import Vue from 'vue';\r\n\r\nexport default {\r\n\tchangeView(state, name) {\r\n\t\tsetViewId(state, state.views.indexOf(name));\r\n\t},\r\n\r\n\tchangeViewId(state, id) {\r\n\t\tsetViewId(state, id);\r\n\t},\r\n\r\n\tregisterPlugin(state, [pluginName, worker, promise]) {\r\n\t\tif (pluginName) {\r\n\t\t\tif (!state.plugins.hasOwnProperty(pluginName)) {\r\n\t\t\t\tstate.plugins = {\r\n\t\t\t\t\t...state.plugins,\r\n\t\t\t\t\t[pluginName]: {\r\n\t\t\t\t\t\tworker,\r\n\t\t\t\t\t\tpromise,\r\n\t\t\t\t\t\tfunctionalities: [],\r\n\t\t\t\t\t\tready: false\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconsole.log('registered plugin with name', pluginName, worker);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tpluginPromise_addOn(state, [pluginName, event, func]) {\r\n\t\tif (pluginName && state.plugins.hasOwnProperty(pluginName)) {\r\n\t\t\tif (state.plugins[pluginName].promise.on.hasOwnProperty(event)) {\r\n\t\t\t\tstate.plugins[pluginName].promise.on[event].push(func);\r\n\r\n\t\t\t\tstate.plugins = {\r\n\t\t\t\t\t...state.plugins\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tpluginPromise_removeOn(state, [pluginName, event, func]) {\r\n\t\tif (pluginName && state.plugins.hasOwnProperty(pluginName)) {\r\n\t\t\tif (state.plugins[pluginName].promise.on.hasOwnProperty(event)) {\r\n\t\t\t\tstate.plugins[pluginName].promise.on[event].splice(\r\n\t\t\t\t\tstate.plugins[pluginName].promise.on[event].indexOf(func),\r\n\t\t\t\t\t1\r\n\t\t\t\t);\r\n\r\n\t\t\t\tstate.plugins = {\r\n\t\t\t\t\t...state.plugins\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tpluginPromise_addOnce(state, [pluginName, event, func]) {\r\n\t\tif (pluginName && state.plugins.hasOwnProperty(pluginName)) {\r\n\t\t\tif (state.plugins[pluginName].promise.once.hasOwnProperty(event)) {\r\n\t\t\t\tstate.plugins[pluginName].promise.once[event].push(func);\r\n\r\n\t\t\t\tstate.plugins = {\r\n\t\t\t\t\t...state.plugins\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tpluginPromise_removeOnce(state, [pluginName, event, func]) {\r\n\t\tif (pluginName && state.plugins.hasOwnProperty(pluginName)) {\r\n\t\t\tif (state.plugins[pluginName].promise.once.hasOwnProperty(event)) {\r\n\t\t\t\tstate.plugins[pluginName].promise.once[event].splice(\r\n\t\t\t\t\tstate.plugins[pluginName].promise.once[event].indexOf(func),\r\n\t\t\t\t\t1\r\n\t\t\t\t);\r\n\r\n\t\t\t\tstate.plugins = {\r\n\t\t\t\t\t...state.plugins\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tpluginPromise_addOnId(state, [pluginName, id, func]) {\r\n\t\tif (pluginName && state.plugins.hasOwnProperty(pluginName)) {\r\n\t\t\tif (!state.plugins[pluginName].promise.onId.hasOwnProperty(id)) {\r\n\t\t\t\tstate.plugins[pluginName].promise.onId[id] = [];\r\n\t\t\t}\r\n\t\t\tstate.plugins[pluginName].promise.onId[id].push(func);\r\n\r\n\t\t\tstate.plugins = {\r\n\t\t\t\t...state.plugins\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpluginPromise_removeOnId(state, [pluginName, id, func]) {\r\n\t\tif (pluginName && state.plugins.hasOwnProperty(pluginName)) {\r\n\t\t\tif (state.plugins[pluginName].promise.onId.hasOwnProperty(id)) {\r\n\t\t\t\tstate.plugins[pluginName].promise.onId[id].splice(\r\n\t\t\t\t\tstate.plugins[pluginName].promise.onId[id].indexOf(func),\r\n\t\t\t\t\t1\r\n\t\t\t\t);\r\n\r\n\t\t\t\tstate.plugins = {\r\n\t\t\t\t\t...state.plugins\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tpluginPromise_addOnceId(state, [pluginName, id, func]) {\r\n\t\tif (pluginName && state.plugins.hasOwnProperty(pluginName)) {\r\n\t\t\tif (!state.plugins[pluginName].promise.onceId.hasOwnProperty(id)) {\r\n\t\t\t\tstate.plugins[pluginName].promise.onceId[id] = [];\r\n\t\t\t}\r\n\t\t\tstate.plugins[pluginName].promise.onceId[id].push(func);\r\n\r\n\t\t\tstate.plugins = {\r\n\t\t\t\t...state.plugins\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tpluginPromise_removeOnceId(state, [pluginName, id, func]) {\r\n\t\tif (pluginName && state.plugins.hasOwnProperty(pluginName)) {\r\n\t\t\tif (state.plugins[pluginName].promise.onceId.hasOwnProperty(id)) {\r\n\t\t\t\tstate.plugins[pluginName].promise.onceId[id].splice(\r\n\t\t\t\t\tstate.plugins[pluginName].promise.onceId[id].indexOf(func),\r\n\t\t\t\t\t1\r\n\t\t\t\t);\r\n\r\n\t\t\t\tstate.plugins = {\r\n\t\t\t\t\t...state.plugins\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tpluginSetDeclaredFunctionalities(\r\n\t\tstate,\r\n\t\t[pluginName, declaredFunctionalities]\r\n\t) {\r\n\t\tlet functionalities = [];\r\n\r\n\t\tfor (\r\n\t\t\tlet functionalityI = 0;\r\n\t\t\tfunctionalityI < declaredFunctionalities.length;\r\n\t\t\tfunctionalityI++\r\n\t\t) {\r\n\t\t\tlet functionality = declaredFunctionalities[functionalityI];\r\n\r\n\t\t\tif (typeof functionality === 'string') {\r\n\t\t\t\tif (\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t'install',\r\n\t\t\t\t\t\t'renderMsgBody',\r\n\t\t\t\t\t\t'resourceExts',\r\n\t\t\t\t\t\t'inputExts',\r\n\t\t\t\t\t\t'newMsg',\r\n\t\t\t\t\t\t'displayNotification'\r\n\t\t\t\t\t].indexOf(functionality) !== -1\r\n\t\t\t\t) {\r\n\t\t\t\t\tfunctionalities.push(functionality);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconsole.log(\r\n\t\t\t'setting declared functionalities',\r\n\t\t\tpluginName,\r\n\t\t\tdeclaredFunctionalities,\r\n\t\t\tfunctionalities\r\n\t\t);\r\n\r\n\t\tstate.plugins = {\r\n\t\t\t...state.plugins,\r\n\t\t\t[pluginName]: {\r\n\t\t\t\t...state.plugins[pluginName],\r\n\t\t\t\tfunctionalities: functionalities\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\r\n\tpluginReady(state, pluginName) {\r\n\t\tif (pluginName) {\r\n\t\t\tstate.plugins = {\r\n\t\t\t\t...state.plugins,\r\n\t\t\t\t[pluginName]: {\r\n\t\t\t\t\t...state.plugins[pluginName],\r\n\t\t\t\t\tready: true\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\r\n\tpluginSetResourceExts(state, [pluginName, resourceExts]) {\r\n\t\tlet compiledResourceExts = [];\r\n\r\n\t\tfor (\r\n\t\t\tlet resourceExtI = 0;\r\n\t\t\tresourceExtI < resourceExts.length;\r\n\t\t\tresourceExtI++\r\n\t\t) {\r\n\t\t\tlet resourceExt = resourceExts[resourceExtI];\r\n\t\t\tlet componentObj = new Function(\r\n\t\t\t\tresourceExt.component.args,\r\n\t\t\t\tresourceExt.component.body\r\n\t\t\t);\r\n\t\t\tconsole.log(\r\n\t\t\t\t'componentObj',\r\n\t\t\t\tresourceExt,\r\n\t\t\t\ttypeof componentObj,\r\n\t\t\t\tcomponentObj\r\n\t\t\t);\r\n\t\t\tcompiledResourceExts.push({\r\n\t\t\t\tname: resourceExt.name,\r\n\t\t\t\tcomponent: Vue.component(\r\n\t\t\t\t\tresourceExt.name,\r\n\t\t\t\t\tcomponentObj(pluginName, state.plugins[pluginName])\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconsole.log(\r\n\t\t\t'setting resource exts',\r\n\t\t\tpluginName,\r\n\t\t\tresourceExts,\r\n\t\t\tcompiledResourceExts\r\n\t\t);\r\n\r\n\t\tstate.plugins = {\r\n\t\t\t...state.plugins,\r\n\t\t\t[pluginName]: {\r\n\t\t\t\t...state.plugins[pluginName],\r\n\t\t\t\tresourceExts: compiledResourceExts\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\r\n\tpluginSetInputExts(state, [pluginName, inputExts]) {\r\n\t\tlet compiledInputExts = [];\r\n\r\n\t\tfor (let inputExtI = 0; inputExtI < inputExts.length; inputExtI++) {\r\n\t\t\tlet inputExt = inputExts[inputExtI];\r\n\t\t\tlet componentObj = new Function(\r\n\t\t\t\tinputExt.component.args,\r\n\t\t\t\tinputExt.component.body\r\n\t\t\t);\r\n\t\t\tconsole.log(\r\n\t\t\t\t'componentObj',\r\n\t\t\t\tinputExt,\r\n\t\t\t\ttypeof componentObj,\r\n\t\t\t\tcomponentObj\r\n\t\t\t);\r\n\t\t\tcompiledInputExts.push({\r\n\t\t\t\tname: inputExt.name,\r\n\t\t\t\tcomponent: Vue.component(\r\n\t\t\t\t\tinputExt.name,\r\n\t\t\t\t\tcomponentObj(pluginName, state.plugins[pluginName])\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconsole.log(\r\n\t\t\t'setting input exts',\r\n\t\t\tpluginName,\r\n\t\t\tinputExts,\r\n\t\t\tcompiledInputExts\r\n\t\t);\r\n\r\n\t\tstate.plugins = {\r\n\t\t\t...state.plugins,\r\n\t\t\t[pluginName]: {\r\n\t\t\t\t...state.plugins[pluginName],\r\n\t\t\t\tinputExts: compiledInputExts\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction setViewId(state, id) {\r\n\tif (!state.views[id]) {\r\n\t\tconsole.debug('viewId ', id, ' invalid!');\r\n\t} else {\r\n\t\tstate.curViewId = id;\r\n\t}\r\n}\r\n","import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport * as getters from './getters';\r\nimport * as actions from './actions';\r\nimport mutations from './mutations';\r\nimport ConversationProviders from './modules/ConversationProviders';\r\nimport createLogger from 'vuex/dist/logger';\r\n\r\nvar config = null;\r\n\r\ntry {\r\n\tconfig = require('../config.js').default;\r\n} catch (err) {\r\n\tconfig = require('../defaultConfig.js').default;\r\n}\r\n\r\nVue.use(Vuex);\r\n\r\nconst debug = process.env.NODE_ENV !== 'production';\r\n\r\nconst state = {\r\n\t...config,\r\n\tviews: ['Conversation'],\r\n\tcurViewId: 0,\r\n\tplugins: {}\r\n};\r\n\r\nexport default new Vuex.Store({\r\n\tstate,\r\n\tgetters,\r\n\tactions,\r\n\tmutations,\r\n\tmodules: {\r\n\t\tConversationProviders\r\n\t},\r\n\tstrict: debug,\r\n\tplugins: debug ? [createLogger()] : []\r\n});\r\n","import Vue from 'vue';\r\nimport App from './App.vue';\r\nimport store from './store';\r\nimport '@mdi/font/scss/materialdesignicons.scss';\r\n\r\n// const debug = process.env.NODE_ENV !== 'production';\r\n\r\nvar pluginInstallHandler = null;\r\n\r\ntry {\r\n\tpluginInstallHandler = require('./pluginInstallHandler.js');\r\n} catch (err) {\r\n\tpluginInstallHandler = require('./defaultPluginInstallHandler.js');\r\n}\r\n\r\nVue.config.productionTip = false;\r\n\r\nconst promiseClass = function(pluginName) {\r\n\tlet obj = {\r\n\t\tpluginName,\r\n\t\tevents: [\r\n\t\t\t'getDepCode',\r\n\t\t\t'ready',\r\n\t\t\t'declareFunctionalities',\r\n\t\t\t'install',\r\n\t\t\t'renderMsgBody',\r\n\t\t\t'resourceExts',\r\n\t\t\t'inputExts',\r\n\t\t\t'newMsg',\r\n\t\t\t'displayNotification'\r\n\t\t],\r\n\t\ton: {},\r\n\t\tonce: {},\r\n\t\tonId: {},\r\n\t\tonceId: {},\r\n\r\n\t\tinit(worker) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tworker.onmessage = e => {\r\n\t\t\t\t\tlet data = e.data;\r\n\t\t\t\t\tconsole.log('main received from', this.pluginName, data);\r\n\t\t\t\t\tif (typeof data === 'object') {\r\n\t\t\t\t\t\tif (data.hasOwnProperty('resolveId')) {\r\n\t\t\t\t\t\t\tif (this.onceId.hasOwnProperty(data.resolveId)) {\r\n\t\t\t\t\t\t\t\tfor (\r\n\t\t\t\t\t\t\t\t\tlet funcI = 0;\r\n\t\t\t\t\t\t\t\t\tfuncI < this.onceId[data.resolveId].length;\r\n\t\t\t\t\t\t\t\t\tfuncI++\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tthis.onceId[data.resolveId][funcI](data);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (\r\n\t\t\t\t\t\t\t\t\tlet funcI = 0;\r\n\t\t\t\t\t\t\t\t\tfuncI < this.onceId[data.resolveId].length;\r\n\t\t\t\t\t\t\t\t\tfuncI++\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tthis.removeOnceId(\r\n\t\t\t\t\t\t\t\t\t\tdata.resolveId,\r\n\t\t\t\t\t\t\t\t\t\tthis.onceId[data.resolveId][funcI]\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.onId.hasOwnProperty(data.resolveId)) {\r\n\t\t\t\t\t\t\t\tfor (\r\n\t\t\t\t\t\t\t\t\tlet funcI = 0;\r\n\t\t\t\t\t\t\t\t\tfuncI < this.onId[data.resolveId].length;\r\n\t\t\t\t\t\t\t\t\tfuncI++\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tthis.onId[data.resolveId][funcI](data);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (\r\n\t\t\t\t\t\t\tlet eventI = 0;\r\n\t\t\t\t\t\t\teventI < this.events.length;\r\n\t\t\t\t\t\t\teventI++\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tlet event = this.events[eventI];\r\n\r\n\t\t\t\t\t\t\tif (data.hasOwnProperty(event)) {\r\n\t\t\t\t\t\t\t\tfor (\r\n\t\t\t\t\t\t\t\t\tlet funcI = 0;\r\n\t\t\t\t\t\t\t\t\tfuncI < this.once[event].length;\r\n\t\t\t\t\t\t\t\t\tfuncI++\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tthis.once[event][funcI](data[event]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (\r\n\t\t\t\t\t\t\t\t\tlet funcI = 0;\r\n\t\t\t\t\t\t\t\t\tfuncI < this.once[event].length;\r\n\t\t\t\t\t\t\t\t\tfuncI++\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tthis.removeOnce(\r\n\t\t\t\t\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\t\t\t\t\tthis.once[event][funcI]\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (\r\n\t\t\t\t\t\t\t\t\tlet funcI = 0;\r\n\t\t\t\t\t\t\t\t\tfuncI < this.on[event].length;\r\n\t\t\t\t\t\t\t\t\tfuncI++\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tthis.on[event][funcI](data[event]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\t'initialized promiseClass',\r\n\t\t\t\t\tthis.pluginName,\r\n\t\t\t\t\tworker,\r\n\t\t\t\t\tthis\r\n\t\t\t\t);\r\n\r\n\t\t\t\tresolve();\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\taddOn(event, func) {\r\n\t\t\tstore.commit('pluginPromise_addOn', [this.pluginName, event, func]);\r\n\t\t},\r\n\t\tremoveOn(event, func) {\r\n\t\t\tstore.commit('pluginPromise_removeOn', [\r\n\t\t\t\tthis.pluginName,\r\n\t\t\t\tevent,\r\n\t\t\t\tfunc\r\n\t\t\t]);\r\n\t\t},\r\n\r\n\t\taddOnce(event, func) {\r\n\t\t\tstore.commit('pluginPromise_addOnce', [\r\n\t\t\t\tthis.pluginName,\r\n\t\t\t\tevent,\r\n\t\t\t\tfunc\r\n\t\t\t]);\r\n\t\t},\r\n\t\tremoveOnce(event, func) {\r\n\t\t\tstore.commit('pluginPromise_removeOnce', [\r\n\t\t\t\tthis.pluginName,\r\n\t\t\t\tevent,\r\n\t\t\t\tfunc\r\n\t\t\t]);\r\n\t\t},\r\n\r\n\t\taddOnId(id, func) {\r\n\t\t\tstore.commit('pluginPromise_addOnId', [this.pluginName, id, func]);\r\n\t\t},\r\n\t\tremoveOnId(id, func) {\r\n\t\t\tstore.commit('pluginPromise_removeOnId', [\r\n\t\t\t\tthis.pluginName,\r\n\t\t\t\tid,\r\n\t\t\t\tfunc\r\n\t\t\t]);\r\n\t\t},\r\n\r\n\t\taddOnceId(id, func) {\r\n\t\t\tstore.commit('pluginPromise_addOnceId', [\r\n\t\t\t\tthis.pluginName,\r\n\t\t\t\tid,\r\n\t\t\t\tfunc\r\n\t\t\t]);\r\n\t\t},\r\n\t\tremoveOnceId(id, func) {\r\n\t\t\tstore.commit('pluginPromise_removeOnceId', [\r\n\t\t\t\tthis.pluginName,\r\n\t\t\t\tid,\r\n\t\t\t\tfunc\r\n\t\t\t]);\r\n\t\t}\r\n\t};\r\n\r\n\tfor (let eventI = 0; eventI < obj.events.length; eventI++) {\r\n\t\tlet event = obj.events[eventI];\r\n\t\tobj.on[event] = [];\r\n\t\tobj.once[event] = [];\r\n\t}\r\n\r\n\treturn obj;\r\n};\r\n\r\nconst initWorkerPromise = function(pluginName, worker) {\r\n\treturn new Promise(resolve => {\r\n\t\tconst promise = promiseClass(pluginName);\r\n\r\n\t\tstore.commit('registerPlugin', [pluginName, worker, promise]);\r\n\r\n\t\tpromise.init(worker).then(() => {\r\n\t\t\tconsole.log('initted promise worker', pluginName);\r\n\r\n\t\t\tpromise.addOn('getDepCode', ({ depPath, depType }) => {\r\n\t\t\t\tpluginInstallHandler.getDepCode(\r\n\t\t\t\t\tpluginName,\r\n\t\t\t\t\tpromise,\r\n\t\t\t\t\tworker,\r\n\t\t\t\t\tdepPath,\r\n\t\t\t\t\tdepType,\r\n\t\t\t\t\tstore\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t\tpromise.addOnce('ready', pluginReady => {\r\n\t\t\t\tstore.commit('pluginReady', pluginName);\r\n\t\t\t});\r\n\t\t\tpromise.addOn('declareFunctionalities', declareFunctionalities => {\r\n\t\t\t\tstore.commit('pluginSetDeclaredFunctionalities', [\r\n\t\t\t\t\tpluginName,\r\n\t\t\t\t\tdeclareFunctionalities\r\n\t\t\t\t]);\r\n\t\t\t});\r\n\t\t\tpromise.addOn('install', iPluginName => {\r\n\t\t\t\tVueApp.installPlugin(iPluginName);\r\n\t\t\t});\r\n\t\t\tpromise.addOn('resourceExts', resourceExts => {\r\n\t\t\t\tstore.commit('pluginSetResourceExts', [\r\n\t\t\t\t\tpluginName,\r\n\t\t\t\t\tresourceExts\r\n\t\t\t\t]);\r\n\t\t\t});\r\n\t\t\tpromise.addOn('inputExts', inputExts => {\r\n\t\t\t\tstore.commit('pluginSetInputExts', [pluginName, inputExts]);\r\n\t\t\t});\r\n\t\t\tpromise.addOn('displayNotification', notification => {\r\n\t\t\t\tstore.dispatch('displayNotification', [\r\n\t\t\t\t\tpluginName,\r\n\t\t\t\t\tnotification\r\n\t\t\t\t]);\r\n\t\t\t});\r\n\r\n\t\t\tresolve(promise);\r\n\r\n\t\t\tworker.postMessage('registered');\r\n\t\t});\r\n\t});\r\n};\r\n\r\nVue.prototype.installPlugin = function(pluginName) {\r\n\tpluginInstallHandler.installPlugin(pluginName, initWorkerPromise, store);\r\n};\r\n\r\nlet VueApp = new Vue({\r\n\tstore,\r\n\trender: h => h(App),\r\n\tmounted() {\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\twindow.requestAnimationFrame(() => {\r\n\t\t\t\t\tdocument\r\n\t\t\t\t\t\t.getElementById('app-loader')\r\n\t\t\t\t\t\t.setAttribute('loaded', true);\r\n\t\t\t\t});\r\n\t\t\t}, 200);\r\n\t\t});\r\n\t}\r\n}).$mount('#app');\r\n\r\nwindow.VueApp = VueApp;\r\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","/* eslint-disable */\r\n\r\n// Version 1.0.0 - Initial release\r\n// Version 1.1.0 (2017-08-02) - Added cmdp function that returns promise instead of using callback\r\n// Version 1.2.0 (2017-08-02) - Added Ajax monkey patch to emulate XMLHttpRequest over ZeroFrame API\r\n// Version 1.3.0 (2018-12-05) - Added monkey patch for fetch API\r\n// Version 1.3.1 (2019-09-02) - Fix memory leak while handling responses\r\n\r\nconst CMD_INNER_READY = 'innerReady';\r\nconst CMD_RESPONSE = 'response';\r\nconst CMD_WRAPPER_READY = 'wrapperReady';\r\nconst CMD_PING = 'ping';\r\nconst CMD_PONG = 'pong';\r\nconst CMD_WRAPPER_OPENED_WEBSOCKET = 'wrapperOpenedWebsocket';\r\nconst CMD_WRAPPER_CLOSE_WEBSOCKET = 'wrapperClosedWebsocket';\r\n\r\nclass ZeroFrame {\r\n\tconstructor(url) {\r\n\t\tthis.url = url;\r\n\t\tthis.waiting_cb = {};\r\n\t\tthis.wrapper_nonce = document.location.href.replace(\r\n\t\t\t/.*wrapper_nonce=([A-Za-z0-9]+).*/,\r\n\t\t\t'$1'\r\n\t\t);\r\n\t\tthis.connect();\r\n\t\tthis.next_message_id = 1;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tinit() {\r\n\t\treturn this;\r\n\t}\r\n\r\n\tconnect() {\r\n\t\tthis.target = window.parent;\r\n\t\twindow.addEventListener('message', e => this.onMessage(e), false);\r\n\t\tthis.cmd(CMD_INNER_READY);\r\n\t}\r\n\r\n\tonMessage(e) {\r\n\t\tlet message = e.data;\r\n\t\tlet cmd = message.cmd;\r\n\t\tif (cmd === CMD_RESPONSE) {\r\n\t\t\tif (this.waiting_cb[message.to] !== undefined) {\r\n\t\t\t\tthis.waiting_cb[message.to](message.result);\r\n\t\t\t\tdelete this.waiting_cb[message.to];\r\n\t\t\t} else {\r\n\t\t\t\tthis.log('Websocket callback not found:', message);\r\n\t\t\t}\r\n\t\t} else if (cmd === CMD_WRAPPER_READY) {\r\n\t\t\tthis.cmd(CMD_INNER_READY);\r\n\t\t} else if (cmd === CMD_PING) {\r\n\t\t\tthis.response(message.id, CMD_PONG);\r\n\t\t} else if (cmd === CMD_WRAPPER_OPENED_WEBSOCKET) {\r\n\t\t\tthis.onOpenWebsocket();\r\n\t\t} else if (cmd === CMD_WRAPPER_CLOSE_WEBSOCKET) {\r\n\t\t\tthis.onCloseWebsocket();\r\n\t\t} else {\r\n\t\t\tthis.onRequest(cmd, message);\r\n\t\t}\r\n\t}\r\n\r\n\tonRequest(cmd, message) {\r\n\t\tthis.log('Unknown request', message);\r\n\t}\r\n\r\n\tresponse(to, result) {\r\n\t\tthis.send({\r\n\t\t\tcmd: CMD_RESPONSE,\r\n\t\t\tto: to,\r\n\t\t\tresult: result\r\n\t\t});\r\n\t}\r\n\r\n\tcmd(cmd, params = {}, cb = null) {\r\n\t\tthis.send(\r\n\t\t\t{\r\n\t\t\t\tcmd: cmd,\r\n\t\t\t\tparams: params\r\n\t\t\t},\r\n\t\t\tcb\r\n\t\t);\r\n\t}\r\n\r\n\tcmdp(cmd, params = {}) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.cmd(cmd, params, res => {\r\n\t\t\t\tif (res && res.error) {\r\n\t\t\t\t\treject(res.error);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolve(res);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tsend(message, cb = null) {\r\n\t\tmessage.wrapper_nonce = this.wrapper_nonce;\r\n\t\tmessage.id = this.next_message_id;\r\n\t\tthis.next_message_id++;\r\n\t\tthis.target.postMessage(message, '*');\r\n\t\tif (cb) {\r\n\t\t\tthis.waiting_cb[message.id] = cb;\r\n\t\t}\r\n\t}\r\n\r\n\tlog(...args) {\r\n\t\tconsole.log.apply(console, ['[ZeroFrame]'].concat(args));\r\n\t}\r\n\r\n\tonOpenWebsocket() {\r\n\t\tthis.log('Websocket open');\r\n\t}\r\n\r\n\tonCloseWebsocket() {\r\n\t\tthis.log('Websocket close');\r\n\t}\r\n\r\n\tmonkeyPatchAjax() {\r\n\t\tvar page = this;\r\n\t\tXMLHttpRequest.prototype.realOpen = XMLHttpRequest.prototype.open;\r\n\t\tthis.cmd('wrapperGetAjaxKey', [], res => {\r\n\t\t\tthis.ajax_key = res;\r\n\t\t});\r\n\t\tvar newOpen = function(method, url, async) {\r\n\t\t\turl += '?ajax_key=' + page.ajax_key;\r\n\t\t\treturn this.realOpen(method, url, async);\r\n\t\t};\r\n\t\tXMLHttpRequest.prototype.open = newOpen;\r\n\r\n\t\twindow.realFetch = window.fetch;\r\n\t\tvar newFetch = function(url) {\r\n\t\t\turl += '?ajax_key=' + page.ajax_key;\r\n\t\t\treturn window.realFetch(url);\r\n\t\t};\r\n\t\twindow.fetch = newFetch;\r\n\t}\r\n}\r\n\r\nexport default ZeroFrame;\r\n","import ZeroFrame from './ZeroFrame';\r\nimport UUID from 'uuid/v4';\r\n\r\nconst debug = process.env.NODE_ENV !== 'production';\r\n\r\nvar filesadded = [];\r\n\r\nvar prodConf = null;\r\n\r\ntry {\r\n\tprodConf = require('../prod.config.js');\r\n} catch (err) {\r\n\tprodConf = require('../prod.default.config.js');\r\n}\r\n\r\nconst pageHidden = () => {\r\n\tlet pageHiddenProp = null;\r\n\r\n\tif (typeof document.hidden !== 'undefined') {\r\n\t\tpageHiddenProp = 'hidden';\r\n\t} else if (typeof document.msHidden !== 'undefined') {\r\n\t\tpageHiddenProp = 'msHidden';\r\n\t} else if (typeof document.webkitHidden !== 'undefined') {\r\n\t\tpageHiddenProp = 'webkitHidden';\r\n\t}\r\n\r\n\tif (!pageHiddenProp) {\r\n\t\tconsole.warn(\r\n\t\t\t\"A feature which depends on the Page Visibility API can not be used due to the lack of it's support in this browser.\"\r\n\t\t);\r\n\t}\r\n\r\n\treturn pageHiddenProp !== null && document[pageHiddenProp];\r\n};\r\n\r\nfunction loadjscssfile(filename, filetype, cb) {\r\n\tlet fileref;\r\n\tif (filetype === 'js') {\r\n\t\tfileref = document.createElement('script');\r\n\t\tfileref.setAttribute('type', 'text/javascript');\r\n\t\tfileref.setAttribute('src', filename);\r\n\t} else if (filetype === 'css') {\r\n\t\tfileref = document.createElement('link');\r\n\t\tfileref.setAttribute('rel', 'stylesheet');\r\n\t\tfileref.setAttribute('type', 'text/css');\r\n\t\tfileref.setAttribute('href', filename);\r\n\t}\r\n\tif (typeof fileref !== 'undefined') {\r\n\t\tfileref.onload = function(e) {\r\n\t\t\ttypeof cb === 'function' && cb(undefined, filename, filetype);\r\n\t\t};\r\n\t\tfileref.onerror = function(e) {\r\n\t\t\ttypeof cb === 'function' &&\r\n\t\t\t\tcb(\r\n\t\t\t\t\tnew Error('couldn\"t load file', filename, filetype),\r\n\t\t\t\t\tfilename,\r\n\t\t\t\t\tfiletype\r\n\t\t\t\t);\r\n\t\t};\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(fileref);\r\n\t}\r\n}\r\n\r\nfunction checkloadjscssfile(filename, filetype, cb) {\r\n\tif (filesadded.indexOf(filename) === -1) {\r\n\t\tloadjscssfile(filename, filetype, cb);\r\n\t\tfilesadded.push(filename);\r\n\t} else {\r\n\t\ttypeof cb === 'function' && cb(null, filename, filetype);\r\n\t}\r\n}\r\n\r\nclass Page extends ZeroFrame {\r\n\tsetSiteInfo(siteInfo) {\r\n\t\tif (siteInfo && typeof siteInfo === 'object') {\r\n\t\t\tconsole.log('setting siteInfo', siteInfo);\r\n\t\t}\r\n\t}\r\n\r\n\tonOpenWebsocket() {\r\n\t\tthis.cmd('siteInfo', [], siteInfo => {\r\n\t\t\tthis.setSiteInfo(siteInfo);\r\n\t\t});\r\n\t}\r\n\r\n\tonRequest(cmd, message) {\r\n\t\tif (cmd === 'setSiteInfo') {\r\n\t\t\tthis.setSiteInfo(message.params);\r\n\t\t} else {\r\n\t\t\tthis.log('Unknown incoming message:', cmd);\r\n\t\t}\r\n\t}\r\n}\r\nconst page = new Page();\r\n\r\nconst initWorkerPromiseCB = (initWorkerPromise, pluginName, worker) => {\r\n\tinitWorkerPromise(pluginName, worker).then(promise => {\r\n\t\tpromise.removeOn('displayNotification');\r\n\t\tpromise.addOn('displayNotification', notification => {\r\n\t\t\tif (\r\n\t\t\t\t!notification.title ||\r\n\t\t\t\t(!notification.showAlways ? !pageHidden() : false)\r\n\t\t\t)\r\n\t\t\t\treturn null;\r\n\r\n\t\t\tconst notificationId = UUID();\r\n\t\t\tpage.cmd('wrapperWebNotification', [\r\n\t\t\t\tnotification.title,\r\n\t\t\t\tnotificationId,\r\n\t\t\t\t{\r\n\t\t\t\t\t...notification.options,\r\n\t\t\t\t\tfocus_tab: true\r\n\t\t\t\t}\r\n\t\t\t]);\r\n\t\t});\r\n\t});\r\n};\r\n\r\nexport const installPlugin = (pluginName, initWorkerPromise, store) => {\r\n\tif (!debug) {\r\n\t\tpage.cmd(\r\n\t\t\t'fileGet',\r\n\t\t\t['plugins/' + pluginName + '/index.js', 'text'],\r\n\t\t\tf => {\r\n\t\t\t\tconst url = URL.createObjectURL(\r\n\t\t\t\t\tnew Blob([f], {\r\n\t\t\t\t\t\ttype: 'text/javascript'\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tconst worker = new Worker(url);\r\n\r\n\t\t\t\tinitWorkerPromiseCB(initWorkerPromise, pluginName, worker);\r\n\t\t\t}\r\n\t\t);\r\n\t} else {\r\n\t\tconst worker = new Worker(\r\n\t\t\t(debug ? '/public' : prodConf.publicPath) +\r\n\t\t\t\t'/plugins/' +\r\n\t\t\t\tpluginName +\r\n\t\t\t\t'/index.js'\r\n\t\t);\r\n\r\n\t\tinitWorkerPromiseCB(initWorkerPromise, pluginName, worker);\r\n\t}\r\n};\r\n\r\nexport const getDepCode = (\r\n\tpluginName,\r\n\tpromise,\r\n\tworker,\r\n\tdepPath,\r\n\tdepType,\r\n\tstore\r\n) => {\r\n\tif (!debug) {\r\n\t\tpage.cmd(\r\n\t\t\t'fileGet',\r\n\t\t\t['plugins/' + pluginName + '/' + depPath, 'text'],\r\n\t\t\tf => {\r\n\t\t\t\tconst depCode =\r\n\t\t\t\t\t'data:text/javascript;base64;charset=utf8,' +\r\n\t\t\t\t\tbtoa(unescape(encodeURIComponent(f)));\r\n\r\n\t\t\t\tif (depType === 'css') {\r\n\t\t\t\t\tcheckloadjscssfile(\r\n\t\t\t\t\t\t(debug ? '/public' : prodConf.publicPath) +\r\n\t\t\t\t\t\t\t'/plugins/' +\r\n\t\t\t\t\t\t\tpluginName +\r\n\t\t\t\t\t\t\t'/' +\r\n\t\t\t\t\t\t\tdepPath,\r\n\t\t\t\t\t\tdepType\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tworker.postMessage({\r\n\t\t\t\t\tdepPath,\r\n\t\t\t\t\tdepType,\r\n\t\t\t\t\tdepCode\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t);\r\n\t} else {\r\n\t\tconst depCode = depPath;\r\n\r\n\t\tif (depType === 'css') {\r\n\t\t\tcheckloadjscssfile(\r\n\t\t\t\t(debug ? '/public' : prodConf.publicPath) +\r\n\t\t\t\t\t'/plugins/' +\r\n\t\t\t\t\tpluginName +\r\n\t\t\t\t\t'/' +\r\n\t\t\t\t\tdepPath,\r\n\t\t\t\tdepType\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tworker.postMessage({\r\n\t\t\tdepPath,\r\n\t\t\tdepType,\r\n\t\t\tdepCode\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport default {\r\n\tinstallPlugin,\r\n\tgetDepCode\r\n};\r\n","/* eslint-disable */\r\n\r\n// Version 1.0.0 - Initial release\r\n// Version 1.1.0 (2017-08-02) - Added cmdp function that returns promise instead of using callback\r\n// Version 1.2.0 (2017-08-02) - Added Ajax monkey patch to emulate XMLHttpRequest over ZeroFrame API\r\n// Version 1.3.0 (2018-12-05) - Added monkey patch for fetch API\r\n// Version 1.3.1 (2019-09-02) - Fix memory leak while handling responses\r\n\r\nconst CMD_INNER_READY = 'innerReady';\r\nconst CMD_RESPONSE = 'response';\r\nconst CMD_WRAPPER_READY = 'wrapperReady';\r\nconst CMD_PING = 'ping';\r\nconst CMD_PONG = 'pong';\r\nconst CMD_WRAPPER_OPENED_WEBSOCKET = 'wrapperOpenedWebsocket';\r\nconst CMD_WRAPPER_CLOSE_WEBSOCKET = 'wrapperClosedWebsocket';\r\n\r\nclass ZeroFrame {\r\n\tconstructor(url) {\r\n\t\tthis.url = url;\r\n\t\tthis.waiting_cb = {};\r\n\t\tthis.wrapper_nonce = document.location.href.replace(\r\n\t\t\t/.*wrapper_nonce=([A-Za-z0-9]+).*/,\r\n\t\t\t'$1'\r\n\t\t);\r\n\t\tthis.connect();\r\n\t\tthis.next_message_id = 1;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tinit() {\r\n\t\treturn this;\r\n\t}\r\n\r\n\tconnect() {\r\n\t\tthis.target = window.parent;\r\n\t\twindow.addEventListener('message', e => this.onMessage(e), false);\r\n\t\tthis.cmd(CMD_INNER_READY);\r\n\t}\r\n\r\n\tonMessage(e) {\r\n\t\tlet message = e.data;\r\n\t\tlet cmd = message.cmd;\r\n\t\tif (cmd === CMD_RESPONSE) {\r\n\t\t\tif (this.waiting_cb[message.to] !== undefined) {\r\n\t\t\t\tthis.waiting_cb[message.to](message.result);\r\n\t\t\t\tdelete this.waiting_cb[message.to];\r\n\t\t\t} else {\r\n\t\t\t\tthis.log('Websocket callback not found:', message);\r\n\t\t\t}\r\n\t\t} else if (cmd === CMD_WRAPPER_READY) {\r\n\t\t\tthis.cmd(CMD_INNER_READY);\r\n\t\t} else if (cmd === CMD_PING) {\r\n\t\t\tthis.response(message.id, CMD_PONG);\r\n\t\t} else if (cmd === CMD_WRAPPER_OPENED_WEBSOCKET) {\r\n\t\t\tthis.onOpenWebsocket();\r\n\t\t} else if (cmd === CMD_WRAPPER_CLOSE_WEBSOCKET) {\r\n\t\t\tthis.onCloseWebsocket();\r\n\t\t} else {\r\n\t\t\tthis.onRequest(cmd, message);\r\n\t\t}\r\n\t}\r\n\r\n\tonRequest(cmd, message) {\r\n\t\tthis.log('Unknown request', message);\r\n\t}\r\n\r\n\tresponse(to, result) {\r\n\t\tthis.send({\r\n\t\t\tcmd: CMD_RESPONSE,\r\n\t\t\tto: to,\r\n\t\t\tresult: result\r\n\t\t});\r\n\t}\r\n\r\n\tcmd(cmd, params = {}, cb = null) {\r\n\t\tthis.send(\r\n\t\t\t{\r\n\t\t\t\tcmd: cmd,\r\n\t\t\t\tparams: params\r\n\t\t\t},\r\n\t\t\tcb\r\n\t\t);\r\n\t}\r\n\r\n\tcmdp(cmd, params = {}) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.cmd(cmd, params, res => {\r\n\t\t\t\tif (res && res.error) {\r\n\t\t\t\t\treject(res.error);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolve(res);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tsend(message, cb = null) {\r\n\t\tmessage.wrapper_nonce = this.wrapper_nonce;\r\n\t\tmessage.id = this.next_message_id;\r\n\t\tthis.next_message_id++;\r\n\t\tthis.target.postMessage(message, '*');\r\n\t\tif (cb) {\r\n\t\t\tthis.waiting_cb[message.id] = cb;\r\n\t\t}\r\n\t}\r\n\r\n\tlog(...args) {\r\n\t\tconsole.log.apply(console, ['[ZeroFrame]'].concat(args));\r\n\t}\r\n\r\n\tonOpenWebsocket() {\r\n\t\tthis.log('Websocket open');\r\n\t}\r\n\r\n\tonCloseWebsocket() {\r\n\t\tthis.log('Websocket close');\r\n\t}\r\n\r\n\tmonkeyPatchAjax() {\r\n\t\tvar page = this;\r\n\t\tXMLHttpRequest.prototype.realOpen = XMLHttpRequest.prototype.open;\r\n\t\tthis.cmd('wrapperGetAjaxKey', [], res => {\r\n\t\t\tthis.ajax_key = res;\r\n\t\t});\r\n\t\tvar newOpen = function(method, url, async) {\r\n\t\t\turl += '?ajax_key=' + page.ajax_key;\r\n\t\t\treturn this.realOpen(method, url, async);\r\n\t\t};\r\n\t\tXMLHttpRequest.prototype.open = newOpen;\r\n\r\n\t\twindow.realFetch = window.fetch;\r\n\t\tvar newFetch = function(url) {\r\n\t\t\turl += '?ajax_key=' + page.ajax_key;\r\n\t\t\treturn window.realFetch(url);\r\n\t\t};\r\n\t\twindow.fetch = newFetch;\r\n\t}\r\n}\r\n\r\nexport default ZeroFrame;\r\n","const debug = process.env.NODE_ENV !== 'production';\r\n\r\nvar filesadded = [];\r\n\r\nfunction loadjscssfile(filename, filetype, cb) {\r\n\tlet fileref;\r\n\tif (filetype === 'js') {\r\n\t\tfileref = document.createElement('script');\r\n\t\tfileref.setAttribute('type', 'text/javascript');\r\n\t\tfileref.setAttribute('src', filename);\r\n\t} else if (filetype === 'css') {\r\n\t\tfileref = document.createElement('link');\r\n\t\tfileref.setAttribute('rel', 'stylesheet');\r\n\t\tfileref.setAttribute('type', 'text/css');\r\n\t\tfileref.setAttribute('href', filename);\r\n\t}\r\n\tif (typeof fileref !== 'undefined') {\r\n\t\tfileref.onload = function(e) {\r\n\t\t\ttypeof cb === 'function' && cb(undefined, filename, filetype);\r\n\t\t};\r\n\t\tfileref.onerror = function(e) {\r\n\t\t\ttypeof cb === 'function' &&\r\n\t\t\t\tcb(\r\n\t\t\t\t\tnew Error('couldn\"t load file', filename, filetype),\r\n\t\t\t\t\tfilename,\r\n\t\t\t\t\tfiletype\r\n\t\t\t\t);\r\n\t\t};\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(fileref);\r\n\t}\r\n}\r\n\r\nfunction checkloadjscssfile(filename, filetype, cb) {\r\n\tif (filesadded.indexOf(filename) === -1) {\r\n\t\tloadjscssfile(filename, filetype, cb);\r\n\t\tfilesadded.push(filename);\r\n\t} else {\r\n\t\ttypeof cb === 'function' && cb(null, filename, filetype);\r\n\t}\r\n}\r\n\r\nexport const installPlugin = (pluginName, initWorkerPromise, store) => {\r\n\tconst worker = new Worker(\r\n\t\t(debug ? '/public' : '') + '/plugins/' + pluginName + '/index.js'\r\n\t);\r\n\r\n\tinitWorkerPromise(pluginName, worker).then(promise => {});\r\n};\r\n\r\nexport const getDepCode = (\r\n\tpluginName,\r\n\tpromise,\r\n\tworker,\r\n\tdepPath,\r\n\tdepType,\r\n\tstore\r\n) => {\r\n\tconst depCode = depPath;\r\n\r\n\tif (depType === 'css') {\r\n\t\tcheckloadjscssfile(\r\n\t\t\t(debug ? '/public' : '') + '/plugins/' + pluginName + '/' + depPath,\r\n\t\t\tdepType\r\n\t\t);\r\n\t}\r\n\r\n\tworker.postMessage({\r\n\t\tdepPath,\r\n\t\tdepType,\r\n\t\tdepCode\r\n\t});\r\n};\r\n\r\nexport default {\r\n\tinstallPlugin,\r\n\tgetDepCode\r\n};\r\n","export default {\r\n\tloadDefaultProviders: ['zn'],\r\n\tloadDefaultPlugins: ['defaultPack']\r\n};\r\n","import moment from 'moment';\r\n\r\nconst state = {\r\n\tconversationProviders: {},\r\n\tcurConversation: {\r\n\t\tproviderName: null,\r\n\t\tconversationId: null\r\n\t}\r\n};\r\n\r\nconst getters = {\r\n\tstate_curConversation: ({ curConversation }) => {\r\n\t\treturn curConversation;\r\n\t},\r\n\r\n\tgetAllConversationProviders: state => {\r\n\t\tlet conversationProviders = [];\r\n\r\n\t\tfor (let providerI in state.conversationProviders) {\r\n\t\t\tlet provider = state.conversationProviders[providerI];\r\n\r\n\t\t\tconversationProviders.push(provider);\r\n\t\t}\r\n\r\n\t\treturn conversationProviders;\r\n\t},\r\n\tgetConversationProvider: state => providerName => {\r\n\t\tif (state.conversationProviders.hasOwnProperty(providerName)) {\r\n\t\t\treturn state.conversationProviders[providerName];\r\n\t\t} else {\r\n\t\t\tconsole.debug('no such provider with name', providerName);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetCurConversationProvider: (state, getters) => {\r\n\t\tlet providerName = state.curConversation.providerName;\r\n\t\tif (providerName) {\r\n\t\t\treturn getters.getConversationProvider(providerName);\r\n\t\t} else {\r\n\t\t\tconsole.debug('no current conversation');\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\r\n\tisAvailable: (state, getters) => providerName => {\r\n\t\treturn getters['provider_' + providerName + '/isAvailable'];\r\n\t},\r\n\tisReady: (state, getters) => providerName => {\r\n\t\treturn getters['provider_' + providerName + '/isReady'];\r\n\t},\r\n\r\n\toneProviderMode: (state, getters) => {\r\n\t\tconsole.debug(\r\n\t\t\t'checking for oneProviderMode',\r\n\t\t\tgetters.getAllConversationProviders.length\r\n\t\t);\r\n\t\treturn getters.getAllConversationProviders.length === 1;\r\n\t},\r\n\r\n\tgetAllConversations: (state, getters) => {\r\n\t\tlet conversations = [];\r\n\r\n\t\tfor (\r\n\t\t\tlet providerI = 0;\r\n\t\t\tproviderI < getters.getAllConversationProviders.length;\r\n\t\t\tproviderI++\r\n\t\t) {\r\n\t\t\tlet provider = getters.getAllConversationProviders[providerI];\r\n\r\n\t\t\tif (\r\n\t\t\t\t!getters.isAvailable(provider.name) ||\r\n\t\t\t\t!getters.isReady(provider.name)\r\n\t\t\t) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tfor (let conversationI in provider.conversations) {\r\n\t\t\t\tlet conversation = provider.conversations[conversationI];\r\n\r\n\t\t\t\tconversations.push(conversation);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconversations.sort((a, b) => {\r\n\t\t\tif (!a.lastMessage) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\tif (!b.lastMessage) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\r\n\t\t\treturn moment(a.lastMessage.dateAdded, 'x').isBefore(\r\n\t\t\t\tmoment(b.lastMessage.dateAdded, 'x')\r\n\t\t\t)\r\n\t\t\t\t? 1\r\n\t\t\t\t: -1;\r\n\t\t});\r\n\r\n\t\treturn conversations;\r\n\t},\r\n\tgetConversation: state => (providerName, conversationId) => {\r\n\t\tif (state.conversationProviders.hasOwnProperty(providerName)) {\r\n\t\t\tif (\r\n\t\t\t\tstate.conversationProviders[\r\n\t\t\t\t\tproviderName\r\n\t\t\t\t].conversations.hasOwnProperty(conversationId)\r\n\t\t\t) {\r\n\t\t\t\treturn state.conversationProviders[providerName].conversations[\r\n\t\t\t\t\tconversationId\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tgetCurConversation: (state, getters) => {\r\n\t\tlet providerName = state.curConversation.providerName;\r\n\t\tlet conversationId = state.curConversation.conversationId;\r\n\t\tif (providerName && conversationId) {\r\n\t\t\treturn getters.getConversation(providerName, conversationId);\r\n\t\t} else {\r\n\t\t\tconsole.debug('no current conversation');\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\r\n\tgetConversationMessages: (state, getters) => (\r\n\t\tproviderName,\r\n\t\tconversationId\r\n\t) => {\r\n\t\tlet conversation = getters.getConversation(\r\n\t\t\tproviderName,\r\n\t\t\tconversationId\r\n\t\t);\r\n\r\n\t\tlet messages = [];\r\n\r\n\t\tfor (let msgII = 0; msgII < conversation.messagekeys.length; msgII++) {\r\n\t\t\tlet msgI = conversation.messagekeys[msgII];\r\n\r\n\t\t\tlet msg = state.conversationProviders[providerName].messages[msgI];\r\n\r\n\t\t\tif (msg) {\r\n\t\t\t\tmessages.unshift(msg);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tmessages.sort((a, b) => {\r\n\t\t\treturn moment(a.dateAdded, 'x').isBefore(moment(b.dateAdded, 'x'))\r\n\t\t\t\t? 1\r\n\t\t\t\t: -1;\r\n\t\t});\r\n\r\n\t\treturn messages;\r\n\t},\r\n\tgetCurConversationMessages: (state, getters) => {\r\n\t\tlet providerName = state.curConversation.providerName;\r\n\t\tlet conversationId = state.curConversation.conversationId;\r\n\t\tif (providerName && conversationId) {\r\n\t\t\treturn getters.getConversationMessages(\r\n\t\t\t\tproviderName,\r\n\t\t\t\tconversationId\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tconsole.debug('no current conversation');\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\r\n\tgetConversationProviderUser: (state, getters) => providerName => {\r\n\t\tif (state.conversationProviders.hasOwnProperty(providerName)) {\r\n\t\t\treturn getters['provider_' + providerName + '/getCurUser'];\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tgetCurConversationUser: (state, getters) => {\r\n\t\tlet providerName = state.curConversation.providerName;\r\n\t\tif (providerName) {\r\n\t\t\treturn getters.getConversationProviderUser(providerName);\r\n\t\t} else {\r\n\t\t\tconsole.debug('no current conversation');\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\r\n\tvalidateMessage: (state, getters) => messageBody => {\r\n\t\tlet providerName = state.curConversation.providerName;\r\n\t\tlet conversationId = state.curConversation.conversationId;\r\n\t\tif (providerName) {\r\n\t\t\treturn getters['provider_' + providerName + '/validateMessage'](\r\n\t\t\t\tmessageBody,\r\n\t\t\t\tconversationId\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst mutations = {\r\n\tregisterConversationProvider(state, name) {\r\n\t\tstate.conversationProviders[name] = state['provider_' + name];\r\n\t},\r\n\r\n\tchangeConversation(state, [providerName, conversationId]) {\r\n\t\tstate.curConversation.providerName = providerName;\r\n\t\tstate.curConversation.conversationId = conversationId;\r\n\t}\r\n};\r\n\r\nconst actions = {\r\n\taddConversationProvider({ commit, dispatch }, providerName) {\r\n\t\tcommit('registerConversationProvider', providerName);\r\n\t\tdispatch('provider_' + providerName + '/init');\r\n\t},\r\n\r\n\tsendMessage({ dispatch }, [providerName, conversationId, messageBody]) {\r\n\t\tlet messageData = dispatch(\r\n\t\t\t'provider_' + providerName + '/sendMessage',\r\n\t\t\t[conversationId, messageBody]\r\n\t\t);\r\n\t\treturn messageData;\r\n\t},\r\n\r\n\tsendMessage2Cur({ state, dispatch }, messageBody) {\r\n\t\tlet providerName = state.curConversation.providerName;\r\n\t\tlet conversationId = state.curConversation.conversationId;\r\n\t\tmessageBody = encodeURIComponent(messageBody);\r\n\t\tif (providerName && conversationId) {\r\n\t\t\tlet messageData = dispatch('sendMessage', [\r\n\t\t\t\tproviderName,\r\n\t\t\t\tconversationId,\r\n\t\t\t\tmessageBody\r\n\t\t\t]);\r\n\t\t\treturn messageData;\r\n\t\t} else {\r\n\t\t\tconsole.debug('no current conversation');\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\r\n\tupdateTyping({ state, dispatch }, to = false) {\r\n\t\tlet providerName = state.curConversation.providerName;\r\n\t\tlet conversationId = state.curConversation.conversationId;\r\n\t\tif (providerName && conversationId) {\r\n\t\t\tdispatch('provider_' + providerName + '/updateTyping', [\r\n\t\t\t\tconversationId,\r\n\t\t\t\tto\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\tstate,\r\n\tgetters,\r\n\tmutations,\r\n\tactions\r\n};\r\n","var map = {\n\t\"./\": \"d547\",\n\t\"./index\": \"d547\",\n\t\"./index.js\": \"d547\",\n\t\"./zn\": \"3fa7\",\n\t\"./zn/\": \"3fa7\",\n\t\"./zn/ZeroFrame\": \"ad94\",\n\t\"./zn/ZeroFrame.js\": \"ad94\",\n\t\"./zn/index\": \"3fa7\",\n\t\"./zn/index.js\": \"3fa7\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"f387\";"],"sourceRoot":""}