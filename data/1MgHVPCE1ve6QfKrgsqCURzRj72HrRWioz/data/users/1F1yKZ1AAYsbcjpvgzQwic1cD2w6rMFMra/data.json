{"next_paste_id":1,"next_comment_id":0,"paste":[{"paste_id":0,"description":"","body":"<?\ninclude \"config.php\";\nheader('Access-Control-Allow-Origin: *');\nheader('Access-Control-Allow-Methods: POST');\nheader('Access-Control-Allow-Headers: *');\nif ($_SERVER['REQUEST_METHOD'] != \"POST\") {\n\tlogdie(\"Not allowed\");\n}\nif (isset($_SERVER['HTTP_REFERER']) and strpos($_SERVER['HTTP_REFERER'], $site) === false and strpos(strtolower($_SERVER['HTTP_REFERER']), $site_domain) === false) { \n\theader('HTTP/1.0 403 Forbidden');\n\tlogdie(\"Referer error.\");\n}\nlogtext(\"Request: Parsing parameters...\");\nlogtext($_SERVER);\nlogtext($_POST);\nlogtext(\"Adding work...\");\nlist($work_id, $work_task, $work_solution) = addWork();\n$back = array();\n$back[\"work_id\"] = $work_id;\n$back[\"work_task\"] = $work_task;\n$back = json_encode($back);\nlogtext(\"Sending work: $back\");\necho $back;\n?>","language":"application/x-httpd-php","encrypted":false,"added":1477259745}],"comment":[]}