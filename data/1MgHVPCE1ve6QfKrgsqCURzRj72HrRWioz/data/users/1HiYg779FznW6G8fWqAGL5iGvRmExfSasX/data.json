{"next_paste_id":1,"next_comment_id":0,"paste":[{"paste_id":0,"description":"<はUnlimited, >は無印","body":"166c166\n<   \n---\n> \n168c168\n<   \n---\n> \n175,176c175,176\n<   \n<   \n---\n> \n> \n189c189\n<   \n---\n> \n191,192c191,192\n<   \n<   \n---\n> \n> \n195c195\n<   \n---\n> \n308c308\n<   \n---\n> \n2094a2095,2097\n>       if (!size) {\n>         return \"0 KB\";\n>       }\n2523a2527\n>       return false;\n2575c2579\n<       this.handleNeedClick = bind(this.handleNeedClick, this);\n---\n>       this.handleSeedClick = bind(this.handleSeedClick, this);\n2605c2609\n<       } else if (this.row.stats.is_downloading) {\n---\n>       } else if (this.row.stats.is_downloading || this.row.stats.is_pinned) {\n2694c2698\n<     File.prototype.handleNeedClick = function() {\n---\n>     File.prototype.handleSeedClick = function() {\n2700a2705\n>       Page.cmd(\"optionalFilePin\", this.row.inner_path);\n2746,2748c2751\n<         key: this.row.id,\n<         enterAnimation: Animation.slideDown,\n<         exitAnimation: Animation.slideUp\n---\n>         key: this.row.id\n2770c2773\n<           (ref3 = this.status) === \"inactive\" || ref3 === \"partial\" ? h(\"a.add\", {\n---\n>           ((ref3 = this.status) === \"inactive\" || ref3 === \"partial\") && !this.row.stats.is_pinned ? h(\"a.add\", {\n2773c2776\n<             onclick: this.handleNeedClick\n---\n>             onclick: this.handleSeedClick\n2797c2800,2802\n<           }, this.row.file_name)) : h(\"a.detail.filename\", this.row.file_name)\n---\n>           }, this.row.file_name)) : h(\"a.detail.filename\", {\n>             title: this.row.file_name\n>           }, this.row.file_name)\n2810a2816\n> \n2824a2831,2834\n>       this.handleSearchBlur = bind(this.handleSearchBlur, this);\n>       this.handleSearchKeyup = bind(this.handleSearchKeyup, this);\n>       this.handleSearchInput = bind(this.handleSearchInput, this);\n>       this.handleSearchClick = bind(this.handleSearchClick, this);\n2842c2852\n<       var order;\n---\n>       var order, params, wheres;\n2850c2860,2869\n<       return Page.cmd(\"dbQuery\", \"SELECT * FROM file LEFT JOIN json USING (json_id) ORDER BY date_added DESC\", (function(_this) {\n---\n>       if (this.search) {\n>         wheres = \"WHERE file.title LIKE :search OR file.file_name LIKE :search\";\n>         params = {\n>           search: \"%\" + this.search + \"%\"\n>         };\n>       } else {\n>         wheres = \"\";\n>         params = \"\";\n>       }\n>       return Page.cmd(\"dbQuery\", [\"SELECT * FROM file LEFT JOIN json USING (json_id) \" + wheres + \" ORDER BY date_added DESC\", params], (function(_this) {\n2857c2876,2878\n<             orderby = \"time_added DESC\";\n---\n>             orderby = \"is_downloaded DESC, time_added DESC\";\n>           } else if (_this.type === \"Seeding\") {\n>             orderby = \"is_downloaded DESC, is_pinned DESC\";\n2860,2861c2881,2882\n<             filter: \"\",\n<             limit: 1000,\n---\n>             filter: \"bigfile\",\n>             limit: 2000,\n2901c2922\n<                   if (file.stats.bytes_downloaded > 0) {\n---\n>                   if (file.stats.bytes_downloaded > 0 || file.stats.is_pinned === 1) {\n2933a2955,2984\n>     List.prototype.handleSearchClick = function() {\n>       this.is_search_active = true;\n>       document.querySelector(\".input-search\").focus();\n>       return false;\n>     };\n> \n>     List.prototype.handleSearchInput = function(e) {\n>       this.search = e.currentTarget.value;\n>       this.update();\n>       return false;\n>     };\n> \n>     List.prototype.handleSearchKeyup = function(e) {\n>       if (e.keyCode === 27) {\n>         if (!this.search) {\n>           this.is_search_active = false;\n>         }\n>         e.target.value = \"\";\n>         this.search = \"\";\n>         this.update();\n>       }\n>       return false;\n>     };\n> \n>     List.prototype.handleSearchBlur = function(e) {\n>       if (!this.search) {\n>         return this.is_search_active = false;\n>       }\n>     };\n> \n2948c2999,3009\n<           h(\"a.list-type\", {\n---\n>           h(\"a.list-type.search\", {\n>             href: \"#Search\",\n>             onclick: this.handleSearchClick,\n>             classes: {\n>               active: this.is_search_active\n>             }\n>           }, h(\"div.icon.icon-magnifier\"), h(\"input.input-search\", {\n>             oninput: this.handleSearchInput,\n>             onkeyup: this.handleSearchKeyup,\n>             onblur: this.handleSearchBlur\n>           })), h(\"a.list-type\", {\n2998d3058\n< \n3093a3154,3166\n>       if (file.size > 200 * 1024 * 1024) {\n>         Page.cmd(\"wrapperNotification\", [\"info\", \"Maximum file size on this site during the testing period: 200MB\"]);\n>         return false;\n>       }\n>       if (file.size < 10 * 1024 * 1024) {\n>         Page.cmd(\"wrapperNotification\", [\"info\", \"Minimum file size: 10MB\"]);\n>         return false;\n>       }\n>       if ((ref = file.name.split(\".\").slice(-1)[0]) !== \"mp4\" && ref !== \"gz\" && ref !== \"zip\" && ref !== \"webm\") {\n>         Page.cmd(\"wrapperNotification\", [\"info\", \"Only mp4, webm, tar.gz, zip files allowed on this site\"]);\n>         debugger;\n>         return false;\n>       }\n","language":"text/plain","encrypted":false,"added":1606542868}],"comment":[]}