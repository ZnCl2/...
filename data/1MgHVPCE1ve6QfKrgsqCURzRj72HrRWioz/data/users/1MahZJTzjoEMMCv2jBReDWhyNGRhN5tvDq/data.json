{"next_paste_id":1,"next_comment_id":0,"paste":[{"paste_id":0,"description":"","body":"#!/bin/env python2.7                                                                                                                                                        \n####################################################\n##     Dump Wordpress export XML into JSON        ##\n##     By JZA        Date 23 May 2016             ##\n####################################################\n\nimport xml.etree.ElementTree as ET\nimport demjson\nimport os.path,time,datetime\n\n# import the xml file\ntree= ET.parse('wordpress.2016-03-18.post_type-post.start_date-2003-12-01.end_date-2016-02-29.001.xml')\n\n# initialize sqlite\n\n# check if Database file exist\nif os.path.isfile('zeroblog.json'):\n    JSONfile = open('zeroblog.json', \"wb\")\n    comment = JSONfile.write('// JSON file generated by the Python script \\n');\n    JSONfile.close()\nelse:\n    JSONfile = open('zeroblog.json', 'a')\n    comment = JSONfile.write('// JSON file generated by the Python script \\n');\n    JSONfile.close()\n\ntotal_post=[]\n#iterate throught the XML\nfor item in tree.findall('.//item'):\n    post_id = item.find('{http://wordpress.org/export/1.2/}post_id').text\n    title = item.find('title').text\n    date = item.find('pubDate').text\n    try:\n        pubDate=time.mktime(datetime.datetime.strptime(date, \"%a, %d %b %Y %H:%M:%S +0000\").timetuple())\n    except ValueError:\n        pass\n\n    content= item.find('{http://purl.org/rss/1.0/modules/content/}encoded').text\n    values = (post_id, title, content, pubDate)\n    JSONfile=open('zeroblog.json', 'a')\n    JSONfile.write('{\\n\\t \"post_id\" : \"'+values[0]+'\",\\n\\t \"title\" : \"'+values[1]+'\",\\n\\t \"date_published\" : \"'+str(values[3])+'\",\\n\\t \"body\" : \"'+values[2]+'\",\\n},\\n\\n')\n\nJSONfile.close()\n","language":"text/x-python","encrypted":false,"added":1459033652}],"comment":[]}