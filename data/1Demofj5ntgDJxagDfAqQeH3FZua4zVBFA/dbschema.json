{
	"db_name": "demoscene",
	"db_file": "data/demoscene.db",
	"version": 2,
	"maps": {
		"users/.+/content.json": {
			"to_json_table": [ "cert_auth_type", "cert_user_id" ],
			"file_name": "data.json"
		},
		"users/.+/data.json": {
			"to_table": [
				{"node": "post_like", "table": "post_like", "key_col": "unique_id", "val_col": "date_added"},
				"post_comment"
			],
			"to_json_table": []
		},
		"admin/data.json": {
			"to_table": [
				"news",
				"releases",
				"tools"
			],
			"to_json_table": []
		}
	},
	"tables": {
		"json": {
			"cols": [
				["json_id", "INTEGER PRIMARY KEY AUTOINCREMENT"],
				["directory", "TEXT"],
				["file_name", "TEXT"],
				["cert_auth_type", "TEXT"],
				["cert_user_id", "TEXT"]
			],
			"indexes": ["CREATE UNIQUE INDEX path ON json(directory, file_name)"],
			"schema_changed": 3
		},
		"news": {
			"cols": [
				["id", "INTEGER"],
				["content", "TEXT"],
				["dateAdded", "INTEGER"],
				["picture", "TEXT"],
				["json_id", "INTEGER REFERENCES json (json_id)"]
			],
			"indexes": ["CREATE UNIQUE INDEX news_key ON news(json_id, dateAdded)"],
			"schema_changed": 1
		},
		"releases": {
			"cols": [
				["id", "INTEGER"],
				["section", "TEXT"],
				["partition", "TEXT"],
				["name", "TEXT"],
				["by", "TEXT"],
				["bygroup", "TEXT"],
				["demoparty", "TEXT"],
				["place", "INTEGER"],
				["musicType", "TEXT"],
				["dateAdded", "INTEGER"],
				["platform", "TEXT"],
				["picture", "TEXT"],
				["view", "TEXT"],
				["downloadLink", "TEXT"],
				["json_id", "INTEGER REFERENCES json (json_id)"]
			],
			"indexes": ["CREATE UNIQUE INDEX releases_key ON releases(json_id, dateAdded)"],
			"schema_changed": 5
		},
		"tools": {
			"cols": [
				["id", "INTEGER"],
				["section", "TEXT"],
				["partition", "TEXT"],
				["name", "TEXT"],
				["by", "TEXT"],
				["bygroup", "TEXT"],
				["platform", "TEXT"],
				["description", "TEXT"],
				["picture", "TEXT"],
				["dateAdded", "INTEGER"],
				["downloadLink", "TEXT"],
				["json_id", "INTEGER REFERENCES json (json_id)"]
			],
			"indexes": ["CREATE UNIQUE INDEX tools_key ON tools(json_id, dateAdded)"],
			"schema_changed": 5
		},
		"post_like": {
			"cols": [
				["unique_id", "TEXT"],
				["date_added", "INTEGER"],
				["json_id", "INTEGER REFERENCES json (json_id)"]
			],
			"indexes": ["CREATE UNIQUE INDEX post_like_key ON post_like(json_id, date_added)", "CREATE INDEX post_like_unique_id ON post_like(unique_id)"],
			"schema_changed": 3
		},
		"post_comment": {
			"cols": [
				["id", "INTEGER"],
				["unique_id", "TEXT"],
				["content", "TEXT"],
				["date_added", "INTEGER"],
				["json_id", "INTEGER REFERENCES json (json_id)"]
			],
			"indexes": ["CREATE UNIQUE INDEX post_comment_key ON post_comment(json_id, id)", "CREATE INDEX post_comment_unique_id ON post_comment(unique_id)"],
			"schema_changed": 2
		}
	}
}