!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){e.exports=n(1001)},78:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},107:function(e,t,n){var i;(function(e,r){(function(a){"use strict";var u=0,o=Array.prototype.slice,s=[],l=function(e,t){return e.concat(t)},c=function(e,t,n){var i=e[t];return i||(i=e[t]={}),n&&!i[n]&&(i[n]=[]),n?i[n]:i},g=function(e,t,n){return c(s,t,n).map(d.bind(null,e)).reduce(l,c(e,t,n)).concat(c(e,t,"__global__"))},d=function(e,t){return c(e,t.id,t.fullname)},f=function(e,t){var n=e[t];if(n===a&&A.strict)throw new Error("Bottle was unable to resolve a service.  `"+t+"` is undefined.");return n},v=function(e){return e.split(".").reduce(f,this)},h=function(e,t,n,i){"function"==typeof n&&(i=n,n="__global__"),c(e,t,n).push(i)},p=function(e,t){var n=e.split(".");return e=n.pop(),y.call(n.reduce(q,this.container),e,t),this},y=function(e,t){Object.defineProperty(this,e,{configurable:!1,enumerable:!0,value:t,writable:!1})},w=[],b=function(e,t){return h(w,this.id,e,t),this},m=[],_=function(e){return h(m,this.id,e),this},L=function(e){return(e||[]).map(v,this.container)},M=function(e,t){return T.call(this,e,function(){this.$get=t})},P=[],C=function(e,t,n,i){var r=g(P,e,t),a={configurable:!0,enumerable:!0};return r.length?a.get=function(){var e=0,t=function(i){if(i)throw i;r[e]&&r[e++](n,t)};return t(),n}:(a.value=n,a.writable=!0),Object.defineProperty(i,t,a),i[t]},S=function(e,t){return h(P,this.id,e,t),this},D={},E=function(e){var t;return e?(t=D[e],t||(D[e]=t=new $,t.constant("BOTTLE_NAME",e)),t):new $},k=[],O=[],j=function(e,t){return t(e)},T=function(e,t){var n,i,r,a;return i=c(O,this.id),n=e.split("."),i[e]&&1===n.length&&!this.container[e+"Provider"]?console.error(e+" provider already instantiated."):(i[e]=!0,r=n.shift(),a=n.length?R:W,a.call(this,r,t,e,n))},W=function(e,t){var n,i,r,u;return u=this.id,r=this.container,n=e+"Provider",i=Object.create(null),i[n]={configurable:!0,enumerable:!0,get:function(){var e=new t;return delete r[n],r[n]=e,e}},i[e]={configurable:!0,enumerable:!0,get:function(){var t,i=r[n];return i&&(t=g(w,u,e).reduce(j,i.$get(r)),delete r[n],delete r[e]),t===a?t:C(u,e,t,r)}},Object.defineProperties(r,i),this},R=function(e,t,n,i){var r,a,u,o;return o=this.id,a=c(k,o),r=a[e],r||(this.container[e]=(r=a[e]=$.pop()).container),u=i.join("."),r.provider(u,t),h(s,r.id,u,{fullname:n,id:o}),this},F=function(e){var t=e.$value===a?e:e.$value;return this[e.$type||"service"].apply(this,[e.$name,t].concat(e.$inject||[]))},x=function(e){return c(m,this.id,"__global__").forEach(function(t){t(e)}),this},V=function(e,t){var n=arguments.length>2?o.call(arguments,2):null,i=this;return M.call(this,e,function(){return n&&(n=n.map(v,i.container),n.unshift(t),t=t.bind.apply(t,n)),new t})},I=function(e,t){var n;return n=e.split("."),e=n.pop(),B.call(n.reduce(q,this.container),e,t),this},q=function(e,t){var n=e[t];return n||(n={},B.call(e,t,n)),n},B=function(e,t){Object.defineProperty(this,e,{configurable:!0,enumerable:!0,value:t,writable:!0})},$=function K(e){return this instanceof K?(this.id=u++,void(this.container={$register:F.bind(this)})):K.pop(e)};$.prototype={constant:p,decorator:b,defer:_,digest:L,factory:M,middleware:S,provider:T,register:F,resolve:x,service:V,value:I},$.pop=E;var A=$.config={strict:!1},N={"function":!0,object:!0};!function(u){var o=N[typeof t]&&t&&!t.nodeType&&t,s=N[typeof e]&&e&&!e.nodeType&&e,l=(s&&s.exports===o&&o,N[typeof r]&&r);!l||l.global!==l&&l.window!==l||(u=l),u.Bottle=$,i=function(){return $}.call(t,n,t,e),!(i!==a&&(e.exports=i))}(N[typeof window]&&window||this)}).call(this)}).call(t,n(78)(e),function(){return this}())},590:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=t.siteLanguages,r=void 0===i?[]:i,a=t.siteDefaultLanguage,u=void 0===a?!1:a,o=t.siteCurrentLanguage,s=void 0===o?{}:o,l=t.siteLanguageMenuSettings,c=void 0===l?{}:l,g=t.languageDataProvider,d=void 0===g?{}:g,f=t.sitePreview,v=void 0===f?!1:f;n(this,e),this.siteLanguages=r,this.siteDefaultLanguage=u,this.siteCurrentLanguage=s,this.siteLanguageMenuSettings=c,this.languageDataProvider=d,this.sitePreview=v,this._listenToEvents()}return i(e,[{key:"display",value:function(){this.siteDefaultLanguage&&0!==this.siteLanguages.length&&this._renderMenu()}},{key:"reRender",value:function(){var e=document.querySelector(".js-language-selector");e&&e.parentNode.removeChild(e),this.siteDefaultLanguage!==!1&&0!==this.siteLanguages.length&&(this.sitePreview&&(this.siteLanguageMenuSettings=this.languageDataProvider.get("siteLanguageMenuSettings")),this._renderMenu())}},{key:"_listenToEvents",value:function(){var e=this;this.sitePreview&&window.addEventListener("message",function(t){"rerender:languagemenu"===t.data&&e.reRender()},!1)}},{key:"_renderMenu",value:function(){var e=document.querySelector("body"),t=this._createMenuElement();e.insertBefore(t,e.firstChild)}},{key:"_createMenuElement",value:function(){var e=this,t=document.createElement("div"),n=this._getMenuElementClasses(),i=this._createMenuInnerElement(),r=this._createLanguageList(),a=this.siteLanguages.slice(0);return a.unshift(this.siteDefaultLanguage),n.forEach(function(e){return t.classList.add(e)}),t.append(i),i.append(r),a.forEach(function(t){var n=document.createElement("li"),i=e._createLanguageLinkElement(t),a=e._getItemClasses(t);a.forEach(function(e){return n.classList.add(e)}),n.append(i),r.append(n)}),t}},{key:"_getItemClasses",value:function(e){var t=["language-selector__item"];return e.hasOwnProperty("id")||t.push("language-selector__item---default"),this.siteCurrentLanguage.language===e.language&&t.push("language-selector__item--current"),t}},{key:"_createLanguageLinkElement",value:function(e){var t=document.createElement("a"),n=document.createElement("span"),i=document.createElement("span"),r=document.createElement("span");return n.classList.add("language-selector__icon"),n.classList.add("language-selector__icon--"+e.language),i.classList.add("language-selector__name"),i.textContent=e.name,r.classList.add("language-selector__localised-name"),r.textContent="("+e.localisedName+")",t.classList.add("language-selector__link"),t.append(n),t.append(i),t.append(document.createTextNode("Â ")),t.append(r),this.sitePreview&&(t.addEventListener("click",function(e){return e.preventDefault()}),t.addEventListener("hover",function(e){return e.preventDefault()}),t.classList.add("language-selector__link--site-preview")),e.hasOwnProperty("id")?t.setAttribute("href","/"+e.language+"/home"):t.setAttribute("href","/"),t}},{key:"_createLanguageList",value:function(){var e=document.createElement("ul");return e.classList.add("language-selector__list"),e}},{key:"_createMenuInnerElement",value:function(){var e=document.createElement("div");return e.classList.add("language-selector__inner"),e}},{key:"_getMenuElementClasses",value:function(){var e=["language-selector","js-language-selector"],t="language-selector--light",n="language-selector--horizontal",i="language-selector--type-flag-text";return this.sitePreview&&e.push("language-selector--site-preview"),this.siteLanguageMenuSettings?(this.siteLanguageMenuSettings.hasOwnProperty("menuShade")&&this.siteLanguageMenuSettings.menuShade&&(t="language-selector--"+this.siteLanguageMenuSettings.menuShade),this.siteLanguageMenuSettings.hasOwnProperty("menuStyle")&&this.siteLanguageMenuSettings.menuStyle&&(n="language-selector--"+this.siteLanguageMenuSettings.menuStyle),this.siteLanguageMenuSettings.hasOwnProperty("menuType")&&this.siteLanguageMenuSettings.menuType&&(i="language-selector--"+this.siteLanguageMenuSettings.menuType),e.concat([t,n,i])):e}}]),e}();t["default"]=r},591:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=t.LanguageMenuRenderer,r=void 0===i?{}:i,a=t.languageDataProvider,u=void 0===a?{}:a,o=t.sitePreview,s=void 0===o?!1:o;n(this,e),this.LanguageMenuRenderer=r,this.languageDataProvider=u,this.sitePreview=s}return i(e,[{key:"build",value:function(){var e=this.languageDataProvider.get("siteLanguages"),t=this.languageDataProvider.get("siteDefaultLanguage"),n=this.languageDataProvider.get("siteCurrentLanguage"),i=this.languageDataProvider.get("siteLanguageMenuSettings"),r=this.languageDataProvider;return new this.LanguageMenuRenderer({sitePreview:this.sitePreview,siteLanguages:e,siteDefaultLanguage:t,siteCurrentLanguage:n,siteLanguageMenuSettings:i,languageDataProvider:r})}}]),e}();t["default"]=r},1001:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(1005),a=i(r),u=n(1004),o=i(u);window.Site={load:function(){this._initialiseWidgets(),this._initialiseLanguageSelector()},_initialiseWidgets:function(){var e=(0,o["default"])();e.forEach(function(e){a["default"].WidgetFactory.build(e)})},_initialiseLanguageSelector:function(){var e=a["default"].languageMenuRendererFactory.build();e.display()}}},1002:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?window:arguments[0];n(this,e),this.mainWindow=t,this._properties={siteLanguages:this.mainWindow.Server.siteLanguages,siteCurrentLanguage:this.mainWindow.Server.siteCurrentLanguage,siteDefaultLanguage:this.mainWindow.Server.siteDefaultLanguage,siteLanguageMenuSettings:this.mainWindow.Server.siteLanguageMenuSettings}}return i(e,[{key:"get",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this._properties.hasOwnProperty(e)?this._properties[e]:t}}]),e}();t["default"]=r},1003:function(e,t){"use strict";function n(){return window.BaseKit.Widget}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},1004:function(e,t){"use strict";function n(){return window.Server.widgetsOnPage}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},1005:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(107),a=i(r),u=n(1006),o=i(u),s=n(1007),l=i(s),c=n(1008),g=i(c),d=n(1009),f=i(d),v=n(1003),h=i(v),p=n(591),y=i(p),w=n(1002),b=i(w),m=n(590),_=i(m),L=new a["default"];L.factory("WidgetClassDefinitionRetriever",function(){return new o["default"]({widgetDefinitionsProvider:h["default"]})}),L.factory("WidgetViewFactory",function(e){return new f["default"]({widgetClassDefinitionRetriever:e.WidgetClassDefinitionRetriever,StdViewClass:Backbone.View})}),L.factory("WidgetModelFactory",function(e){return new g["default"]({widgetClassDefinitionRetriever:e.WidgetClassDefinitionRetriever,StdModelClass:Backbone.View})}),L.factory("WidgetFactory",function(e){return new l["default"]({widgetViewFactory:e.WidgetViewFactory,widgetModelFactory:e.WidgetModelFactory})}),L.factory("siteLanguageDataProvider",function(){return new b["default"](window)}),L.factory("languageMenuRendererFactory",function(e){return new y["default"]({LanguageMenuRenderer:_["default"],languageDataProvider:e.siteLanguageDataProvider})}),t["default"]=L.container},1006:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return("basekit."+e).toCamelCase().replace(/^basekitWidget/i,"")}function r(e){var t="ColumnsColumn"===e?"ResponsivecolumnsColumn":e;return t}function a(e){return r(i(e))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){n(this,e),this.widgetDefinitionsProvider=t.widgetDefinitionsProvider}return u(e,[{key:"getDefinition",value:function(e){var t=this.widgetDefinitionsProvider(),n=""+a(e.widgetType)+e.type,i="function"==typeof t[n]?t[n]:e.StdClass;return i}}]),e}();t["default"]=o},1007:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){n(this,e),this.widgetViewFactory=t.widgetViewFactory,this.widgetModelFactory=t.widgetModelFactory}return i(e,[{key:"build",value:function(e){var t=this.widgetModelFactory.build(e);this.widgetViewFactory.build(e,t)}}]),e}();t["default"]=r},1008:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){n(this,e),this.widgetClassDefinitionRetriever=t.widgetClassDefinitionRetriever,this.StdModelClass=t.StdModelClass}return r(e,[{key:"build",value:function(e){var t=this.widgetClassDefinitionRetriever.getDefinition({widgetType:e.type,type:"Model",StdClass:this.StdModelClass});return new t(i({},e.data,{uniqueId:e.uniqueId}))}}]),e}();t["default"]=a},1009:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return{fixed:e.fixed,name:e.name,className:e.className,uniqueId:e.uniqueId,uniqueHTMLId:e.uniqueHTMLId,debugMode:e.debugMode||void 0,type:e.type,ref:e.ref}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){n(this,e),this.widgetClassDefinitionRetriever=t.widgetClassDefinitionRetriever,this.StdViewClass=t.StdViewClass}return r(e,[{key:"build",value:function(e,t){var n=this.widgetClassDefinitionRetriever.getDefinition({widgetType:e.type,type:"View",StdClass:this.StdViewClass}),r=this._setSelectorAccordingToWidgetType(e),a=new n({el:r,properties:i(e),model:t,profile:BaseKit.Globals.profile,pages:BaseKit.Globals.pages,assets:BaseKit.Globals.imageAssets});return a}},{key:"_setSelectorAccordingToWidgetType",value:function(e){return e.isTemplateWidget?"#"+e.uniqueHTMLId:'[data-uniqueid="'+e.uniqueId+'"]'}}]),e}();t["default"]=a}});